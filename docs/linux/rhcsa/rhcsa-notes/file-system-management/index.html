<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.145.0">
    <meta name="generator" content="Relearn 7.1.1">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="File System Management File System Administration Commands Some are limited to their operations on the Extended, XFS, or VFAT file system type. Others are general and applicable to all file system types. Extended File System Management Commands e2label
Modifies the label of a file system tune2fs
Tunes or displays file system attributes XFS Management Commands xfs_admin Tunes file system attributes xfs_growfs Extends the size of a file system xfs_info Exhibits information about a file system General File System Commands blkid">
    <meta name="author" content="David Thomas">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="File System Management File System Administration Commands Some are limited to their operations on the Extended, XFS, or VFAT file system type. Others are general and applicable to all file system types. Extended File System Management Commands e2label
Modifies the label of a file system tune2fs
Tunes or displays file system attributes XFS Management Commands xfs_admin Tunes file system attributes xfs_growfs Extends the size of a file system xfs_info Exhibits information about a file system General File System Commands blkid">
    <meta property="og:url" content="http://localhost:1313/linux/rhcsa/rhcsa-notes/file-system-management/">
    <meta property="og:site_name" content="Linux Reader">
    <meta property="og:description" content="File System Management File System Administration Commands Some are limited to their operations on the Extended, XFS, or VFAT file system type. Others are general and applicable to all file system types. Extended File System Management Commands e2label
Modifies the label of a file system tune2fs
Tunes or displays file system attributes XFS Management Commands xfs_admin Tunes file system attributes xfs_growfs Extends the size of a file system xfs_info Exhibits information about a file system General File System Commands blkid">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Linux">
    <meta itemprop="description" content="File System Management File System Administration Commands Some are limited to their operations on the Extended, XFS, or VFAT file system type. Others are general and applicable to all file system types. Extended File System Management Commands e2label
Modifies the label of a file system tune2fs
Tunes or displays file system attributes XFS Management Commands xfs_admin Tunes file system attributes xfs_growfs Extends the size of a file system xfs_info Exhibits information about a file system General File System Commands blkid">
    <meta itemprop="wordCount" content="4658">
    <title></title>
    <link href="/linux/rhcsa/rhcsa-notes/file-system-management/index.xml" rel="alternate" type="application/rss+xml" title="">
    <link href="/linux/rhcsa/rhcsa-notes/file-system-management/index.print.html" rel="alternate" type="text/html" title="">
    <link href="/images/logo.svg?1741647087" rel="icon" type="image/svg+xml">
    <link href="/css/fontawesome-all.min.css?1741647087" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1741647087" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1741647087" rel="stylesheet">
    <link href="/css/auto-complete.css?1741647087" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1741647087" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1741647087" rel="stylesheet">
    <link href="/css/fonts.css?1741647087" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1741647087" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1741647087" rel="stylesheet">
    <link href="/css/theme-amoled.css?1741647087" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-relearn-dark.css?1741647087" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/print.css?1741647087" rel="stylesheet" media="print">
    <script src="/js/variant.js?1741647087"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      // variant stuff
      window.variants && variants.init( [ 'amoled' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script><style>
:root {
    --MENU-WIDTH-S: 14.375rem;
    --MENU-WIDTH-M: 14.375rem;
    --MENU-WIDTH-L: 18.75rem;
    --MAIN-WIDTH-MAX: 80rem;
    font-size: 1.2rem;
}
</style>

  </head>
  <body class="mobile-support html disableInlineCopyToClipboard" data-url="/linux/rhcsa/rhcsa-notes/file-system-management/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/linux/rhcsa" title="RHCSA (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
        <li><a href="#mounting-and-unmounting-file-systems">Mounting and Unmounting File Systems</a></li>
        <li><a href="#determining-the-uuid-of-a-file-system">Determining the UUID of a File System</a></li>
        <li><a href="#labeling-a-file-system">Labeling a File System</a></li>
        <li><a href="#automatically-mounting-a-file-system-at-reboots">Automatically Mounting a File System at Reboots</a></li>
      </ul>
    </li>
    <li><a href="#lab-create-and-mount-ext4-vfat-and-xfs-file-systems-in-partitions-server2">Lab: Create and Mount Ext4, VFAT, and XFS File Systems in Partitions (server2)</a></li>
    <li><a href="#lab-create-and-mount-ext4-and-xfs-file-systems-in-lvm-logical-volumes-server2">Lab: Create and Mount Ext4 and XFS File Systems in LVM Logical Volumes (server2)</a>
      <ul>
        <li><a href="#lab-resize-ext4-and-xfs-file-systems-in-lvm-logical-volumes-server-2">Lab: Resize Ext4 and XFS File Systems in LVM Logical Volumes (server 2)</a></li>
      </ul>
    </li>
    <li><a href="#lab-create-and-mount-xfs-file-system-in-lvm-vdo-volume">Lab: Create and Mount XFS File System in LVM VDO Volume</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/linux/rhcsa/rhcsa-notes/file-system-management?format=print" title="Print whole chapter (CTRL&#43;ALT&#43;p)"><i class="fa-fw fas fa-print"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/linux/rhcsa/rhcsa-exam-environment" title="RHCSA Exam Environment Guide (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>







          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable linux" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id=""></h1>

<h1 id="file-system-management">File System Management</h1>
<h4 id="file-system-administration-commands">File System Administration Commands</h4>
<ul>
<li>Some are limited to their operations on the Extended, XFS, or VFAT file system type.</li>
<li>Others are general and applicable to all file system types.</li>
</ul>
<h4 id="extended-file-system-management-commands">Extended File System Management Commands</h4>
<p><code>e2label</code></p>
<ul>
<li>Modifies the label of a file system</li>
</ul>
<p><code>tune2fs</code></p>
<ul>
<li>Tunes or displays file system attributes</li>
</ul>
<h4 id="xfs-management-commands">XFS Management Commands</h4>
<p><code>xfs_admin  </code></p>
<ul>
<li>Tunes file system attributes</li>
</ul>
<p><code>xfs_growfs </code></p>
<ul>
<li>Extends the size of a file system</li>
</ul>
<p><code>xfs_info  </code></p>
<ul>
<li>Exhibits information about a file system</li>
</ul>
<h4 id="general-file-system-commands">General File System Commands</h4>
<p><code>blkid  </code></p>
<ul>
<li>Displays block device attributes including their UUIDs and labels</li>
</ul>
<p><code>df </code></p>
<ul>
<li>Reports file system utilization</li>
</ul>
<p><code>du   </code></p>
<ul>
<li>Calculates disk usage of directories and file systems</li>
</ul>
<p><code>fsadm   </code></p>
<ul>
<li>Resizes a file system. This command is automatically invoked when the <code>lvresize</code> command is run with the <code>-r</code> switch.</li>
</ul>
<p><code>lsblk  </code></p>
<ul>
<li>Lists block devices and file systems and their attributes including their UUIDs and labels</li>
</ul>
<p><code>mkfs  </code></p>
<ul>
<li>Creates a file system. Use the <code>-t</code> option and specify ext3, ext4, vfat, or xfs file system type.</li>
</ul>
<p><code>mount    </code></p>
<ul>
<li>Mount a file system for user access.</li>
<li>Display currently mounted file systems.</li>
</ul>
<p><code>umount   </code></p>
<ul>
<li>Unmount a file system.</li>
</ul>
<h3 id="mounting-and-unmounting-file-systems">Mounting and Unmounting File Systems</h3>
<ul>
<li>File system must be connected to the directory structure at a desired attachment point, (mount point)</li>
<li>A mount point in essence is any empty directory that is created and used for this purpose.</li>
</ul>
<p>Use the mount command to view information about xfs mounted file systems:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount -t xfs</span>
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-root on / <span style="color:#ff5c57">type</span> xfs <span style="color:#ff6ac1">(</span>rw,relatime,seclabel,attr2,inode64,logbufs<span style="color:#ff6ac1">=</span>8,logbsize<span style="color:#ff6ac1">=</span>32k,noquota<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>/dev/sda1 on /boot <span style="color:#ff5c57">type</span> xfs <span style="color:#ff6ac1">(</span>rw,relatime,seclabel,attr2,inode64,logbufs<span style="color:#ff6ac1">=</span>8,logbsize<span style="color:#ff6ac1">=</span>32k,noquota<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<h4 id="mount-command">Mount command</h4>
<ul>
<li><code>-t</code> option
<ul>
<li>type.</li>
</ul>
</li>
<li>Mount a file system to a mount point.</li>
<li>Performed with the root user privileges.</li>
<li>Requires the absolute pathnames of the file system block device and the mount point name.</li>
<li>Accepts the UUID or label of the file system in lieu of the block device name.</li>
<li>Mount all or a specific type of file system.</li>
<li>Upon successful mount, the kernel places an entry for the file system in the <em>/proc/self/mounts</em> file.</li>
<li>A mount point should be empty when an attempt is made to mount a file system on it, otherwise the content of the mount point will hide.</li>
<li>The mount point must not be in use or the mount attempt will fail.</li>
</ul>
<p><strong>auto (noauto)</strong></p>
<ul>
<li>Mounts (does not mount) the file system when the <code>-a</code> option is specified</li>
</ul>
<p><strong>defaults</strong></p>
<ul>
<li>Mounts a file system with all the default values (async, auto, rw, etc.)</li>
</ul>
<p><strong>_netdev</strong></p>
<ul>
<li>Used for a file system that requires network connectivity in place before it can be mounted. NFS is an example.</li>
</ul>
<p><strong>remount</strong></p>
<ul>
<li>Remounts an already mounted file system to enable or disable an option</li>
</ul>
<p><strong>ro (rw)</strong></p>
<ul>
<li>Mounts a file system read-only read/write)</li>
</ul>
<h4 id="umount-command">umount Command</h4>
<ul>
<li>Detach a file system from the directory hierarchy and make it inaccessible to users and applications.</li>
<li>Expects the absolute pathname to the block device containing the file system or its mount point name in order to detach it.</li>
<li>Unmount all or a specific type of file system.</li>
<li>Kernel removes the corresponding file system entry from the <em>/proc/self/mounts</em> file after it has been successfully disconnected.</li>
</ul>
<h3 id="determining-the-uuid-of-a-file-system">Determining the UUID of a File System</h3>
<ul>
<li>
<p>Extended and XFS file systems have a 128-bit (32 hexadecimal characters) UUID (Universally Unique IDentifier) assigned to it at the time of its creation.</p>
</li>
<li>
<p>UUIDs assigned to vfat file systems are 32-bit (8 hexadecimal characters) in length.</p>
</li>
<li>
<p>Assigning a UUID makes the file system unique among many other file systems that potentially exist on the system.</p>
</li>
<li>
<p>Persistent across system reboots.</p>
</li>
<li>
<p>Used by default in RHEL 9 in the <em>/etc/fstab</em> file for any file system that is created by the system in a standard partition.</p>
</li>
<li>
<p>RHEL attempts to mount all file systems listed in the <em>/etc/fstab</em> file at reboots.</p>
</li>
<li>
<p>Each file system has an associated device file and UUID, but may or may not have a corresponding label.</p>
</li>
<li>
<p>The system checks for the presence of each file system&rsquo;s device file, UUID, or label, and then attempts to mount it.</p>
</li>
</ul>
<p>Determine the UUID of /boot</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk | grep boot</span>
</span></span><span style="display:flex;"><span>├─sda1          8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part /boot</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo xfs_admin -u /dev/sda1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">UUID</span> <span style="color:#ff6ac1">=</span> 630568e1-608f-4603-9b97-e27f82c7d4b4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo blkid /dev/sda1</span>
</span></span><span style="display:flex;"><span>/dev/sda1: <span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;630568e1-608f-4603-9b97-e27f82c7d4b4&#34;</span> <span style="color:#ff5c57">TYPE</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;xfs&#34;</span> <span style="color:#ff5c57">PARTUUID</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;7dcb43e4-01&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lsblk -f /dev/sda1</span>
</span></span><span style="display:flex;"><span>NAME FSTYPE FSVER LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda1 xfs                630568e1-608f-4603-9b97-e27f82c7d4b4  616.1M    36% /boot</span></span></code></pre></div>
<p>For extended file systems, you can use the <code>tune2fs</code>, <code>blkid</code>, or <code>lsblk</code> commands to determine the UUID.</p>
<p>A UUID is also assigned to a file system that is created in a VDO or LVM volume; however, it need not be used in the fstab file, as the device
files associated with the logical volumes are always unique and persistent.</p>
<h3 id="labeling-a-file-system">Labeling a File System</h3>
<ul>
<li>A unique label may be used instead of a UUID to keep the file system association with its device file exclusive and persistent across system reboots.</li>
<li>A label is limited to a maximum of 12 characters on the XFS file system</li>
<li>16 characters on the Extended file system.</li>
<li>By default, no labels are assigned to a file system at the time of its creation.</li>
</ul>
<p>The <em>/boot</em> file system is located in the <em>/dev/sda1</em> partition and its type is XFS. You can use the <code>xfs_admin</code> or the <code>lsblk</code> command as follows to
determine its label:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo xfs_admin -l /dev/sda1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">label</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lsblk -f /dev/sda1</span>
</span></span><span style="display:flex;"><span>NAME FSTYPE FSVER LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda1 xfs                630568e1-608f-4603-9b97-e27f82c7d4b4  616.1M    36% /boot</span></span></code></pre></div>
<ul>
<li>Not needed on a file system if you intend to use its UUID or if it is created in a logical volume</li>
<li>You can still apply one using the <code>xfs_admin</code> command with the <code>-L</code> option.</li>
<li>Labeling an XFS file system requires that the target file system be unmounted.</li>
</ul>
<p>unmount /boot, set the label &ldquo;bootfs&rdquo; on its device file, and remount it:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo umount /boot</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo xfs_admin -L bootfs /dev/sda1</span>
</span></span><span style="display:flex;"><span>writing all SBs
</span></span><span style="display:flex;"><span>new <span style="color:#ff5c57">label</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;bootfs&#34;</span></span></span></code></pre></div>
<p>Confirm the new label by executing <code>sudo xfs_admin -l /dev/sda1</code> or <code>sudo lsblk -f /dev/sda1</code>.</p>
<p>For extended file systems, you can use the <code>e2label</code> command to apply a label and the <code>tune2fs</code>, <code>blkid</code>, and <code>lsblk</code> commands to view and verify.</p>
<p>Now you can replace the <code>UUID=\&quot;22d05484-6ae1-4ef8-a37d-abab674a5e35</code>&quot; for /boot in the fstab file with <code>LABEL=bootfs</code>, and unmount and remount /boot as demonstrated above for confirmation.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount /boot</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.</span></span></code></pre></div>
<p>A label may also be applied to a file system created in a logical volume; however, it is not recommended for use in the fstab file, as the
device files for logical volumes are always unique and remain persistent across system reboots.</p>
<h3 id="automatically-mounting-a-file-system-at-reboots">Automatically Mounting a File System at Reboots</h3>
<h4 id="etcfstab"><em>/etc/fstab</em></h4>
<ul>
<li>File systems defined in the <em>/etc/fstab</em> file are mounted automatically at reboots.</li>
<li>Must contain proper and complete information for each listed file system.</li>
<li>An incomplete or inaccurate entry might leave the system in an undesirable or unbootable state.</li>
<li>Only need to specify one of the four attributes
<ul>
<li>Block device name</li>
<li>UUID</li>
<li>label</li>
<li>mount point</li>
</ul>
</li>
<li>The <code>mount</code> command obtains the rest of the information from this file.</li>
<li>Only need to specify one of these attributes with the <code>umount</code> command to detach it from the directory hierarchy.</li>
<li>Contains entries for file systems that are created at the time of installation.</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /etc/fstab</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># /etc/fstab</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Created by anaconda on Sun Feb 25 12:11:47 2024</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Accessible filesystems, by reference, are maintained under &#39;/dev/disk/&#39;.</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># After editing this file, run &#39;systemctl daemon-reload&#39; to update systemd</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># units generated from this file.</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#</span>
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-root   /                       xfs     defaults        <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">LABEL</span><span style="color:#ff6ac1">=</span>bootfs /boot                   xfs     defaults        <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-swap   none                    swap    defaults        <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>EXAM TIP: Any missing or invalid entry in this file may render the system unbootable. You will have to boot the system in emergency mode to fix this file. Ensure that you understand each field in the file for both file system and swap entries.</p>
<p>The format of this file is such that each row is broken out into six columns to identify the required attributes for each file system to be successfully mounted. Here is what the columns contain:</p>
<p>Column 1:</p>
<ul>
<li>physical or virtual device path where the file system is resident, or its associated UUID or label.</li>
<li>can be entries for network file systems here as well.</li>
</ul>
<p>Column 2:</p>
<ul>
<li>Identifies the mount point for the file system.</li>
<li>swap partitions, use either &ldquo;none&rdquo; or &ldquo;swap&rdquo;.</li>
</ul>
<p>Column 3:</p>
<ul>
<li>Type of file system such as Ext3, Ext4, XFS, VFAT, or ISO9660.</li>
<li>For swap, the type &ldquo;swap&rdquo; is used.</li>
<li>may use &ldquo;auto&rdquo; instead to leave it up to the mount command to determine the type of the file system.</li>
</ul>
<p>Column 4:</p>
<ul>
<li>Identifies one or more comma-separated options to be used when mounting the file system.</li>
<li>Consult the manual pages of the <code>mount</code> command or the fstab file for additional options and details.</li>
</ul>
<p>Column 5:</p>
<ul>
<li>Used by the dump utility to ascertain the file systems that need to be dumped.</li>
<li>Value of 0 (or the absence of this column) disables this check.</li>
<li>This field is applicable only on Extended file systems;</li>
<li>XFS does not use it.</li>
</ul>
<p>Column 6:</p>
<ul>
<li>
<p>Sequence number in which to run the <code>e2fsck</code> (file system check and repair utility for Extended file system types) utility on the file system at system boot.</p>
</li>
<li>
<p>By default, 0 is used for memory-based, remote, and removable file systems, 1 for /, and 2 for /boot and other physical file systems. 0 can also be used for /, /boot, and other physical file systems you don&rsquo;t want to be checked or repaired.</p>
</li>
<li>
<p>Applicable only on Extended file systems;</p>
</li>
<li>
<p>XFS does not use it.</p>
</li>
<li>
<p>0 in columns 5 and 6 for XFS, virtual, remote, and removable file system types has no meaning. You do not need to add them for these file system types.</p>
</li>
</ul>
<h2 id="lab-create-and-mount-ext4-vfat-and-xfs-file-systems-in-partitions-server2">Lab: Create and Mount Ext4, VFAT, and XFS File Systems in Partitions (server2)</h2>
<ul>
<li>Create 2 x 100MB partitions on the /dev/sdb disk,</li>
<li>initialize them separately with the Ext4 and VFAT file system types,</li>
<li>define them for persistence using their UUIDs,</li>
<li>create mount points called /ext4fs1 and /vfatfs1,</li>
<li>attach them to the directorystructure</li>
<li>verify their availability and usage</li>
<li>you will use the disk /dev/sdc and repeat the above procedure to establish an XFS file system in it and mount it on /xfsfs1.</li>
</ul>
<p>1. Apply the label &ldquo;msdos&rdquo; to the sdb disk using the parted command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mklabel msdos</span>
</span></span><span style="display:flex;"><span>Warning: The existing disk label on /dev/sdb will be destroyed and all data on this disk will be
</span></span><span style="display:flex;"><span>lost. Do you want to <span style="color:#ff6ac1">continue</span>?
</span></span><span style="display:flex;"><span>Yes/No? y                                                                 
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<p>2. Create 2 x 100MB primary partitions on sdb with the parted command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mkpart primary 1 101m</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mkpart primary 102 201m</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<p>3. Initialize the first partition (sdb1) with Ext4 file system type using the mkfs command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs -t ext4 /dev/sdb1</span>
</span></span><span style="display:flex;"><span>mke2fs 1.46.5 <span style="color:#ff6ac1">(</span>30-Dec-2021<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>/dev/sdb1 contains a LVM2_member file system
</span></span><span style="display:flex;"><span>Proceed anyway? <span style="color:#ff6ac1">(</span>y,N<span style="color:#ff6ac1">)</span> y
</span></span><span style="display:flex;"><span>Creating filesystem with <span style="color:#ff9f43">97280</span> 1k blocks and <span style="color:#ff9f43">24288</span> inodes
</span></span><span style="display:flex;"><span>Filesystem UUID: 73db0582-7183-42aa-951d-2f48b7712597
</span></span><span style="display:flex;"><span>Superblock backups stored on blocks: 
</span></span><span style="display:flex;"><span>	8193, 24577, 40961, 57345, <span style="color:#ff9f43">73729</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Allocating group tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Writing inode tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Creating journal <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4096</span> blocks<span style="color:#ff6ac1">)</span>: <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span>Writing superblocks and filesystem accounting information: <span style="color:#ff6ac1">done</span> </span></span></code></pre></div>
<p>4. Initialize the second partition (sdb2) with VFAT file system type using the mkfs command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs -t vfat /dev/sdb2</span>
</span></span><span style="display:flex;"><span>mkfs.fat 4.2 <span style="color:#ff6ac1">(</span>2021-01-31<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<p>5. Initialize the whole disk (sdc) with the XFS file system type using the mkfs.xfs command. Add the -f flag to force the removal of any old partitioning or labeling information from the disk.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs.xfs /dev/sdc -f </span>
</span></span><span style="display:flex;"><span>Filesystem should be larger than 300MB.
</span></span><span style="display:flex;"><span>Log size should be at least 64MB.
</span></span><span style="display:flex;"><span>Support <span style="color:#ff6ac1">for</span> filesystems like this one is deprecated and they will not be supported in future releases.
</span></span><span style="display:flex;"><span>meta-data<span style="color:#ff6ac1">=</span>/dev/sdc               <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4, <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">16000</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>64000, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>1368, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks, lazy-count<span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>6. Determine the UUIDs for all three file systems using the lsblk command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk -f /dev/sdb /dev/sdc</span>
</span></span><span style="display:flex;"><span>NAME   FSTYPE FSVER LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdb                                                                           
</span></span><span style="display:flex;"><span>├─sdb1 ext4   1.0         0bdd22d0-db53-40bb-8cc7-36efc9184196                
</span></span><span style="display:flex;"><span>└─sdb2 vfat   FAT16       FB3A-6572                                           
</span></span><span style="display:flex;"><span>sdc    xfs                91884326-9686-4569-96fa-9adb02c1f6f4&gt;<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<p>7. Open the /etc/fstab file, go to the end of the file, and append entries for the file systems for persistence using their UUIDs:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span>0bdd22d0-db53-40bb-8cc7-36efc9184196 /ext4fs1 ext4 defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>                
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span>FB3A-6572 /vfatfs1 vfat defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>                                          
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span>91884326-9686-4569-96fa-9adb02c1f6f4 /xfsfs1 xfs defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>8. Create mount points /ext4fs1, /vfatfs1, and /xfsfs1 for the three
file systems using the mkdir command:
<code>[root@server2 ~]# sudo mkdir /ext4fs1 /vfatfs1 /xfsfs1</code></p>
<p>9. Mount the new file systems using the mount command. This command will fail if there are any invalid or missing information in the file.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mount -a</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.</span></span></code></pre></div>
<p>10. View the mount and availability status as well as the types of all three file systems using the df command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -hT</span>
</span></span><span style="display:flex;"><span>Filesystem            Type      Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>devtmpfs              devtmpfs  4.0M     <span style="color:#ff9f43">0</span>  4.0M   0% /dev
</span></span><span style="display:flex;"><span>tmpfs                 tmpfs     888M     <span style="color:#ff9f43">0</span>  888M   0% /dev/shm
</span></span><span style="display:flex;"><span>tmpfs                 tmpfs     356M  5.1M  351M   2% /run
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-root xfs        17G  2.0G   15G  12% /
</span></span><span style="display:flex;"><span>/dev/sda1             xfs       960M  344M  617M  36% /boot
</span></span><span style="display:flex;"><span>tmpfs                 tmpfs     178M     <span style="color:#ff9f43">0</span>  178M   0% /run/user/0
</span></span><span style="display:flex;"><span>/dev/sdb1             ext4       84M   14K   77M   1% /ext4fs1
</span></span><span style="display:flex;"><span>/dev/sdb2             vfat       95M     <span style="color:#ff9f43">0</span>   95M   0% /vfatfs1
</span></span><span style="display:flex;"><span>/dev/sdc              xfs       245M   15M  231M   6% /xfsfs1</span></span></code></pre></div>
<h2 id="lab-create-and-mount-ext4-and-xfs-file-systems-in-lvm-logical-volumes-server2">Lab: Create and Mount Ext4 and XFS File Systems in LVM Logical Volumes (server2)</h2>
<ul>
<li>Create a volume group called <em>vgfs</em> comprised of a 172MB physical volume created in a partition on the <em>/dev/sdd</em> disk.</li>
<li>The PE size for the volume group should be set at 16MB.</li>
<li>Create two logical volumes called <em>ext4vol</em> and <em>xfsvol</em> of sizes 80MB each and initialize them with the Ext4 and XFS file system types.</li>
<li>Ensure that both file systems are persistently defined using their logical volume device filenames.</li>
<li>Create mount points called /ext4fs2 and /xfsfs2,</li>
<li>Mount the file systems.</li>
<li>Verify their availability and usage.</li>
</ul>
<p>1. Create a 172MB partition on the sdd disk using the parted command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd mkpart pri 1 172m</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<p>2. Initialize the sdd1 partition for use in LVM using the pvcreate command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdd1</span>
</span></span><span style="display:flex;"><span>  Device /dev/sdb2 has updated name <span style="color:#ff6ac1">(</span>devices file /dev/sdd2<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>  Device /dev/sdb1 has no PVID <span style="color:#ff6ac1">(</span>devices file brKVLFEG3AoBzhWoso0Sa1gLYHgNZ4vL<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> successfully created.</span></span></code></pre></div>
<p>3. Create the volume group vgfs with a PE size of 16MB using the physical volume sdd1:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgcreate -s 16 vgfs /dev/sdd1</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgfs&#34;</span> successfully created</span></span></code></pre></div>
<p>The PE size is not easy to alter after a volume group creation, so ensure it is defined as required at creation.</p>
<p>4. Create two logical volumes ext4vol and xfsvol of size 80MB each in vgfs using the <code>lvcreate</code> command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -n ext4vol -L 80 vgfs</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;ext4vol&#34;</span> created.
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate  -n xfsvol -L 80 vgfs</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;xfsvol&#34;</span> created.</span></span></code></pre></div>
<p>5. Format the ext4vol logical volume with the Ext4 file system type using the mkfs.ext4 command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs.ext4 /dev/vgfs/ext4vol</span>
</span></span><span style="display:flex;"><span>mke2fs 1.46.5 <span style="color:#ff6ac1">(</span>30-Dec-2021<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Creating filesystem with <span style="color:#ff9f43">81920</span> 1k blocks and <span style="color:#ff9f43">20480</span> inodes
</span></span><span style="display:flex;"><span>Filesystem UUID: 4ed1fef7-2164-485b-8035-7f627cd59419
</span></span><span style="display:flex;"><span>Superblock backups stored on blocks: 
</span></span><span style="display:flex;"><span>	8193, 24577, 40961, 57345, <span style="color:#ff9f43">73729</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Allocating group tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Writing inode tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Creating journal <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4096</span> blocks<span style="color:#ff6ac1">)</span>: <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span>Writing superblocks and filesystem accounting information: <span style="color:#ff6ac1">done</span></span></span></code></pre></div>
<p>You can also use <code>sudo mkfs -t ext4 /dev/vgfs/ext4vol</code>.</p>
<p>6. Format the xfsvol logical volume with the XFS file system type using the mkfs.xfs command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs.xfs /dev/vgfs/xfsvol</span>
</span></span><span style="display:flex;"><span>Filesystem should be larger than 300MB.
</span></span><span style="display:flex;"><span>Log size should be at least 64MB.
</span></span><span style="display:flex;"><span>Support <span style="color:#ff6ac1">for</span> filesystems like this one is deprecated and they will not be supported in future releases.
</span></span><span style="display:flex;"><span>meta-data<span style="color:#ff6ac1">=</span>/dev/vgfs/xfsvol       <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4, <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">5120</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>20480, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>1368, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks, lazy-count<span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>You may also use <code>sudo mkfs -t xfs /dev/vgfs/xfsvol</code> instead.</p>
<p>7. Open the /etc/fstab file, go to the end of the file, and append entries for the file systems for persistence using their device files:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/dev/vgfs/ext4vol /ext4fs2 ext4 defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>/dev/vgfs/xfsvol /xfsfs2 xfs defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>8. Create mount points /ext4fs2 and /xfsfs2 using the mkdir command:
<code>[root@server2 ~]# sudo mkdir /ext4fs2 /xfsfs2</code></p>
<p>9. Mount the new file systems using the mount command. This command will fail if there is any invalid or missing information in the file.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mount -a</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.</span></span></code></pre></div>
<p>10. View the mount and availability status as well as the types of the
new LVM file systems using the lsblk and df commands:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdd</span>
</span></span><span style="display:flex;"><span>NAME             MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdd                8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>└─sdd1             8:49   <span style="color:#ff9f43">0</span>  163M  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  ├─vgfs-ext4vol 253:2    <span style="color:#ff9f43">0</span>   80M  <span style="color:#ff9f43">0</span> lvm  /ext4fs2
</span></span><span style="display:flex;"><span>  └─vgfs-xfsvol  253:3    <span style="color:#ff9f43">0</span>   80M  <span style="color:#ff9f43">0</span> lvm  /xfsfs2
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -hT | grep fs2</span>
</span></span><span style="display:flex;"><span>/dev/mapper/vgfs-ext4vol ext4       70M   14K   64M   1% /ext4fs2
</span></span><span style="display:flex;"><span>/dev/mapper/vgfs-xfsvol  xfs        75M  4.8M   70M   7% /xfsfs2</span></span></code></pre></div>
<h3 id="lab-resize-ext4-and-xfs-file-systems-in-lvm-logical-volumes-server-2">Lab: Resize Ext4 and XFS File Systems in LVM Logical Volumes (server 2)</h3>
<ul>
<li>Grow the size of the <em>vgfs</em> volume group that was created in the last lab by adding the whole <em>sde</em> disk to it.</li>
<li>Extend the <em>ext4vol</em> logical volume along with the file system it contains by 40MB using two separate commands.</li>
<li>Extend the <em>xfsvol</em> logical volume along with the file system it contains by 40MB using a single command.</li>
<li>Verify the new extensions.</li>
</ul>
<p>1. Initialize the sde disk and add it to the vgfs volume group:</p>
<p>sde had a gpt partition table with no partitions ran the following to reset it:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># dd if=/dev/zero of=/dev/sde bs=1M count=2 conv=fsync</span>
</span></span><span style="display:flex;"><span>2+0 records in
</span></span><span style="display:flex;"><span>2+0 records out
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">2097152</span> bytes <span style="color:#ff6ac1">(</span>2.1 MB, 2.0 MiB<span style="color:#ff6ac1">)</span> copied, 0.0102036 s, <span style="color:#ff9f43">206</span> MB/s
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo partprobe /dev/sde</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sde</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sde&#34;</span> successfully created.</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sde</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sde&#34;</span> successfully created.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgextend vgfs /dev/sde</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgfs&#34;</span> successfully extended</span></span></code></pre></div>
<p>2. Confirm the new size of vgfs using the <code>vgs</code> and <code>vgdisplay</code> commands:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs</span>
</span></span><span style="display:flex;"><span>  VG   <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree  </span>
</span></span><span style="display:flex;"><span>  rhel   <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g      <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vgfs   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- 400.00m 240.00m</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgdisplay vgfs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgfs
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">4</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  VG Size               400.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">25</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">10</span> / 160.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">15</span> / 240.00 MiB
</span></span><span style="display:flex;"><span>  VG UUID               amDADJ-I4dH-jQUF-RFcE-58iL-jItl-5ti6LS</span></span></code></pre></div>
<p>There are now two physical volumes in the volume group and the total size increased to 400MiB.</p>
<p>3. Grow the logical volume ext4vol and the file system it holds by 40MB using the <code>lvextend</code> and <code>fsadm</code> command pair. Make sure to use an uppercase L to specify the size. The default unit is MiB. The plus sign (+) signifies an addition to the current size.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvextend -L +40 /dev/vgfs/ext4vol</span>
</span></span><span style="display:flex;"><span>  Rounding size to boundary between physical extents: 48.00 MiB.
</span></span><span style="display:flex;"><span>  Size of logical volume vgfs/ext4vol changed from 80.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">5</span> extents<span style="color:#ff6ac1">)</span> to 128.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">8</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vgfs/ext4vol successfully resized.
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo fsadm resize /dev/vgfs/ext4vol</span>
</span></span><span style="display:flex;"><span>resize2fs 1.46.5 <span style="color:#ff6ac1">(</span>30-Dec-2021<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Filesystem at /dev/mapper/vgfs-ext4vol is mounted on /ext4fs2; on-line resizing required
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">old_desc_blocks</span> <span style="color:#ff6ac1">=</span> 1, <span style="color:#ff5c57">new_desc_blocks</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>The filesystem on /dev/mapper/vgfs-ext4vol is now <span style="color:#ff9f43">131072</span> <span style="color:#ff6ac1">(</span>1k<span style="color:#ff6ac1">)</span> blocks long.</span></span></code></pre></div>
<p>The resize subcommand instructs the <code>fsadm</code> command to grow the file system to the full length of the specified logical volume.</p>
<p>4. Grow the logical volume xfsvol and the file system (-r) it holds by (+) 40MB using the lvresize command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvresize -r -L +40 /dev/vgfs/xfsvol</span>
</span></span><span style="display:flex;"><span>  Rounding size to boundary between physical extents: 48.00 MiB.
</span></span><span style="display:flex;"><span>  Size of logical volume vgfs/xfsvol changed from 80.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">5</span> extents<span style="color:#ff6ac1">)</span> to 128.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">8</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  File system xfs found on vgfs/xfsvol mounted at /xfsfs2.
</span></span><span style="display:flex;"><span>  Extending file system xfs to 128.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">134217728</span> bytes<span style="color:#ff6ac1">)</span> on vgfs/xfsvol...
</span></span><span style="display:flex;"><span>xfs_growfs /dev/vgfs/xfsvol
</span></span><span style="display:flex;"><span>meta-data<span style="color:#ff6ac1">=</span>/dev/mapper/vgfs-xfsvol <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4, <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">5120</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>20480, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>1368, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks, lazy-count<span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>data blocks changed from <span style="color:#ff9f43">20480</span> to <span style="color:#ff9f43">32768</span>
</span></span><span style="display:flex;"><span>xfs_growfs <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span>  Extended file system xfs on vgfs/xfsvol.
</span></span><span style="display:flex;"><span>  Logical volume vgfs/xfsvol successfully resized.</span></span></code></pre></div>
<p>5. Verify the new extensions to both logical volumes using the <code>lvs</code> command. You may also issue the <code>lvdisplay</code> or <code>vgdisplay</code> command instead.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs | grep vol</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  ext4vol vgfs -wi-ao---- 128.00m                                                    
</span></span><span style="display:flex;"><span>  xfsvol  vgfs -wi-ao---- 128.00m   </span></span></code></pre></div>
<p>6. Check the new sizes and the current mount status for both file systems using the <code>df</code> and <code>lsblk</code> commands:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -hT | grep -E &#39;ext4vol|xfsvol&#39;</span>
</span></span><span style="display:flex;"><span>/dev/mapper/vgfs-xfsvol  xfs       123M  5.4M  118M   5% /xfsfs2
</span></span><span style="display:flex;"><span>/dev/mapper/vgfs-ext4vol ext4      115M   14K  107M   1% /ext4fs2</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdd /dev/sde</span>
</span></span><span style="display:flex;"><span>NAME             MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdd                8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>└─sdd1             8:49   <span style="color:#ff9f43">0</span>  163M  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  ├─vgfs-ext4vol 253:2    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  /ext4fs2
</span></span><span style="display:flex;"><span>  └─vgfs-xfsvol  253:3    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  /xfsfs2
</span></span><span style="display:flex;"><span>sde                8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>├─vgfs-ext4vol   253:2    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  /ext4fs2
</span></span><span style="display:flex;"><span>└─vgfs-xfsvol    253:3    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  /xfsfs2</span></span></code></pre></div>
<h2 id="lab-create-and-mount-xfs-file-system-in-lvm-vdo-volume">Lab: Create and Mount XFS File System in LVM VDO Volume</h2>
<ul>
<li>Create an LVM VDO volume called <em>lvvdo</em> of virtual size 20GB on the 5GB sdf disk in a volume group called <em>vgvdo1</em>.</li>
<li>Initialize the volume with the XFS file system type.</li>
<li>Define it for persistence using its device files.</li>
<li>Create a mount point called <em>/xfsvdo1</em>, attach it to the directory structure.</li>
<li>verify its availability and usage.\</li>
</ul>
<p>1. Initialize the sdf disk using the <code>pvcreate</code> command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdf</span>
</span></span><span style="display:flex;"><span>  WARNING: adding device /dev/sdf with idname t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 which is already used <span style="color:#ff6ac1">for</span> missing device.
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdf&#34;</span> successfully created.</span></span></code></pre></div>
<p>2. Create vgvdo1 volume group using the <code>vgcreate</code> command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgcreate vgvdo1 /dev/sdf</span>
</span></span><span style="display:flex;"><span>  WARNING: adding device /dev/sdf with idname t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 which is already used <span style="color:#ff6ac1">for</span> missing device.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgvdo1&#34;</span> successfully created</span></span></code></pre></div>
<p>3. Display basic information about the volume group:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay vgvdo1</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgvdo1
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">1279</span> / &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  VG UUID               b9u8Ng-m3BF-Jz2b-sBu8-gEG1-bBGQ-sBgrt0</span></span></code></pre></div>
<p>4. Create a VDO volume called lvvdo1 using the <code>lvcreate</code> command. Use the <code>-l</code> option to specify the number of logical extents (1279) to be allocated and the <code>-V</code> option for the amount of virtual space (20GB).</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -n lvvdo -l 1279 -V 20G --type vdo vgvdo1</span>
</span></span><span style="display:flex;"><span>WARNING: vdo signature detected on /dev/vgvdo1/vpool0 at offset 0. Wipe it? <span style="color:#ff6ac1">[</span>y/n<span style="color:#ff6ac1">]</span>: y
</span></span><span style="display:flex;"><span>  Wiping vdo signature on /dev/vgvdo1/vpool0.
</span></span><span style="display:flex;"><span>    The VDO volume can address <span style="color:#ff9f43">2</span> GB in <span style="color:#ff9f43">1</span> data slab.
</span></span><span style="display:flex;"><span>    It can grow to address at most <span style="color:#ff9f43">16</span> TB of physical storage in <span style="color:#ff9f43">8192</span> slabs.
</span></span><span style="display:flex;"><span>    If a larger maximum size might be needed, use bigger slabs.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvvdo&#34;</span> created.</span></span></code></pre></div>
<p>5. Display detailed information about the volume group including the logical volume and the physical volume:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay -v vgvdo1</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgvdo1
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">1279</span> / &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               b9u8Ng-m3BF-Jz2b-sBu8-gEG1-bBGQ-sBgrt0
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgvdo1/vpool0
</span></span><span style="display:flex;"><span>  LV Name                vpool0
</span></span><span style="display:flex;"><span>  VG Name                vgvdo1
</span></span><span style="display:flex;"><span>  LV UUID                nTPKtv-3yTW-J7Cy-HVP1-Aujs-cXZ6-gdS2fI
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-07-01 12:57:56 -0700
</span></span><span style="display:flex;"><span>  LV VDO Pool data       vpool0_vdata
</span></span><span style="display:flex;"><span>  LV VDO Pool usage      60.00%
</span></span><span style="display:flex;"><span>  LV VDO Pool saving     100.00%
</span></span><span style="display:flex;"><span>  LV VDO Operating mode  normal
</span></span><span style="display:flex;"><span>  LV VDO Index state     online
</span></span><span style="display:flex;"><span>  LV VDO Compression st  online
</span></span><span style="display:flex;"><span>  LV VDO Used size       &lt;3.00 GiB
</span></span><span style="display:flex;"><span>  LV Status              NOT available
</span></span><span style="display:flex;"><span>  LV Size                &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgvdo1/lvvdo
</span></span><span style="display:flex;"><span>  LV Name                lvvdo
</span></span><span style="display:flex;"><span>  VG Name                vgvdo1
</span></span><span style="display:flex;"><span>  LV UUID                Z09BdK-ETJk-Gi53-m8Cg-mnTd-RYug-Z9nV0L
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-07-01 12:58:02 -0700
</span></span><span style="display:flex;"><span>  LV VDO Pool name       vpool0
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                20.00 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">5120</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:6
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Physical volumes ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdf     
</span></span><span style="display:flex;"><span>  PV UUID               WKc956-Xp66-L8v9-VA6S-KWM5-5e3X-kx1v0V
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">1279</span> / <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>6. Display the new VDO volume creation using the lsblk command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lsblk /dev/sdf</span>
</span></span><span style="display:flex;"><span>NAME                    MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdf                       8:80   <span style="color:#ff9f43">0</span>   5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>└─vgvdo1-vpool0_vdata   253:4    <span style="color:#ff9f43">0</span>   5G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>  └─vgvdo1-vpool0-vpool 253:5    <span style="color:#ff9f43">0</span>  20G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>    └─vgvdo1-lvvdo      253:6    <span style="color:#ff9f43">0</span>  20G  <span style="color:#ff9f43">0</span> lvm  </span></span></code></pre></div>
<p>The output shows the virtual volume size (20GB) and the underlying disk size (5GB).</p>
<p>7. Initialize the VDO volume with the XFS file system type using the <code>mkfs.xfs</code> command. The VDO volume device file is
/dev/mapper/vgvdo1-lvvdo as indicated in the above output. Add the <code>-f</code> flag to force the removal of any old partitioning or labeling information from the disk.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs.xfs /dev/mapper/vgvdo1-lvvdo</span>
</span></span><span style="display:flex;"><span>meta-data<span style="color:#ff6ac1">=</span>/dev/mapper/vgvdo1-lvvdo <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4, <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1310720</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>  <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>5242880, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>16384, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>  <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> blks, lazy-count<span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>Discarding blocks...Done.</span></span></code></pre></div>
<p>(lab said vgvdo1-lvvdo1 but it didn&rsquo;t exist for me.)</p>
<p>8. Open the /etc/fstab file, go to the end of the file, and append the following entry for the file system for persistent mounts using its device file:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/dev/mapper/vgvdo1-lvvdo /xfsvdo1 xfs defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span> </span></span></code></pre></div>
<p>9. Create the mount point /xfsvdo1 using the mkdir command:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkdir /xfsvdo1</span></span></span></code></pre></div>
<p>10. Mount the new file system using the mount command. This command will fail if there are any invalid or missing information in the file.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mount -a</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.</span></span></code></pre></div>
<p>The mount command with the <code>-a</code> flag is a validation test for the fstab file. It should always be executed after updating this file and before rebooting the server to avoid landing the system in an unbootable state.</p>
<p>11. View the mount and availability status as well as the type of the VDO file system using the <code>lsblk</code> and <code>df</code> commands:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdf</span>
</span></span><span style="display:flex;"><span>NAME                    MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdf                       8:80   <span style="color:#ff9f43">0</span>   5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>└─vgvdo1-vpool0_vdata   253:4    <span style="color:#ff9f43">0</span>   5G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>  └─vgvdo1-vpool0-vpool 253:5    <span style="color:#ff9f43">0</span>  20G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>    └─vgvdo1-lvvdo      253:6    <span style="color:#ff9f43">0</span>  20G  <span style="color:#ff9f43">0</span> lvm  /xfsvdo1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -hT /xfsvdo1</span>
</span></span><span style="display:flex;"><span>Filesystem               Type  Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>/dev/mapper/vgvdo1-lvvdo xfs    20G  175M   20G   1% /xfsvdo1</span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<a href="https://linuxreader.com">
  <img src="/images/linuxreader.svg" alt="Linux Reader" >
</a>

        </div>
        <script>
          window.index_js_url="/searchindex.en.js?1741647087";
        </script>
        <search><form action="/search/" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/js/auto-complete.js?1741647087" defer></script>
        <script src="/js/lunr/lunr.min.js?1741647087" defer></script>
        <script src="/js/lunr/lunr.stemmer.support.min.js?1741647087" defer></script>
        <script src="/js/lunr/lunr.multi.min.js?1741647087" defer></script>
        <script src="/js/lunr/lunr.en.min.js?1741647087" defer></script>
        <script src="/js/search.js?1741647087" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation">
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-shortcutmenu-home" class="R-sidebarmenu">
          <ul class="enlarge morespace collapsible-menu">
            <li class="parent " data-nav-id="/linux/"><a class="padding" href="/linux/"><i class="fa-fw fas fa-terminal"></i> Linux</a><ul id="R-subsections-e2509333b88222aa06f1b5fc60b020b2" class="collapsible-menu">
            <li class="" data-nav-id="/linux/fedora/"><a class="padding" href="/linux/fedora/"><i class="fa-fw fas fa-angle-down"></i> Fedora</a><ul id="R-subsections-89434e96479d9689b11efd9b3cb12acc" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-id="/linux/rhcsa/"><a class="padding" href="/linux/rhcsa/"><i class="fa-fw fas fa-angle-down"></i> RHCSA</a><ul id="R-subsections-2c51772c3489e4d820f23d680b3a1d70" class="collapsible-menu">
            <li class="active hidden " data-nav-id="/linux/rhcsa/rhcsa-notes/file-system-management/"><a class="padding" href="/linux/rhcsa/rhcsa-notes/file-system-management/"></a></li>
            <li class="" data-nav-id="/linux/rhcsa/rhcsa-exam-environment/"><a class="padding" href="/linux/rhcsa/rhcsa-exam-environment/">RHCSA Exam Environment Guide</a></li>
            <li class="" data-nav-id="/linux/rhcsa/rhcsa-notes/"><a class="padding" href="/linux/rhcsa/rhcsa-notes/">RHCSA Notes</a></li>
            <li class="" data-nav-id="/linux/rhcsa/rhcsa-study-tracker/"><a class="padding" href="/linux/rhcsa/rhcsa-study-tracker/">RHCSA Study Tracker</a></li>
            <li class="" data-nav-id="/linux/rhcsa/rhcsa-vagrant-lab-setup/"><a class="padding" href="/linux/rhcsa/rhcsa-vagrant-lab-setup/">RHCSA Vagrant Lab Setup</a></li>
            <li class="" data-nav-id="/linux/rhcsa/using-man-pages/"><a class="padding" href="/linux/rhcsa/using-man-pages/">You Need to Learn Man Pages</a></li></ul></li></ul></li>
            <li class="" data-nav-id="/networking/"><a class="padding" href="/networking/"><i class="fa-fw fas fa-network-wired"></i> Networking</a><ul id="R-subsections-d7c3359b808d40df139a3bb9f9073483" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/tools/"><a class="padding" href="/tools/"><i class="fa-fw fas fa-screwdriver-wrench"></i> Tools</a><ul id="R-subsections-bf1399820dde3dd110e03ace4147ff86" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div id="R-shortcutmenu-shortcuts" class="R-sidebarmenu">
          <div class="nav-title padding">More</div>
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="https://github.com/tdavetech"><a class="padding" href="https://github.com/tdavetech" target="_blank"><i class='fab fa-fw fa-github'></i> GitHub</a></li>
            <li class="" data-nav-id="/contact/"><a class="padding" href="/contact/"><i class='fas fa-fw fa-envelope'></i> Contact</a></li>
            <li class="" data-nav-id="/now/"><a class="padding" href="/now/"><i class='fas fa-fw fa-play'></i> Now</a></li>
            <li class="" data-nav-id="/booknotes/"><a class="padding" href="/booknotes/"><i class='fas fa-fw fa-file'></i> Book Notes</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-en" value="#R-select-language-en" data-url="/linux/rhcsa/rhcsa-notes/file-system-management/" lang="en-us" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-select-variant-amoled" value="amoled" selected>Amoled</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter">
        <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
          </div>
        </div>
      </div>
    </aside>
    <script src="/js/clipboard.min.js?1741647087" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1741647087" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/d3/d3-color.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-drag.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-ease.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-selection.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-timer.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-transition.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1741647087" defer></script>
    <script src="/js/js-yaml.min.js?1741647087" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/theme.js?1741647087" defer></script>
  </body>
</html>
