<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.145.0">
    <meta name="generator" content="Relearn 7.1.1">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="Working with Images and Containers Lab: Install Necessary Container Support Install the necessary software to set the foundation for completing the exercises in the remainder of the chapter. The standard RHEL 9.1 image includes a package called container-tools that consists of all the required components and commands. Use the standard dnf command to install the package. 1. Install the container-tools package:
root@server10 ~]# dnf install -y container-tools Upgraded: aardvark-dns-2:1.10.0-3.el9_4.x86_64 buildah-2:1.33.7-3.el9_4.x86_64 netavark-2:1.10.3-1.el9.x86_64 podman-4:4.9.4-6.el9_4.x86_64 Installed: container-tools-1-14.el9.noarch podman-docker-4:4.9.4-6.el9_4.noarch podman-remote-4:4.9.4-6.el9_4.x86_64 python3-podman-3:4.9.0-1.el9.noarch python3-pyxdg-0.27-3.el9.noarch python3-tomli-2.0.1-5.el9.noarch skopeo-2:1.14.3-3.el9_4.x86_64 toolbox-0.0.99.5-2.el9.x86_64 udica-0.2.8-1.el9.noarch 2. Verify the package installation:">
    <meta name="author" content="David Thomas">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="Working with Images and Containers Lab: Install Necessary Container Support Install the necessary software to set the foundation for completing the exercises in the remainder of the chapter. The standard RHEL 9.1 image includes a package called container-tools that consists of all the required components and commands. Use the standard dnf command to install the package. 1. Install the container-tools package:
root@server10 ~]# dnf install -y container-tools Upgraded: aardvark-dns-2:1.10.0-3.el9_4.x86_64 buildah-2:1.33.7-3.el9_4.x86_64 netavark-2:1.10.3-1.el9.x86_64 podman-4:4.9.4-6.el9_4.x86_64 Installed: container-tools-1-14.el9.noarch podman-docker-4:4.9.4-6.el9_4.noarch podman-remote-4:4.9.4-6.el9_4.x86_64 python3-podman-3:4.9.0-1.el9.noarch python3-pyxdg-0.27-3.el9.noarch python3-tomli-2.0.1-5.el9.noarch skopeo-2:1.14.3-3.el9_4.x86_64 toolbox-0.0.99.5-2.el9.x86_64 udica-0.2.8-1.el9.noarch 2. Verify the package installation:">
    <meta property="og:url" content="http://localhost:1313/linux/rhcsa/rhcsa-notes/working-with-images-and-containers/">
    <meta property="og:site_name" content="Linux Reader">
    <meta property="og:description" content="Working with Images and Containers Lab: Install Necessary Container Support Install the necessary software to set the foundation for completing the exercises in the remainder of the chapter. The standard RHEL 9.1 image includes a package called container-tools that consists of all the required components and commands. Use the standard dnf command to install the package. 1. Install the container-tools package:
root@server10 ~]# dnf install -y container-tools Upgraded: aardvark-dns-2:1.10.0-3.el9_4.x86_64 buildah-2:1.33.7-3.el9_4.x86_64 netavark-2:1.10.3-1.el9.x86_64 podman-4:4.9.4-6.el9_4.x86_64 Installed: container-tools-1-14.el9.noarch podman-docker-4:4.9.4-6.el9_4.noarch podman-remote-4:4.9.4-6.el9_4.x86_64 python3-podman-3:4.9.0-1.el9.noarch python3-pyxdg-0.27-3.el9.noarch python3-tomli-2.0.1-5.el9.noarch skopeo-2:1.14.3-3.el9_4.x86_64 toolbox-0.0.99.5-2.el9.x86_64 udica-0.2.8-1.el9.noarch 2. Verify the package installation:">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Linux">
    <meta itemprop="description" content="Working with Images and Containers Lab: Install Necessary Container Support Install the necessary software to set the foundation for completing the exercises in the remainder of the chapter. The standard RHEL 9.1 image includes a package called container-tools that consists of all the required components and commands. Use the standard dnf command to install the package. 1. Install the container-tools package:
root@server10 ~]# dnf install -y container-tools Upgraded: aardvark-dns-2:1.10.0-3.el9_4.x86_64 buildah-2:1.33.7-3.el9_4.x86_64 netavark-2:1.10.3-1.el9.x86_64 podman-4:4.9.4-6.el9_4.x86_64 Installed: container-tools-1-14.el9.noarch podman-docker-4:4.9.4-6.el9_4.noarch podman-remote-4:4.9.4-6.el9_4.x86_64 python3-podman-3:4.9.0-1.el9.noarch python3-pyxdg-0.27-3.el9.noarch python3-tomli-2.0.1-5.el9.noarch skopeo-2:1.14.3-3.el9_4.x86_64 toolbox-0.0.99.5-2.el9.x86_64 udica-0.2.8-1.el9.noarch 2. Verify the package installation:">
    <meta itemprop="wordCount" content="2431">
    <title></title>
    <link href="/linux/rhcsa/rhcsa-notes/working-with-images-and-containers/index.xml" rel="alternate" type="application/rss+xml" title="">
    <link href="/linux/rhcsa/rhcsa-notes/working-with-images-and-containers/index.print.html" rel="alternate" type="text/html" title="">
    <link href="/images/logo.svg?1741647087" rel="icon" type="image/svg+xml">
    <link href="/css/fontawesome-all.min.css?1741647087" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1741647087" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1741647087" rel="stylesheet">
    <link href="/css/auto-complete.css?1741647087" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1741647087" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1741647087" rel="stylesheet">
    <link href="/css/fonts.css?1741647087" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1741647087" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1741647087" rel="stylesheet">
    <link href="/css/theme-amoled.css?1741647087" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-relearn-dark.css?1741647087" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/print.css?1741647087" rel="stylesheet" media="print">
    <script src="/js/variant.js?1741647087"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      // variant stuff
      window.variants && variants.init( [ 'amoled' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script><style>
:root {
    --MENU-WIDTH-S: 14.375rem;
    --MENU-WIDTH-M: 14.375rem;
    --MENU-WIDTH-L: 18.75rem;
    --MAIN-WIDTH-MAX: 80rem;
    font-size: 1.2rem;
}
</style>

  </head>
  <body class="mobile-support html disableInlineCopyToClipboard" data-url="/linux/rhcsa/rhcsa-notes/working-with-images-and-containers/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/linux/rhcsa" title="RHCSA (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#working-with-images-and-containers">Working with Images and Containers</a>
      <ul>
        <li><a href="#lab-install-necessary-container-support">Lab: Install Necessary Container Support</a></li>
        <li><a href="#podman-command"><code>podman</code> Command</a></li>
        <li><a href="#subcommands">Subcommands</a></li>
        <li><a href="#skopeo-command"><code>skopeo</code> Command</a></li>
        <li><a href="#viewing-podman-configuration-and-version">Viewing Podman Configuration and Version</a></li>
        <li><a href="#image-management-1">Image Management</a></li>
        <li><a href="#lab-search-examine-download-and-remove-an-image">Lab: Search, Examine, Download, and Remove an Image</a></li>
        <li><a href="#containerfile">Containerfile</a></li>
        <li><a href="#lab-use-containerfile-to-build-image">Lab: Use Containerfile to Build Image</a></li>
        <li><a href="#basic-container-management">Basic Container Management</a></li>
        <li><a href="#lab-run-interact-with-and-remove-a-named-container">Lab: Run, Interact with, and Remove a Named Container</a></li>
        <li><a href="#lab-run-a-nameless-container-and-auto-remove-it-after-entry-point-command-execution">Lab: Run a Nameless Container and Auto-Remove it After Entry Point Command Execution</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/linux/rhcsa/rhcsa-notes/working-with-images-and-containers?format=print" title="Print whole chapter (CTRL&#43;ALT&#43;p)"><i class="fa-fw fas fa-print"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/linux/rhcsa/rhcsa-exam-environment" title="RHCSA Exam Environment Guide (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>







          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable linux" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id=""></h1>

<h2 id="working-with-images-and-containers">Working with Images and Containers</h2>
<h3 id="lab-install-necessary-container-support">Lab: Install Necessary Container Support</h3>
<ul>
<li>Install the necessary software to set the foundation for completing the exercises in the remainder of the chapter.</li>
<li>The standard RHEL 9.1 image includes a package called <code>container-tools</code> that consists of all the required components and commands.</li>
<li>Use the standard <code>dnf</code> command to install the package.</li>
</ul>
<p>1. Install the container-tools package:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># dnf install -y container-tools</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Upgraded:
</span></span><span style="display:flex;"><span>  aardvark-dns-2:1.10.0-3.el9_4.x86_64 
</span></span><span style="display:flex;"><span>  buildah-2:1.33.7-3.el9_4.x86_64         
</span></span><span style="display:flex;"><span>  netavark-2:1.10.3-1.el9.x86_64            
</span></span><span style="display:flex;"><span>  podman-4:4.9.4-6.el9_4.x86_64                                   
</span></span><span style="display:flex;"><span> Installed:
</span></span><span style="display:flex;"><span>  container-tools-1-14.el9.noarch        
</span></span><span style="display:flex;"><span>  podman-docker-4:4.9.4-6.el9_4.noarch 
</span></span><span style="display:flex;"><span>  podman-remote-4:4.9.4-6.el9_4.x86_64    
</span></span><span style="display:flex;"><span>  python3-podman-3:4.9.0-1.el9.noarch 
</span></span><span style="display:flex;"><span>  python3-pyxdg-0.27-3.el9.noarch    
</span></span><span style="display:flex;"><span>  python3-tomli-2.0.1-5.el9.noarch   
</span></span><span style="display:flex;"><span>  skopeo-2:1.14.3-3.el9_4.x86_64             
</span></span><span style="display:flex;"><span>  toolbox-0.0.99.5-2.el9.x86_64      
</span></span><span style="display:flex;"><span>  udica-0.2.8-1.el9.noarch    </span></span></code></pre></div>
<p>2. Verify the package installation:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># dnf list container-tools</span>
</span></span><span style="display:flex;"><span> Updating Subscription Management repositories.
</span></span><span style="display:flex;"><span> Last metadata expiration check: 14:53:32 ago on Wed <span style="color:#ff9f43">31</span> Jul <span style="color:#ff9f43">2024</span> 05:45:56 PM MST.
</span></span><span style="display:flex;"><span> Installed Packages
</span></span><span style="display:flex;"><span> container-tools.noarch   1-14.el9    @rhel-9-for-x86_64-appstream-rpms</span></span></code></pre></div>
<h3 id="podman-command"><code>podman</code> Command</h3>
<ul>
<li>Finding, inspect, retrieve, and delete images</li>
<li>Run, stop, list, and delete containers.</li>
<li>Used for most of these operations.</li>
</ul>
<h3 id="subcommands">Subcommands</h3>
<h4 id="image-management">Image Management</h4>
<p><strong>build</strong></p>
<ul>
<li>Builds an image using instructions delineated in a Container file</li>
</ul>
<p><strong>images</strong></p>
<ul>
<li>Lists downloaded images from local storage</li>
</ul>
<p><strong>inspect</strong></p>
<ul>
<li>Examines an image and displays its details</li>
</ul>
<p><strong>login/logout</strong></p>
<ul>
<li>Logs in/out to/from a container registry. A login may be required to access private and protected registries.</li>
</ul>
<p><strong>pull</strong></p>
<ul>
<li>Downloads an image to local storage from a registry</li>
</ul>
<p><strong>rmi</strong></p>
<ul>
<li>Removes an image from local storage</li>
</ul>
<p><strong>search</strong></p>
<ul>
<li>Searches for an image. The following options can be included with this subcommand:</li>
</ul>
<ol>
<li>A <em>partial image name</em> in the search will produce a list of all images containing the partial name.</li>
<li>The <code>--no-trunc</code> option makes the command exhibit output without truncating it.</li>
<li>The <code>--limit &lt;number&gt;</code> option limits the displayed results to the specified number.</li>
</ol>
<p><strong>tag</strong></p>
<ul>
<li>Adds a name to an image. The default is &rsquo;latest&rsquo; to classify the image as the latest version. Older images may have specific version identifiers.</li>
</ul>
<h4 id="container-management">Container Management</h4>
<p><strong>attach</strong></p>
<ul>
<li>Attaches to a running container</li>
</ul>
<p><strong>exec</strong></p>
<ul>
<li>Runs a process in a running container</li>
</ul>
<p><strong>generate</strong></p>
<ul>
<li>Generates a systemd unit configuration file that can be used to control the operational state of a container. The <code>--new</code> option is important and is employed in later exercises.</li>
</ul>
<p><strong>info</strong></p>
<ul>
<li>Reveals system information, including the defined registries</li>
</ul>
<p><strong>inspect</strong></p>
<ul>
<li>Exhibits the configuration of a container</li>
</ul>
<p><strong>ps</strong></p>
<ul>
<li>Lists running containers (includes stopped containers with the -a option)</li>
</ul>
<p><strong>rm</strong></p>
<ul>
<li>Removes a container</li>
</ul>
<p><strong>run</strong></p>
<ul>
<li>Launches a new container from an image. Some options such as -d (detached), -i (interactive), and -t (terminal) are important and are employed in exercises where needed.</li>
</ul>
<p><strong>start/stop/restart</strong></p>
<ul>
<li>Starts, stops, or restarts a container</li>
</ul>
<h3 id="skopeo-command"><code>skopeo</code> Command</h3>
<ul>
<li>Utilized for interacting with local and remote images and registries.</li>
<li>Has numerous subcommands available; however, you will be using only the <code>inspect</code> subcommand to examine the details of an image stored in a remote registry.</li>
</ul>
<p><em>/etc/containers/registries.conf</em></p>
<ul>
<li>System-wide configuration file for image registries.</li>
<li>Normal Linux users may store a customized copy of this file, if required, under the <em>~/.config/containers</em> directory.</li>
<li>Settings stored in the per-user file will take precedence over those stored in the system-wide file.
<ul>
<li>Useful for running rootless containers.</li>
</ul>
</li>
<li>Defines searchable and blocked registries.</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># grep -Ev &#39;^#|^$&#39; /etc/containers/registries.conf</span>
</span></span><span style="display:flex;"><span> unqualified-search-registries <span style="color:#ff6ac1">=</span> <span style="color:#ff6ac1">[</span><span style="color:#5af78e">&#34;registry.access.redhat.com&#34;</span>, <span style="color:#5af78e">&#34;registry.redhat.io&#34;</span>, <span style="color:#5af78e">&#34;docker.io&#34;</span><span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> short-name-mode <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;enforcing&#34;</span></span></span></code></pre></div>
<ul>
<li>The output shows three registries.</li>
<li>The <code>podman</code> command searches these registries for container images in the given order.</li>
<li>Can add additional registries to the list.</li>
</ul>
<p>Add a private registry called <em>registry.private.myorg.io</em> to be added with the highest priority:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/containers/registries.conf</span></span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> unqualified-search-registries <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">\[</span><span style="color:#5af78e">&#34;registry.private.myorg.io&#34;</span>,
</span></span><span style="display:flex;"><span> <span style="color:#5af78e">&#34;registry.access.redhat.com&#34;</span>, <span style="color:#5af78e">&#34;registry.redhat.io&#34;</span>, <span style="color:#5af78e">&#34;docker.io&#34;</span><span style="color:#5af78e">\]</span></span></span></code></pre></div>
<p>If this private registry is the only one to be used, you can take the rest of the registry entries out of the list:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> unqualified-search-registries <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">\[</span><span style="color:#5af78e">&#34;registry.private.myorg.io&#34;</span><span style="color:#5af78e">\]</span></span></span></code></pre></div>
<p>EXAM TIP: As there is no Internet access provided during Red Hat exams, you may have to access a network-based registry to download images.</p>
<h3 id="viewing-podman-configuration-and-version">Viewing Podman Configuration and Version</h3>
<ul>
<li>The podman command references various system runtime and configuration files and runs certain Linux commands in the background to gather and display information.</li>
<li>For instance, it looks for registries and storage data in the system-wide and per-user configuration files, pulls memory information from the <em>/proc/meminfo</em> file, executes <code>uname -r</code>to obtain the kernel version, and so on.</li>
<li>podman&rsquo;s <code>info</code> subcommand shows all this information.</li>
</ul>
<p>Here is a sample when this command is executed as a normal
user (user1):</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[[</span>user1@server10 root<span style="color:#ff6ac1">]</span>$ podman info
</span></span><span style="display:flex;"><span> ERRO<span style="color:#ff6ac1">[</span>0000<span style="color:#ff6ac1">]</span> XDG_RUNTIME_DIR directory <span style="color:#5af78e">&#34;/run/user/0&#34;</span> is not owned by the current user<span style="color:#ff6ac1">](</span>&lt;<span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman info
</span></span><span style="display:flex;"><span> host:
</span></span><span style="display:flex;"><span>  arch: amd64
</span></span><span style="display:flex;"><span>  buildahVersion: 1.33.8
</span></span><span style="display:flex;"><span>  cgroupControllers:
</span></span><span style="display:flex;"><span>  - memory
</span></span><span style="display:flex;"><span>  - pids
</span></span><span style="display:flex;"><span>  cgroupManager: systemd
</span></span><span style="display:flex;"><span>  cgroupVersion: v2
</span></span><span style="display:flex;"><span>  conmon:
</span></span><span style="display:flex;"><span> ...</span></span></code></pre></div>
<ul>
<li>
<p>Re-run the command as root (preceded by sudo if running as user1) and compare the values for the settings &ldquo;rootless&rdquo; under host and &ldquo;ConfigFile&rdquo; and &ldquo;ImageStore&rdquo; under store.</p>
</li>
<li>
<p>The differences lie between where the root and rootless (normal) users store and obtain configuration data, the number of container images they have locally available, and so on.</p>
</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># podman info</span>
</span></span><span style="display:flex;"><span> host:
</span></span><span style="display:flex;"><span>  arch: amd64
</span></span><span style="display:flex;"><span>  buildahVersion: 1.33.8
</span></span><span style="display:flex;"><span>  cgroupControllers:
</span></span><span style="display:flex;"><span>  - cpuset
</span></span><span style="display:flex;"><span>  - cpu
</span></span><span style="display:flex;"><span>  - io
</span></span><span style="display:flex;"><span>  - memory
</span></span><span style="display:flex;"><span>  - hugetlb
</span></span><span style="display:flex;"><span>  - pids
</span></span><span style="display:flex;"><span>  - rdma
</span></span><span style="display:flex;"><span>  - misc
</span></span><span style="display:flex;"><span>...</span></span></code></pre></div>
<p>Similarly, you can run the podman command as follows to check its
version:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># podman version</span>
</span></span><span style="display:flex;"><span> Client:       Podman Engine
</span></span><span style="display:flex;"><span> Version:      4.9.4-rhel
</span></span><span style="display:flex;"><span> API Version:  4.9.4-rhel
</span></span><span style="display:flex;"><span> Go Version:   go1.21.11 <span style="color:#ff6ac1">(</span>Red Hat 1.21.11-1.el9_4<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Built:        Mon Jul  <span style="color:#ff9f43">1</span> 03:27:14 <span style="color:#ff9f43">2024</span>
</span></span><span style="display:flex;"><span> OS/Arch:      linux/amd64</span></span></code></pre></div>
<h3 id="image-management-1">Image Management</h3>
<p>Container images</p>
<ul>
<li>Are available from numerous private and public registries.</li>
<li>They are pre-built for a variety of use cases.</li>
<li>You can search through registries to find the one that suits your needs.</li>
<li>You can examine their metadata before downloading them for consumption.</li>
<li>Downloaded images can be removed when no longer needed to conserve local storage.</li>
<li>The same pair of commands&mdash;<code>podman</code> and <code>skopeo</code>&mdash;is employed for these operations.</li>
</ul>
<h3 id="lab-search-examine-download-and-remove-an-image">Lab: Search, Examine, Download, and Remove an Image</h3>
<ul>
<li>Log in to the registry.access.redhat.com registry</li>
<li>Look for an image called <em>mysql-80</em> in the registry, examine its details, pull it to your system, confirm the retrieval, and finally erase it from the local storage.</li>
</ul>
<p>1. Log in to the specified Red Hat registry:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman login registry.redhat.io</span></span></code></pre></div>
<p>2. Confirm a successful login:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman login registry.redhat.io --get-login</span></span></code></pre></div>
<p>3. Find the mysql-80 image in the specified registry. Add the
<code>--no-trunc</code> option to view full output.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman search registry.redhat.io/mysql-80 --no-trunc
</span></span><span style="display:flex;"><span> NAME                                     DESCRIPTION
</span></span><span style="display:flex;"><span> registry.redhat.io/rhel8/mysql-80        This container image provides a containerized packaging of the MySQL mysqld daemon and client application. The  mysqld server daemon accepts connections from clients and provides access to content from MySQL databases on behalf of the clients.
</span></span><span style="display:flex;"><span>...</span></span></code></pre></div>
<p>4. Select the second image rhel9/mysql-80 for this exercise. Inspect the image without downloading it using skopeo inspect. A long output
will be generated. The command uses the docker:// mechanism to access
the image.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ skopeo inspect docker://registry.redhat.io/rhel9/mysql-80
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#5af78e">&#34;Name&#34;</span>: <span style="color:#5af78e">&#34;registry.redhat.io/rhel9/mysql-80&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#5af78e">&#34;Digest&#34;</span>: <span style="color:#5af78e">&#34;sha256:247903d2103a3c1db9401f6340ecdcd97c6244480b7a3419e6303dda650491dc&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#5af78e">&#34;RepoTags&#34;</span>: <span style="color:#ff6ac1">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-190&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-190.1655192188&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-190.1655192188-source&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-190-source&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-197&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-197-source&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-206&#34;</span>,
</span></span><span style="display:flex;"><span>...</span></span></code></pre></div>
<p>Output:</p>
<ul>
<li>
<p>Shows older versions under RepoTags</p>
</li>
<li>
<p>Creation time for the latest version</p>
</li>
<li>
<p>Build date of the image</p>
</li>
<li>
<p>description</p>
</li>
<li>
<p>other information.</p>
</li>
<li>
<p>It is a good practice to analyze the metadata of an image prior to downloading and consuming it.</p>
</li>
</ul>
<p>5. Download the image by specifying the fully qualified image name using podman pull:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman pull docker://registry.redhat.io/rhel9/mysql-80
</span></span><span style="display:flex;"><span> Trying to pull registry.redhat.io/rhel9/mysql-80:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob 846c0bdf4e30 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying blob cc296d75b612 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying blob db22e630b1c7 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config b5782120a3 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures
</span></span><span style="display:flex;"><span> b5782120a320e5915d86555e661c357cfa56dd8320ba4c54a58caa1e1c91925f</span></span></code></pre></div>
<p>6. List the image to confirm the retrieval using podman images:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman images
</span></span><span style="display:flex;"><span> REPOSITORY                         TAG         IMAGE ID      CREATED      SIZE
</span></span><span style="display:flex;"><span> registry.redhat.io/rhel9/mysql-80  latest      b5782120a320  <span style="color:#ff9f43">2</span> weeks ago  <span style="color:#ff9f43">555</span> MB</span></span></code></pre></div>
<p>7. Display the image&rsquo;s details using <code>podman inspect</code>:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman inspect mysql-80
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>
</span></span><span style="display:flex;"><span>     <span style="color:#ff6ac1">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#5af78e">&#34;Id&#34;</span>: <span style="color:#5af78e">&#34;b5782120a320e5915d86555e661c357cfa56dd8320ba4c54a58caa1e1c91925f&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#5af78e">&#34;Digest&#34;</span>: <span style="color:#5af78e">&#34;sha256:247903d2103a3c1db9401f6340ecdcd97c6244480b7a3419e6303dda650491dc&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#5af78e">&#34;RepoTags&#34;</span>: <span style="color:#ff6ac1">[</span>
</span></span><span style="display:flex;"><span>               <span style="color:#5af78e">&#34;registry.redhat.io/rhel9/mysql-80:latest&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#ff6ac1">]</span>,</span></span></code></pre></div>
<p>8. Remove the mysql-80 image from local storage:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman rmi mysql-80
</span></span><span style="display:flex;"><span> Untagged: registry.redhat.io/rhel9/mysql-80:latest
</span></span><span style="display:flex;"><span> Deleted: b5782120a320e5915d86555e661c357cfa56dd8320ba4c54a58caa1e1c91925f</span></span></code></pre></div>
<ul>
<li>Shows the ID of the image after deletion.</li>
</ul>
<p>9. Confirm the removal:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman images
</span></span><span style="display:flex;"><span> REPOSITORY  TAG         IMAGE ID    CREATED     SIZE</span></span></code></pre></div>
<h3 id="containerfile">Containerfile</h3>
<ul>
<li>Can build a custom image by outlining the steps you need to be run in a file called Containerfile.</li>
<li>The podman command can then be used to read those instructions and executes them to produce a new image.</li>
<li>File name <em>containerfile</em> is widespread; but you can use any name of your liking.</li>
</ul>
<p>Instructions that may be utilized inside a Containerfile to perform specific functions during the build process:</p>
<p><strong>CMD</strong></p>
<ul>
<li>Runs a command</li>
</ul>
<p><strong>COPY</strong></p>
<ul>
<li>Copies files to the specified location</li>
</ul>
<p><strong>ENV</strong></p>
<ul>
<li>Defines environment variables to be used during the build process</li>
</ul>
<p><strong>EXPOSE</strong></p>
<ul>
<li>A port number that will be opened when a container is launched using this image</li>
</ul>
<p><strong>FROM</strong></p>
<ul>
<li>Identifies the base container image to use</li>
</ul>
<p><strong>RUN</strong></p>
<ul>
<li>Executes the specified commands</li>
</ul>
<p><strong>USER</strong></p>
<ul>
<li>Defines a non-root user to run the commands as</li>
</ul>
<p><strong>WORKDIR</strong></p>
<ul>
<li>Sets the working directory. This directory is automatically created if it does not already exist.</li>
</ul>
<p>A sample container file is presented below:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ vim containerfile</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#78787e"># Use RHEL9 base image</span>
</span></span><span style="display:flex;"><span> FROM registry.redhat.io/ubi9/ubi
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Install Apache web server software</span>
</span></span><span style="display:flex;"><span> RUN dnf -y install httpd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Copy the website</span>
</span></span><span style="display:flex;"><span> COPY ./index.html /var/www/html/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Expose Port 80/tcp</span>
</span></span><span style="display:flex;"><span> EXPOSE <span style="color:#ff9f43">80</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Start Apache web server</span>
</span></span><span style="display:flex;"><span> CMD <span style="color:#ff6ac1">[</span><span style="color:#5af78e">&#34;httpd&#34;</span><span style="color:#ff6ac1">]</span></span></span></code></pre></div>
<ul>
<li>The index.html file may contain a basic statement such as &ldquo;This is a custom-built Apache web server container image based on RHEL 9&rdquo;.</li>
</ul>
<h3 id="lab-use-containerfile-to-build-image">Lab: Use Containerfile to Build Image</h3>
<ul>
<li>Use a containerfile to build a custom image based on the latest version of the RHEL 9 universal base image (ubi) available from a Red Hat container registry.</li>
<li>Confirm the image creation.</li>
<li>Use the podman command for these activities.</li>
</ul>
<p>1. Log in to the specified Red Hat registry:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman login registry.redhat.io
</span></span><span style="display:flex;"><span> Authenticating with existing credentials <span style="color:#ff6ac1">for</span> registry.redhat.io
</span></span><span style="display:flex;"><span> Existing credentials are valid. Already logged in to registry.redhat.io</span></span></code></pre></div>
<p>2. Confirm a successful login:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman login registry.redhat.io --get-login</span></span></code></pre></div>
<p>3. Create a file called containerfile with the following code:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ vim containerfile2</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#78787e"># Use RHEL9 base image</span>
</span></span><span style="display:flex;"><span> FROM registry.redhat.io/ubi9/ubi
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Count the number of characters</span>
</span></span><span style="display:flex;"><span> CMD <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;RHCSA exam is hands-on.&#34;</span> | wc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Copy a local file to /tmp</span>
</span></span><span style="display:flex;"><span> COPY ./testfile /tmp</span></span></code></pre></div>
<p>4. Create a file called testfile with some random text in it and place it in the same directory as the containerfile.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;boo bee doo bee doo&#34;</span> &gt;&gt; testfile
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ cat testfile 
</span></span><span style="display:flex;"><span> boo bee doo bee doo</span></span></code></pre></div>
<p>5. Build an image by specifying the containerfile name and an image tag such as <code>ubi9-simple-image</code>. The period character at the end represents the current directory and this is where both containerfile and testfile are located.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman image build -f containerfile2 -t ubi9-simple-image .
</span></span><span style="display:flex;"><span> STEP 1/3: FROM registry.redhat.io/ubi9/ubi
</span></span><span style="display:flex;"><span> Trying to pull registry.redhat.io/ubi9/ubi:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob cc296d75b612 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config 159a1e6731 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures
</span></span><span style="display:flex;"><span> STEP 2/3: CMD <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;RHCSA exam is hands-on.&#34;</span> | wc
</span></span><span style="display:flex;"><span> --&gt; 4c005bfd0b34
</span></span><span style="display:flex;"><span> STEP 3/3: COPY ./testfile /tmp
</span></span><span style="display:flex;"><span> COMMIT ubi9-simple-image
</span></span><span style="display:flex;"><span> --&gt; a2797b06a129
</span></span><span style="display:flex;"><span> Successfully tagged localhost/ubi9-simple-image:latest
</span></span><span style="display:flex;"><span> a2797b06a1294ed06edab2ba1c21d2bddde3eb3af1d8ed286781837f62992622</span></span></code></pre></div>
<p>6. Confirm image creation:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman image ls
</span></span><span style="display:flex;"><span> REPOSITORY                   TAG         IMAGE ID      CREATED        SIZE
</span></span><span style="display:flex;"><span> localhost/ubi9-simple-image  latest      a2797b06a129  <span style="color:#ff9f43">2</span> minutes ago  <span style="color:#ff9f43">220</span> MB
</span></span><span style="display:flex;"><span> registry.redhat.io/ubi9/ubi  latest      159a1e67312e  <span style="color:#ff9f43">2</span> weeks ago    <span style="color:#ff9f43">220</span> MB</span></span></code></pre></div>
<p>Output:</p>
<ul>
<li>
<p>downloaded image</p>
</li>
<li>
<p>new custom image along with their image IDs, creation time, and size.</p>
</li>
<li>
<p>Do not remove the custom image yet as you will be using it to launch a container in the next section.</p>
</li>
</ul>
<h3 id="basic-container-management">Basic Container Management</h3>
<ul>
<li>Starting, stopping, listing, viewing information about, and deleting them.</li>
<li>Depending on the use case, containers can be launched in different ways.</li>
<li>They can:
<ul>
<li>Have a name assigned or be nameless</li>
<li>Have a terminal session opened for interaction</li>
<li>Execute an entry point command (the command specified at the launch time) and be auto-terminated right after.</li>
<li>etc.</li>
</ul>
</li>
<li>Running containers can be stopped and restarted, or discarded if no longer needed.</li>
<li>The podman command is utilized to start containers and manage their lifecycle.</li>
<li>This command is also employed to list stopped and running containers, and view their details.</li>
</ul>
<h3 id="lab-run-interact-with-and-remove-a-named-container">Lab: Run, Interact with, and Remove a Named Container</h3>
<ul>
<li>Run a container based on the latest version of the RHEL 8 ubi available in the Red Hat container registry.</li>
<li>Assign this container a name and run a few native Linux commands in a terminal window interactively.</li>
<li>Exit out of the container to mark the completion of the exercise.</li>
</ul>
<p>1. Launch a container using ubi8 (RHEL 8). Name this container rhel8-base-os and open a terminal session for interaction:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman run -ti --name rhel8-base-os ubi8
</span></span><span style="display:flex;"><span> Resolved <span style="color:#5af78e">&#34;ubi8&#34;</span> as an <span style="color:#ff5c57">alias</span> <span style="color:#ff6ac1">(</span>/etc/containers/registries.conf.d/001-rhel-shortnames.conf<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Trying to pull registry.access.redhat.com/ubi8:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob 8694db102e5b <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config 269749ad51 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># </span></span></span></code></pre></div>
<ul>
<li>
<p>Downloaded the latest version of the specified image automatically even though no FQIN was provided.</p>
<ul>
<li>This is because it searched through the registries listed in the <em>/etc/containers/registries.conf</em> file and retrieved the image from wherever it found it first (registry.access.redhat.com).</li>
</ul>
</li>
<li>
<p>Opened a terminal session inside the container as the root user to interact with the containerized RHEL 8 OS.</p>
</li>
<li>
<p>The container ID is reflected as the hostname in the container&rsquo;s command prompt (last line in the output). This is an auto-generated ID.</p>
</li>
<li>
<p>If you encounter any permission issues, delete the /etc/docker directory (if it exists) and try again.</p>
</li>
</ul>
<p>2. Run a few basic commands such as pwd, ls, cat, and date inside the
container for verification:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pwd</span>
</span></span><span style="display:flex;"><span> /
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls</span>
</span></span><span style="display:flex;"><span> bin   dev  home  lib64	     media  opt   root	sbin  sys  usr
</span></span><span style="display:flex;"><span> boot  etc  lib	 lost+found  mnt    proc  run	srv   tmp  var
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /etc/redhat-release</span>
</span></span><span style="display:flex;"><span> Red Hat Enterprise Linux release 8.10 <span style="color:#ff6ac1">(</span>Ootpa<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># date</span>
</span></span><span style="display:flex;"><span> Thu Aug  <span style="color:#ff9f43">1</span> 21:09:13 UTC <span style="color:#ff9f43">2024</span></span></span></code></pre></div>
<p>3. Close the terminal session when done:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># exit</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">exit</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ </span></span></code></pre></div>
<p>4. Delete the container using podman rm:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman rm rhel8-base-os
</span></span><span style="display:flex;"><span> rhel8-base-os</span></span></code></pre></div>
<p>Confirm the removal with podman ps.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES</span></span></code></pre></div>
<h3 id="lab-run-a-nameless-container-and-auto-remove-it-after-entry-point-command-execution">Lab: Run a Nameless Container and Auto-Remove it After Entry Point Command Execution</h3>
<ul>
<li>Launch a container based on the latest version of RHEL 7 ubi available in a Red Hat container registry.
<ul>
<li>This image provides the base operating system layer to deploy containerized applications.</li>
</ul>
</li>
<li>Enter a Linux command at the command line for execution inside the container as an entry point command and the container should be automatically deleted right after that.</li>
</ul>
<p>1. Start a container using ubi7 (RHEL 7) and run ls as an entry point command. Remove the container as soon as the entry point command has finished running.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman run --rm ubi7 ls
</span></span><span style="display:flex;"><span> Resolved <span style="color:#5af78e">&#34;ubi7&#34;</span> as an <span style="color:#ff5c57">alias</span> <span style="color:#ff6ac1">(</span>/etc/containers/registries.conf.d/001-rhel-shortnames.conf<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Trying to pull registry.access.redhat.com/ubi7:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob 7f2c2c4492b6 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config a084eb42a5 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures
</span></span><span style="display:flex;"><span> bin
</span></span><span style="display:flex;"><span> boot
</span></span><span style="display:flex;"><span> dev
</span></span><span style="display:flex;"><span> etc
</span></span><span style="display:flex;"><span> home
</span></span><span style="display:flex;"><span>...</span></span></code></pre></div>
<p>2. Confirm the container removal with podman ps:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES</span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<a href="https://linuxreader.com">
  <img src="/images/linuxreader.svg" alt="Linux Reader" >
</a>

        </div>
        <script>
          window.index_js_url="/searchindex.en.js?1741647087";
        </script>
        <search><form action="/search/" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/js/auto-complete.js?1741647087" defer></script>
        <script src="/js/lunr/lunr.min.js?1741647087" defer></script>
        <script src="/js/lunr/lunr.stemmer.support.min.js?1741647087" defer></script>
        <script src="/js/lunr/lunr.multi.min.js?1741647087" defer></script>
        <script src="/js/lunr/lunr.en.min.js?1741647087" defer></script>
        <script src="/js/search.js?1741647087" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation">
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-shortcutmenu-home" class="R-sidebarmenu">
          <ul class="enlarge morespace collapsible-menu">
            <li class="parent " data-nav-id="/linux/"><a class="padding" href="/linux/"><i class="fa-fw fas fa-terminal"></i> Linux</a><ul id="R-subsections-e2509333b88222aa06f1b5fc60b020b2" class="collapsible-menu">
            <li class="" data-nav-id="/linux/fedora/"><a class="padding" href="/linux/fedora/"><i class="fa-fw fas fa-angle-down"></i> Fedora</a><ul id="R-subsections-89434e96479d9689b11efd9b3cb12acc" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-id="/linux/rhcsa/"><a class="padding" href="/linux/rhcsa/"><i class="fa-fw fas fa-angle-down"></i> RHCSA</a><ul id="R-subsections-2c51772c3489e4d820f23d680b3a1d70" class="collapsible-menu">
            <li class="active hidden " data-nav-id="/linux/rhcsa/rhcsa-notes/working-with-images-and-containers/"><a class="padding" href="/linux/rhcsa/rhcsa-notes/working-with-images-and-containers/"></a></li>
            <li class="" data-nav-id="/linux/rhcsa/rhcsa-exam-environment/"><a class="padding" href="/linux/rhcsa/rhcsa-exam-environment/">RHCSA Exam Environment Guide</a></li>
            <li class="" data-nav-id="/linux/rhcsa/rhcsa-notes/"><a class="padding" href="/linux/rhcsa/rhcsa-notes/">RHCSA Notes</a></li>
            <li class="" data-nav-id="/linux/rhcsa/rhcsa-study-tracker/"><a class="padding" href="/linux/rhcsa/rhcsa-study-tracker/">RHCSA Study Tracker</a></li>
            <li class="" data-nav-id="/linux/rhcsa/rhcsa-vagrant-lab-setup/"><a class="padding" href="/linux/rhcsa/rhcsa-vagrant-lab-setup/">RHCSA Vagrant Lab Setup</a></li>
            <li class="" data-nav-id="/linux/rhcsa/using-man-pages/"><a class="padding" href="/linux/rhcsa/using-man-pages/">You Need to Learn Man Pages</a></li></ul></li></ul></li>
            <li class="" data-nav-id="/networking/"><a class="padding" href="/networking/"><i class="fa-fw fas fa-network-wired"></i> Networking</a><ul id="R-subsections-d7c3359b808d40df139a3bb9f9073483" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/tools/"><a class="padding" href="/tools/"><i class="fa-fw fas fa-screwdriver-wrench"></i> Tools</a><ul id="R-subsections-bf1399820dde3dd110e03ace4147ff86" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div id="R-shortcutmenu-shortcuts" class="R-sidebarmenu">
          <div class="nav-title padding">More</div>
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="https://github.com/tdavetech"><a class="padding" href="https://github.com/tdavetech" target="_blank"><i class='fab fa-fw fa-github'></i> GitHub</a></li>
            <li class="" data-nav-id="/contact/"><a class="padding" href="/contact/"><i class='fas fa-fw fa-envelope'></i> Contact</a></li>
            <li class="" data-nav-id="/now/"><a class="padding" href="/now/"><i class='fas fa-fw fa-play'></i> Now</a></li>
            <li class="" data-nav-id="/booknotes/"><a class="padding" href="/booknotes/"><i class='fas fa-fw fa-file'></i> Book Notes</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-en" value="#R-select-language-en" data-url="/linux/rhcsa/rhcsa-notes/working-with-images-and-containers/" lang="en-us" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-select-variant-amoled" value="amoled" selected>Amoled</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter">
        <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
          </div>
        </div>
      </div>
    </aside>
    <script src="/js/clipboard.min.js?1741647087" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1741647087" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/d3/d3-color.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-drag.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-ease.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-selection.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-timer.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-transition.min.js?1741647087" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1741647087" defer></script>
    <script src="/js/js-yaml.min.js?1741647087" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/theme.js?1741647087" defer></script>
  </body>
</html>
