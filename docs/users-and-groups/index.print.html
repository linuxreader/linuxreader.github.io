<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.152.2">
    <meta name="generator" content="Relearn 8.2.0+d150cc8909ed7836ff5d545e76544f6923ffacf5">
    <meta name="description" content="Advanced User ManagementPassword aging, group and user manamentBasic User ManagementManage users and groups">
    <meta name="author" content="David Thomas">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Users and Groups :: Linux Reader">
    <meta name="twitter:description" content="Advanced User ManagementPassword aging, group and user manamentBasic User ManagementManage users and groups">
    <meta property="og:url" content="http://linuxreader.com/users-and-groups/">
    <meta property="og:site_name" content="Linux Reader">
    <meta property="og:title" content="Users and Groups :: Linux Reader">
    <meta property="og:description" content="Advanced User ManagementPassword aging, group and user manamentBasic User ManagementManage users and groups">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="Users and Groups :: Linux Reader">
    <meta itemprop="description" content="Advanced User ManagementPassword aging, group and user manamentBasic User ManagementManage users and groups">
    <meta itemprop="wordCount" content="16">
    <title>Users and Groups :: Linux Reader</title>
    <link href="http://linuxreader.com/users-and-groups/" rel="canonical" type="text/html" title="Users and Groups :: Linux Reader">
    <link href="/users-and-groups/index.xml" rel="alternate" type="application/rss+xml" title="Users and Groups :: Linux Reader">
    <link href="/images/favicon.svg?1764111909" rel="icon" type="image/svg+xml">
    <link href="/css/auto-complete/auto-complete.min.css?1764111909" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1764111909" defer></script>
    <script src="/js/search-lunr.min.js?1764111909" defer></script>
    <script src="/js/search.min.js?1764111909" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1764111909";
    </script>
    <script src="/js/lunr/lunr.min.js?1764111909" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1764111909" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1764111909" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1764111909" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1764111909" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1764111909" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1764111909" rel="stylesheet">
    <link href="/css/theme.min.css?1764111909" rel="stylesheet">
    <link href="/css/format-print.min.css?1764111909" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/users-and-groups\/';
      window.relearn.relBasePath='..';
      window.relearn.relBaseUri='..';
      window.relearn.absBaseUri='http:\/\/linuxreader.com';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'oled' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script><style>
:root {
    --MENU-WIDTH-S: 14.375rem;
    --MENU-WIDTH-M: 14.375rem;
    --MENU-WIDTH-L: 18.75rem;
    --MAIN-WIDTH-MAX: 80rem;
    font-size: 1.2rem;
}
</style>

  </head>
  <body class="mobile-support print" data-url="/users-and-groups/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/tools/using-man-pages/" title="You Need to Learn Man Pages (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"> 
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            Users and Groups
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/users-and-groups/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/users-and-groups/advanced-user-management/" title="Advanced User Management (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>







          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable users-and-groups" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="users-and-groups">Users and Groups</h1>

<div class="children children-type-card children-sort-"><ul class="card-container">
<li>
  <article class="card card-popout" aria-labelledby="R-card-e637481886d82806891cb13dee91046e">
    <div class="card-content">
      <div class="card-title" id="R-card-e637481886d82806891cb13dee91046e">
        <a href="/users-and-groups/advanced-user-management/">
        Advanced User Management
        </a>
      </div>
      <div class="card-content-text">
          <p>
Password aging, group and user manament
      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-09f9c80083860d9749d329f33d9643f8">
    <div class="card-content">
      <div class="card-title" id="R-card-09f9c80083860d9749d329f33d9643f8">
        <a href="/users-and-groups/basic-user-management/">
        Basic User Management
        </a>
      </div>
      <div class="card-content-text">
          <p>
Manage users and groups
      </div>
    </div>
  </article>
</li>
</ul>
</div>

  <footer class="footline">
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Users and Groups</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="advanced-user-management">Advanced User Management</h1>

<h2 id="local-user-authentication-files">Local User Authentication Files</h2>
<ul>
<li>Three supported account types: root, normal, service</li>
<li>root
<ul>
<li>has full access to all services and administrative functions on the system.</li>
<li>created by default during installation.</li>
</ul>
</li>
<li>Normal
<ul>
<li>user-level privileges</li>
<li>cannot perform any administrative functions</li>
<li>can run applications and programs that have been authorized.</li>
</ul>
</li>
<li>Service
<ul>
<li>take care of their respective services, which include apache, ftp, mail, and chrony.</li>
</ul>
</li>
<li>User account information for local users is stored in four files that are located in the /etc directory.
<ul>
<li>passwd, shadow, group, and gshadow (user authentication files)</li>
<li>updated when a user or group account is created, modified, or deleted.</li>
<li>referenced to check and validate the credentials for a user at the time of their login attempt,</li>
<li>system creates their automatic backups by default as passwd-, shadow-, group-, and gshadow- in the /etc directory.</li>
</ul>
</li>
</ul>
<h3 id="etcpasswd">/etc/passwd</h3>
<ul>
<li>vital user login data</li>
<li>each row hold info for one user</li>
<li>644 permissions by default</li>
<li>7 feilds per row
<ul>
<li>login name
<ul>
<li>up to 255 characters</li>
<li>_ and - characters are supported</li>
<li>not recommended to include special characters and uppercase letters in login names.</li>
</ul>
</li>
<li>password
<ul>
<li>&ldquo;x&rdquo; in this field points to /etc/shadow for actual password.</li>
<li>&ldquo;*&rdquo; identifies disabled account</li>
<li>Can also include a hashed password (RHEL uses SHA-512 by default)</li>
</ul>
</li>
<li>UID
<ul>
<li>Number between 0 and 4.2 billion</li>
<li>UID 0 is reserved for root account</li>
<li>UIDs 1-200 are used by Red Hat for core service accounts</li>
<li>UIDs 201-999 are reserved for non-core service accounts</li>
<li>UIDs 1000 &lt; are for normal user accounts (starts at 1000 by default)</li>
</ul>
</li>
<li>GID
<ul>
<li>GID that matches entry in /etc/group (primary group)</li>
<li>Group for every user by default that matches UID</li>
</ul>
</li>
<li>Comments (GECOS) or (GCOS)
<ul>
<li>general comments about the user</li>
</ul>
</li>
<li>Home Directory
<ul>
<li>absolute path to the user home directory.</li>
</ul>
</li>
<li>Shell
<ul>
<li>absolute path of the shell file for the user&rsquo;s primary shell after logging in. (default = (/bin/bash))</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="etcshadow">/etc/shadow</h3>
<ul>
<li>no access permissions for any user (even root) (but owned by root)</li>
<li>secure password control (shadow password)</li>
<li>user passwords are hashed and stored in a more secure file /etc/shadow</li>
<li>limits on user passwords in terms of expiration, warning period, etc. applied on per-user basis</li>
<li>limits and other settings are defined in /etc/login.defs</li>
<li>user is initially checked in the passwd file for existence and then in the shadow file for authenticity.</li>
<li>contains user authentication and password aging information.</li>
<li>Each row in the file corresponds to one entry in the passwd file.</li>
<li>login names are used as a common key between the shadow and passwd files.</li>
<li>nine colon-separated fields per line entry.
<ul>
<li>1 Login name</li>
<li>2 Encrypted password
<ul>
<li>! at the beginning of this field shows that the user account is locked</li>
<li>if field is empty then user has passwordless entry</li>
</ul>
</li>
<li>3 last change
<ul>
<li>Number of days (lastchg) since the UNIX epoch, (UNIX time (January 01, 1970 00:00:00 UTC) when the password was last modified.</li>
<li>Empty field represents the passiveness of password aging features.</li>
<li>0 forces the user to change their password upon next login.</li>
</ul>
</li>
<li>4 minimum
<ul>
<li>number of days (mindays) that must elapse before the user is allowed to change their password</li>
<li>can be altered using the <code>chage</code> command with the <code>-m</code> option or the <code>passwd</code> command with the <code>-n</code> option.</li>
<li>0 or null in this field disables this feature.</li>
</ul>
</li>
<li>5 (Maximum)
<ul>
<li>maximum number of days (maxdays) before the user password expires and must be changed.</li>
<li>may be altered using the <code>chage</code> command with the <code>-M </code>option or the <code>passwd</code> command with the <code>-x</code> option.</li>
<li>null value here disables this feature along with other features such as the maximum password age, warning alerts, and the user inactivity period.</li>
</ul>
</li>
<li>6 Field 6 (Warning)
<ul>
<li>number of days (warndays) the user gets warnings for changing their password before it expires.</li>
<li>may be altered using the <code>chage</code> command with the <code>-W</code> option or the <code>passwd</code> command with the <code>-w</code> option.</li>
<li>0 or null in this field disables this feature.</li>
</ul>
</li>
<li>7 Password Expiry)
<ul>
<li>maximum allowable number of days for the user to be able to log in with the expired password. (inactivity period).</li>
<li>may be altered using the <code>chage</code> command with the <code>-I</code> option or the <code>passwd</code> command with the <code>-i</code> option.</li>
<li>empty field disables this feature.</li>
</ul>
</li>
<li>8 (Account Expiry)
<ul>
<li>number of days since the UNIX time when the user account will expire and no longer be available.</li>
<li>may be altered using the chage command with the <code>-E</code> option.</li>
<li>empty field disables this feature.</li>
</ul>
</li>
<li>9 (Reserved): Reserved for future use.</li>
</ul>
</li>
</ul>
<h3 id="etcgroup">/etc/group</h3>
<ul>
<li>plaintext file and contains critical group information.</li>
<li>644 permissions by default and owned by root.</li>
<li>Each row in the file stores information for one group entry.</li>
<li>Every user on the system must be a member of at least one group (User Private Group (UPG)).</li>
<li>a group name matches the username it is associated with by default</li>
<li>four colon-separated fields per line entry.
<ul>
<li>Field 1 (Group Name):
<ul>
<li>Holds a group name that must begin with a letter. Group names with up to 255 characters, including the</li>
<li>uppercase, underscore (_) and hyphen (-) characters, are also supported. (not recommended)</li>
</ul>
</li>
<li>Field 2 (Encrypted Password):
<ul>
<li>Can be empty or contain an ‚Äúx‚Äù (points to the /etc/gshadow file for the actual password), or a hashed group-level password.</li>
<li>can set a password on a group for non-members to be able to change their group identity temporarily using the <code>newgrp </code>command.</li>
<li>non-members must enter the correct password in order to do so.</li>
</ul>
</li>
<li>Field 3 (GID):
<ul>
<li>Holds a GID, that is also placed in the GID field of the passwd file.</li>
<li>By default, groups are created with GIDs starting at 1000 and with the same name as the username.</li>
<li>system allows several users to belong to a single group</li>
<li>also allows a single user to be a member of multiple groups at the same time.</li>
</ul>
</li>
<li>Field 4 (Group Members):
<ul>
<li>Lists the membership for the group. (user‚Äôs primary group is always defined in the GID field of the passwd file.)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="etcgshadow">/etc/gshadow</h3>
<ul>
<li>no access permissions for any user (even root)</li>
<li>group passwords are hashed and stored</li>
<li>group names are used as a common key between the gshadow and group files.</li>
<li>000 permissions and owned by root</li>
<li>four colon-separated fields
<ul>
<li>Field 1 (Group Name):
<ul>
<li>Consists of a group name as appeared in the group file.</li>
</ul>
</li>
<li>Field 2 (Encrypted Password):
<ul>
<li>Can contain a hashed password, which may be set with the gpasswd command for non-group members to access the group temporarily using the <code>newgrp</code> command.</li>
<li>single exclamation mark (!) or a null value in this field allows group members password-less access and restricts non-members from switching into this group.</li>
</ul>
</li>
<li>Field 3 (Group Administrators):
<ul>
<li>Lists usernames of group administrators that are authorized to add or remove members with the gpasswd command.</li>
</ul>
</li>
<li>Field 4 (Members):
<ul>
<li>comma-separated list of members.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="gpasswd-command"><code>gpasswd</code> command:</h3>
<ul>
<li>add group administrators.</li>
<li>add or delete group members.
<ul>
<li>assign or revoke a group-level password.</li>
<li>disable the ability of the newgrp command to access a group.</li>
<li>picks up the default values from the /etc/login.defs file.</li>
</ul>
</li>
</ul>
<h3 id="useradd-and-logindefs-configuration-files">useradd and login.defs configuration files</h3>
<h3 id="useradd-command"><code>useradd</code> command</h3>
<ul>
<li>picks up the default values from the /etc/default/useradd and /etc/login.defs files for any options that are not specified at the command line when executing it.</li>
<li>login.defs file is also consulted by the usermod, userdel, chage, and passwd commands</li>
<li>Both files store several defaults including those that affect the password length and password lifecycle.
/etc/default/useradd Default Directives:</li>
<li>starting GID (GROUP) (provided the USERGROUPS_ENAB directive in the login.defs file is set to no)</li>
<li>home directory location (HOME)</li>
<li>number of inactivity days between password expiry and permanent account disablement (INACTIVE)</li>
<li>account expiry date (EXPIRE),</li>
<li>login shell (SHELL),</li>
<li>skeleton directory location to copy user initialization files from (SKEL)</li>
<li>whether to create mail spool directory (CREATE_MAIL_SPOOL)</li>
</ul>
<h3 id="etclogindefs-default-directives">/etc/login.defs default directives:</h3>
<p>MAIL_DIR</p>
<ul>
<li>mail directory location</li>
</ul>
<p>PASS_MAX_DAYS, PASS_MIN_DAYS, PASS_MIN_LEN, and PASS_WARN_AGE</p>
<ul>
<li>password aging attributes.</li>
</ul>
<p>UID_MIN, UID_MAX, GID_MIN, and GID_MAX</p>
<ul>
<li>ranges of UIDs and GIDs to be allocated to new users and groups</li>
</ul>
<p>SYS_UID_MIN, SYS_UID_MAX, SYS_GID_MIN, and SYS_GID_MAX</p>
<ul>
<li>ranges of UIDs and GIDs to be allocated to new service users and groups</li>
</ul>
<p>CREATE_HOME</p>
<ul>
<li>whether to create a home directory</li>
</ul>
<p>UMASK</p>
<ul>
<li>permissions to be set on the user home directory at creation based on this umask value</li>
</ul>
<p>USERGROUPS_ENAB</p>
<ul>
<li>whether to delete a user‚Äôs group (at the time of user deletion) if it contains no more members</li>
</ul>
<p>ENCRYPT_METHOD</p>
<ul>
<li>encryption method for user passwords</li>
</ul>
<h2 id="password-aging-attributes">Password Aging attributes</h2>
<ul>
<li>Can be done for an individual user or applied to all users.</li>
<li>Can prevent users from logging in to the system by locking their access for a period of time or permanently.</li>
<li>Must be performed by a user with elevated privileges of the root user.</li>
<li>Normal users may be allowed access to privileged commands by defining them appropriately in a configuration file.</li>
<li>Each file that exists on the system regardless of its type has an owning user and an owning group.</li>
<li>every file that a user creates is in the ownership of that user.</li>
<li>ownership may be changed and given to another user by a super user.</li>
</ul>
<h3 id="password-aging-and-management">Password Aging and management</h3>
<ul>
<li>Setting restrictions on password expiry, account disablement, locking and unlocking users, and password change frequency.</li>
<li>Can choose to inactivate it completely for an individual user.</li>
<li>Stored in the /etc/shadow file (fields 4 to 8) and its default policies in the /etc/login.defs configuration file.</li>
<li>aging management tools‚Äî<code>chage</code> and <code>passwd</code>‚Äî</li>
<li><code>usermod</code> command can be used to implement two aging attributes (user expiry and password expiry) and lock and unlock user accounts.</li>
</ul>
<h3 id="chage-command">chage command</h3>
<ul>
<li>Set or alter password aging parameters on a user account.</li>
<li>Changes various fields in the shadow file</li>
<li>Switches
<ul>
<li>-d (&ndash;lastday)
<ul>
<li>Specifies an explicit date in the YYYY-MM-DD format, or the number of days since the UNIX time when the password was last modified. With -d 0, the user is forced to change the password at next login. It corresponds to field 3 in the shadow file.</li>
</ul>
</li>
<li>-E (&ndash;expiredate)
<ul>
<li>Sets an explicit date in the YYYY-MM-DD format, or the number of days since the UNIX time on which the user account is deactivated. This feature can be disabled with -E -1. It corresponds to the eighth field in the shadow file.</li>
</ul>
</li>
<li>-I (&ndash;inactive)
<ul>
<li>Defines the number of days of inactivity after the password expiry and before the account is locked. The user may be able to log in during this period with their expired password. This feature can be disabled with -I -1. It corresponds to field 7 in the shadow file.</li>
</ul>
</li>
<li>-l
<ul>
<li>Lists password aging attributes set on a user account.</li>
</ul>
</li>
<li>-m (&ndash;mindays)
<ul>
<li>Indicates the minimum number of days that must elapse before the password can be changed. A value of 0 allows the user to change their password at any time. It corresponds to field 4 in the shadow file.</li>
</ul>
</li>
<li>-M (&ndash;maxdays)
<ul>
<li>Denotes the maximum number of days of password validity before the user password expires and it must be changed. This feature can be disabled with -M -1. It corresponds to field 5 in the shadow file.</li>
</ul>
</li>
<li>-W (&ndash;warndays)
<ul>
<li>Designates the number of days for which the user gets alerts to change their password before it expires. It corresponds to field 6 in the shadow file.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="passwd-command">passwd command</h3>
<ul>
<li>set or modify a user‚Äôs password</li>
<li>modify the password aging attributes and</li>
<li>lock or unlock account</li>
<li>Switches
<ul>
<li>-d (&ndash;delete)
<ul>
<li>Deletes a user password</li>
<li>does not expire the user account.</li>
</ul>
</li>
<li>-e (&ndash;expire)
<ul>
<li>Forces a user to change their password upon next logon.</li>
<li>sets date to prior to Unix time</li>
</ul>
</li>
<li>-i (&ndash;inactive)
<ul>
<li>Defines the number of days of inactivity after the password expiry and before the account is locked. (field 7 in shadow file)</li>
</ul>
</li>
<li>-l (&ndash;lock)
<ul>
<li>Locks a user account.</li>
</ul>
</li>
<li>-n (&ndash;minimum)
<ul>
<li>Specifies the number of days that must elapse before the password can be changed. (field 4 in shadow file)</li>
</ul>
</li>
<li>-S (&ndash;status)
<ul>
<li>Displays the status information for a user.</li>
</ul>
</li>
<li>-u (&ndash;unlock)
<ul>
<li>Unlocks a locked user account.</li>
</ul>
</li>
<li>-w (&ndash;warning)
<ul>
<li>Designates the number of days for which the user gets alerts to change their password before it actually expires. (field 6 in shadow file)</li>
</ul>
</li>
<li>-x (&ndash;maximum)
<ul>
<li>Denotes the maximum number of days of password validity before the user password expires and it must be changed. (field 5 in shadow file)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="usermod-command">usermod command</h3>
<ul>
<li>Modify a user‚Äôs attribute</li>
<li>Lock or unlock their account</li>
<li>Switches
<ul>
<li>-L (&ndash;lock)
<ul>
<li>Locks a user account by placing a single exclamation mark (!) at the beginning of the password field and before the hashed password string.</li>
</ul>
</li>
<li>-U (&ndash;unlock)
<ul>
<li>Unlocks a user‚Äôs account by removing the exclamation mark (!) from the beginning of the password field.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="linux-groups-and-their-management">Linux Groups and their Management</h2>
<ul>
<li>/etc/group
<ul>
<li>group info</li>
</ul>
</li>
<li>/etc/login.defs
<ul>
<li>default policies</li>
</ul>
</li>
<li>/etc/gshadow
<ul>
<li>group administrator information and group-level passwords</li>
</ul>
</li>
<li>group management tools
<ul>
<li><code>groupadd</code>, <code>groupmod</code>, and <code>groupdel</code></li>
<li>create, alter, and erase groups</li>
</ul>
</li>
</ul>
<h3 id="groupadd-command">groupadd command</h3>
<ul>
<li>adds entries to the group and gshadow files for each group added to the system</li>
<li>picks up default values from /etc/login.defs</li>
<li>Switches
<ul>
<li>-g (&ndash;gid)
<ul>
<li>Specifies the GID to be assigned to the group</li>
</ul>
</li>
<li>-o (&ndash;non-unique)
<ul>
<li>Creates a group with a matching GID of an existing group. When two groups have an identical GID, members of both groups get identical rights on each other‚Äôs files. This should only be done in specific situations.</li>
</ul>
</li>
<li>-r
<ul>
<li>Creates a system group with a GID below 1000</li>
</ul>
</li>
<li>groupname
<ul>
<li>Specifies a group name</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="groupmod-command">groupmod command</h3>
<ul>
<li>syntax of this command is very similar to the groupadd with most options identical.</li>
<li>Additional flags
<ul>
<li>-n
<ul>
<li>change name of existing group</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="user-management">User Management</h2>
<h3 id="switching-users">Switching Users</h3>
<h4 id="su-command">su command</h4>
<p>Ctrl-d
- return to previous user
su -
- switch user with startup scripts
-c
- issue a command as a user without switching to them.</p>
<ul>
<li>root user can switch into any user account that exists on the system without being prompted for that user‚Äôs password.</li>
<li>switching into the root account to execute privileged actions is not recommended.</li>
</ul>
<h3 id="whoami-command">whoami command</h3>
<ul>
<li>show current user</li>
</ul>
<h3 id="logname-command">logname command</h3>
<ul>
<li>Identity of the user who originally logged in.</li>
</ul>
<h3 id="groupdel-command">groupdel command</h3>
<ul>
<li>removes entries for the specified group from both group and gshadow files.</li>
</ul>
<h3 id="doing-as-superuser-substitute-user">Doing as Superuser (substitute user)</h3>
<ul>
<li>Any normal user that requires privileged access to administrative commands or non-owning files is defined in the sudoers file.
<ul>
<li>File may be edited with a command called <code>visudo</code></li>
<li>Creates a copy of the file as sudoers.tmp and applies the changes there. After the visudo session is over, the updated updated file overwrites the original sudoers file and sudoers.tmp is deleted.</li>
<li>syntax
<ul>
<li>user1 ALL=(ALL) ALL</li>
<li>%dba ALL=(ALL) ALL
group is prefixed by %</li>
</ul>
</li>
<li>Make it so members are not prompted for password
<ul>
<li>user1 ALL=(ALL) NOPASSWD:ALL</li>
<li>%dba ALL=(ALL) NOPASSWD:ALL</li>
</ul>
</li>
<li>Limit access to a single command
<ul>
<li>user1 ALL=/usr/bin/cat</li>
<li>%dba ALL=/usr/bin/cat</li>
</ul>
</li>
</ul>
</li>
<li>too many entries can clutter sudoers file. Use aliases instead:
<ul>
<li>User_Alias
<ul>
<li>you can define a User_Alias called PKGADM for user1, user100, and user200. These users may or may not belong to the same Linux group.</li>
</ul>
</li>
<li>Cmnd_Alias
<ul>
<li>you can define a Cmnd_Alias called PKGCMD containing yum and rpm package management commands</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="sudo-command">sudo command</h3>
<ul>
<li>/etc/sudoers</li>
<li>/etc/sudoers.d/
<ul>
<li>drop-in directory
/var/log/secure</li>
<li>Sudo logs successful authentication and command data to here under the name of the user using the command.</li>
</ul>
</li>
</ul>
<h3 id="owning-user-and-owning-group">Owning User and Owning Group</h3>
<ul>
<li>Every file and directory has an owner.</li>
<li>Creator assumes ownership by default.</li>
<li>Every user is a member of one or more groups.</li>
<li>Owners group is also assigned to file or directory by default.</li>
</ul>
<h3 id="chown-command">chown command</h3>
<ul>
<li>alter the ownership for files and directories</li>
<li>Must have root privileges.</li>
<li>Can also change owning group.</li>
</ul>
<h3 id="chgrp-command">chgrp command</h3>
<ul>
<li>alter the owning group for files and directories</li>
<li>Must have root privileges.</li>
</ul>
<h2 id="advanced-user-management-labs">Advanced User Management Labs</h2>
<h3 id="lab-set-and-confirm-password-aging-with-chage-root">Lab: Set and Confirm Password Aging with chage (root)</h3>
<ol>
<li>Set password aging parameters for user100 to mindays (-m) 7, maxdays (-M) 28, and warndays (-W) 5:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chage -m <span style="color:#ff9f43">7</span> -M <span style="color:#ff9f43">28</span> -W <span style="color:#ff9f43">5</span> user100</span></span></code></pre></div>
<ol start="2">
<li>Confirm</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chage -l user100</span></span></code></pre></div>
<ol start="3">
<li>Set the account expiry to January 31, 2020</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chage -E 2020-01-31 user100</span></span></code></pre></div>
<ol start="4">
<li>Verify the new account expiry setting</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chage -l user100</span></span></code></pre></div>
<h3 id="lab-set-and-confirm-password-aging-with-passwd-root">Lab: Set and Confirm Password Aging with passwd (root)</h3>
<ol>
<li>Set password aging attributes for user200 to mindays 10, maxdays 90, and warndays 14:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>passwd -n <span style="color:#ff9f43">10</span> -x <span style="color:#ff9f43">90</span> -w <span style="color:#ff9f43">14</span> user200</span></span></code></pre></div>
<ol start="2">
<li>Confirm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>passwd -S user200</span></span></code></pre></div>
<ol start="3">
<li>Set the number of inactivity days to 5:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>passwd -i <span style="color:#ff9f43">5</span> user200</span></span></code></pre></div>
<ol start="4">
<li>Confirm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>passwd -S user200</span></span></code></pre></div>
<ol start="5">
<li>Ensure that the user is forced to change their password at next login:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>passwd -e user200</span></span></code></pre></div>
<ol start="6">
<li>Confirm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>passwd -S user200</span></span></code></pre></div>
<h3 id="lab-lock-and-unlock-a-user-account-with-usermod-and-passwd-root">Lab: Lock and Unlock a User Account with usermod and passwd (root)</h3>
<ol>
<li>Obtain the current password information for user200 from the shadow file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep user200 /etc/shadow</span></span></code></pre></div>
<ol start="2">
<li>Lock the account for user200:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>usermod -L user200 </span></span></code></pre></div>
<ol start="3">
<li>Confirm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep user200 /etc/shadow</span></span></code></pre></div>
<ol start="4">
<li>Unlock the account with either of the following:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>usermod -U user200
</span></span><span style="display:flex;"><span>or
</span></span><span style="display:flex;"><span>passwd -u user200</span></span></code></pre></div>
<ol start="5">
<li>confirm</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep user200 /etc/shadow</span></span></code></pre></div>
<h3 id="lab-create-a-group-and-add-members-root">Lab: Create a Group and Add Members (root)</h3>
<ol>
<li>Create the group linuxadm with GID 5000:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>groupadd -g <span style="color:#ff9f43">5000</span> linuxadm</span></span></code></pre></div>
<ol start="2">
<li>Create a group called dba with the same GID as that of group linuxadm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>groupadd -o -g <span style="color:#ff9f43">5000</span> dba</span></span></code></pre></div>
<ol start="3">
<li>Confirm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep linuxadm /etc/group
</span></span><span style="display:flex;"><span>grep dba /etc/group</span></span></code></pre></div>
<ol start="4">
<li>Add user1 as a secondary member of group dba using the <code>usermod </code>command. The existing membership for the user must remain intact.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>usermod -aG dba user1</span></span></code></pre></div>
<ol start="5">
<li>Verify the updated group membership information for user1 by extracting the relevant entry from the group file, and running the id and groups command for user1:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep dba /etc/group
</span></span><span style="display:flex;"><span>id user1
</span></span><span style="display:flex;"><span>groups user1</span></span></code></pre></div>
<h3 id="lab-modify-and-delete-a-group-account-root">Lab: Modify and Delete a Group Account (root)</h3>
<ol>
<li>Alter the name of linuxadm to sysadm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>groupmod -n sysadm linuxadm</span></span></code></pre></div>
<ol start="2">
<li>Change the GID of sysadm to 6000:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>groupmod -g <span style="color:#ff9f43">6000</span> sysadm</span></span></code></pre></div>
<ol start="3">
<li>Confirm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep sysadm /etc/group
</span></span><span style="display:flex;"><span>grep linuxadm /etc/group</span></span></code></pre></div>
<ol start="4">
<li>Delete sysadm group and confirm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>groupdel sysadm
</span></span><span style="display:flex;"><span>grep sysadm /etc/group</span></span></code></pre></div>
<h3 id="lab-to-switch-from-user1-assuming-you-are-logged-in-as-user1-into-root-without-executing-the-startup-scripts">Lab: To switch from user1 (assuming you are logged in as user1) into root without executing the startup scripts</h3>
<ol>
<li></li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>su</span></span></code></pre></div>
<ol start="2">
<li>switch to user100</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>su - user100</span></span></code></pre></div>
<ol start="3">
<li>See what whoami and logname reports now:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>whoami
</span></span><span style="display:flex;"><span>logname</span></span></code></pre></div>
<ol start="4">
<li>use su as follows and execute this privileged command to obtain desired results:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>su -c <span style="color:#5af78e">&#39;firewall-cmd --list-services&#39;</span></span></span></code></pre></div>
<h3 id="lab-add-user1-to-sudo-file-but-only-for-the-cat-command">Lab: Add user1 to sudo file but only for the cat command.</h3>
<ol>
<li>Open up /etc/sudoers and add the following:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>user1 <span style="color:#ff5c57">ALL</span><span style="color:#ff6ac1">=</span>/usr/bin/cat</span></span></code></pre></div>
<ol start="2">
<li>run cat as user1 with and without sudo:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat /etc/sudoers
</span></span><span style="display:flex;"><span>sudo cat /etc/sudoers</span></span></code></pre></div>
<h3 id="lab-add-user-and-command-aliases-to-the-sudoer-file">Lab: Add user and command aliases to the sudoer file.</h3>
<ol>
<li>Add the following to the bottom of the sudoers file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Cmnd_Alias <span style="color:#ff5c57">PKGCMD</span> <span style="color:#ff6ac1">=</span> /usr/bin/yum, /usr/bin/rpm
</span></span><span style="display:flex;"><span>User_Alias <span style="color:#ff5c57">PKGADM</span> <span style="color:#ff6ac1">=</span> user1, user100, user200 
</span></span><span style="display:flex;"><span>PKGADM <span style="color:#ff5c57">ALL</span><span style="color:#ff6ac1">=</span>PKGCMD</span></span></code></pre></div>
<ol start="2">
<li>Run rpm or yum with sudo as one of the users.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo yum </span></span></code></pre></div>
<h3 id="lab-take-a-look-at-examples-in-the-sudoers-file">Lab: Take a look at examples in the sudoers file.</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat /etc/sudoers</span></span></code></pre></div>
<h3 id="lab-viewing-owner-and-group-information">Lab: Viewing owner and group information</h3>
<ol>
<li>Create a file file1 as user1 in their home directory and exhibit the file‚Äôs long listing:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>touch file1
</span></span><span style="display:flex;"><span>ls -l file1</span></span></code></pre></div>
<ol start="2">
<li>View the corresponding UID and GID instead, you can specify the -n option with the command:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -ln file1</span></span></code></pre></div>
<h3 id="lab-modify-file-owner-and-owning-group">Lab: Modify File Owner and Owning Group</h3>
<ol>
<li>Change into the /tmp directory and create file10 and dir10:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">cd</span> /tmp
</span></span><span style="display:flex;"><span>touch file10
</span></span><span style="display:flex;"><span>mkdir dir10</span></span></code></pre></div>
<ol start="2">
<li>Check and validate that both attributes are set to user1:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l file10
</span></span><span style="display:flex;"><span>ls -ld dir10</span></span></code></pre></div>
<ol start="3">
<li>Set the ownership of file10 to user100 and confirm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo chown user100 file10
</span></span><span style="display:flex;"><span>ls -l file10</span></span></code></pre></div>
<ol start="4">
<li>Alter the owning group to dba and verify:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo chgrp dba file10
</span></span><span style="display:flex;"><span>ls -l file10</span></span></code></pre></div>
<ol start="5">
<li>Change the ownership to user200 and owning group to user100 and confirm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo chown user200:user100 file10</span></span></code></pre></div>
<ol start="6">
<li>Modify the ownership to user200 and owning group to dba recursively on dir10 and validate:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo  chown -R user200:dba dir10
</span></span><span style="display:flex;"><span>ls -ld dir10</span></span></code></pre></div>
<h3 id="lab-create-user-and-configure-password-aging-root">Lab: Create User and Configure Password Aging (root)</h3>
<ol>
<li>Create group lnxgrp with GID 6000.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>groupadd lnxgrp -g <span style="color:#ff9f43">6000</span></span></span></code></pre></div>
<ol start="2">
<li>Create user user5000 with UID 5000 and GID 6000. Assign this user a password.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>useradd -u <span style="color:#ff9f43">5000</span> -g <span style="color:#ff9f43">6000</span> user5000</span></span></code></pre></div>
<ol start="3">
<li>Establish password aging attributes so that this user cannot change their password within 4 days after setting it and with a password validity of 30 days. This user should start getting warning messages for changing password 10 days prior to account lock down.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chage -m <span style="color:#ff9f43">4</span> -M <span style="color:#ff9f43">30</span> -W <span style="color:#ff9f43">10</span> user5000</span></span></code></pre></div>
<ol start="4">
<li>This user account needs to expire on the 20th of December, 2021.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chage -E 2021-12-20 user5000</span></span></code></pre></div>
<h3 id="lab-6-2-lock-and-unlock-user-root">Lab 6-2: Lock and Unlock User (root)</h3>
<ol>
<li>Lock the user account for user5000 using the passwd command, and</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>passwd -l user5000</span></span></code></pre></div>
<ol start="2">
<li>confirm by examining the change in the /etc/shadow file.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat /etc/shadow</span></span></code></pre></div>
<ol start="3">
<li>Try to log in with user5000 and observe what happens.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>su - user1
</span></span><span style="display:flex;"><span>su - user5000</span></span></code></pre></div>
<ol start="4">
<li>Use the usermod command and unlock</li>
</ol>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="basic-user-management">Basic User Management</h1>

<h2 id="listing-logged-in-users">Listing Logged-In Users</h2>
<p>A list of the users who have successfully signed on to the system with valid credentials can be printed using <code>who</code> and <code>w</code></p>
<h3 id="who-command">who command</h3>
<ul>
<li>references the /run/utmp file and displays the information.</li>
<li>displays login name of user</li>
<li>shows terminal session device filename</li>
<li>pts stands for pseudo terminal session</li>
<li>shows data and time of user login</li>
<li>Shows if terminal session is graphical(:0), remote(IP address), or textual on the console</li>
</ul>
<h3 id="what-command-w">what command (w)</h3>
<ul>
<li>Shows length of time the user has been idle</li>
<li>CPU time used by all processes including any existing background jobs attached to this terminal (JCPU),</li>
<li>CPU time used by the current process (PCPU),</li>
<li>current activity (WHAT).</li>
<li>current system time</li>
<li>system up duration</li>
<li>number of users logged in</li>
<li>cpu averages over last 1, 5, and 15 minutes</li>
<li>load average (CPU load): 0.00 and 1.00 correspond to no load and full load, and a number greater than 1.00 signifies excess load (over 100%).</li>
</ul>
<h3 id="last-command">last command</h3>
<ul>
<li>Reports the history of successful user login attempts and system boots</li>
<li>Consults the wtmp file located in the /var/log directory.</li>
<li>wtmp keeps a record of login/logout activities
<ul>
<li>login time</li>
<li>duration a user stayed logged in</li>
<li>tty</li>
</ul>
</li>
<li>Output
<ul>
<li>Login name</li>
<li>Terminal name</li>
<li>Terminal name or IP from where connection was established</li>
<li>Day, Month, date, and time when the connection was established</li>
<li>Log out time or (still logged in)</li>
<li>Duration of session</li>
<li>Action name (system reboots section)</li>
<li>Activity name (system reboots section)</li>
<li>Linux kernel version (system reboots section)</li>
<li>Day, Month, date, and time when the reboot command was issued (system reboots section)</li>
<li>System restart time (system reboots section)</li>
<li>Duration the system remained down or (still running) (system reboots section)</li>
<li>log filename (wtmp) (last line)</li>
</ul>
</li>
</ul>
<h3 id="lastb-command">lastb command</h3>
<ul>
<li>reports failed login attempts</li>
<li>Consults /var/log/btmp
<ul>
<li>record of failed login attempts</li>
<li>login name</li>
<li>time</li>
<li>tty</li>
</ul>
</li>
<li>Must be root to run this command</li>
<li>Columns
<ul>
<li>name of user</li>
<li>protocol used</li>
<li>terminal name or ip address</li>
<li>Day, Month, Date, and time of the attempt</li>
<li>Duration the attempt was tried</li>
<li>Duration the attempt last for</li>
<li>log filename (btmp) (last line)</li>
</ul>
</li>
</ul>
<h3 id="lastlog-command">lastlog command</h3>
<ul>
<li>most recent login evidence info for every user account that exists on the system</li>
<li>Consults /var/log/lastlog
<ul>
<li>record of most recent user attempts</li>
<li>login name</li>
<li>time</li>
<li>port (or tty)</li>
<li>Columns:
<ul>
<li>Login name of user</li>
<li>Terminal name assigned upon Logging in</li>
<li>Terminal name or Ip address from where the session was initiated</li>
<li>Timestamp for the latest login or &ldquo;Never logged in&rdquo;</li>
</ul>
</li>
<li>service accounts are used by their respective services, and they are not meant for logging.</li>
</ul>
</li>
</ul>
<h3 id="id-identifier-command">id (identifier) Command</h3>
<ul>
<li>displays the calling user‚Äôs:
<ul>
<li>UID (User IDentifier)</li>
<li>username</li>
<li>GID (Group IDentifier)</li>
<li>group name</li>
<li>all secondary groups the user is a member of</li>
<li>SELinux security context</li>
</ul>
</li>
</ul>
<h3 id="groups-command">groups Command:</h3>
<ul>
<li>lists all groups the calling user is a member of:</li>
<li>first group listed is the primary group for the user who executed this command</li>
<li>other groups are secondary (or supplementary).</li>
<li>can also view group membership information for a different user.</li>
</ul>
<h2 id="user-account-management">User Account Management</h2>
<h3 id="useradd-command">useradd Command</h3>
<ul>
<li>add a new user to the system</li>
<li>adds entries to the four user authentication files for each account added to the system</li>
<li>creates a home directory for the user and copies the default user startup files from the skeleton directory /etc/skel into the user‚Äôs home directory</li>
<li>used to update the default settings that are used at the time of new user creation for unspecified settings</li>
<li>Options
<ul>
<li>-b (&ndash;base-dir)
<ul>
<li>Defines the absolute path to the base directory for placing user home directories. The default is /home.</li>
</ul>
</li>
<li>-c (&ndash;comment)
<ul>
<li>Describes useful information about the user.</li>
</ul>
</li>
<li>-d (&ndash;home-dir)
<ul>
<li>Defines the absolute path to the user home directory.</li>
</ul>
</li>
<li>-D (&ndash;defaults)
<ul>
<li>Displays the default settings from the /etc/default/useradd file and modifies them.</li>
</ul>
</li>
<li>-e (&ndash;expiredate)
<ul>
<li>Specifies a date on which a user account is automatically disabled. The format for the date specification is YYYY-MM-DD.</li>
</ul>
</li>
<li>-f (&ndash;inactive)
<ul>
<li>Denotes maximum days of inactivity between password expiry and permanent account disablement.</li>
</ul>
</li>
<li>-g (&ndash;gid)
<ul>
<li>Specifies the primary GID. Without this option, a group account matching the username is created with the GID matching the UID.</li>
</ul>
</li>
<li>-G (&ndash;groups)
<ul>
<li>Specifies the membership to supplementary groups.</li>
</ul>
</li>
<li>-k (&ndash;skel)
<ul>
<li>location of the skeleton directory (default is /etc/skel) (stores default user startup files)
<ul>
<li>These files are copied to the user‚Äôs home directory at the time of account creation.</li>
<li>Three hidden bash shell files: (default)
<ul>
<li>.bash_profile, .bashrc, and .bash_logout</li>
<li>You can customize these files or add your own to be used for accounts created thereafter.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>-m (&ndash;create-home)
<ul>
<li>Creates a home directory if it does not already exist.</li>
</ul>
</li>
<li>-o (&ndash;non-unique)
<ul>
<li>Creates a user account sharing the UID of an existing user.</li>
<li>When two users share a UID, both get identical rights on each other‚Äôs files.</li>
<li>Should only be done in specific situations.</li>
</ul>
</li>
<li>-r (&ndash;system)
<ul>
<li>Creates a service account with a UID below 1000 and a never-expiring password.</li>
</ul>
</li>
<li>-s (&ndash;shell)
<ul>
<li>Defines the absolute path to the shell file. The default is /bin/bash.</li>
</ul>
</li>
<li>-u (&ndash;uid)
<ul>
<li>Indicates a unique UID. Without this option, the next available UID from the /etc/passwd file is used.</li>
</ul>
</li>
<li>login
<ul>
<li>Specifies a login name to be assigned to the user account.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="usermod-command"><code>usermod</code> Command</h3>
<ul>
<li>modify the attributes of an existing user</li>
<li>similar syntax to useradd and most switches identical.</li>
<li>Options unique to usermod:
<ul>
<li>-a (&ndash;append)
<ul>
<li>Adds a user to one or more supplementary groups</li>
</ul>
</li>
<li>-l (&ndash;login)
<ul>
<li>Specifies a new login name</li>
</ul>
</li>
<li>-m (&ndash;move-home)
<ul>
<li>Creates a home directory and moves the content over from the old location</li>
</ul>
</li>
<li>-G
<ul>
<li>Add a list of groups a user is a member of.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="userdel-command"><code>userdel</code> Command</h3>
<ul>
<li>to remove a user from the system</li>
</ul>
<h3 id="passwd-command"><code>passwd</code> Command</h3>
<ul>
<li>set or modify a user‚Äôs password</li>
</ul>
<h3 id="no-login-non-interactive-user-account">No-Login (Non-Interactive) User Account</h3>
<h3 id="nologin-command"><code>nologin</code> command</h3>
<ul>
<li>/sbin/nologin</li>
<li>special purpose program that can be employed for user accounts that do not require login access to the system.</li>
<li>located in the /usr/sbin (or /sbin) directory</li>
<li>user is refused with the message, ‚ÄúThis account is currently not available.‚Äù</li>
<li>If a custom message is required, you can create a file called nologin.txt in the /etc directory and add the desired text to it.</li>
<li>If a no-login user is able to log in with their credentials, there is a problem. Use the grep command against the /etc/passwd file to ensure ‚Äò/sbin/nologin‚Äô is there in the shell field for that user.</li>
<li>examples of user accounts that do not require login access are the service accounts such as ftp, apache, and sshd.</li>
</ul>
<h2 id="basic-user-management-labs">Basic User Management Labs</h2>
<h3 id="lab-who">Lab: who</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> who</code></pre></div>
<h3 id="lab-what">Lab: what</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> w</code></pre></div>
<h3 id="lab-last">Lab: last</h3>
<ol>
<li>List all user login, logout, and system reboot occurrences:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> last</code></pre></div>
<ol start="2">
<li>List system reboot info only:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> last reboot</code></pre></div>
<h3 id="lab-lastb">Lab: lastb</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> lastb</code></pre></div>
<h3 id="lab-lastlog">Lab: lastlog</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> lastlog</code></pre></div>
<h3 id="lab-id">Lab: id</h3>
<ol>
<li>View info about currently active user:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> id</code></pre></div>
<ol start="2">
<li>View info about another user:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> id user1</code></pre></div>
<h3 id="lab-groups">Lab: groups</h3>
<ol>
<li>View current user&rsquo;s groups:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> groups</code></pre></div>
<ol start="2">
<li>View groups of another user:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> groups user1</code></pre></div>
<h3 id="lab-user-authentication-files">Lab: user authentication files</h3>
<ol>
<li>list of the four files and their backups from the /etc directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> ls -l /etc/passwd* /etc/group* /etc/shadow* /etc/gshadow*</span></span></code></pre></div>
<ol start="2">
<li>View first and last 3 lines of the passwd file</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> head -3 /etc/passwd ; tail -3 /etc/passwd</span></span></code></pre></div>
<ol start="3">
<li>verify the permissions and ownership on the passwd file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> ls -l /etc/passwd</span></span></code></pre></div>
<ol start="4">
<li>View first and last 3 lines of the shadow file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> head -3 /etc/shadow ; tail -3 /etc/shadow</span></span></code></pre></div>
<ol start="5">
<li>verify the permissions and ownership on the shadow file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> ls -l /etc/shadow</span></span></code></pre></div>
<ol start="6">
<li>View first and last 3 lines of the group file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> head -3 /etc/group ; tail -3 /etc/group</span></span></code></pre></div>
<ol start="7">
<li>Verify the permissions and ownership on the group file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> ls -l /etc/group</span></span></code></pre></div>
<ol start="8">
<li>View first and last 3 lines of the gshadow file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> head -3 /etc/gshadow ; tail -3 /etc/gshadow</span></span></code></pre></div>
<ol start="9">
<li>Verify the permissions and ownership on the gshadow file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> ls -l /etc/gshadow</span></span></code></pre></div>
<h3 id="lab-useradd-and-logindefs">Lab: useradd and login.defs</h3>
<ol>
<li>use the cat or less command to view the useradd file content or display the settings with the useradd command:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> useradd -D</span></span></code></pre></div>
<ol>
<li>grep on the/etc/login.defs with uncommented and non-empty lines:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> grep -v ^# /etc/login.defs | grep -v ^$</code></pre></div>
<h3 id="lab-create-a-user-account-with-default-attributes-root">Lab: Create a User Account with Default Attributes (root)</h3>
<ol start="2">
<li>Create user2 with all the default directives:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> useradd user2</span></span></code></pre></div>
<ol start="3">
<li>Assign this user a password and enter it twice when prompted:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> passwd user2</span></span></code></pre></div>
<ol start="4">
<li>grep for user2: on the authentication files to examine what the useradd command has added:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff5c57">cd</span> /etc ; grep user2: passwd shadow group gshadow</span></span></code></pre></div>
<ol start="5">
<li>Test this new account by logging in as user2 and then run the id and groups commands to verify the UID, GID, and group membership information:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> su - user2
</span></span><span style="display:flex;"><span> id
</span></span><span style="display:flex;"><span> groups</span></span></code></pre></div>
<h3 id="lab-create-a-user-account-with-custom-values">Lab: Create a User Account with Custom Values</h3>
<ol>
<li>Create user3 with UID 1010, home directory /usr/user3a, and shell /bin/sh:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> useradd -u <span style="color:#ff9f43">1010</span> -d /usr/user3a -s /bin/sh user3</span></span></code></pre></div>
<ol start="2">
<li>Assign user1234 as password (passwords assigned in the following way is not recommended; however, it is okay in a lab environment):</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff5c57">echo</span> user1234 | passwd --stdin user3</span></span></code></pre></div>
<ol start="3">
<li>grep for user3: on the four authentication files to see what was added for this user:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff5c57">cd</span> /etc ; grep user3: passwd shadow group gshadow </span></span></code></pre></div>
<ol start="4">
<li>Test this account by switching to or logging in as user3 and entering user1234 as the password. Run the id and groups commands for further verification.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> su - user3 
</span></span><span style="display:flex;"><span> id
</span></span><span style="display:flex;"><span> groups</span></span></code></pre></div>
<h3 id="lab-modify-and-delete-a-user-account">Lab: Modify and Delete a User Account</h3>
<ol>
<li>Modify the login name for user2 to user2new, UID to 2000, home directory to /home/user2new, and login shell to /sbin/nologin.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> usermod -l user2new -m -d /home/user2new -s /sbin/nologin -u <span style="color:#ff9f43">2000</span> user2</span></span></code></pre></div>
<ol start="2">
<li>Obtain the information for user2new from the passwd file for confirmation:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> grep user2new /etc/passwd</span></span></code></pre></div>
<ol>
<li>Remove user2new along with their home and mail spool directories:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> userdel -r user2new</span></span></code></pre></div>
<ol start="2">
<li>Confirm the user deletion:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> grep user2new /etc/passwd</span></span></code></pre></div>
<h3 id="lab-create-a-user-account-with-no-login-access-root">Lab: Create a User Account with No-Login Access (root)</h3>
<ol start="3">
<li>Look at the current nologin users:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> grep nologin /etc/passwd</span></span></code></pre></div>
<ol start="4">
<li>Create user4 with non-interactive shell file /sbin/nologin:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> useradd -s /sbin/nologin user4</span></span></code></pre></div>
<ol start="5">
<li>Assign user1234 as password:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff5c57">echo</span> user1234 | passwd --stdin user4</span></span></code></pre></div>
<ol start="6">
<li>grep for user4 on the passwd file and verify the shell field containing the nologin shell:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> grep user4 /etc/passwd</span></span></code></pre></div>
<ol start="7">
<li>Test this account by attempting to log in or switch:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> su - user4</span></span></code></pre></div>
<h3 id="lab-check-user-login-attempts-root">Lab: Check User Login Attempts (root)</h3>
<ol start="8">
<li>execute the last, lastb, and lastlog commands, and observe the outputs.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> last
</span></span><span style="display:flex;"><span> lastb
</span></span><span style="display:flex;"><span> lastlog</span></span></code></pre></div>
<ol>
<li>List the timestamps when the system was last rebooted.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> last | grep reboot</span></span></code></pre></div>
<h3 id="lab-5-2-verify-user-and-group-identity-user1">Lab 5-2: Verify User and Group Identity (user1)</h3>
<ol start="2">
<li>run the who and w commands one at a time, and compare the outputs.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> who
</span></span><span style="display:flex;"><span> w</span></span></code></pre></div>
<ol start="3">
<li>Execute the <code>id</code> and <code>groups</code> commands, and compare the outcomes. Examine the extra information that the id command shows, but not the groups command.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> id
</span></span><span style="display:flex;"><span> groups</span></span></code></pre></div>
<h3 id="lab-5-3-create-users-root">Lab 5-3: Create Users (root)</h3>
<ol start="4">
<li>create user account user4100 with UID 4100 and home directory under /usr.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> useradd -m -d /usr/user4100 -u <span style="color:#ff9f43">4100</span> user4100 </span></span></code></pre></div>
<ol start="5">
<li>Create another user account user4200 with default attributes.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> useradd user4200</span></span></code></pre></div>
<ol start="6">
<li>Assign both users a password.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> passwd user4100
</span></span><span style="display:flex;"><span> passwd user4200</span></span></code></pre></div>
<ol start="7">
<li>View the contents of the passwd, shadow, group, and gshadow files, and observe what has been added for the two new users.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> cat /etc/passwd
</span></span><span style="display:flex;"><span> cat /etc/shadow
</span></span><span style="display:flex;"><span> cat /etc/group
</span></span><span style="display:flex;"><span> cat /etc/gshadow</span></span></code></pre></div>
<h3 id="lab-create-user-with-non-interactive-shell-root">Lab: Create User with Non-Interactive Shell (root)</h3>
<ol start="8">
<li>Create user account user4300 with the disability of logging in.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> useradd -s /sbin/nologin user4300</span></span></code></pre></div>
<ol start="9">
<li>Assign this user a password.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> passwd user4300</span></span></code></pre></div>
<ol start="10">
<li>Try to log on with this user and see is displayed on the screen.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> su - user4300</span></span></code></pre></div>
<ol start="11">
<li>View the content of the passwd file, and see what is there that prevents this user from logging in.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> cat /etc/passwd</span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
          </section>
        </div>
      </main>
    </div>
    <script>
      window.MathJax = Object.assign( window.MathJax || {}, {
        tex: {
          inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
          displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        },
        options: {
          enableMenu: false 
        }
      }, JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/js-yaml/js-yaml.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-color.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-drag.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-ease.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-selection.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-timer.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-transition.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1764111909" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.relearn.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/clipboard/clipboard.min.js?1764111909" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1764111909" defer></script>
    <script src="/js/theme.min.js?1764111909" defer></script>
  </body>
</html>
