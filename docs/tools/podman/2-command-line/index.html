<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.140.0">
    <meta name="generator" content="Relearn 7.1.1">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="2 Command line This chapter covers:
The Podman command line Running an OCI application Comparing containers and images Building an OCI-based image Podman is an excellent tool for running and building containerized applications. In this chapter, you’ll get started by building a simple web application to demonstrate commonly used features of the Podman command line.
If you don’t have Podman installed on your machine, you can jump to appendix C, and then return here. This chapter assumes that Podman 4.1 or later is already installed. Older versions of Podman probably work fine, but all examples were tested with Podman 4.1.">
    <meta name="author" content="David Vargas">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="2 Command line This chapter covers:
The Podman command line Running an OCI application Comparing containers and images Building an OCI-based image Podman is an excellent tool for running and building containerized applications. In this chapter, you’ll get started by building a simple web application to demonstrate commonly used features of the Podman command line.
If you don’t have Podman installed on your machine, you can jump to appendix C, and then return here. This chapter assumes that Podman 4.1 or later is already installed. Older versions of Podman probably work fine, but all examples were tested with Podman 4.1.">
    <meta property="og:url" content="http://perfectdarkmode.com/tools/podman/2-command-line/">
    <meta property="og:description" content="2 Command line This chapter covers:
The Podman command line Running an OCI application Comparing containers and images Building an OCI-based image Podman is an excellent tool for running and building containerized applications. In this chapter, you’ll get started by building a simple web application to demonstrate commonly used features of the Podman command line.
If you don’t have Podman installed on your machine, you can jump to appendix C, and then return here. This chapter assumes that Podman 4.1 or later is already installed. Older versions of Podman probably work fine, but all examples were tested with Podman 4.1.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Tools">
    <meta itemprop="description" content="2 Command line This chapter covers:
The Podman command line Running an OCI application Comparing containers and images Building an OCI-based image Podman is an excellent tool for running and building containerized applications. In this chapter, you’ll get started by building a simple web application to demonstrate commonly used features of the Podman command line.
If you don’t have Podman installed on your machine, you can jump to appendix C, and then return here. This chapter assumes that Podman 4.1 or later is already installed. Older versions of Podman probably work fine, but all examples were tested with Podman 4.1.">
    <meta itemprop="wordCount" content="15748">
    <title></title>
    <link href="/tools/podman/2-command-line/index.xml" rel="alternate" type="application/rss+xml" title="">
    <link href="/tools/podman/2-command-line/index.print.html" rel="alternate" type="text/html" title="">
    <link href="/images/logo.svg?1734871290" rel="icon" type="image/svg+xml">
    <link href="/css/fontawesome-all.min.css?1734871290" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1734871290" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1734871290" rel="stylesheet">
    <link href="/css/auto-complete.css?1734871290" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1734871290" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1734871290" rel="stylesheet">
    <link href="/css/fonts.css?1734871290" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1734871290" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1734871290" rel="stylesheet">
    <link href="/css/theme-amoled.css?1734871290" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-relearn-dark.css?1734871290" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/print.css?1734871290" rel="stylesheet" media="print">
    <script src="/js/variant.js?1734871290"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='http:\/\/perfectdarkmode.com';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      // variant stuff
      window.variants && variants.init( [ 'amoled' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23N4FSG0HM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-23N4FSG0HM');
</script>


  </head>
  <body class="mobile-support html" data-url="/tools/podman/2-command-line/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-back" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="history.back()" type="button" title=""><i class="fa-fw fas fa-chevron-left"></i></button>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#21-working-with-containers">2.1 Working with containers</a>
      <ul>
        <li><a href="#heading_id_4">[]{#02.htm#pgfId-1037552}2.1.1 Exploring containers</a></li>
        <li><a href="#heading_id_5">[]{#02.htm#pgfId-1037619}2.1.2 Running the containerized application</a></li>
        <li><a href="#heading_id_6">[]{#02.htm#pgfId-1037696}2.1.3 Stopping containers</a></li>
        <li><a href="#heading_id_7">[]{#02.htm#pgfId-1037737}2.1.4 Starting containers</a></li>
        <li><a href="#heading_id_8">[]{#02.htm#pgfId-1037765}2.1.5 Listing containers</a></li>
        <li><a href="#heading_id_9">[]{#02.htm#pgfId-1037795}2.1.6 Inspecting containers</a></li>
        <li><a href="#heading_id_10">[]{#02.htm#pgfId-1037843}2.1.7 Removing containers</a></li>
        <li><a href="#heading_id_11">[]{#02.htm#pgfId-1037863}2.1.8 exec-ing into a container</a></li>
        <li><a href="#heading_id_12">[]{#02.htm#pgfId-1037916}2.1.9 Creating an image from a container</a></li>
      </ul>
    </li>
    <li><a href="#heading_id_13">[]{#02.htm#pgfId-1038202}2.2 Working with container images</a>
      <ul>
        <li><a href="#heading_id_14">[]{#02.htm#pgfId-1038207}2.2.1 Differences between a container and an image</a></li>
        <li><a href="#heading_id_15">[]{#02.htm#pgfId-1038261}2.2.2 Listing images</a></li>
        <li><a href="#heading_id_16">[]{#02.htm#pgfId-1038320}2.2.3 Inspecting images</a></li>
        <li><a href="#heading_id_17">[]{#02.htm#pgfId-1038364}2.2.4 Pushing images</a></li>
        <li><a href="#heading_id_18">[]{#02.htm#pgfId-1038455}2.2.5 podman login: Logging into a container registry</a></li>
        <li><a href="#heading_id_19">[]{#02.htm#pgfId-1038512}2.2.6 Tagging images</a></li>
        <li><a href="#heading_id_20">[]{#02.htm#pgfId-1038583}2.2.7 Removing images</a></li>
        <li><a href="#heading_id_21">[]{#02.htm#pgfId-1038657}2.2.8 Pulling images</a></li>
        <li><a href="#heading_id_22">[]{#02.htm#pgfId-1038812}2.2.9 Searching for images</a></li>
      </ul>
    </li>
    <li><a href="#2210-mounting-images">2.2.10 Mounting images</a></li>
    <li><a href="#23-building-images">2.3 Building images</a>
      <ul>
        <li><a href="#heading_id_25">[]{#02.htm#pgfId-1038895}2.3.1 Format of a Containerfile or Dockerfile</a></li>
        <li><a href="#heading_id_26">[]{#02.htm#pgfId-1039048}2.3.2 Automating the building of our application</a></li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-about" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/about/" title=""><span class="title">About</span></a>
            </div>

            <div class="topbar-button topbar-button-now" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/now/" title=""><span class="title">Now</span></a>
            </div>

            <div class="topbar-button topbar-button-booknotes" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/booknotes/" title=""><span class="title">Book Notes</span></a>
            </div>

            <div class="topbar-button topbar-button-contact" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/contact/" title=""><span class="title">Contact</span></a>
            </div>






          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable tools" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id=""></h1>

<h1 id="2-command-line">2 Command line</h1>
<p>This chapter covers:</p>
<ul>
<li>The Podman command line</li>
<li>Running an OCI application</li>
<li>Comparing containers and images</li>
<li>Building an OCI-based image</li>
</ul>
<p>Podman is an excellent tool for running and building containerized applications. In this chapter, you&rsquo;ll get started
by building a simple web application to demonstrate commonly used features of the Podman command line.</p>
<p>If you don&rsquo;t have Podman installed on your machine, you can jump to appendix C, and then return here. This chapter assumes that Podman 4.1 or later is already installed. Older versions of Podman probably work fine, but all examples were tested with Podman 4.1.</p>
<p>The example base image I use is the registry.access.redhat.com/ubi8/httpd-24 image.</p>
<p>Universal Base Images (UBI can be used anywhere, but container software maintained and vetted by Red Hat as well as run on a Red Hat operating system is fully supported. There are hundreds of Apache images that work similarly to this image that you can also try out.</p>
<p>Chapter 2 shows how Podman is a great tool for working with containers. In this chapter, I walk you through running the
scenario you might use to build a containerized application. You launch a container, modify its contents, create an image, and ship it to a registry. Then I explain how you can do this in an automated way to maintain the security of your container image. Through it all, you will be exposed to many of the Podman command-line interfaces and get a good understanding of how to work with Podman.</p>
<p>If you are an experienced Docker user, you probably just want to skim through this chapter. You will know a lot of
it, but there are many features unique to Podman, such as the ability to mount container images (section 2.2.10) and different transports</p>
<p>Let&rsquo;s start by running our first container.</p>
<p>Podman is an open source project under heavy development. Podman is packaged and provided
on many different Linux distributions as well as Mac and Windows. These distributions might be shipping older versions of Podman without some of the current features covered in this book. Some examples in this book assume you are using Podman 4.1 or later. If an example does not work, please update your version of Podman to the latest version. Refer to appendix C for further information on installing Podman.</p>
<h2 id="21-working-with-containers">2.1 Working with containers</h2>
<p>There are thousands of +-different container images sitting at container registries. Developers,
administrators, quality engineers, and general users primarily use the
<code>podman</code>{.fm-code-in-text} <code>run</code>{.fm-code-in-text}
command[]{#02.htm#marker-1037550} to pull down and run, test, or explore
these container images. To start building out containerized
applications, the first thing you need to do is start working with a
base image. In our examples, you pull and run the
registry.access.redhat.com/ubi8/httpd-24 image to container storage in
your home directory and start exploring inside the container.</p>
<h3 id="heading_id_4" class="fm-head1">[]{#02.htm#pgfId-1037552}2.1.1 Exploring containers</h3>
<p>[]{#02.htm#pgfId-1037555}In
[]{#02.htm#marker-1037553}[]{#02.htm#marker-1037554}this section, you
will examine a typical Podman command, step by step. You will execute
the <code>podman</code>{.fm-code-in-text} <code>run</code>{.fm-code-in-text}
command[]{#02.htm#marker-1037556}, which reaches out to the
registry.access.redhat.com container registry[]{#02.htm#marker-1037557}
and begins pulling down the image and storing it locally in your home
directory:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -ti --rm registry.access.redhat.com/ubi8/httpd-24 bash</code></pre></div>
<p>[]{#02.htm#pgfId-1037559}Now I will break down the command you just
executed. By default the <code>podman</code>{.fm-code-in-text}
<code>run</code>{.fm-code-in-text} command[]{#02.htm#marker-1037560} executes the
containerized command in the foreground until the container exits. In
this case, you end up at a Bash prompt running within the container and
showing the <code>bash-4.4$</code>{.fm-code-in-text} prompt. When you exit this
Bash prompt, Podman stops the container.</p>
<p>[]{#02.htm#pgfId-1037563}In this example, you used two options:
<code>-t</code>{.fm-code-in-text}[]{#02.htm#marker-1037561} and
<code>-i</code>{.fm-code-in-text}[]{#02.htm#marker-1037562}, as
<code>-ti</code>{.fm-code-in-text}, which tells Podman to hook up to the terminal.
This connects to the input, output, and error stream of the
<code>bash</code>{.fm-code-in-text} process within the container to your screen,
which allows you to interact within the container:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -ti --rm registry.access.redhat.com/ubi8/httpd-24 bash</code></pre></div>
<p>[]{#02.htm#pgfId-1037569}The <code>--rm</code>{.fm-code-in-text}
option[]{#02.htm#marker-1037568} tells Podman to delete the container as
soon as the container exits, freeing up all of the container&rsquo;s storage:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -ti --rm registry.access.redhat.com/ubi8/httpd-24 bash</code></pre></div>
<p>[]{#02.htm#pgfId-1037571}Next, specify the container image,
registry.access.redhat.com/ubi8/httpd-24, you are working with. The
<code>podman</code>{.fm-code-in-text} command[]{#02.htm#marker-1037572} reaches out
to the container registry at registry.access.redhat.com and begins
copying down the ubi8/httpd-24:latest image. Podman copies multiple
layers (aka blobs), as shown in the following listing, and stores them
in the local container storage. You see the progress as the image layers
are pulled down. Some images are rather large and can take a long time
while being pulled down. If you later run a different container on the
same image, Podman skips the image-pulling step, since you already have
the correct image in local container storage.</p>
<p>[]{#02.htm#pgfId-1037573}Listing 2.1 Pulling and running a container
image from a registry</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -ti --rm registry.access.redhat.com/ubi8/httpd-24 bash
Trying to pull registry.access.redhat.com/
➥ ubi8/httpd-24:latest...                                   ❶
Getting image source signatures
Checking if image destination supports signatures        
Copying blob 296e14ee2414 skipped: already exists            ❷
Copying blob 356f18f3a935 skipped: already exists            ❷
Copying blob 359fed170a21                                    ❷
➥ [========================&gt;---------] 11.8MiB / 16.2MiB    ❷
Copying blob 226cafc3a0c6                                    ❷
➥ [=====&gt;----------------------------]                      ❷
➥ 10.1MiB / 61.1MiB                                         ❷</code></pre></div>
<p>[]{#02.htm#pgfId-1051969}[❶]{.fm-combinumeral} Contact with the registry</p>
<p>[]{#02.htm#pgfId-1051997}[❷]{.fm-combinumeral} Layer pulling is skipped.</p>
<p>[]{#02.htm#pgfId-1037588}Finally, specify the executable to be run
within the container, in this case, <code>bash</code>{.fm-code-in-text}:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -ti --rm registry.access.redhat.com/ubi8/httpd-24 bash 
...
bash-4.4$</code></pre></div>
<p>[]{#02.htm#pgfId-1037592}[Note]{.fm-callout-head} Images almost always
have default commands they execute. You only have to specify a command
if you want to override the default application the image runs with. In
the case of the registry.access.redhat.com/ubi8/httpd-24 image, it runs
the Apache web server.</p>
<p>[]{#02.htm#pgfId-1037593}While inside the bash shell container, cat
/etc/os-release, and notice it is likely a different OS or a different
version than the /etc/os-release outside the container. Explore around
in the container, and notice how different it is from your host
environment:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">bash-4.4$ grep PRETTY_NAME /etc/os-release 
PRETTY_NAME=&#34;Red Hat Enterprise Linux 8.4 (Ootpa)&#34;</code></pre></div>
<p>[]{#02.htm#pgfId-1037596}On my host on a different terminal, the same
command outputs</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ grep PRETTY_NAME /etc/os-release 
PRETTY_NAME=&#34;Fedora Linux 35 (Workstation Edition Prerelease)&#34;</code></pre></div>
<p>[]{#02.htm#pgfId-1037599}Back inside the container, you will notice
there are a lot fewer commands available:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">bash-4.4$ ls /usr/bin | wc -l
525</code></pre></div>
<p>[]{#02.htm#pgfId-1037602}However, on the host you see</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ ls -l /usr/bin | wc -l
3303</code></pre></div>
<p>[]{#02.htm#pgfId-1037606}Execute the <code>ps</code>{.fm-code-in-text}
command[]{#02.htm#marker-1037605} to see what processes are running
inside of the container:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ ps
PID TTY        TIME CMD
1 pts/0    00:00:00 bash
2 pts/0    00:00:00 ps</code></pre></div>
<p>[]{#02.htm#pgfId-1037613}You only see two processes: the
<code>bash</code>{.fm-code-in-text} script[]{#02.htm#marker-1037611} and the
<code>ps</code>{.fm-code-in-text} command[]{#02.htm#marker-1037612}. Needless to
say, on my host machine, there are hundreds of processes running
(including these two processes). You can further explore the inside of
the container to gain an understanding of what is going on within a
container.</p>
<p>[]{#02.htm#pgfId-1037614}When you are done, you exit the
<code>bash</code>{.fm-code-in-text} script, and the container shuts down. Since you
ran with the <code>--rm</code>{.fm-code-in-text} option[]{#02.htm#marker-1037615},
Podman removes all the container storage and deletes the container. The
container image remains in container/storage. Now that you have explored
the inner workings of a container, it is time to start working with the
default application within the
[]{#02.htm#marker-1037616}[]{#02.htm#marker-1037617}container.</p>
<h3 id="heading_id_5" class="fm-head1">[]{#02.htm#pgfId-1037619}2.1.2 Running the containerized application</h3>
<p>[]{#02.htm#pgfId-1037623}In
[]{#02.htm#marker-1037620}[]{#02.htm#marker-1037621}[]{#02.htm#marker-1037622}the
previous example, you pulled and ran <code>bash</code>{.fm-code-in-text} within a
containerized application, but you did not run the application the
developer intended you to run. In this next example, you will run the
actual application by removing the command and running with a couple of
new options.</p>
<p>[]{#02.htm#pgfId-1037624}First, remove the <code>-ti</code>{.fm-code-in-text} and
the <code>--rm</code>{.fm-code-in-text} options, since you want the container to
remain running when the <code>podman</code>{.fm-code-in-text}
command[]{#02.htm#marker-1037625} exits. You are not a shell running
within the container interactively, since it is just running the
containerized web service:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24
37a1d2e31dbf4fa311a5ca6453f53106eaae2d8b9b9da264015cc3f8864fac22</code></pre></div>
<p>[]{#02.htm#pgfId-1037629}The first option to notice is the
<code>-d</code>{.fm-code-in-text} <code>(--detach)</code>{.fm-code-in-text}
option[]{#02.htm#marker-1037628}, which tells Podman to launch the
container and then detach from it. Basically, run the container in the
background. The Podman command actually exits and leaves the container
running. Chapter 6 goes much deeper into what is going on behind the
scenes:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24</code></pre></div>
<p>[]{#02.htm#pgfId-1037633}The <code>-p</code>{.fm-code-in-text}
<code>(--publish)</code>{.fm-code-in-text} option tells Podman to publish or bind
the container port <code>8080</code>{.fm-code-in-text} to the host port
<code>8080</code>{.fm-code-in-text} when the container is running. With the
<code>-p</code>{.fm-code-in-text} option[]{#02.htm#marker-1037634}, the field
before the colon refers to the host port, while the field after the
colon refers to the container port. In this case, you see that the ports
are the same. If you specify only one port[]{#02.htm#marker-1037635},
Podman considers this port a container port and randomly picks a host
port on which the container port is bound. You can use the
<code>podman</code>{.fm-code-in-text} <code>port</code>{.fm-code-in-text}
command[]{#02.htm#marker-1037638} to discover which ports are bound to a
container.</p>
<p>[]{#02.htm#pgfId-1037639}Listing 2.2 Example of the
<code>podman</code>{.fm-code-in-text} <code>port</code>{.fm-code-in-text} command</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman port myapp
8080/tcp -&gt; 0.0.0.0:8080    ❶</code></pre></div>
<p>[]{#02.htm#pgfId-1051889}[❶]{.fm-combinumeral} Shows that port 8080/tcp
inside the container is bound to all of the host networks (0.0.0.0) at
port 8080</p>
<p>[]{#02.htm#pgfId-1037643}By default, containers are created within their
own network namespace, meaning they are not bound to the host network
but to their virtualized network. Suppose I execute the container
without the <code>-p</code>{.fm-code-in-text} option[]{#02.htm#marker-1037644}. In
that case, the Apache server within the container binds to the network
interface within the container&rsquo;s network namespace, but Apache is not
bound to the host network.</p>
<p>[]{#02.htm#pgfId-1037645}Only processes within the container are able to
connect to port <code>8080</code>{.fm-code-in-text} to communicate with the web
server. By executing the command with the <code>-p</code>{.fm-code-in-text}
option,[]{#02.htm#marker-1037646} Podman connects the port from inside
the container to the host network at the specified port. The connection
allows external processes like a web browser to read from the web
service.</p>
<p>[]{#02.htm#pgfId-1037647}[Note]{.fm-callout-head} If you are running
containers in rootless mode, covered in chapter 3, Podman users are by
default not permitted to bind to ports &lt; 1024 by the kernel. Some
containers want to bind to lower ports like port 80, which is allowed
inside the container, but <code>-p</code>{.fm-code-in-text1}
<code>80:80</code>{.fm-code-in-text1} fails, since 80 is less than 1024. Using
<code>-p</code>{.fm-code-in-text1} <code>8080:80</code>{.fm-code-in-text1} causes Podman to
bind the host&rsquo;s port <code>8080</code>{.fm-code-in-text1} to port
<code>80</code>{.fm-code-in-text1} within the container. The upstream Podman repo
contains troubleshooting information on problems like binding to ports
less than 1024 and many others (see
<a href="http://mng.bz/69ry" rel="external" target="_blank">http://mng.bz/69ry</a>{.url}).</p>
<p>[]{#02.htm#pgfId-1037649}The <code>-p</code>{.fm-code-in-text}
option[]{#02.htm#marker-1046818} can map port numbers inside the
container to different port numbers outside the container:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24</code></pre></div>
<p>[]{#02.htm#pgfId-1037652}In the example name, the container
<code>myapp</code>{.fm-code-in-text} is using the <code>--name</code>{.fm-code-in-text}
<code>myapp</code>{.fm-code-in-text} option[]{#02.htm#marker-1037651}. Specifying a
name makes it easier to find the container, and it allows you to specify
a name that can then be used for other commands (e.g.,
<code>podman</code>{.fm-code-in-text} <code>stop</code>{.fm-code-in-text}
<code>myapp</code>{.fm-code-in-text}[]{#02.htm#marker-1037653}). If you don&rsquo;t
specify a name, Podman automatically generates a unique container name
along with a container ID. All of the Podman commands that interact with
containers can use either the name or the ID:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -d --name myapp -p 8080:8080 registry.access.redhat.com/ubi8/httpd-24</code></pre></div>
<p>[]{#02.htm#pgfId-1037656}When the <code>podman</code>{.fm-code-in-text}
<code>run</code>{.fm-code-in-text} command[]{#02.htm#marker-1037655} completes, the
container is running. Since this container is running in detached mode,
Podman prints out the container ID and exits, but the container remains
running:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24
37a1d2e31dbf4fa311a5ca6453f53106eaae2d8b9b9da264015cc3f8864fac22</code></pre></div>
<p>[]{#02.htm#pgfId-1037659}Now that the container is running, you can
launch a web browser to communicate with the web server inside of the
container at localhost port <code>8080</code>{.fm-code-in-text} (see figure 2.1):</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ web-browser localhost:8080</code></pre></div>
<p>::: figure
<a href="#R-image-3b49dea21397ed6699a0d5811bebe807" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="images/OEBPS/Images/02-01.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3b49dea21397ed6699a0d5811bebe807"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="images/OEBPS/Images/02-01.png"></a>{.calibre18}</p>
<p>[]{#02.htm#pgfId-1052898}Figure 2.1 Web browser window connecting to the
ubi8/httpd-24 container running in Podman
:::</p>
<p>[]{#02.htm#pgfId-1037667}Congratulations! You have launched your first
containerized application.</p>
<p>[]{#02.htm#pgfId-1037668}Now imagine you want to start another
container. You can execute a similar command with just a couple of
changes:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -d -p 8081:8080 --name myapp1 \ 
➥ registry.access.redhat.com/ubi8/httpd-24
fa41173e4568a8fa588690d3177150a454c63b53bdfa52865b5f8f7e4d7de1e1</code></pre></div>
<p>[]{#02.htm#pgfId-1037671}Notice you need to change the name of the
container to <code>myapp1</code>{.fm-code-in-text}; otherwise, the
<code>podman</code>{.fm-code-in-text} <code>run</code>{.fm-code-in-text} command fails with
the <code>myapp</code>{.fm-code-in-text} name because the container previously
existed. Also you need to change the <code>-p</code>{.fm-code-in-text} option to
use <code>8081</code>{.fm-code-in-text} for the host port because the previous
container, <code>myapp</code>{.fm-code-in-text}[]{#02.htm#marker-1037672}, is
currently running and is bound to port <code>8080</code>{.fm-code-in-text}. The
second container isn&rsquo;t allowed to bind to port <code>8080</code>{.fm-code-in-text}
until the first container exits:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -d -p 8081:8080 --name myapp1  
     registry.access.redhat.com/ubi8/httpd-24</code></pre></div>
<p>[]{#02.htm#pgfId-1037676}The <code>podman</code>{.fm-code-in-text}
<code>create</code>{.fm-code-in-text} command[]{#02.htm#marker-1037674} is almost
identical to the <code>podman</code>{.fm-code-in-text} <code>run</code>{.fm-code-in-text}
command[]{#02.htm#marker-1037675}. The <code>create</code>{.fm-code-in-text}
command pulls the image if it is not in container storage and configures
the container information to make it ready to run but never executes the
container. It is often used together with the <code>podman</code>{.fm-code-in-text}
<code>start</code>{.fm-code-in-text} command[]{#02.htm#marker-1037677} described in
section 2.1.4. You might want to create a container and then later use a
systemd unit file to start and stop the container.</p>
<p>[]{#02.htm#pgfId-1037679}[]{#02.htm#id_qoinjfin0ayc1111}Some notable
<code>podman</code>{.fm-code-in-text} <code>run</code>{.fm-code-in-text} options include the
following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1037681 .calibre17}--<code>user</code>{.fm-code-in-text}
<code>USERNAME</code>{.fm-code-in-text}[]{#02.htm#marker-1037680
.calibre17}&mdash;This tells Podman to run the container as a specific
user defined in the image. By default, Podman will run the container
as root, unless the container image specifies a default user.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037683
.calibre17}<code>--rm</code>{.fm-code-in-text}[]{#02.htm#marker-1037682
.calibre17}&mdash;This automatically removes the container when it
exits.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037685 .calibre17}<code>--tty</code>{.fm-code-in-text}
<code>-(t</code>{.fm-code-in-text}[]{#02.htm#marker-1037684
.calibre17}<code>)</code>{.fm-code-in-text}&mdash;This allocates a pseudo
<code>-tty</code>{.fm-code-in-text} and attaches it to the standard input of
the container.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037687
.calibre17}<code>--interactive</code>{.fm-code-in-text}
<code>(-i</code>{.fm-code-in-text}[]{#02.htm#marker-1037686
.calibre17}<code>)</code>{.fm-code-in-text}&mdash;This connects
<code>stdin</code>{.fm-code-in-text} to the primary process of the container.
These options give you an interactive shell within the container.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1037688}[Note]{.fm-callout-head} There are dozens of
<code>podman</code>{.fm-code-in-text1} <code>run</code>{.fm-code-in-text1} options available,
allowing you to change security features, namespaces, volumes, and so
on. Some of these I use and explain throughout the book. Refer to the
<code>podman-run</code>{.fm-code-in-text1} man page[]{#02.htm#marker-1037689} for a
description of all of the options. Most of the
<code>podman</code>{.fm-code-in-text1} <code>create</code>{.fm-code-in-text1} options defined
in table 2.1 are also available for <code>podman</code>{.fm-code-in-text1}
<code>run</code>{.fm-code-in-text1}.</p>
<p>[]{#02.htm#pgfId-1037691}Use the <code>man</code>{.fm-code-in-text}
<code>podman-run</code>{.fm-code-in-text} command[]{#02.htm#marker-1037690} for
information about all options. Now that the container is up and running,
it is time to stop the container and go to the next
[]{#02.htm#marker-1037692}[]{#02.htm#marker-1037693}[]{#02.htm#marker-1037694}step.</p>
<h3 id="heading_id_6" class="fm-head1">[]{#02.htm#pgfId-1037696}2.1.3 Stopping containers</h3>
<p>[]{#02.htm#pgfId-1037700}You
[]{#02.htm#marker-1037697}[]{#02.htm#marker-1037698}[]{#02.htm#marker-1037699}have
two containers running and have tested them by running a web browser
against them. To continue the development by actually adding some
content to the web page, you can stop the containers using the
<code>podman</code>{.fm-code-in-text} <code>stop</code>{.fm-code-in-text}
command[]{#02.htm#marker-1037701}:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman stop myapp</code></pre></div>
<p>[]{#02.htm#pgfId-1037704}The <code>stop</code>{.fm-code-in-text} command stops the
container started with the previous <code>podman</code>{.fm-code-in-text}
<code>run</code>{.fm-code-in-text} command[]{#02.htm#marker-1043634}.</p>
<p>[]{#02.htm#pgfId-1037705}When stopping a container, Podman examines the
running container and sends a stop signal, usually
<code>SIGTERM</code>{.fm-code-in-text}, to the primary process (PID1) of the
container, and then by default it waits 10 seconds for the container to
stop. The stop signal tells the primary process within the container to
exit gracefully. If the container doesn&rsquo;t stop within 10 seconds, Podman
sends the <code>SIGKILL</code>{.fm-code-in-text} signal[]{#02.htm#marker-1037706}
to the process, forcing the container to stop. The 10-second wait gives
the processes in the container time to clean up and commit changes.</p>
<p>[]{#02.htm#pgfId-1037707}The default stop signal can be changed for a
container using the <code>podman</code>{.fm-code-in-text} <code>run</code>{.fm-code-in-text}
<code>--stop-signal</code>{.fm-code-in-text} option[]{#02.htm#marker-1037708}.
Sometimes the primary or init process of a container ignores
<code>SIGTERM</code>{.fm-code-in-text} (e.g., containers that use systemd as the
primary process inside a container). systemd ignores
<code>SIGTERM</code>{.fm-code-in-text} and specifies that it shuts down using the
<code>SIGRTMIN+3</code>{.fm-code-in-text} <code>(signal</code>{.fm-code-in-text}
<code>#37)</code>{.fm-code-in-text} signal. The stop signal can be embedded in
container images, as I describe in section 2.3.</p>
<p>[]{#02.htm#pgfId-1037710}Some containers ignore the
<code>SIGTERM</code>{.fm-code-in-text} stop signal[]{#02.htm#marker-1037709}, which
means you have to wait 10 seconds for the container to exit. If you know
the container ignores the default stop signal, and you don&rsquo;t care about
the container cleaning up, you can just add the <code>-t</code>{.fm-code-in-text}
<code>0</code>{.fm-code-in-text} option[]{#02.htm#marker-1037711} to
<code>podman</code>{.fm-code-in-text} <code>stop</code>{.fm-code-in-text} to send the
<code>SIGKILL</code>{.fm-code-in-text} signal[]{#02.htm#marker-1037712} right away:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman stop -t 0 myapp1
myapp1</code></pre></div>
<p>[]{#02.htm#pgfId-1037716}Podman has a similar command,
<code>podman</code>{.fm-code-in-text}
<code>kill</code>{.fm-code-in-text}[]{#02.htm#marker-1037715}, which sends the
specified kill signal. The <code>podman</code>{.fm-code-in-text}
<code>kill</code>{.fm-code-in-text} command[]{#02.htm#marker-1037717} can be useful
when you want to send signals into the container without actually
stopping the container.</p>
<p>[]{#02.htm#pgfId-1037720}[]{#02.htm#id_26vkzzhe5enr}Some notable Podman
stop options[]{#02.htm#marker-1037719} include the following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1037722 .calibre17}<code>--timeout</code>{.fm-code-in-text}
<code>(-t</code>{.fm-code-in-text}[]{#02.htm#marker-1037721
.calibre17}<code>)</code>{.fm-code-in-text}&mdash;This sets the timeout;
<code>-t</code>{.fm-code-in-text} <code>0</code>{.fm-code-in-text} sends the
<code>SIGKILL</code>{.fm-code-in-text} without waiting for the container to
stop.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037724 .calibre17}<code>--latest</code>{.fm-code-in-text}
<code>(-l</code>{.fm-code-in-text}[]{#02.htm#marker-1048907
.calibre17}<code>)</code>{.fm-code-in-text}&mdash;This is a useful option to allow
you to stop the last created container rather than having to use the
container name or container ID. Most Podman commands that require
you to specify a container name or ID also accept the
<code>--latest</code>{.fm-code-in-text} option[]{#02.htm#marker-1048909
.calibre17}. This is only available on Linux machines.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037727
.calibre17}<code>--all</code>{.fm-code-in-text}[]{#02.htm#marker-1048910
.calibre17}&mdash;This tells Podman to stop all running containers.
Similarly to <code>--latest</code>{.fm-code-in-text}, Podman commands that
require a container name or container ID parameter also take the
<code>--all</code>{.fm-code-in-text} option[]{#02.htm#marker-1048912
.calibre17}.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1037731}[]{#02.htm#id_lgnto058jplf}Use the
<code>man</code>{.fm-code-in-text} <code>podman-stop</code>{.fm-code-in-text}
command[]{#02.htm#marker-1037730} for information about all options.</p>
<p>[]{#02.htm#pgfId-1037732}Eventually, your system will have lots of
stopped containers, and sometimes you will need to restart them (e.g.,
if the system was rebooted). Another common use case is to first create
a container and later start it. The next section explains how to start a
[]{#02.htm#marker-1037733}[]{#02.htm#marker-1037734}[]{#02.htm#marker-1037735}container.</p>
<h3 id="heading_id_7" class="fm-head1">[]{#02.htm#pgfId-1037737}2.1.4 Starting containers</h3>
<p>[]{#02.htm#pgfId-1037741}The
[]{#02.htm#marker-1037738}[]{#02.htm#marker-1037739}[]{#02.htm#marker-1037740}container
you created has now been stopped. Next, you may want to start it back up
again using the command in the following listing.</p>
<p>[]{#02.htm#pgfId-1037742}Listing 2.3 Example of starting a container</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman start myapp
myapp                  ❶</code></pre></div>
<p>[]{#02.htm#pgfId-1051810}[❶]{.fm-combinumeral} The start command prints
the names of the containers that were started.</p>
<p>[]{#02.htm#pgfId-1037747}The <code>podman</code>{.fm-code-in-text}
<code>start</code>{.fm-code-in-text} command[]{#02.htm#marker-1037746} starts one
or more containers. This command will output the container ID,
indicating that your container is up and running. You can now reconnect
to it with a web browser. One common use case for
<code>podman</code>{.fm-code-in-text} <code>start</code>{.fm-code-in-text} is starting a
container after a reboot to start all of the containers that were
stopped during shutdown.</p>
<p>[]{#02.htm#pgfId-1037749}Some favorite Podman start options include
these:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1037752
.calibre17}<code>--all</code>{.fm-code-in-text}[]{#02.htm#marker-1037750
.calibre17}&mdash;This []{#02.htm#marker-1037751 .calibre17}starts all
of the stopped containers in container storage.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037754
.calibre17}<code>--attach</code>{.fm-code-in-text}[]{#02.htm#marker-1037753
.calibre17}&mdash;This attaches your terminal to the output of the
container.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037756
.calibre17}<code>--interactive</code>{.fm-code-in-text}
<code>(-i</code>{.fm-code-in-text}[]{#02.htm#marker-1037755
.calibre17}<code>)</code>{.fm-code-in-text}&mdash;This attaches the terminal input
to the container.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1037758}Use the <code>man</code>{.fm-code-in-text}
<code>podman-start</code>{.fm-code-in-text} command[]{#02.htm#marker-1037757} for
information about all options.</p>
<p>[]{#02.htm#pgfId-1037759}After you&rsquo;ve been using Podman for a while and
have pulled down and run many different container images, you might want
to figure out which containers are running or which containers you have
in local storage. You will need to be able to list
[]{#02.htm#marker-1037760}these
[]{#02.htm#marker-1037761}[]{#02.htm#marker-1037762}[]{#02.htm#marker-1037763}containers.</p>
<h3 id="heading_id_8" class="fm-head1">[]{#02.htm#pgfId-1037765}2.1.5 Listing containers</h3>
<p>[]{#02.htm#pgfId-1037769}You
[]{#02.htm#marker-1037766}[]{#02.htm#marker-1037767}[]{#02.htm#marker-1037768}can
list the running containers and all of the containers that were
previously created. Use the <code>podman</code>{.fm-code-in-text}
<code>ps</code>{.fm-code-in-text} command[]{#02.htm#marker-1037770} to list
containers:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman ps
CONTAINER ID IMAGE                      COMMAND        CREATED \ 
➥   STATUS         PORTS          NAMES
b1255e94d084 registry.access.redhat.com/ubi8/httpd-24:latest /usr/bin/run-\ 
➥ http... 6 minutes ago Up 4 minutes ago 0.0.0.0:8080-&gt;8080/tcp myapp</code></pre></div>
<p>[]{#02.htm#pgfId-1037775}Notice the <code>podman</code>{.fm-code-in-text}
<code>ps</code>{.fm-code-in-text} command[]{#02.htm#marker-1037774} by default
lists the running containers. Use the <code>--all</code>{.fm-code-in-text}
option[]{#02.htm#marker-1037776} to see all of the containers:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman ps --all
CONTAINER ID IMAGE                       COMMAND        CREATED \ 
➥   STATUS          PORTS          NAMES
b1255e94d084 registry.access.redhat.com/ubi8/httpd-24:latest /usr/bin/run-\
➥ http... 9 minutes ago Up 8 minutes ago     0.0.0.0:8080-&gt;8080/tcp myapp
3efee4d39965 registry.access.redhat.com/ubi8/httpd-24:latest /usr/bin/run-\
➥ http... 7 minutes ago Exited (0) 3 minutes ago 0.0.0.0:8081-&gt;8080/tcp myapp1</code></pre></div>
<p>[]{#02.htm#pgfId-1037782}[]{#02.htm#id_8i6xl26vaon5}Some notable
<code>podman</code>{.fm-code-in-text} <code>ps</code>{.fm-code-in-text} options include the
following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1037784
.calibre17}<code>--all</code>{.fm-code-in-text}[]{#02.htm#marker-1037783
.calibre17}&mdash;This tells Podman to list all containers rather than
just running containers.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037786
.calibre17}<code>--quiet</code>{.fm-code-in-text}[]{#02.htm#marker-1037785
.calibre17}&mdash;This tells Podman to only print the container IDs.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037788
.calibre17}<code>--size</code>{.fm-code-in-text}[]{#02.htm#marker-1037787
.calibre17}&mdash;This tells Podman to return the amount of disk space
currently used for each container other than the images they are
based on.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1037790}Use the <code>man</code>{.fm-code-in-text}
<code>podman-ps</code>{.fm-code-in-text} command[]{#02.htm#marker-1037789} for
information about all options. Now that you know all of the containers
you have on the system, you might want to inspect their
[]{#02.htm#marker-1037791}[]{#02.htm#marker-1037792}[]{#02.htm#marker-1037793}internals.</p>
<h3 id="heading_id_9" class="fm-head1">[]{#02.htm#pgfId-1037795}2.1.6 Inspecting containers</h3>
<p>[]{#02.htm#pgfId-1037799}To
[]{#02.htm#marker-1037796}[]{#02.htm#marker-1037797}[]{#02.htm#marker-1037798}fully
understand a container, sometimes you want to know which image a
container was based on, which environment variables a container gets by
default, or what the security settings used for a container are. The
<code>podman</code>{.fm-code-in-text} <code>ps</code>{.fm-code-in-text}
command[]{#02.htm#marker-1037800} gives us some data about the
containers, but if you want to really examine information about the
container, you can use the <code>podman</code>{.fm-code-in-text}
<code>inspect</code>{.fm-code-in-text} command[]{#02.htm#marker-1037801}.</p>
<p>[]{#02.htm#pgfId-1037803}The <code>podman</code>{.fm-code-in-text}
<code>inspect</code>{.fm-code-in-text} command[]{#02.htm#marker-1037802} can also
be used to inspect images, networks, volumes, and pods. The
<code>podman</code>{.fm-code-in-text} <code>container</code>{.fm-code-in-text}
<code>inspect</code>{.fm-code-in-text} command[]{#02.htm#marker-1037804} is also
available and specific to containers. But most users just type the
shorter <code>podman</code>{.fm-code-in-text} <code>inspect</code>{.fm-code-in-text}
command[]{#02.htm#marker-1037805}:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman inspect myapp
[
  {
      &#34;Id&#34;: &#34;240271ae90480d3836b1477e5c0b49fbd3883846ca474e3f6effdfb271f4ff54&#34;,
      &#34;Created&#34;: &#34;2021-09-27T05:27:47.163828842-04:00&#34;,
      &#34;Path&#34;: &#34;container-entrypoint&#34;,
      &#34;Args&#34;: [
          &#34;/usr/bin/run-httpd&#34;
      ],
...
]</code></pre></div>
<p>[]{#02.htm#pgfId-1037818}As you can see, the <code>podman</code>{.fm-code-in-text}
<code>inspect</code>{.fm-code-in-text} command[]{#02.htm#marker-1037817} outputs a
large JSON file&mdash;307 lines on my machine. All of this information is
eventually handed down the OCI runtime to launch the container. When
using the <code>inspect</code>{.fm-code-in-text} command, it is often better to
pipe its output to <code>less</code>{.fm-code-in-text} or <code>grep</code>{.fm-code-in-text}
to find particular fields you are interested in. Alternatively, you can
use the format option. If you want to examine the command executed when
you start the container, execute the following.</p>
<p>[]{#02.htm#pgfId-1037819}Listing 2.4 Inspecting a specified command to
execute the container</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman inspect --format &#39;{{ .Config.Cmd }}&#39; myapp     ❶
[/usr/bin/run-httpd]</code></pre></div>
<p>[]{#02.htm#pgfId-1051739}[❶]{.fm-combinumeral} inspect is displaying
data from the OCI image specification.</p>
<p>[]{#02.htm#pgfId-1037823}Or if you want to see the stop signal, execute
the following.</p>
<p>[]{#02.htm#pgfId-1037824}Listing 2.5 Inspecting the stop signal to be
used when stopping the container</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman inspect --format &#39;{{ .Config.StopSignal }}&#39; myapp
15       ❶</code></pre></div>
<p>[]{#02.htm#pgfId-1051675}[❶]{.fm-combinumeral} The default stop signal
for all containers is 15 (SIGTERM).</p>
<p>[]{#02.htm#pgfId-1037830}[]{#02.htm#id_c6rw1dirvvel}Some notable
<code>podman</code>{.fm-code-in-text} <code>inspect</code>{.fm-code-in-text}
options[]{#02.htm#marker-1037829} include the following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1037832 .calibre17}<code>--latest</code>{.fm-code-in-text}
<code>(-l</code>{.fm-code-in-text}[]{#02.htm#marker-1037831
.calibre17}<code>)</code>{.fm-code-in-text}&mdash;This is handy in that it allows
you to quickly inspect the last created container rather than
specifying the container name or container ID.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037834
.calibre17}<code>--format</code>{.fm-code-in-text}[]{#02.htm#marker-1037833
.calibre17}&mdash;This is useful, as shown previously, to extract
particular fields out of the JSON.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037836
.calibre17}<code>--size</code>{.fm-code-in-text}[]{#02.htm#marker-1037835
.calibre17}&mdash;This adds the amount of disk space the container is
using. Gathering this information takes a long time, so it is not
done by default.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1037838}Use the <code>man</code>{.fm-code-in-text}
<code>podman-inspect</code>{.fm-code-in-text} command[]{#02.htm#marker-1037837} for
information about all options. After you inspect a container, you might
realize you no longer need that container taking up storage, so you need
to remove
[]{#02.htm#marker-1037839}[]{#02.htm#marker-1037840}[]{#02.htm#marker-1037841}it.</p>
<h3 id="heading_id_10" class="fm-head1">[]{#02.htm#pgfId-1037843}2.1.7 Removing containers</h3>
<p>[]{#02.htm#pgfId-1037847}If
[]{#02.htm#marker-1037844}[]{#02.htm#marker-1037845}[]{#02.htm#marker-1037846}you
are done using a container, you may want to remove the container to free
up disk space or reuse the container name. Remember when you started a
second container called <code>myapp1</code>{.fm-code-in-text}? You no longer need
it, so you can remove it. Make sure to stop the container (section
2.1.3) before removing it. Then use the <code>podman</code>{.fm-code-in-text}
<code>rm</code>{.fm-code-in-text} command[]{#02.htm#marker-1037848} to remove
container:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman rm myapp1
3efee4d3996532769356ffea23e1f50710019d4efc704d39026c5bffd6aa18be</code></pre></div>
<p>[]{#02.htm#pgfId-1037852}[]{#02.htm#id_t4e49sbt7wo71111}Some notable
<code>podman</code>{.fm-code-in-text} <code>rm</code>{.fm-code-in-text} options include the
following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1037854
.calibre17}<code>--all</code>{.fm-code-in-text}[]{#02.htm#marker-1037853
.calibre17}&mdash;This option is useful if you want to remove all your
containers.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037856
.calibre17}<code>--force</code>{.fm-code-in-text}[]{#02.htm#marker-1037855
.calibre17}&mdash;This option tells Podman to stop all the running
containers when removing.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1037858}Use the <code>man</code>{.fm-code-in-text}
<code>podman-rm</code>{.fm-code-in-text} command[]{#02.htm#marker-1037857} for
information about all options. Now that you understand a few commands,
it is time to start modifying the running
[]{#02.htm#marker-1037859}[]{#02.htm#marker-1037860}[]{#02.htm#marker-1037861}container.</p>
<h3 id="heading_id_11" class="fm-head1">[]{#02.htm#pgfId-1037863}2.1.8 exec-ing into a container</h3>
<p>[]{#02.htm#pgfId-1037867}Often,
[]{#02.htm#marker-1037864}[]{#02.htm#marker-1037865}[]{#02.htm#marker-1037866}when
a container is running, you might want to start another process within
the container to debug or examine what is going on. In some cases, you
may want to modify some of the content the container is using.</p>
<p>[]{#02.htm#pgfId-1037868}Imagine you want to go into your container and
modify the web page it is showing. You can <code>exec</code>{.fm-code-in-text} into
the container using the <code>podman</code>{.fm-code-in-text}
<code>exec</code>{.fm-code-in-text} command[]{#02.htm#marker-1037869}. Use the
<code>--interactive</code>{.fm-code-in-text} (<code>-i</code>{.fm-code-in-text})
option[]{#02.htm#marker-1037870} to allow you to execute commands within
the container. You need to specify the name of the container
<code>myapp</code>{.fm-code-in-text}[]{#02.htm#marker-1037871} and execute the Bash
script while in the container. If you stopped the
<code>myapp</code>{.fm-code-in-text} container,[]{#02.htm#marker-1037872} you need
to restart it, since <code>podman</code>{.fm-code-in-text} <code>exec</code>{.fm-code-in-text}
only works on running containers.</p>
<p>[]{#02.htm#pgfId-1037873}In the following example, you will
<code>exec</code>{.fm-code-in-text} a <code>bash</code>{.fm-code-in-text} process into the
container to create the /var/www/html/index.html file. You will write
HTML content that causes the containerized website to display
<code>Hello</code>{.fm-code-in-text} <code>World</code>{.fm-code-in-text}:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting"> $ podman exec -i myapp bash -c &#39;cat &gt; /var/www/html/index.html&#39; &lt;&lt; _EOF
&lt;html&gt;
 &lt;head&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;h1&gt;Hello World&lt;/h1&gt;
 &lt;/body&gt;
&lt;/html&gt;
_EOF</code></pre></div>
<p>[]{#02.htm#pgfId-1037883}<code>exec</code>{.fm-code-in-text}-ing back into the
container a second time, you can see that the file was successfully
modified. This shows that modifications to a container via
<code>exec</code>{.fm-code-in-text} are permanent to the container and will remain
even if you stopped and restarted the container. A key difference
between <code>podman</code>{.fm-code-in-text} <code>run</code>{.fm-code-in-text} and
<code>podman</code>{.fm-code-in-text} <code>exec</code>{.fm-code-in-text} is that
<code>run</code>{.fm-code-in-text} creates a new container off of an image with
processes running inside, while <code>exec</code>{.fm-code-in-text} starts
processes inside of existing containers:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman exec myapp cat /var/www/html/index.html
&lt;html&gt;
 &lt;head&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;h1&gt;Hello World&lt;/h1&gt;
 &lt;/body&gt;
&lt;/html&gt;</code></pre></div>
<p>[]{#02.htm#pgfId-1037892}Now let&rsquo;s connect a web browser to the
container to see if the content has changed (see figure 2.2):</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ web-browser localhost:8080</code></pre></div>
<p>::: figure
<a href="#R-image-f2e4de32a3a904145f580fe860f364c0" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="images/OEBPS/Images/02-02.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f2e4de32a3a904145f580fe860f364c0"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="images/OEBPS/Images/02-02.png"></a>{.calibre18}</p>
<p>[]{#02.htm#pgfId-1052948}Figure 2.2 Web browser window connecting to the
ubi8/httpd-24 container running in Podman with updated Hello World HTML
:::</p>
<p>[]{#02.htm#pgfId-1037903}[]{#02.htm#id_gb8ykx98avmq}Some notable
<code>podman</code>{.fm-code-in-text} <code>exec</code>{.fm-code-in-text}
options[]{#02.htm#marker-1037902} include the following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1037905
.calibre17}<code>--tty</code>{.fm-code-in-text}[]{#02.htm#marker-1037904
.calibre17}&mdash;This connects a <code>-tty</code>{.fm-code-in-text} to the
<code>exec</code>{.fm-code-in-text} session.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037908
.calibre17}<code>--interactive</code>{.fm-code-in-text}[]{#02.htm#marker-1037906
.calibre17}&mdash;The <code>-i</code>{.fm-code-in-text}
option[]{#02.htm#marker-1037907 .calibre17} tells Podman to run in
interactive mode, meaning you can interact with an
<code>exec</code>{.fm-code-in-text}-ed program, like a shell.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1037910}Use the <code>man</code>{.fm-code-in-text}
<code>podman-exec</code>{.fm-code-in-text} command[]{#02.htm#marker-1037909} for
information about all options.</p>
<p>[]{#02.htm#pgfId-1037911}Now that you have created an application, you
might want to share it with others. First, you need to commit the
container to an
[]{#02.htm#marker-1037912}[]{#02.htm#marker-1037913}[]{#02.htm#marker-1037914}image.</p>
<h3 id="heading_id_12" class="fm-head1">[]{#02.htm#pgfId-1037916}2.1.9 Creating an image from a container</h3>
<p>[]{#02.htm#pgfId-1037920}Developers
[]{#02.htm#marker-1037917}[]{#02.htm#marker-1037918}[]{#02.htm#marker-1037919}often
run containers from a base image to create a new container environment.
Once they are done, they pack this environment into a container image to
be able to share it with other users. Those users can then use Podman to
launch the containerized application. You can do this with Podman by
committing the container to an OCI image.</p>
<p>[]{#02.htm#pgfId-1037921}First, stop or pause the container to make sure
nothing gets modified while you are committing it:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman stop myapp</code></pre></div>
<p>[]{#02.htm#pgfId-1037924}Now you can execute the
<code>podman</code>{.fm-code-in-text} <code>commit</code>{.fm-code-in-text}
command[]{#02.htm#marker-1049110} to take your application container,
<code>myapp</code>{.fm-code-in-text}[]{#02.htm#marker-1049112}, and commit it,
creating a new image named <code>myimage</code>{.fm-code-in-text}:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman commit myapp myimage
Getting image source signatures
Copying blob e39c3abf0df9 skipped: already exists
Copying blob 8f26704f753c skipped: already exists
Copying blob 83310c7c677c skipped: already exists
Copying blob 654b3bf1361e skipped: already exists
Copying blob 9e816183404c done              Copying config e38084bb8a done
Writing manifest to image destination
Storing signatures
e38084bb8a76104a7cac22b919f67646119aff235bb1cfcba5478cc1fbf1c9eb</code></pre></div>
<p>[]{#02.htm#pgfId-1037937}Now you can continue running the existing
<code>myapp</code>{.fm-code-in-text} container[]{#02.htm#marker-1037936} by calling
<code>podman</code>{.fm-code-in-text} <code>start</code>{.fm-code-in-text}, or you can create
a new container based on <code>myimage</code>{.fm-code-in-text}:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -d --name myapp1 -p 8080:8080 myimage
0052cb32c8e63b845ac5dfd5ba176b8204535c2c6cafa3277453424de601263f</code></pre></div>
<p>[]{#02.htm#pgfId-1037941}[Note]{.fm-callout-head} Using the
<code>podman</code>{.fm-code-in-text1} <code>commit</code>{.fm-code-in-text1}
command[]{#02.htm#marker-1037940} to create an image is not a common
method. The entire process of building container images can be scripted
and automated using <code>podman</code>{.fm-code-in-text1}
<code>build</code>{.fm-code-in-text1}. See section 2.3 for more information on this
process.</p>
<p>[]{#02.htm#pgfId-1037944}[]{#02.htm#id_rll08y12fcy}Some notable
<code>podman</code>{.fm-code-in-text} <code>commit</code>{.fm-code-in-text}
options[]{#02.htm#marker-1037943} include the following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1037946
.calibre17}<code>--pause</code>{.fm-code-in-text}[]{#02.htm#marker-1037945
.calibre17}&mdash;This pauses a running container during the commit.
Notice I stopped the container before doing the commit, while I
could have simply paused it. The <code>podman</code>{.fm-code-in-text}
<code>pause</code>{.fm-code-in-text} and <code>podman</code>{.fm-code-in-text}
<code>unpause</code>{.fm-code-in-text} commands[]{#02.htm#marker-1037947
.calibre17} allow you to pause and unpause containers directly.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1037949
.calibre17}<code>--change</code>{.fm-code-in-text}[]{#02.htm#marker-1037948
.calibre17}&mdash;This option allows you to commit instructions on using
the image. The instructions are
<code>CMD</code>{.fm-code-in-text}[]{#02.htm#marker-1037950 .calibre17},
<code>ENTRYPOINT</code>{.fm-code-in-text}[]{#02.htm#marker-1037951 .calibre17},
<code>ENV</code>{.fm-code-in-text}[]{#02.htm#marker-1037952 .calibre17},
<code>EXPOSE</code>{.fm-code-in-text}[]{#02.htm#marker-1037953 .calibre17},
<code>LABEL</code>{.fm-code-in-text}[]{#02.htm#marker-1037954 .calibre17},
<code>ONBUILD</code>{.fm-code-in-text}[]{#02.htm#marker-1037955 .calibre17},
<code>STOPSIGNAL</code>{.fm-code-in-text}[]{#02.htm#marker-1037956 .calibre17},
<code>USER</code>{.fm-code-in-text}[]{#02.htm#marker-1037957 .calibre17},
<code>VOLUME</code>{.fm-code-in-text}[]{#02.htm#marker-1037958 .calibre17}, and
<code>WORKDIR</code>{.fm-code-in-text}. These instructions match up with the
directives in the Containerfile or Dockerfile.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1037961}Use the <code>man</code>{.fm-code-in-text}
<code>podman-commit</code>{.fm-code-in-text} command[]{#02.htm#marker-1037960} for
information about all options. Table 2.1 lists all the Podman container
commands.</p>
<p>[]{#02.htm#pgfId-1037962}Now that you have committed your container to
an image, it is time to show how Podman can work
[]{#02.htm#marker-1037963}[]{#02.htm#marker-1037964}[]{#02.htm#marker-1037965}with
[]{#02.htm#marker-1037966}[]{#02.htm#marker-1037967}images.</p>
<p>[]{#02.htm#pgfId-1037968}[Note]{.fm-callout-head} You have examined a
few of the Podman container commands, but there are many more. Use the
<code>podman-container(1)</code>{.fm-code-in-text1} man
pages[]{#02.htm#marker-1037969} to explore all of them as well as a full
description of commands specified in this section.</p>
<p>[]{#02.htm#pgfId-1044663}Table 2.1 Podman container commands</p>
<p>+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []              | []{#02.htm#pg   | []{                               |
| {#02.htm#pgfId- | fId-1044671}Man | #02.htm#pgfId-1044673}Description |
| 1044669}Command | page            |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{             | []{#02.htm#p    | []{#02.htm#pgfId-1044679}Attach   |
| #02.htm#pgfId-1 | gfId-1044677}<code>p | to a running container.           | | 044675}</code>attach<code> | odman-container |                                   | | {.fm-code-in-te | -attach(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044866} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.         | [               | []                                |
| htm#pgfId-10446 | ]{#02.htm#pgfId | {#02.htm#pgfId-1044685}Checkpoint |
| 81}<code>checkpoint</code> | -1044683}<code>podma | a container.                      | | {.fm-code-in-te | n-container-che |                                   | | xt1}[]{#02.htm# | ckpoint(1)</code>{.fm |                                   |
| marker-1044867} | -code-in-text1} |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#            | []{#02.htm#pg   | []{#02.htm#pgfId-1044691}Clean up |
| 02.htm#pgfId-10 | fId-1044689}<code>po | network and mount points of a     | | 44687}</code>cleanup<code> | dman-container- | container.                        | | {.fm-code-in-te | cleanup(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044868} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{             | []{#02.htm#p    | []{#02.htm#pgfId-1044697}Commit a |
| #02.htm#pgfId-1 | gfId-1044695}<code>p | container into an image.          | | 044693}</code>commit<code> | odman-container |                                   | | {.fm-code-in-te | -commit(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044869} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm#pgf  | []{#02.h        | []{#02.htm#pgfId-1044703}Copy     |
| Id-1044699}<code>cp</code> | tm#pgfId-104470 | files or folders into and out of  |
| {.fm-code-in-te | 1}<code>podman-conta | containers.                       | | xt1}[]{#02.htm# | iner-cp(1)</code>{.fm |                                   |
| marker-1044870} | -code-in-text1} |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{             | []{#02.htm#p    | []{#02.htm#pgfId-1044709}Create a |
| #02.htm#pgfId-1 | gfId-1044707}<code>p | new container.                    | | 044705}</code>create<code> | odman-container |                                   | | {.fm-code-in-te | -create(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044871} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [               | []{#02.htm      | []{#02.htm#pgfId-1044715}Inspect  |
| ]{#02.htm#pgfId | #pgfId-1044713} | changes in a container&rsquo;s          |
| -1044711}<code>diff</code> | <code>podman-contain | filesystem.                       | | {.fm-code-in-te | er-diff(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044872} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [               | []{#02.htm      | []{#02.htm#pgfId-1044721}Run a    |
| ]{#02.htm#pgfId | #pgfId-1044719} | process in a container.           |
| -1044717}<code>exec</code> | <code>podman-contain |                                   | | {.fm-code-in-te | er-exec(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044873} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.         | []{#02.htm#p    | []{#02.htm#pgfId-1044727}Check if |
| htm#pgfId-10447 | gfId-1044725}<code>p | a container                       | | 23}</code>exists<code>{.fm | odman-container | exists[]{#02.htm#marker-1044874}. | | -code-in-text1} | -exists(1)</code>{.fm |                                   |
|                 | -code-in-text1} |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{             | []{#02.htm#p    | []{#02.htm#pgfId-1044733}Export a |
| #02.htm#pgfId-1 | gfId-1044731}<code>p | container\'s filesystem as a TAR  | | 044729}</code>export<code> | odman-container | archive.                          | | {.fm-code-in-te | -export(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044875} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [               | []{#02.htm      | []{#02.htm#pgfId-1044739}Init a   |
| ]{#02.htm#pgfId | #pgfId-1044737} | container.                        |
| -1044735}<code>init</code> | <code>podman-contain |                                   | | {.fm-code-in-te | er-init(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044876} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#            | []{#02.htm#pg   | []{#02.htm#pgfId-1044745}Display  |
| 02.htm#pgfId-10 | fId-1044743}<code>po | detailed information on a         | | 44741}</code>inspect<code> | dman-container- | container.                        | | {.fm-code-in-te | inspect(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044877} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [               | []{#02.htm      | []{#02.htm#pgfId-1044751}Send a   |
| ]{#02.htm#pgfId | #pgfId-1044749} | signal to the primary process in  |
| -1044747}<code>kill</code> | <code>podman-contain | the container.                    | | {.fm-code-in-te | er-kill(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044878} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#0           | []{#02.htm      | []{#02.htm#pgfId-1044757}List all |
| 2.htm#pgfId-104 | #pgfId-1044755} | of the containers.                |
| 4753}<code>List</code>{.fm | <code>podman-contain |                                   | | -code-in-text1} | er-list(1)</code>{.fm |                                   |
| <code>(ps</code>{.fm-co    | -code-in-text1} |                                   |
| de-in-text1}[]{ |                 |                                   |
| #02.htm#marker- |                 |                                   |
| 1044879}<code>)</code>{.fm |                 |                                   |
| -code-in-text1} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#0           | []{#02.htm      | []{#02.htm#pgfId-1044763}Fetch    |
| 2.htm#pgfId-104 | #pgfId-1044761} | logs[]{#02.htm#marker-1044880}    |
| 4759}<code>logs</code>{.fm | <code>podman-contain | for a container.                  | | -code-in-text1} | er-logs(1)</code>{.fm |                                   |
|                 | -code-in-text1} |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []              | []{#02.htm#     | []{#02.htm#pgfId-1044769}Mount a  |
| {#02.htm#pgfId- | pgfId-1044767}<code> | container\'s root filesystem.     | | 1044765}</code>mount<code> | podman-containe |                                   | | {.fm-code-in-te | r-mount(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044881} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []              | []{#02.htm#     | []{#02.htm#pgfId-1044775}Pause    |
| {#02.htm#pgfId- | pgfId-1044773}<code> | container.                        | | 1044771}</code>pause<code> | podman-containe |                                   | | {.fm-code-in-te | r-pause(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044882} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#0           | []{#02.htm      | []{#02.htm#pgfId-1044781}List     |
| 2.htm#pgfId-104 | #pgfId-1044779} | port mappings for a container.    |
| 4777}<code>port</code>{.fm | <code>podman-contain |                                   | | -code-in-text1} | er-port(1)</code>{.fm |                                   |
|                 | -code-in-text1} |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []              | []{#02.htm#     | []{#02.htm#pgfId-1044787}Remove   |
| {#02.htm#pgfId- | pgfId-1044785}<code> | all non-running containers.       | | 1044783}</code>prune<code> | podman-containe |                                   | | {.fm-code-in-te | r-prune(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044883} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{             | []{#02.htm#p    | []{#02.htm#pgfId-1044793}Rename   |
| #02.htm#pgfId-1 | gfId-1044791}<code>p | an existing container.            | | 044789}</code>rename<code> | odman-container |                                   | | {.fm-code-in-te | -rename(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044884} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#            | []{#02.htm#pg   | []{#02.htm#pgfId-1044799}Restart  |
| 02.htm#pgfId-10 | fId-1044797}<code>po | a container.                      | | 44795}</code>restart<code> | dman-container- |                                   | | {.fm-code-in-te | restart(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044885} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#            | []{#02.htm#pg   | []{#02.htm#pgfId-1044805}Restore  |
| 02.htm#pgfId-10 | fId-1044803}<code>po | a checkpointed container.         | | 44801}</code>restore<code> | dman-container- |                                   | | {.fm-code-in-te | restore(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044886} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm#pgf  | []{#02.h        | []{#02.htm#pgfId-1044811}Remove a |
| Id-1044807}<code>rm</code> | tm#pgfId-104480 | container.                        |
| {.fm-code-in-te | 9}<code>podman-conta |                                   | | xt1}[]{#02.htm# | iner-rm(1)</code>{.fm |                                   |
| marker-1044887} | -code-in-text1} |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#            | []{#02.ht       | []{#02.htm#pgfId-1044817}Run a    |
| 02.htm#pgfId-10 | m#pgfId-1044815 | command in a new container.       |
| 44813}<code>run</code>{.fm | }<code>podman-contai |                                   | | -code-in-text1} | ner-run(1)</code>{.fm |                                   |
|                 | -code-in-text1} |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#0           | []{#02.htm#pgf  | []{#02.htm#pgfId-1044823}Execute  |
| 2.htm#pgfId-104 | Id-1044821}<code>pod | the command described by an image | | 4819}</code>runlabel<code> | man-container-r | label.                            | | {.fm-code-in-te | unlabel(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044888} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []              | []{#02.htm#     | []{#02.htm#pgfId-1044829}Start a  |
| {#02.htm#pgfId- | pgfId-1044827}<code> | container.                        | | 1044825}</code>start<code> | podman-containe |                                   | | {.fm-code-in-te | r-start(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044889} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []              | []{#02.htm#     | []{#02.htm#pgfId-1044835}Display  |
| {#02.htm#pgfId- | pgfId-1044833}<code> | statistics for a container.       | | 1044831}</code>stats<code> | podman-containe |                                   | | {.fm-code-in-te | r-stats(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044890} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [               | []{#02.htm      | []{#02.htm#pgfId-1044841}Stop a   |
| ]{#02.htm#pgfId | #pgfId-1044839} | container.                        |
| -1044837}<code>stop</code> | <code>podman-contain |                                   | | {.fm-code-in-te | er-stop(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044891} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm#pgfI | []{#02.ht       | []{#02.htm#pgfId-1044847}Display  |
| d-1044843}<code>top</code> | m#pgfId-1044845 | running process in a container.   |
| {.fm-code-in-te | }<code>podman-contai |                                   | | xt1}[]{#02.htm# | ner-top(1)</code>{.fm |                                   |
| marker-1044892} | -code-in-text1} |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#            | []{#02.htm#pg   | []{#02.htm#pgfId-1044853}Unmount  |
| 02.htm#pgfId-10 | fId-1044851}<code>po | a container\'s root filesystem.   | | 44849}</code>unmount<code> | dman-container- |                                   | | {.fm-code-in-te | unmount(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044893} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#            | []{#02.htm#pg   | []{#02.htm#pgfId-1044859}Unpause  |
| 02.htm#pgfId-10 | fId-1044857}<code>po | all the containers in a pod.      | | 44855}</code>unpause<code> | dman-container- |                                   | | {.fm-code-in-te | unpause(1)</code>{.fm |                                   |
| xt1}[]{#02.htm# | -code-in-text1} |                                   |
| marker-1044894} |                 |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#0           | []{#02.htm      | []{#02.htm#pgfId-1044865}Wait for |
| 2.htm#pgfId-104 | #pgfId-1044863} | a container to exit.              |
| 4861}<code>wait</code>{.fm | <code>podman-contain |                                   | | -code-in-text1} | er-wait(1)</code>{.fm |                                   |
|                 | -code-in-text1} |                                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+</p>
<h2 id="heading_id_13" class="fm-head">[]{#02.htm#pgfId-1038202}2.2 Working with container images</h2>
<p>[]{#02.htm#pgfId-1038205}In
[]{#02.htm#marker-1038203}[]{#02.htm#marker-1038204}the previous
section, you tried basic operations with containers, including
inspecting and committing to a container image. In this section, you
will try working with container images, learn how they differ from
containers, and learn how to share them through container registries.</p>
<h3 id="heading_id_14" class="fm-head1">[]{#02.htm#pgfId-1038207}2.2.1 Differences between a container and an image</h3>
<p>[]{#02.htm#pgfId-1038211}One
[]{#02.htm#marker-1038208}[]{#02.htm#marker-1038209}[]{#02.htm#marker-1038210}of
the problems with computer programming is that the same names are
constantly used for different purposes. In the container world, there is
no more overused term than <em>container</em>. Often <em>container</em> refers to the
running processes launched by Podman. But <em>container</em> can also refer to
container data as the non-running objects sitting in container storage.
As you saw in the previous section[]{#02.htm#marker-1038212},
<code>podman</code>{.fm-code-in-text} <code>ps</code>{.fm-code-in-text}
<code>--all</code>{.fm-code-in-text} shows running and non-running containers.</p>
<p>[]{#02.htm#pgfId-1038214}Another example is the term
<em>namespace</em>[]{#02.htm#marker-1038213}, which is used in many different
ways. I often get confused when people talk about namespaces within
Kubernetes. Some people hear the term and think of <em>virtual clusters</em>,
but when I hear it I think of Linux namespaces used with Pods and
Containers. Similarly, <em>image</em> can refer to a VM image, a container
image, an OCI image, or a Docker image stored at a container registry.</p>
<p>[]{#02.htm#pgfId-1038215}I think of containers as executing processes
within an environment or something that is being prepared to run. In
contrast, images are <em>committed</em> <em>containers</em>, which are prepared to be
shared with others. Other users or systems can use these images to
create new containers.</p>
<p>[]{#02.htm#pgfId-1038216}Container images are just committed containers.
The OCI defines the format of an image. Podman uses the container/image
library
(<a href="https://github.com/containers/image" rel="external" target="_blank">https://github.com/containers/image</a>{.url})
for all of its interaction with images. Container images can be stored
in different types of storage or transports, as <em>container/image</em> refers
to them. These transports can be container registries, Docker archives,
OCI archives, <code>docker-daemon</code>{.fm-code-in-text}, as well as
containers/storage. See section 2.2.4 for more information on
transports.</p>
<p>[]{#02.htm#pgfId-1038217}In the context of Podman, I usually refer to
images as the content stored locally in a container storage or in
container registries like docker.io and quay.io. Podman uses the GitHub
container/storage library
(<a href="https://github.com/containers/storage" rel="external" target="_blank">https://github.com/containers/storage</a>{.url})
for handling locally stored images. Let&rsquo;s take a closer look at it.</p>
<p>[]{#02.htm#pgfId-1038218}The container/storage library provides the
concept of a storage container. Basically, storage containers are
intermediate storage content that hasn&rsquo;t been committed yet. Think of
them as files on disk and some JSON describing the content. Podman has
its own datastore of data related to a Podman container, and Podman
needs to deal with multiple users of its containers at the same time. It
relies on filesystem locking provided by containers/storage to make sure
hundreds of Podman executables can reliably share the same datastore.</p>
<p>[]{#02.htm#pgfId-1038219}When you commit a container to storage, Podman
copies the container storage to the image storage. Images are stored in
a series of layers, with every commit creating a new layer.</p>
<p>[]{#02.htm#pgfId-1038220}I like to think of an image like a wedding cake
(figure 2.3). In our previous example, you used the ubi8/httpd-24 image,
which is two layers: the base layer is ubi8, and then the image provided
added the <code>httpd</code>{.fm-code-in-text} package and a few others to create
the ubi8/httpd-24. Now when you commit your container in the previous
section, Podman adds another layer on top of the ubi8/httpd-24 image
called <code>myimage</code>{.fm-code-in-text}[]{#02.htm#marker-1038221}.</p>
<p>::: figure
<a href="#R-image-7b8ae6604ee0f4665498e88c16720298" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="images/OEBPS/Images/02-03.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7b8ae6604ee0f4665498e88c16720298"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="images/OEBPS/Images/02-03.png"></a>{.calibre18}</p>
<p>[]{#02.htm#pgfId-1052986}Figure 2.3 A wedding cake display showing the
images making up our Hello World application.
:::</p>
<p>[]{#02.htm#pgfId-1038228}One handy Podman command for showing the layers
of an image is the <code>podman</code>{.fm-code-in-text} <code>image</code>{.fm-code-in-text}
<code>tree</code>{.fm-code-in-text} command:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman image tree myimage
Image ID: 2c7e43d88038
Tags:   [localhost/myimage:latest]
Size:   461.7MB
Image Layers
├── ID: e39c3abf0df9 Size: 233.6MB
├── ID: 42c81bd2b468 Size: 20.48kB Top Layer of: [registry.access.redhat.com/ubi8:latest]
├── ID: 51a7beaa0b88 Size: 57.43MB
├── ID: 519e681b5702 Size: 170.6MB Top Layer of: [registry.access.redhat.com/ubi8/httpd-24:latest]
└── ID: bc3dcdefdac3 Size: 69.63kB Top Layer of: [localhost/myimage:latest localhost/myapp:latest]</code></pre></div>
<p>[]{#02.htm#pgfId-1038240}You can see that the image
<code>myimage</code>{.fm-code-in-text}[]{#02.htm#marker-1038239} consists of five
layers.</p>
<p>[]{#02.htm#pgfId-1038243}Another useful Podman
command[]{#02.htm#marker-1038241}, <code>podman</code>{.fm-code-in-text}
<code>image</code>{.fm-code-in-text}
<code>diff</code>{.fm-code-in-text}[]{#02.htm#marker-1038242}, allows you to see
the actual files and directories that have been changed (C), added (A),
or deleted (D) compared to another image or the lower layer:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman image diff myimage ubi8/httpd-24 
C /etc/group
C /etc/httpd/conf
C /etc/httpd/conf/httpd.conf
C /etc/httpd/conf.d
C /etc/httpd/conf.d/ssl.conf
C /etc/httpd/tls
C /etc
C /etc/httpd
A /etc/httpd/tls/localhost.crt
A /etc/httpd/tls/localhost.key
...</code></pre></div>
<p>[]{#02.htm#pgfId-1038256}Images are just TAR diffs of software applied
on lower-level images, and container content is an uncommitted layer of
software. Once a container is committed, you can create other containers
on top of your image. You can also share the image with others, so they
can create other containers on your image. Now let&rsquo;s look at all the
images in your container
[]{#02.htm#marker-1038257}[]{#02.htm#marker-1038258}[]{#02.htm#marker-1038259}storage.</p>
<h3 id="heading_id_15" class="fm-head1">[]{#02.htm#pgfId-1038261}2.2.2 Listing images</h3>
<p>[]{#02.htm#pgfId-1038265}In
[]{#02.htm#marker-1038262}[]{#02.htm#marker-1038263}[]{#02.htm#marker-1038264}the
container section, you were working with images and used command
<code>podman</code>{.fm-code-in-text}
<code>images</code>{.fm-code-in-text}[]{#02.htm#marker-1038266} to list the images
in local storage:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman images
REPOSITORY                   TAG        IMAGE ID       CREATED     SIZE
localhost/myimage         latest    2c7e43d88038  46 hours ago   462 MB
registry.access.redhat
➥.com/ubi8/httpd-24      latest    8594be0a0b57   5 weeks ago   462 MB
registry.access.redhat
➥.com/ubi8               latest    ad42391b9b46   5 weeks ago   234 MB</code></pre></div>
<p>[]{#02.htm#pgfId-1038272}Let&rsquo;s look at the different fields in the
default output. Table 2.2 describes the different fields and data
available with the <code>podman</code>{.fm-code-in-text} <code>images</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038273}. You will use the
<code>podman</code>{.fm-code-in-text} <code>images</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038274} throughout this section.</p>
<p>[]{#02.htm#pgfId-1044968}Table 2.2 Default fields listed by the
<code>podman</code>{.fm-code-in-text} <code>images</code>{.fm-code-in-text} command</p>
<p>+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []              | []{#02.htm#pgfId-1044974}Description                |
| {#02.htm#pgfId- |                                                     |
| 1044972}Heading |                                                     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.         | []{#02.htm#pgfId-1044978}Complete name of the       |
| htm#pgfId-10449 | image.                                              |
| 76}<code>Repository</code> |                                                     |
| {.fm-code-in-te |                                                     |
| xt1}[]{#02.htm# |                                                     |
| marker-1044995} |                                                     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm#pgfI | []{#02.htm#pgfId-1044982}Version (tag) of the       |
| d-1044980}<code>TAG</code> | image. Image tagging is covered in section 2.2.6.   |
| {.fm-code-in-te |                                                     |
| xt1}[]{#02.htm# |                                                     |
| marker-1044996} |                                                     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#0           | []{#02.htm#pgfId-1044986}Unique identifier of the   |
| 2.htm#pgfId-104 | image. It is generated by Podman as a SHA256 hash   |
| 4984}<code>IMAGE ID</code> | of the image's JSON configuration object.          |
| {.fm-code-in-te |                                                     |
| xt1}[]{#02.htm# |                                                     |
| marker-1044997} |                                                     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#            | []{#02.htm#pgfId-1044990}Elapsed time since the     |
| 02.htm#pgfId-10 | image was created. Images are sorted by this field  |
| 44988}<code>CREATED</code> | by default.                                         |
| {.fm-code-in-te |                                                     |
| xt1}[]{#02.htm# |                                                     |
| marker-1044998} |                                                     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [               | []{#02.htm#pgfId-1044994}The amount of storage      |
| ]{#02.htm#pgfId | being used by the image.                            |
| -1044992}<code>SIZE</code> |                                                     |
| {.fm-code-in-te |                                                     |
| xt1}[]{#02.htm# |                                                     |
| marker-1044999} |                                                     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+</p>
<p>[]{#02.htm#pgfId-1038308}[Note]{.fm-callout-head} Over time, the amount
of storage used by all the images you pull grows. It is relatively
common for users to run out of disk space, so you should monitor the
size of images and containers, removing them when you are no longer
using them. Use the <code>man</code>{.fm-code-in-text1}
<code>podman-system-prune</code>{.fm-code-in-text1} command for more information on
cleaning up.</p>
<p>[]{#02.htm#pgfId-1038311}[]{#02.htm#id_u8l9oyck7hrk}One notable
<code>podman</code>{.fm-code-in-text} <code>image</code>{.fm-code-in-text} option
is[]{#02.htm#marker-1038310} the following:</p>
<ul>
<li>[]{#02.htm#pgfId-1038313
.calibre17}<code>--all</code>{.fm-code-in-text}[]{#02.htm#marker-1038312
.calibre17}&mdash;This option is useful for listing all images. By
default, <code>podman-images</code>{.fm-code-in-text} lists only the images
currently in use. When an image is replaced by a newer image with
the same tag, the previous image is tagged as
<code>&lt;none&gt;&lt;none&gt;</code>{.fm-code-in-text}; These images are called dangling
images. I cover dangling images in section 2.3.1.</li>
</ul>
<p>[]{#02.htm#pgfId-1038315}Use the <code>man</code>{.fm-code-in-text}
<code>podman-images</code>{.fm-code-in-text} command[]{#02.htm#marker-1038314} for
information about all options. Similarly to containers, you will likely
want to examine the configuration information associated with an image
by inspecting
[]{#02.htm#marker-1038316}[]{#02.htm#marker-1038317}[]{#02.htm#marker-1038318}it.</p>
<h3 id="heading_id_16" class="fm-head1">[]{#02.htm#pgfId-1038320}2.2.3 Inspecting images</h3>
<p>[]{#02.htm#pgfId-1038324}In
[]{#02.htm#marker-1038321}[]{#02.htm#marker-1038322}[]{#02.htm#marker-1038323}the
previous sections, I mentioned a couple of commands to examine images. I
used the <code>podman</code>{.fm-code-in-text} <code>image</code>{.fm-code-in-text}
<code>diff</code>{.fm-code-in-text} to examine files and directories created or
deleted between images. I also showed you a way to see the image
hierarchy or wedding cake layers of images using the
<code>podman</code>{.fm-code-in-text} <code>image</code>{.fm-code-in-text}
<code>tree</code>{.fm-code-in-text} command[]{#02.htm#marker-1038325}.</p>
<p>[]{#02.htm#pgfId-1038326}Sometimes you may want to examine the
configuration of an image; use the <code>podman</code>{.fm-code-in-text}
<code>image</code>{.fm-code-in-text} <code>inspect</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038327}[]{#02.htm#marker-1038328} for this.
The <code>podman</code>{.fm-code-in-text} <code>inspect</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038329} can also be used to inspect images,
but the names can conflict with containers, so I prefer to use the
specific image command:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman image inspect myimage
[
  {
      &#34;Id&#34;: &#34;3b8fcf9081b4c4e6c16d763b8d02684df0737f3557a1e03ebfe4cc7cd6562135&#34;,
      &#34;Digest&#34;:
&#34;sha256:ff49aa6253ae47569d5aadbd73d70e7d0431bcf3a2f57b1b56feecdb531029a3&#34;,
      &#34;RepoTags&#34;: [
          &#34;localhost/myimage:latest&#34;
      ],
      &#34;RepoDigests&#34;: [       &#34;localhost/myimage@sha256:ff49aa6253ae47569d5aadbd73d70e7d0431bcf3a2f57b1b\
➥ 56feecdb531029a3&#34;
      ],
...
]</code></pre></div>
<p>[]{#02.htm#pgfId-1038343}As you can see, this command outputs a large
JSON array&mdash;153 lines in the previous example&mdash;that includes the data
used for the OCI Image Format specification. When you create a container
from an image, this information is used as one of the inputs to create
the container.</p>
<p>[]{#02.htm#pgfId-1038344}When using the <code>inspect</code>{.fm-code-in-text}
command, it is often better to pipe its output to
<code>less</code>{.fm-code-in-text} or <code>grep</code>{.fm-code-in-text} to find particular
fields you are interested in. Alternatively, you can use the
<code>--format</code>{.fm-code-in-text} option[]{#02.htm#marker-1038345}.</p>
<p>[]{#02.htm#pgfId-1038346}If you want to to examine the default command
to be executed from this image, execute the following:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman image inspect --format &#39;{{ .Config.Cmd }}&#39; myimage
[/usr/bin/run-httpd]</code></pre></div>
<p>[]{#02.htm#pgfId-1038349}Or if you want to see the stop signal, execute</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman image inspect --format &#39;{{ .Config.StopSignal }}&#39; myimage</code></pre></div>
<p>[]{#02.htm#pgfId-1038351}As you can see, nothing is output, meaning the
developer of the application did not specify a
<code>STOPSIGNAL</code>{.fm-code-in-text}. When you build a container off of this
image, the <code>STOPSIGNAL</code>{.fm-code-in-text} is the default,
<code>15</code>{.fm-code-in-text}, unless you override it via the command line.</p>
<p>[]{#02.htm#pgfId-1038354}[]{#02.htm#id_b2ilzpve6pxb}One notable
<code>podman</code>{.fm-code-in-text} <code>image</code>{.fm-code-in-text}
<code>inspect</code>{.fm-code-in-text} option is[]{#02.htm#marker-1038353} the
following:</p>
<ul>
<li>[]{#02.htm#pgfId-1038356
.calibre17}<code>--format</code>{.fm-code-in-text}[]{#02.htm#marker-1038355
.calibre17}&mdash;This is useful as you see above to extract particular
fields out of the json.</li>
</ul>
<p>[]{#02.htm#pgfId-1038358}Use the <code>man</code>{.fm-code-in-text}
<code>podman-image-inspect</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038357} for information about the command.</p>
<p>[]{#02.htm#pgfId-1038359}Once you are happy with a container and commit
it to an image, the next step is sharing it with others or perhaps
running it on another system. You need to push the image out to other
types of container storage, usually a container
[]{#02.htm#marker-1038360}[]{#02.htm#marker-1038361}[]{#02.htm#marker-1038362}registry.</p>
<h3 id="heading_id_17" class="fm-head1">[]{#02.htm#pgfId-1038364}2.2.4 Pushing images</h3>
<p>[]{#02.htm#pgfId-1038369}In
[]{#02.htm#marker-1038365}[]{#02.htm#marker-1038366}[]{#02.htm#marker-1038367}Podman,
you use the <code>podman</code>{.fm-code-in-text} <code>push</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038368} to copy an image and all of its layers
out of container storage and push it to other forms of container image
storage, like a container registry. Podman supports a few different
types of container storage, which it calls transports.</p>
<p>[]{#02.htm#pgfId-1038371}Container transports</p>
<p>[]{#02.htm#pgfId-1038374}Podman
[]{#02.htm#marker-1038372}[]{#02.htm#marker-1038373}uses the
containers/image library
(<a href="https://github.com/containers/image" rel="external" target="_blank">https://github.com/containers/image</a>{.url})
for pulling and pushing images. I describe the containers/image project
as a library for copying images between different types of container
storage. One storage, as you have seen, is containers/storage.</p>
<p>[]{#02.htm#pgfId-1038375}When pushing an image, the
<code>[destination]</code>{.fm-code-in-text} is specified using
<code>transport:ImageName</code>{.fm-code-in-text}
format[]{#02.htm#marker-1038376}. If no transport is specified, the
<code>docker</code>{.fm-code-in-text} (container registry) transport is used by
default.</p>
<p>[]{#02.htm#pgfId-1038377}One of the novel things that Docker did, as I
explained earlier, was invent the container registry
concept&mdash;basically, a web server that contains container images. The
docker.io, quay.io, and Artifactory web servers are all examples of
container registries. The Docker engineering team defined a protocol for
pulling and pushing these images from the container registries, which I
refer to as the container registry or <code>docker</code>{.fm-code-in-text}
transport[]{#02.htm#marker-1038378}.</p>
<p>[]{#02.htm#pgfId-1038379}When I want to run a container of an image, I
can fully specify the image name, including the transport like the
following command:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run docker://registry.access.redhat.com/ubi8/httpd-24:latest echo hello
hello</code></pre></div>
<p>[]{#02.htm#pgfId-1038382}For Podman, <code>docker://</code>{.fm-code-in-text}
transport is the default; it can be skipped for convenience:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run registry.access.redhat.com/ubi8/httpd-24:latest echo hello
hello</code></pre></div>
<p>[]{#02.htm#pgfId-1038386}The <code>myimage</code>{.fm-code-in-text}
image[]{#02.htm#marker-1038385} you created in the previous section was
created locally, which means it doesn&rsquo;t have a registry associated with
it. By default, locally created images have the localhost registry
associated with them. You can see the images in the containers/storage
using the <code>podman</code>{.fm-code-in-text} <code>images</code>{.fm-code-in-text} command:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman images
REPOSITORY                        TAG        IMAGE ID       CREATED    SIZE
localhost/myimage              latest    2c7e43d88038  46 hours ago  462 MB
registry.access.redhat
➥.com/ubi8/httpd-24           latest    8594be0a0b57   5 weeks ago  462 MB
registry.access.redhat
➥.com/ubi8                    latest    ad42391b9b46   5 weeks ago  234 MB</code></pre></div>
<p>[]{#02.htm#pgfId-1038393}If the image has a remote
registry[]{#02.htm#marker-1038392} associated with it (e.g.,
registry.access.redhat.com/ ubi8), it can be pushed without specifying
the <code>[destination]</code>{.fm-code-in-text} field. On the contrary, since
localhost/myimage does not have a registry associated with it, remote
registry needs to be specified (e.g., quay.io/rhatdan):</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman push myimage quay.io/rhatdan/myimage
Getting image source signatures
Copying blob 164d51196137 done 
Copying blob 8f26704f753c done 
Copying blob 83310c7c677c done 
Copying blob 654b3bf1361e [==================&gt;-------------------] 82.0MiB / 162.7MiB
Copying blob e39c3abf0df9 [================&gt;---------------------] 100.0MiB / 222.8MiB</code></pre></div>
<p>[]{#02.htm#pgfId-1038402}[Note]{.fm-callout-head} Before executing the
<code>podman</code>{.fm-code-in-text1} <code>push</code>{.fm-code-in-text1}
command[]{#02.htm#marker-1038401}, I logged into the quay.io/ rhatdan
account using p<code>odman</code>{.fm-code-in-text1} <code>login</code>{.fm-code-in-text1},
which is covered in the next section.</p>
<p>[]{#02.htm#pgfId-1038403}After the <code>push</code>{.fm-code-in-text} command is
finished, the image becomes available for pull for other users, given
they have access to this container registry. Table 2.3 describes the
supported transports for different types of container&rsquo;s storage.</p>
<p>[]{#02.htm#pgfId-1045276}Table 2.3 Podman-supported transports</p>
<p>+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#            | []{#02.htm#pgfId-1045282}Description                |
| 02.htm#pgfId-10 |                                                     |
| 45280}Transport |                                                     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#            | []{#02.htm#pgfId-1045286}Default transport. This    |
| 02.htm#pgfId-10 | references a container image stored in a remote     |
| 45284}Container | container image registry. Container registry is a   |
| registry        | place for storing and sharing container images      |
| (Doc            | (e.g., docker.io or quay.io).                       |
| ker[]{#02.htm#m |                                                     |
| arker-1045311}) |                                                     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm#pgfI | []{#02.htm#pgfId-1045290}References a container     |
| d-1045288}<code>oci</code> | image, compliant with the Open Container Image      |
| {.fm-code-in-te | Layout Specification. The manifest and layer        |
| xt1}[]{#02.htm# | tarballs as individual files are located in the     |
| marker-1045312} | local directory.                                    |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm#pgfI | []{#02.htm#pgfId-1045294}References a container     |
| d-1045292}<code>dir</code> | image, compliant with the Docker image layout. It   |
| {.fm-code-in-te | is very similar to the <code>oci</code>{.fm-code-in-text1}     |
| xt1}[]{#02.htm# | transport but stores the files using the legacy     |
| marker-1045313} | Docker format. It is a nonstandardized format,      |
|                 | primarily useful for debugging or noninvasive       |
|                 | container inspection.                               |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm#     | []{#02.htm#pgfId-1045298}References a container     |
| pgfId-1045296}<code> | image in Docker image layout, which is packed into  | | docker-archive</code> | a TAR archive.                                      |
| {.fm-code-in-te |                                                     |
| xt1}[]{#02.htm# |                                                     |
| marker-1045314} |                                                     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm#p    | []{#02.htm#pgfId-1045302}References an image        |
| gfId-1045300}<code>o | compliant with the Open Container Image Layout      | | ci-archive</code>{.fm | Specification, which is packed into a TAR archive.  |
| -code-in-text1} | It is very similar to the                           |
|                 | <code>docker-archive</code>{.fm-code-in-text1} transport, but  |
|                 | it stores an image in OCI format.                   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm      | []{#02.htm#pgfId-1045306}References an image stored |
| #pgfId-1045304} | in the Docker daemon&rsquo;s internal storage. Since the  |
| <code>docker-daemon</code> | Docker daemon requires root privileges, Podman has  |
| {.fm-code-in-te | to be run by the root user.                         |
| xt1}[]{#02.htm# |                                                     |
| marker-1045315} |                                                     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm      | []{#02.htm#pgfId-1045310}References an image        |
| #pgfId-1045308} | located in a local container storage. It is not a   |
| <code>container-stor | transport but more of a mechanism for storing       | | age</code>{.fm-code-i | images. It can be used to convert other transports  |
| n-text1}[]{#02. | into <code>container-storage</code>{.fm-code-in-text1}. Podman |
| htm#marker-1045 | defaults to using                                   |
| 316}[]{#02.htm# | <code>container-storage</code>{.fm-code-in-text1} for local    |
| marker-1045317} | images.                                             |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+</p>
<p>[]{#02.htm#pgfId-1038448}You want to push your image to a container
registry, but if you try to push it, the container registry rejects your
push, since you have not provided login authorization information. You
need to execute <code>podman</code>{.fm-code-in-text} <code>login</code>{.fm-code-in-text} to
create []{#02.htm#marker-1045225}[]{#02.htm#marker-1045226}the
[]{#02.htm#marker-1045227}[]{#02.htm#marker-1045228}[]{#02.htm#marker-1045229}authorization.</p>
<h3 id="heading_id_18" class="fm-head1">[]{#02.htm#pgfId-1038455}2.2.5 podman login: Logging into a container registry</h3>
<p>[]{#02.htm#pgfId-1038459}In
[]{#02.htm#marker-1038456}[]{#02.htm#marker-1038457}[]{#02.htm#marker-1038458}the
previous section, I pushed the image to my container registry by
executing the following:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman push myimage quay.io/rhatdan/myimage</code></pre></div>
<p>[]{#02.htm#pgfId-1038461}However, I left out a key step: logging into a
container registry using correct credentials. This is a necessary step
for pushing a container image. It is also required for pulling a
container image from a private registry.</p>
<p>[]{#02.htm#pgfId-1038462}To follow along in this section, you need to
set up an account at a container registry; there are several container
registries available to choose from. The
<a href="https://quay.io" rel="external" target="_blank">https://quay.io</a>{.url} and
<a href="https://docker.io" rel="external" target="_blank">https://docker.io</a>{.url} registries both provide
free accounts and storage. Your company might have a private registry,
where you can also get an account.</p>
<p>[]{#02.htm#pgfId-1038463}For the examples, I will continue to use my
rhatdan account at quay.io. Log in to get your credentials:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman login quay.io
Username: rhatdan
Password: 
Login Succeeded!</code></pre></div>
<p>[]{#02.htm#pgfId-1038468}Notice the Podman command prompts you for your
username and password at the registry. The <code>podman</code>{.fm-code-in-text}
<code>login</code>{.fm-code-in-text} command[]{#02.htm#marker-1038469} has options
to pass the username/password information on the command line to avoid
the prompt, allowing you to automate the login process.</p>
<p>[]{#02.htm#pgfId-1038471}To store authentication information for the
user, the <code>podman</code>{.fm-code-in-text} <code>login</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038470} creates an auth.json file. By default,
this is stored in the /run/user/$UID/containers/auth.json file:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">cat /run/user/3267/containers/auth.json 
{
  &#34;auths&#34;: {
    &#34;quay.io&#34;: {
      &#34;auth&#34;: &#34;OBSCURED-BASE64-PASSWORD&#34;
    }
  }
}</code></pre></div>
<p>[]{#02.htm#pgfId-1038480}The auth.json file contains your registry
password in a Base64-encoded string; there is no cryptography involved.
Therefore, the auth.json file needs to be protected. Podman defaults to
storing the file in /run because it is a temporary filesystem and is
destroyed when you log out or the system is rebooted. The
/run/user/$UID/containers directory is not accessible by other users on
the system.</p>
<p>[]{#02.htm#pgfId-1038482}It is possible to override the location by
specifying the <code>--auth-file</code>{.fm-code-in-text}
option[]{#02.htm#marker-1038481}. Alternatively, you can use the
<code>REGISTRY_AUTH_FILE</code>{.fm-code-in-text} environment variable to modify
its location. If both are specified, the <code>--auth-file</code>{.fm-code-in-text}
option[]{#02.htm#marker-1038483} is used. All container tools use this
file to access the container registry.</p>
<p>[]{#02.htm#pgfId-1038485}It is possible to run the
<code>podman</code>{.fm-code-in-text} <code>login</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038484} multiple times to log in to multiple
registries, storing the login information in the same authorization file
with a different stanza.</p>
<p>[]{#02.htm#pgfId-1038486}[Note]{.fm-callout-head} Podman supports other
mechanisms for storing the password information. These are called
<em>credential helpers</em>[]{#02.htm#marker-1038487}.</p>
<p>[]{#02.htm#pgfId-1038488}After you are done using the registry, you can
log out by executing <code>podman</code>{.fm-code-in-text}
<code>logout</code>{.fm-code-in-text}. This command deletes the cached credentials
stored in the auth.json file:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman logout quay.io
Removed login credentials for quay.io</code></pre></div>
<p>[]{#02.htm#pgfId-1038493}[]{#02.htm#id_kl9hru67otu4}Some notable
<code>podman</code>{.fm-code-in-text}
<code>login</code>{.fm-code-in-text}[]{#02.htm#marker-1038492} and
<code>logout</code>{.fm-code-in-text} options include the following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1038495 .calibre17}<code>--username</code>{.fm-code-in-text},
<code>(-u</code>{.fm-code-in-text}[]{#02.htm#marker-1038494 .calibre17}&mdash;This
provides the Podman username to use when logging into the registry.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1038497
.calibre17}<code>--authfile</code>{.fm-code-in-text}[]{#02.htm#marker-1038496
.calibre17}&mdash;This tells Podman to store the authorization file in a
different location. You can also use the
<code>REGISTRY_AUTH_FILE</code>{.fm-code-in-text} environment
variable[]{#02.htm#marker-1038498 .calibre17} to change the
location.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1038500
.calibre17}<code>--all</code>{.fm-code-in-text}[]{#02.htm#marker-1038499
.calibre17}&mdash;This allows you to log out of all of the registries.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1038502}Use the <code>man</code>{.fm-code-in-text}
<code>podman-login</code>{.fm-code-in-text} and <code>man</code>{.fm-code-in-text}
<code>podman-logout</code>{.fm-code-in-text} commands[]{#02.htm#marker-1038501} for
information about all options.</p>
<p>[]{#02.htm#pgfId-1038503}Notice when you pushed the image to a container
registry, you renamed <code>myimage</code>{.fm-code-in-text} to
quay.io/rhatdan/myimage:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman push myimage quay.io/rhatdan/myimage</code></pre></div>
<p>[]{#02.htm#pgfId-1038505}It&rsquo;d be nice to just have the local image named
quay.io/rhatdan/myimage, in which case you could have just executed</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman push quay.io/rhatdan/myimage</code></pre></div>
<p>[]{#02.htm#pgfId-1038510}In the next section, you will learn how to add
names
to[]{#02.htm#marker-1038507}[]{#02.htm#marker-1038508}[]{#02.htm#marker-1038509}
images.</p>
<h3 id="heading_id_19" class="fm-head1">[]{#02.htm#pgfId-1038512}2.2.6 Tagging images</h3>
<p>[]{#02.htm#pgfId-1038516}Earlier
[]{#02.htm#marker-1038513}[]{#02.htm#marker-1038514}[]{#02.htm#marker-1038515}in
this chapter, I pointed out that locally created images are created with
a localhost registry. Images get created with the localhost registry
when you commit a container to an image or if you use
<code>podman</code>{.fm-code-in-text} <code>build</code>{.fm-code-in-text} to build an image.
Podman has a mechanism to add additional names to images; it calls these
names tags, and the command is <code>podman</code>{.fm-code-in-text}
<code>tag</code>{.fm-code-in-text}[]{#02.htm#marker-1038517}.</p>
<p>[]{#02.htm#pgfId-1038519}Using the <code>podman</code>{.fm-code-in-text}
<code>images</code>{.fm-code-in-text} command[]{#02.htm#marker-1038518}, list the
image(s) in container/storage:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman images
REPOSITORY                      TAG        IMAGE ID         CREATED     SIZE
localhost/myimage            latest    2c7e43d88038   46 \hours ago   462 MB
registry.access.redhat
➥.com/ubi8/httpd-24         latest    8594be0a0b57     5 weeks ago   462 MB
registry.access.redhat
➥.com/ubi8                  latest    ad42391b9b46     5 weeks ago   234 MB</code></pre></div>
<p>[]{#02.htm#pgfId-1038525}You will want the final image you plan on
shipping to be referred to as quay.io/rhatdan/ myimage. To achieve this,
add that name with the following <code>podman</code>{.fm-code-in-text}
<code>tag</code>{.fm-code-in-text} command[]{#02.htm#marker-1038526}:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman tag myimage quay.io/rhatdan/myimage </code></pre></div>
<p>[]{#02.htm#pgfId-1038529}Now run[]{#02.htm#marker-1038528}
<code>podman</code>{.fm-code-in-text} <code>images</code>{.fm-code-in-text} again to examine
the images. You will see that the name is now quay.io/rhatdan/myimage.
Notice that the localhost/myimage and quay.io/ rhatdan/myimage have the
same image ID of <code>2c7e43d88038</code>{.fm-code-in-text}:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman images
REPOSITORY                      TAG        IMAGE ID        CREATED      SIZE
localhost/myimage            latest    2c7e43d88038   46 hours ago    462 MB
quay.io/rhatdan/myimage      latest    2c7e43d88038   46 hours ago    462 MB
registry.access.redhat
➥.com/ubi8/httpd-24         latest    8594be0a0b57    5 weeks ago    462 MB
registry.access.redhat
➥.com/ubi8                  latest    ad42391b9b46    5 weeks ago    234 MB</code></pre></div>
<p>[]{#02.htm#pgfId-1038536}Since the images have the same image ID, they
are the same image with multiple names. Now you can interact directly
with quay.io/rhatdan/myimage. First, you need to log back in to quay.io:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman login --username rhatdan quay.io
Password: 
Login Succeeded!</code></pre></div>
<p>[]{#02.htm#pgfId-1038540}Now push without requiring the destination
name:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman push quay.io/rhatdan/myimage
Getting image source signatures
...
Storing signatures</code></pre></div>
<p>[]{#02.htm#pgfId-1038545}That was much simpler.</p>
<p>[]{#02.htm#pgfId-1038546}Let&rsquo;s tag the previously used image with a
version, 1.0:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman tag quay.io/rhatdan/myimage quay.io/rhatdan/myimage:</code></pre></div>
<p>[]{#02.htm#pgfId-1038548}Once again, examine the images; notice that
<code>myimage</code>{.fm-code-in-text} now has three different names/tags. All
three have the same image ID of <code>2c7e43d88038</code>{.fm-code-in-text}:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman images
REPOSITORY                      TAG        IMAGE ID        CREATED     SIZE
localhost/myimage            latest    2c7e43d88038   46 hours ago   462 MB
quay.io/rhatdan/myimage         1.0    2c7e43d88038   46 hours ago   462 MB
quay.io/rhatdan/myimage      latest    2c7e43d88038   46 hours ago   462 MB
registry.access.redhat
➥.com/ubi8/httpd-24         latest    8594be0a0b57    5 weeks ago   462 MB
registry.access.redhat
➥.com/ubi8                  latest    ad42391b9b46    5 weeks ago   234 MB</code></pre></div>
<p>[]{#02.htm#pgfId-1038556}Now you can push the 1.0 version of the
<code>myimage</code>{.fm-code-in-text} (application) to the registry:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman push quay.io/rhatdan/myimage:1.0
Getting image source signatures
Copying blob 8f26704f753c skipped: already exists 
Copying blob e39c3abf0df9 skipped: already exists 
Copying blob 654b3bf1361e skipped: already exists 
Copying blob 83310c7c677c skipped: already exists 
Copying blob 164d51196137 [--------------------------------------] 0.0b / 0.0b
Copying config 2c7e43d880 [--------------------------------------] 0.0b / 4.0KiB
Writing manifest to image destination
Storing signatures</code></pre></div>
<p>[]{#02.htm#pgfId-1038567}Users can pull either the latest image or the
1.0 version. Later, when you build version 2.0 of your application, you
can store both images at the registry. You can run both version 1.0 and
2.0 of your application on the host at the same time.</p>
<p>[]{#02.htm#pgfId-1038568}Use a web browser (e.g., Firefox, Chrome,
Safari, Internet Explorer, or Microsoft Edge) to look at the images at
quay.io. You can see 1.0 and the latest image in figure 2.4:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ web-browser quay.io/repository/rhatdan/myimage?tab=tags</code></pre></div>
<p>::: figure
<a href="#R-image-d4d169f8ec0d17fbee956538b3d5e88e" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="images/OEBPS/Images/02-04.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d4d169f8ec0d17fbee956538b3d5e88e"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="images/OEBPS/Images/02-04.png"></a>{.calibre18}</p>
<p>[]{#02.htm#pgfId-1053027}Figure 2.4 List of <code>myimage</code>{.fm-code-in-text}
tags on quay.io
(<a href="https://quay.io/repository/rhatdan/myimage/?tab=tags" rel="external" target="_blank">https://quay.io/repository/rhatdan/myimage/?tab=tags</a>{.url})
:::</p>
<p>[]{#02.htm#pgfId-1038570}Now that you have pushed your image to a
container registry, you may want to free up storage from your home
directory by removing the
[]{#02.htm#marker-1038571}[]{#02.htm#marker-1038572}[]{#02.htm#marker-1038573}images.</p>
<p>[]{#02.htm#pgfId-1038581}[Note]{.fm-callout-head} Contrary to common
sense, the tag <code>latest</code>{.fm-code-in-text1} does not refer to the most
up-to-date image in the repository. It is just another tag with no magic
involved. Even worse, because it is being used as a default tag for
images pushed without tags, it could refer to any random version of an
image. There could be newer images in the container registry than your
local container&rsquo;s storage with this tag. Thus, it is always better to
refer to the specific version of the image you want to use, rather than
relying on the <code>latest</code>{.fm-code-in-text1}.</p>
<h3 id="heading_id_20" class="fm-head1">[]{#02.htm#pgfId-1038583}2.2.7 Removing images</h3>
<p>[]{#02.htm#pgfId-1038587}Over
[]{#02.htm#marker-1038584}[]{#02.htm#marker-1038585}[]{#02.htm#marker-1038586}time,
images can take up a lot of disk space. Thus, it will be a good idea to
remove images you no longer use. Let&rsquo;s list local images first:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman images
REPOSITORY                          TAG        IMAGE ID       CREATED    SIZE
localhost/myimage                   1.0    2c7e43d88038  46 hours ago  462 MB
quay.io/rhatdan/myimage             1.0    2c7e43d88038  46 hours ago  462 MB
quay.io/rhatdan/myimage          latest    2c7e43d88038  46 hours ago  462 MB
registry.access.redhat
➥.com/ubi8/httpd-24             latest    8594be0a0b57   5 weeks ago  462 MB
registry.access.redhat
➥.com/ubi8                      latest    ad42391b9b46   5 weeks ago  234 MB</code></pre></div>
<p>[]{#02.htm#pgfId-1038596}Use the <code>podman</code>{.fm-code-in-text}
<code>rmi</code>{.fm-code-in-text} command[]{#02.htm#marker-1038595} to remove
local images:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman rmi localhost/myimage
Untagged: localhost/myimage:latest</code></pre></div>
<p>[]{#02.htm#pgfId-1038599}Listing the local images again, you will see
that the command didn&rsquo;t actually remove the image but only the
<code>localhost</code>{.fm-code-in-text} tag[]{#02.htm#marker-1038600} from the
image. Podman still has two references to the same image ID: the actual
content of the image has not been removed. None of the disk space was
freed up:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman images
REPOSITORY                         TAG        IMAGE ID      CREATED     SIZE
quay.io/rhatdan/myimage            1.0    2c7e43d88038  46 hours ago  462 MB
quay.io/rhatdan/myimage         latest    2c7e43d88038  46 hours ago  462 MB
registry.access.redhat
➥.com/ubi8/httpd-24            latest    8594be0a0b57   5 weeks ago  462 MB
registry.access.redhat
➥.com/ubi8                     latest    ad42391b9b46   5 weeks ago   234 MB</code></pre></div>
<p>[]{#02.htm#pgfId-1038608}You can remove the other tags using a short
name (see section 2.2.8). Podman uses the short name and finds the first
name in local storage that matches the short name without a registry and
removes it, which is why I need to remove it twice to get rid of both
images. Tags other than <code>latest</code>{.fm-code-in-text} need to be specified
explicitly:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman rmi myimage
Untagged: quay.io/rhatdan/myimage:latest
$ podman rmi myimage:1.0
Untagged: quay.io/rhatdan/myimage:1.0
Deleted: 2c7e43d88038669e8cdbdff324a9f9605d99697215a0d21c360fe8dfa8471bab
 </code></pre></div>
<p>[]{#02.htm#pgfId-1038614}It is only when the last tag is removed that
the actual disk space is reclaimed:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman images
REPOSITORY                         TAG        IMAGE ID       CREATED     SIZE
registry.access.redhat
➥.com/ubi8/httpd-24            latest    8594be0a0b57   5 weeks ago   462 MB
registry.access.redhat
➥.com/ubi8                     latest    ad42391b9b46   5 weeks ago   234 MB</code></pre></div>
<p>[]{#02.htm#pgfId-1038619}Alternatively, you can try removing the images
by specifying the image ID:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman rmi 14119a10abf4
Error: unable to delete image\ 
➥ &#34;2c7e43d88038669e8cdbdff324a9f9605d99697215a0d21c360fe8dfa8471bab&#34; by\ 
➥ ID with more than one tag ([quay.io/rhatdan/myimage:1.0\ 
➥ quay.io/rhatdan/myimage:latest]): please force removal</code></pre></div>
<p>[]{#02.htm#pgfId-1038622}But that fails because there are multiple tags
for the same image. Adding the <code>--force</code>{.fm-code-in-text}
option[]{#02.htm#marker-1038623} removes the image and all of its tags:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman rmi 14119a10abf4 --force
Untagged: quay.io/rhatdan/myimage:1.0
Untagged: quay.io/rhatdan/myimage:latest
Deleted: 2c7e43d88038669e8cdbdff324a9f9605d99697215a0d21c360fe8dfa8471bab</code></pre></div>
<p>[]{#02.htm#pgfId-1038628}As your image sizes and numbers grow and more
containers are created, it becomes harder to figure out which images are
no longer needed. Podman has another useful
command&mdash;<code>podman</code>{.fm-code-in-text} <code>image</code>{.fm-code-in-text}
<code>prune</code>{.fm-code-in-text}[]{#02.htm#marker-1038629}&mdash;for removing all
dangling images[]{#02.htm#marker-1038630}. <em>Dangling
images</em>[]{#02.htm#marker-1038631} are images that no longer have a tag
associated with them or a container using them. The
<code>prune</code>{.fm-code-in-text} command[]{#02.htm#marker-1038632} also has the
<code>--all</code>{.fm-code-in-text} option[]{#02.htm#marker-1038633}, which
removes all images that are currently not in use by any containers,
including dangling images:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman image prune -a
WARNING! This command removes all images without at least one container \
➥ associated with them.
Are you sure you want to continue? [y/N] y
6d633c2626113fb4e5aa75babb2af39268948497893f7bb5b4c2043d7a986ba0
B9097177b416944cabdcfcab0e74a319223ad1acaed38ac57a262b2421732355</code></pre></div>
<p>[]{#02.htm#pgfId-1038640}[Note]{.fm-callout-head} Having no containers
running the <code>podman</code>{.fm-code-in-text1} <code>image</code>{.fm-code-in-text1}
<code>prune</code>{.fm-code-in-text1} command[]{#02.htm#marker-1038639} removes all
of the local images. This frees up all of the disk space in the home
directory. You can use the <code>podman</code>{.fm-code-in-text1}
<code>system</code>{.fm-code-in-text1} <code>df</code>{.fm-code-in-text1} command to show all
of the storage in your home directory used by Podman.</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman images
REPOSITORY                              TAG       IMAGE ID    CREATED    SIZE</code></pre></div>
<p>[]{#02.htm#pgfId-1038645}[]{#02.htm#id_k1qw18a94248}Some notable
<code>podman</code>{.fm-code-in-text} <code>image</code>{.fm-code-in-text}
<code>prune</code>{.fm-code-in-text} options[]{#02.htm#marker-1038644} include the
following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1038647
.calibre17}<code>--all</code>{.fm-code-in-text}[]{#02.htm#marker-1038646
.calibre17}&mdash;This tells Podman to remove all images, freeing up all
storage. Images that have containers running on them are not
removed.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1038649
.calibre17}<code>--force</code>{.fm-code-in-text}[]{#02.htm#marker-1038648
.calibre17}&mdash;This tells Podman to stop and remove any containers
that are running on them and remove any images dependent on the
image you are attempting to remove.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1038651}Use the <code>man</code>{.fm-code-in-text}
<code>podman-image-prune</code>{.fm-code-in-text} command[]{#02.htm#marker-1038650}
for information about all options.</p>
<p>[]{#02.htm#pgfId-1038652}Images pushed to the registry could also be
pulled for various reasons, including but not limited to sharing your
applications with others, testing other versions, getting back removed
local versions, and working on a new version of an
[]{#02.htm#marker-1038653}[]{#02.htm#marker-1038654}[]{#02.htm#marker-1038655}image.</p>
<h3 id="heading_id_21" class="fm-head1">[]{#02.htm#pgfId-1038657}2.2.8 Pulling images</h3>
<p>[]{#02.htm#pgfId-1038661}Although
[]{#02.htm#marker-1038658}[]{#02.htm#marker-1038659}[]{#02.htm#marker-1038660}you
previously removed all local images, you can pull the previously pushed
image at quay.io/rhatdan/myimage. Podman has the
<code>podman</code>{.fm-code-in-text} <code>pull</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038662}[]{#02.htm#marker-1038663} to pull
images from container registries (transports) into local container
storage:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman pull quay.io/rhatdan/myimage
Trying to pull quay.io/rhatdan/myimage:latest...
Getting image source signatures
Copying blob dfd8c625d022 done 
Copying blob e21480a19686 done 
Copying blob 68e8857e6dcb done 
Copying blob 3f412c5136dd done 
Copying blob fbfcc23454c6 done 
Copying config 2c7e43d880 done 
Writing manifest to image destination
Storing signatures
2c7e43d880382561ebae3fa06c7a1442d0da2912786d09ea9baaef87f73c29ae</code></pre></div>
<p>[]{#02.htm#pgfId-1038676}Does the output look familiar? You probably
remember similar output from the <code>podman</code>{.fm-code-in-text}
<code>run</code>{.fm-code-in-text} command[]{#02.htm#marker-1038677} from section
2.1.2:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman run -d -p 8080:8080 --name myapp\ 
➥ registry.access.redhat.com/ubi8/httpd-24
Trying to pull registry.access.redhat.com/ubi8/httpd-24:latest...
Getting image source signatures
Checking if image destination supports signatures
Copying blob 296e14ee2414 skipped: already exists  
Copying blob 356f18f3a935 skipped: already exists  
Copying blob 359fed170a21 done
Copying blob 226cafc3a0c6 done
Writing manifest to image destination
Storing signatures
37a1d2e31dbf4fa311a5ca6453f53106eaae2d8b9b9da264015cc3f8864fac22</code></pre></div>
<p>[]{#02.htm#pgfId-1038690}Many Podman commands implicitly execute the
<code>podman</code>{.fm-code-in-text} <code>pull</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038689} if the required image is not present
locally.</p>
<p>[]{#02.htm#pgfId-1038691}So executing <code>podman</code>{.fm-code-in-text}
<code>images</code>{.fm-code-in-text} shows the image back in container storage,
ready to be used for containers:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman images
REPOSITORY                   TAG        IMAGE ID     CREATED    SIZE
quay.io/rhatdan/myimage   latest    2c7e43d88038  2 days ago  462 MB</code></pre></div>
<p>[]{#02.htm#pgfId-1038695}Up until now, you have been typing the image
with the full names as registry.access .redhat.com/ubi8/httpd-24 or
quay.io/rhatdan/myimage, but if you are like me and not a great typist,
this can be a pain. You really need a way to refer to the images via
short names.</p>
<p>[]{#02.htm#pgfId-1038697}Short names and container registries</p>
<p>[]{#02.htm#pgfId-1038701}When
[]{#02.htm#marker-1045424}[]{#02.htm#marker-1045425}[]{#02.htm#marker-1045426}Docker
first hit the scene, they defined an image reference as a combination of
the container registry where the image was stored, repository, image
name, and a tag or version of the image. In our examples, we have been
using quay.io/rhatdan/myimage. In table 2.4, you can see this image name
breakdown; note that the <code>latest</code>{.fm-code-in-text}
tag[]{#02.htm#marker-1045428} was used implicitly, as the image version
wasn&rsquo;t specified.</p>
<p>[]{#02.htm#pgfId-1045368}Table 2.4 Container image name table</p>
<p>+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{             | []{#0           | []{#02.htm#pgf  | []{#02.htm#pg   |
| #02.htm#pgfId-1 | 2.htm#pgfId-104 | Id-1045380}Name | fId-1045382}Tag |
| 045376}Registry | 5378}Repository |                 |                 |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm#pg   | []              | []              | []{#02.         |
| fId-1045384}qua | {#02.htm#pgfId- | {#02.htm#pgfId- | htm#pgfId-10453 |
| y.io[]{#02.htm# | 1045386}rhatdan | 1045388}myimage | 90}<code>latest</code>{.fm |
| marker-1045447} |                 |                 | -code-in-text1} |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+</p>
<p>[]{#02.htm#pgfId-1038724}The Docker command line has internally set the
docker.io registry as the only registry, thus making every short image
name refer to images at docker.io. There is also a special repository
library, which is used for certified images.</p>
<p>[]{#02.htm#pgfId-1038725}So rather than typing</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">`# docker pull docker.io/library/alpine:latest`

[]{#02.htm#pgfId-1038727}You can just execute

``` programlisting
```bash
# docker pull alpine</code></pre></div>
<p>[]{#02.htm#pgfId-1038729}Conversely, if you want to pull an image from a
different registry, you need to specify the full name of the image:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting"># docker pull registry.access.redhat.com/ubi8/httpd-24:latest</code></pre></div>
<p>[]{#02.htm#pgfId-1038731}Table 2.5 shows the difference between the
image name used in a short name versus the fully specified image name.
Notice that when using the short name, the registry, repository, and tag
were not specified.</p>
<p>[]{#02.htm#pgfId-1045492}Table 2.5 Short name to container image name
table</p>
<p>+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{             | []{#0           | []{#02.htm#pgf  | []{#02.htm#pg   |
| #02.htm#pgfId-1 | 2.htm#pgfId-104 | Id-1045504}Name | fId-1045506}Tag |
| 045500}Registry | 5502}Repository |                 |                 |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm#p    | []{#02.htm#p    | [               | []{#02.htm#p    |
| gfId-1045508}   | gfId-1045510}   | ]{#02.htm#pgfId | gfId-1045514}   |
|                 |                 | -1045512}alpine |                 |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02.htm#pgfI | []              | [               | []{#02.         |
| d-1045516}docke | {#02.htm#pgfId- | ]{#02.htm#pgfId | htm#pgfId-10455 |
| r.io[]{#02.htm# | 1045518}library | -1045520}alpine | 22}<code>latest</code>{.fm |
| marker-1045523} |                 |                 | -code-in-text1} |
+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+</p>
<p>[]{#02.htm#pgfId-1038761}Since I am lazy and hate to type extra
characters, I almost always use short names. With Podman, the developers
did not want to hardcode one registry, docker.io, into the tool. Podman
allows distributions, companies, and you to control which registries to
use and to be able to configure multiple registries. At the same time,
Podman provides support for the easier-to-use short names.</p>
<p>[]{#02.htm#pgfId-1038762}Podman usually comes with multiple registries
defined, controlled by the distribution that packaged Podman. You can
use the <code>podman</code>{.fm-code-in-text} <code>info</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038763} to see what registries are defined for
your Podman installation:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman info
...
registries:
  search:
  - registry.fedoraproject.org
  - registry.access.redhat.com
  - docker.io
  - quay.io</code></pre></div>
<p>[]{#02.htm#pgfId-1038772}The list of registries can be modified in the
registries.conf file, which is described in section 5.2.1.</p>
<p>[]{#02.htm#pgfId-1038773}Let&rsquo;s discuss the security side of things using
these commands:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman pull rhatdan/myimage
$ podman pull quay.io/rhatdan/myimage</code></pre></div>
<p>[]{#02.htm#pgfId-1038776}From a security perspective, it is always
better to specify the full image name when pulling it from a registry.
That way, Podman guarantees that it pulls from the specified registry.
Imagine you are attempting to pull rhatdan/myimage. Using the previous
search order, there is a chance someone could set up an account on
docker.io/rhatdan and trick you into mistakenly pulling
docker.io/rhatdan/myimage.</p>
<p>[]{#02.htm#pgfId-1038777}To help protect against this, on the first pull
of an image, Podman prompts you to select an exact image from the list
of found images in configured registries:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman create -p 8080:8080 ubi8/httpd-24 
? Please select an image: 
   registry.fedoraproject.org/ubi8/httpd-24:latest
 ▸ registry.access.redhat.com/ubi8/httpd-24:latest
   docker.io/ubi8/httpd-24:latest
   quay.io/ubi8/httpd-24:latest</code></pre></div>
<p>[]{#02.htm#pgfId-1038784}Once you have selected and pulled an image
successfully, Podman records the short name mapping. In the future, when
you run a container with this short name, Podman uses the short name
mapping to pick the correct registry and does not prompt.</p>
<p>[]{#02.htm#pgfId-1038785}Linux distributions also ship mappings of the
most commonly used short names, as they want you to pull from their
supported registries. You can find these short name configuration files
in the /etc/containers/registries.conf.d directory on the Linux host.
Companies can also drop short name alias files in this directory:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ cat /etc/containers/registries.conf.d/000-shortnames.conf
[aliases]
```bash
# centos
  &#34;centos&#34; = &#34;quay.io/centos/centos&#34;
  # containers
  &#34;skopeo&#34; = &#34;quay.io/skopeo/stable&#34;
  &#34;buildah&#34; = &#34;quay.io/buildah/stable&#34;
  &#34;podman&#34; = &#34;quay.io/podman/stable&#34;
...</code></pre></div>
<p>[]{#02.htm#pgfId-1038797}[]{#02.htm#id_alh8ymvwn26r}[]{#02.htm#id_xpx7qets8jwc}Some
notable <code>podman</code>{.fm-code-in-text} <code>pull</code>{.fm-code-in-text} options
include the following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1038799
.calibre17}<code>--arch</code>{.fm-code-in-text}[]{#02.htm#marker-1038798
.calibre17}&mdash;This tells Podman to pull an image for a different
architecture. For example, on my x86_64 machine, I can pull an arm64
image. By default, <code>podman</code>{.fm-code-in-text}
<code>pull</code>{.fm-code-in-text} pulls images for the native architecture.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1038801 .calibre17}<code>--quiet</code>{.fm-code-in-text}
<code>(-q</code>{.fm-code-in-text}[]{#02.htm#marker-1038800
.calibre17}<code>)</code>{.fm-code-in-text}&mdash;This tells Podman not to print
out all the progress information. It just prints the image ID when
it completes.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1038803}Use the <code>man</code>{.fm-code-in-text}
<code>podman-pull</code>{.fm-code-in-text} command[]{#02.htm#marker-1038802} for
information about all options.</p>
<p>[]{#02.htm#pgfId-1038804}I have mentioned a few images in this book, but
there are thousands and thousands of images available. You need a
mechanism to be able to search through these images for the
[]{#02.htm#marker-1038805}[]{#02.htm#marker-1038806}[]{#02.htm#marker-1038807}perfect
[]{#02.htm#marker-1038808}[]{#02.htm#marker-1038809}[]{#02.htm#marker-1038810}match.</p>
<h3 id="heading_id_22" class="fm-head1">[]{#02.htm#pgfId-1038812}2.2.9 Searching for images</h3>
<p>[]{#02.htm#pgfId-1038816}You
[]{#02.htm#marker-1038813}[]{#02.htm#marker-1038814}[]{#02.htm#marker-1038815}might
not know the name of a particular image you want to run or use as a base
for your own image. Podman provides the command
<code>podman</code>{.fm-code-in-text}
<code>search</code>{.fm-code-in-text}[]{#02.htm#marker-1038817}, which allows you
to search container registries for matching names:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman search registry.access.redhat.com/httpd
INDEX     NAME                                                     
➥   DESCRIPTION                      redhat.com 
➥ registry.access.redhat.com/rhscl/httpd-24-rhel7
➥ Apache HTTP 2.4\ Server                                          
redhat.com  registry.access.redhat.com/ubi8/httpd-24\                
➥ Platform for running Apache httpd 2.4 or bui...                   
redhat.com  registry.access.redhat.com/rhscl/varnish-6-rhel7        Varnish\
➥ available as container is a base pla...
...</code></pre></div>
<p>[]{#02.htm#pgfId-1038828}In this example, we are searching for images
that include the string <em>httpd</em> in their name on the repository
registry.access.redhat.com.</p>
<p>[]{#02.htm#pgfId-1038830}[]{#02.htm#id_3adi657j8luj}Some notable
<code>podman</code>{.fm-code-in-text} <code>search</code>{.fm-code-in-text} options include
the following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1038831
.calibre17}<code>--no-trunc</code>{.fm-code-in-text}&mdash;This tells Podman to
show the full description of the image.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1038834
.calibre17}<code>--format</code>{.fm-code-in-text}[]{#02.htm#marker-1038832
.calibre17}[]{#02.htm#marker-1038833 .calibre17}&mdash;This allows you
to customize which fields are displayed by Podman.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1038836}Use the <code>man</code>{.fm-code-in-text}
<code>podman-search</code>{.fm-code-in-text} command[]{#02.htm#marker-1038835} for
information about all options.</p>
<p>[]{#02.htm#pgfId-1038837}Up until now, you have seen several ways of
managing and manipulating container images, including inspecting,
pushing, pulling, and searching for them. But you have only been able to
look at the contents of an image by running it as a container. One way
to simplify the process is mounting a container
[]{#02.htm#marker-1038838}[]{#02.htm#marker-1038839}[]{#02.htm#marker-1038840}image.</p>
<h2 id="2210-mounting-images">2.2.10 Mounting images</h2>
<p>[]{#02.htm#pgfId-1038846}Often
[]{#02.htm#marker-1038843}[]{#02.htm#marker-1038844}[]{#02.htm#marker-1038845}you
might want to examine the contents of a container image, and one way to
do this is launching a shell inside a running container from the image.
The problem with this is that the tools you use to examine the container
image might not be available within the container. There is also a
security risk that the application in the container is malicious, making
use of this container undesirable.</p>
<p>[]{#02.htm#pgfId-1038848}To help with these problems, Podman provides
the <code>podman</code>{.fm-code-in-text} <code>image</code>{.fm-code-in-text}
<code>mount</code>{.fm-code-in-text} command[]{#02.htm#marker-1038847} to mount an
image&rsquo;s root filesystem in a read-only mode without creating a container
from it. The mounted image becomes immediately available on the host
system, allowing you to examine its contents.</p>
<p>[]{#02.htm#pgfId-1038849}Now try mounting the image you pulled
previously:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman mount quay.io/rhatdan/myimage
Error: cannot run command &#34;podman mount&#34; in rootless mode, must execute `podman unshare` first</code></pre></div>
<p>[]{#02.htm#pgfId-1038852}The reason for this error is that rootless mode
does not allow mounting images. You need to enter a user namespace and
separate mount namespace. Chapter 5 explains how most rootless Podman
commands enter the user namespace and mount namespace when they execute.
For now, it is enough to know that the <code>podman</code>{.fm-code-in-text}
<code>unshare</code>{.fm-code-in-text} command[]{#02.htm#marker-1038853} enters the
user and mount namespaces and will shut down when you execute the
<code>exit</code>{.fm-code-in-text} command[]{#02.htm#marker-1038854} of your
shell.</p>
<p>[]{#02.htm#pgfId-1038855}[Note]{.fm-callout-head} The name
<code>unshare</code>{.fm-code-in-text1} comes from the Linux syscall
<code>unshare</code>{.fm-code-in-text1} (<code>man</code>{.fm-code-in-text1}
<code>2</code>{.fm-code-in-text1} <code>unshare</code>{.fm-code-in-text1}). Linux also
includes an unshare tool (<code>man</code>{.fm-code-in-text1}
<code>1</code>{.fm-code-in-text1} <code>unshare</code>{.fm-code-in-text1}), which allows you
to create namespaces by hand. Another low-level tool called
<code>nsenter</code>{.fm-code-in-text1}[]{#02.htm#marker-1038856}, or namespace
enter (<code>man</code>{.fm-code-in-text1} <code>1</code>{.fm-code-in-text1}
<code>nsenter</code>{.fm-code-in-text1}), allows you to join processes to different
namespaces. Podman <code>unshare</code>{.fm-code-in-text1} uses the same kernel
features. It simplifies the process of creating and configuring
namespaces and inserting processes into the namespaces.</p>
<p>[]{#02.htm#pgfId-1038858}The <code>podman</code>{.fm-code-in-text}
<code>unshare</code>{.fm-code-in-text} command[]{#02.htm#marker-1038857} leaves you
at a <code>#</code>{.fm-code-in-text} prompt, where you can actually mount an
image:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman unshare
#</code></pre></div>
<p>[]{#02.htm#pgfId-1038861}Mount the image, and save the location of the
mounted filesystem in an environment variable:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting"># mnt=$(podman image mount quay.io/rhatdan/myimage)</code></pre></div>
<p>[]{#02.htm#pgfId-1038863}Now you can actually examine the content of the
image. Let&rsquo;s print the contents of a file on the terminal:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting"># cat $mnt/var/www/html/index.html 
&lt;html&gt;
 &lt;head&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;h1&gt;Hello World&lt;/h1&gt;
 &lt;/body&gt;
&lt;/html&gt;</code></pre></div>
<p>[]{#02.htm#pgfId-1038872}When you are done, unmount the image, and exit
the unshare session:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting"># podman image unmount quay.io/rhatdan/myimage
# exit</code></pre></div>
<p>[]{#02.htm#pgfId-1038876}[Note]{.fm-callout-head} You have examined
about a half of the <code>podman</code>{.fm-code-in-text1}
<code>image</code>{.fm-code-in-text1} subcommands[]{#02.htm#marker-1038875},
arguably the most used ones. Refer to the Podman man pages for a full
explanation of these and other subcommands of the
<code>podman</code>{.fm-code-in-text1} <code>image</code>{.fm-code-in-text1} command:
<code>$</code>{.fm-code-in-text1} <code>man</code>{.fm-code-in-text1}
<code>podman-image</code>{.fm-code-in-text1}.</p>
<p>[]{#02.htm#pgfId-1038877}Now that you have a better understanding of
containers and images, the next important step is updating your image.
The main reasons for this are the need to update your application and
the availability of new versions for the base image you use. You can
build scripts to manually run the commands to build the image, but
luckily, Podman optimized
[]{#02.htm#marker-1038878}[]{#02.htm#marker-1038879}[]{#02.htm#marker-1038880}the
[]{#02.htm#marker-1038881}[]{#02.htm#marker-1038882}experience.</p>
<h2 id="23-building-images">2.3 Building images</h2>
<p>[]{#02.htm#pgfId-1038887}So
[]{#02.htm#marker-1038885}[]{#02.htm#marker-1038886}far you have been
working with images, which were already created and uploaded to a
container registry. The process of creating a container image is called
<em>building</em>.</p>
<p>[]{#02.htm#pgfId-1038888}When building container images, you manage not
only your application but also the image content used by this
application. In the days prior to containers, you shipped applications
as an RPM or DEB package, and then it was up to the distribution to make
sure the other parts of the OS were kept up to date and secure. But in
the container world, the container image includes the application along
with a subset of the OS. It is the developers&rsquo; responsibility to keep
all of the image contents up to date and secure.</p>
<p>[]{#02.htm#pgfId-1038889}A coworker of mine, Scott McCarty
(<a href="mailto:smccarty@redhat.com" rel="external" target="_blank">smccarty@redhat.com</a>, @fatherlinux), has a saying, &ldquo;Container images
don&rsquo;t age like wine but more like cheese. As the image gets older it
gets stinky.&rdquo;</p>
<p>[]{#02.htm#pgfId-1038890}This means that if the developer doesn&rsquo;t keep
up with the security updates, the number of vulnerabilities in the image
will grow at an alarming rate. Luckily for developers, Podman has a
special mechanism for helping you with image building for your
applications. The <code>podman</code>{.fm-code-in-text} <code>build</code>{.fm-code-in-text}
command[]{#02.htm#marker-1048537} uses the Buildah tool
(<a href="https://github.com/containers/buildah" rel="external" target="_blank">https://github.com/containers/buildah</a>{.url})
as a library to build container images; Buildah is covered in appendix
A.</p>
<p>[]{#02.htm#pgfId-1038892}The <code>podman</code>{.fm-code-in-text}
<code>build</code>{.fm-code-in-text} uses a special text document called
Containerfile or Dockerfile to automate the building of container
images. This document lists commands used to build a container image.</p>
<p>[]{#02.htm#pgfId-1038893}[Note]{.fm-callout-head} The concept of a
Dockerfile and its syntax was originally created for the Docker tool,
developed by Docker, Inc. Podman defaults to using Containerfile for the
name, which uses the exact same syntax. Dockerfile is supported as well
for legacy purposes. The Docker build command does not support
Containerfile by default but can use the Containerfile. You can specify
the <code>-f</code>{.fm-code-in-text1} option: <code>#</code>{.fm-code-in-text1}
<code>docker</code>{.fm-code-in-text1} <code>build</code>{.fm-code-in-text1}
<code>-f</code>{.fm-code-in-text1} <code>Containerfile.</code>{.fm-code-in-text1}</p>
<h3 id="heading_id_25" class="fm-head1">[]{#02.htm#pgfId-1038895}2.3.1 Format of a Containerfile or Dockerfile</h3>
<p>[]{#02.htm#pgfId-1038900}Containerfiles
[]{#02.htm#marker-1038896}[]{#02.htm#marker-1038897}[]{#02.htm#marker-1038898}[]{#02.htm#marker-1038899}take
many directives. I break these down into two categories, adding content
to the container image and describing and documenting how to use the
image[]{#02.htm#id_ozq815u6tf54}.</p>
<p>[]{#02.htm#pgfId-1038902}Adding content to an image</p>
<p>[]{#02.htm#pgfId-1038906}Recall
[]{#02.htm#marker-1038903}[]{#02.htm#marker-1038904}[]{#02.htm#marker-1038905}back
in section 1.1.2 that I described a container image as a tdirectory on
disk that looks like root on a Linux system. This directory is called a
rootfs. Several of the directives in a container job are adding content
to this rootfs. This rootfs eventually contains all of the content used
to create your container image.</p>
<p>[]{#02.htm#pgfId-1038907}Every Containerfile must include a
<code>FROM</code>{.fm-code-in-text} line. The <code>FROM</code>{.fm-code-in-text} line
specifies the image that the new image is based off, often called a base
image. The <code>podman</code>{.fm-code-in-text} <code>build</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038908} supports a special image named
<code>scratch</code>{.fm-code-in-text}[]{#02.htm#marker-1038909}, which means to
start your image with no content. When Podman sees the
<code>FROM</code>{.fm-code-in-text} <code>scratch</code>{.fm-code-in-text}
directive[]{#02.htm#marker-1038910}, it just allocates space in
containers/storage for an empty rootfs, then <code>COPY</code>{.fm-code-in-text}
can be used to populate the rootfs. More often, the
<code>FROM</code>{.fm-code-in-text} directive[]{#02.htm#marker-1038911} uses an
existing image. For example, <code>FROM</code>{.fm-code-in-text}
<code>registry.access.redhat.com/ubi8</code>{.fm-code-in-text} causes Podman to
pull the ubi8 image from the registry.access.redhat.com container
registry[]{#02.htm#marker-1038912} and copy it to container storage.
<code>podman</code>{.fm-code-in-text} <code>build</code>{.fm-code-in-text} pulls the same
image as the <code>podman</code>{.fm-code-in-text} <code>pull</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038913} you learned about in section 2.2.8.
When the image is pulled, Podman uses container storage to mount the
image on the rootfs directory, using a copy on the write filesystem,
like OverlayFS, where the other directives can start to add content.
This image becomes the base layer of the rootfs.</p>
<p>[]{#02.htm#pgfId-1038914}The <code>COPY</code>{.fm-code-in-text} directive is often
used to copy files, directories, or tarballs off of the local host into
the newly created rootfs. The <code>RUN</code>{.fm-code-in-text}
directive[]{#02.htm#marker-1038915}[]{#02.htm#marker-1038916} is one of
the most commonly used Containerfile directives. <code>RUN</code>{.fm-code-in-text}
tells Podman to actually run a container on the image. Package
management tools, like DNF/YUM and <code>apt-get</code>{.fm-code-in-text}, are run
to install packages from distributions onto your new image. The
<code>RUN</code>{.fm-code-in-text} directive[]{#02.htm#marker-1038917} runs any
command within the container image as a container. The
<code>podman</code>{.fm-code-in-text} <code>build</code>{.fm-code-in-text}
command[]{#02.htm#marker-1038918} runs the commands with the same
security constraints as the <code>podman</code>{.fm-code-in-text}
<code>run</code>{.fm-code-in-text} command[]{#02.htm#marker-1038919}.</p>
<p>[]{#02.htm#pgfId-1038921}As an example, imagine you want to add the
<code>ps</code>{.fm-code-in-text} command[]{#02.htm#marker-1038920} to a container
image; you can create a directive like the following. The
<code>RUN</code>{.fm-code-in-text} command executes a container, which updates all
of the packages from the base image, and then installs the
<code>procps-ns</code>{.fm-code-in-text} package, which includes the
<code>ps</code>{.fm-code-in-text} command[]{#02.htm#marker-1038922}. Finally the
containerized command[]{#02.htm#marker-1038923} executes
<code>yum</code>{.fm-code-in-text} to clean up after itself, so cruft is removed
from the container image:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">RUN yum -y update; yum -y install procps-ng; yum -y clean all</code></pre></div>
<p>[]{#02.htm#pgfId-1038925}Adding content to the container image is only
half of what you need to do when creating a container image. You also
need to describe and document how the image will be used when other
users download and run your
[]{#02.htm#marker-1038926}[]{#02.htm#marker-1038927}[]{#02.htm#marker-1038928}image.</p>
<p>[]{#02.htm#pgfId-1038930}Documenting how to use the image</p>
<p>[]{#02.htm#pgfId-1038934}Recall that
[]{#02.htm#marker-1038931}[]{#02.htm#marker-1038932}[]{#02.htm#marker-1038933}back
in section 1.1.2, I also described the JSON file that included the image
specification. This specification describes how the container image is
to be run, the command, which user to run it with, and other
requirements of the image. The Containerfile also supports many
directives, which tells Podman how to run containers. These include the
following:</p>
<ul>
<li>
<p>[]{#02.htm#pgfId-1038937 .calibre17}<em>The</em>
<code>ENTRYPOINT</code>{.fm-code-in-text}[]{#02.htm#marker-1038935 .calibre17}
<em>and</em> <code>CMD</code>{.fm-code-in-text} <em>directives</em>[]{#02.htm#marker-1038936
.calibre17}&mdash;These instrument the image with the default command to
be executed when users execute the image with Podman
<code>run</code>{.fm-code-in-text}. <code>CMD</code>{.fm-code-in-text} is the actual
command to run. <code>ENTRYPOINT</code>{.fm-code-in-text} can cause the entire
image to execute as a single command.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1038938 .calibre17}<em>The</em> <code>ENV</code>{.fm-code-in-text}
<em>directive</em>&mdash;This sets up the default environment variables to run
when Podman runs a container on the image.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1038941 .calibre17}<em>The</em> <code>EXPOSE</code>{.fm-code-in-text}
<em>directive</em>[]{#02.htm#marker-1038939
.calibre17}[]{#02.htm#marker-1038940 .calibre17}&mdash;This records the
network ports for Podman to expose in containers based on the image.
If you execute <code>podman</code>{.fm-code-in-text} <code>run</code>{.fm-code-in-text}
<code>--publish-all</code>{.fm-code-in-text} <code>...</code>{.fm-code-in-text}, Podman
looks inside of the image for the <code>EXPOSE</code>{.fm-code-in-text} network
ports and connects them to the host.</p>
</li>
</ul>
<p>[]{#02.htm#pgfId-1038942}Table 2.6 explains the directives used in a
Containerfile to add content to a container image.</p>
<p>[]{#02.htm#pgfId-1045581}Table 2.6 Containerfile directives that update
the image</p>
<p>+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.htm#pgf       | []{#02.htm#pgfId-1045587}Explanation         |
| Id-1045585}Directive |                                              |
| examples             |                                              |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.htm           | []{#02.htm#pgfId-1045591}Sets the base image |
| #pgfId-1045589}<code>FROM | for subsequent instructions. Containerfiles  | | </code>{.fm-code-in-text1} | must have <code>FROM</code>{.fm-code-in-text1} as their |
| <code>qua                 | first instruction. The                       | | y.io/rhatdan/myimage | </code>FROM<code>{.fm-code-in-text1} may appear         | | </code>{.fm-code-in-text1} | multiple times within a single Containerfile |
|                      | to create multiple build stages.             |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.ht            | []{#02.htm#pgfId-1045595}Copies new files,   |
| m#pgfId-1045593}<code>ADD | directories, or remote file URLs to the      | | </code>{.fm-code-in-text1} | filesystem of the container at a specified   |
| <code>start.sh            | path.                                        | | </code>{.fm-code-in-text1} |                                              |
| <code>/usr/bin/start.sh   |                                              | | </code>{.fm-code-in-text1} |                                              |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.htm           | []{#02.htm#pgfId-1045599}Copies files to the |
| #pgfId-1045597}<code>COPY | filesystem of the container at a specified   | | </code>{.fm-code-in-text1} | path.                                        |
| <code>start.sh            |                                              | | </code>{.fm-code-in-text1} |                                              |
| <code>/usr/bin/start.sh   |                                              | | </code>{.fm-code-in-text1} |                                              |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.ht            | []{#02.htm#pgfId-1045603}Executes commands   |
| m#pgfId-1045601}<code>RUN | in a new layer on top of the current image   | | </code>{.fm-code-in-text1} | and commits the results. The committed image |
| <code>dnf                 | is used for the next step in the             | | </code>{.fm-code-in-text1} | Containerfile.                               |
| <code>-y                  |                                              | | </code>{.fm-code-in-text1} |                                              |
| <code>update              |                                              | | </code>{.fm-code-in-text1} |                                              |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.htm#p         | []{#02.htm#pgfId-1045607}Creates a mount     |
| gfId-1045605}<code>VOLUME | point with the specified name and marks it   | | </code>{.fm-code-in-text1} | as holding externally mounted volumes from   |
| <code>/var/lib/mydata     | the native host or from other containers.    | | </code>{.fm-code-in-text1} | For more on volumes, see chapter 3.          |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+</p>
<p>[]{#02.htm#pgfId-1038972}Table 2.7 explains the directives used in a
Containerfile to populate the OCI Runtime Specifications with
information that tells container engines like Podman information about
the image and how to run the image. You can find much more information
on Containerfiles in the <code>containerfile(5)</code>{.fm-code-in-text} man
[]{#02.htm#marker-1038973}[]{#02.htm#marker-1038974}[]{#02.htm#marker-1038975}page.</p>
<p>[]{#02.htm#pgfId-1045699}Table 2.7 Containerfile directives that define
the OCI Runtime Specification</p>
<p>+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.htm#pgf       | []{#02.htm#pgfId-1045705}Explanation         |
| Id-1045703}Directive |                                              |
| examples             |                                              |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.ht            | []{#02.htm#pgfId-1045709}Specifies the       |
| m#pgfId-1045707}<code>CMD | default command to run when launching a      | | </code>{.fm-code-in-text1} | container off this image. If                 |
| <code>/usr/bin/start.sh   | </code>CMD<code>{.fm-code-in-text1} is not specified,   | | </code>{.fm-code-in-text1} | the parent image&rsquo;s <code>CMD</code>{.fm-code-in-text1}  |
|                      | is inherited. Note that                      |
|                      | <code>RUN</code>{.fm-code-in-text1} and                 |
|                      | <code>CMD</code>{.fm-code-in-text1} are very different. |
|                      | <code>RUN</code>{.fm-code-in-text1} runs the commands   |
|                      | during the build process, while              |
|                      | <code>CMD</code>{.fm-code-in-text1} is only used when a |
|                      | user launches the image without specifying a |
|                      | command.                                     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.htm#pgfId     | []{#02.htm#pgfId-1045713}Allows you to       |
| -1045711}<code>ENTRYPOINT | configure a container to run as an           | | </code>{.fm-code-in-text1} | executable. The                              |
| <code>“/bin/sh -c”</code>{.fm-  | <code>ENTRYPOINT</code>{.fm-code-in-text1} instruction  |
| code-in-text1}[]{#02 | is not overwritten when arguments are passed |
| .htm#marker-1045746} | to <code>podman run</code>{.fm-code-in-text1}. This     |
|                      | allows arguments to be passed to the         |
|                      | entrypoint&mdash;for instance,                   |
|                      | <code>podman run &lt;image&gt; -d</code>{.fm-code-in-text1}   |
|                      | passes the <code>-d</code>{.fm-code-in-text1} argument  |
|                      | to the <code>ENTRYPOINT</code>{.fm-code-in-text1}.      |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.ht            | []{#02.htm#pgfId-1045717}Adds an environment |
| m#pgfId-1045715}<code>ENV | variable to be used during both the image    | | </code>{.fm-code-in-text1} | build and container execution.               |
| <code>foo=”bar”           |                                              | | </code>{.fm-code-in-text1} |                                              |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.htm#p         | []{#02.htm#pgfId-1045721}Announces the port  |
| gfId-1045719}<code>EXPOSE | that containerized applications will be      | | </code>{.fm-code-in-text1} | exposing. This does not actually map or open |
| <code>8080</code>{.fm-          | any ports.                                   |
| code-in-text1}[]{#02 |                                              |
| .htm#marker-1045747} |                                              |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#                 | []{#02.htm#pgfId-1045725}Adds metadata to an |
| 02.htm#pgfId-1045723 | image.                                       |
| }<code>LABEL Description= |                                              | | ”Web browser which d |                                              | | isplays Hello World” |                                              | | </code>{.fm-code-in-text1} |                                              |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.ht            | []{#02.htm#pgfId-1045729}Sets the            |
| m#pgfId-1045727}<code>MAI | </code>Author<code>{.fm-code-in-text1} field for the    | | NTAINER Daniel Walsh | generated images.                            | | </code>{.fm-code-in-text1} |                                              |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#                 | []{#02.htm#pgfId-1045733}Sets the default    |
| 02.htm#pgfId-1045731 | stop signal sent to the container to exit.   |
| }<code>STOPSIGNAL SIGTERM | The signal can be a valid unsigned number or | | </code>{.fm-code-in-text1} | a signal name in the format                  |
|                      | <code>SIGNAME</code>{.fm-code-in-text1}.                |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.htm#pgfId-    | []{#02.htm#pgfId-1045737}Sets the user name  |
| 1045735}<code>USER apache | (or UID) and group name (or GID) to use for  | | </code>{.fm-code-in-text1} | any <code>RUN</code>{.fm-code-in-text1},                |
|                      | <code>CMD</code>{.fm-code-in-text1}, and                |
|                      | <code>ENTRYPOINT</code>{.fm-code-in-text1} specified    |
|                      | after it.                                    |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.htm#pgfId-10  | []{#02.htm#pgfId-1045741}Adds a trigger      |
| 45739}<code>ONBUILD</code>{.fm- | instruction to the image to be executed at a |
| code-in-text1}[]{#02 | later time, when the image is used as the    |
| .htm#marker-1045748} | base for another build.                      |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+
| []{#02.htm#pg        | []{#02.htm#pgfId-1045745}Sets the working    |
| fId-1045743}<code>WORKDIR | directory for </code>RUN<code>{.fm-code-in-text1},      | | </code>{.fm-code-in-text1} | <code>CMD</code>{.fm-code-in-text1},                    |
| /var/www/html        | <code>ENTRYPOINT</code>{.fm-code-in-text1}, and         |
|                      | <code>COPY</code>{.fm-code-in-text1} directives. A      |
|                      | directory will be created if it doesn&rsquo;t      |
|                      | exist.                                       |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-+</p>
<p>[]{#02.htm#pgfId-1039029}Committing the image</p>
<p>[]{#02.htm#pgfId-1039034}When
[]{#02.htm#marker-1039030}[]{#02.htm#marker-1039031}[]{#02.htm#marker-1039032}[]{#02.htm#marker-1039033}<code>podman</code>{.fm-code-in-text}
<code>build</code>{.fm-code-in-text} finishes processing the Containerfile, it
commits the image, using the same code as <code>podman</code>{.fm-code-in-text}
<code>commit</code>{.fm-code-in-text} you learned about in section 2.1.9.
Basically, Podman TARs up all of the differences between the new content
in the rootfs and the base image, pulled down by the
<code>FROM</code>{.fm-code-in-text} directive[]{#02.htm#marker-1039035}. Podman
also commits the JSON file and saves this as an image in container
storage. Now you can take the steps used to build out containerized
applications and automate them using a Containerfile and Podman build.</p>
<p>[]{#02.htm#pgfId-1039037}[Tip]{.fm-callout-head} Use the
<code>--tag</code>{.fm-code-in-text1} option[]{#02.htm#marker-1039036} to name the
new image you are creating with <code>podman</code>{.fm-code-in-text1}
<code>build</code>{.fm-code-in-text1}. This tells Podman to add the specified tag
or name to the image in container storage in the same way as the
[]{#02.htm#marker-1039038}[]{#02.htm#marker-1039039}[]{#02.htm#marker-1039040}[]{#02.htm#marker-1039041}<code>podman</code>{.fm-code-in-text1}
<code>tag</code>{.fm-code-in-text1}
[]{#02.htm#marker-1039042}[]{#02.htm#marker-1039043}[]{#02.htm#marker-1039044}[]{#02.htm#marker-1039045}command[]{#02.htm#marker-1039046}.</p>
<h3 id="heading_id_26" class="fm-head1">[]{#02.htm#pgfId-1039048}2.3.2 Automating the building of our application</h3>
<p>[]{#02.htm#pgfId-1039052}First,
[]{#02.htm#marker-1039049}[]{#02.htm#marker-1039050}[]{#02.htm#marker-1039051}create
a directory to put your Containerfile and any other content for the
container image in. The directory is called a context directory:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">mkdir myapp</code></pre></div>
<p>[]{#02.htm#pgfId-1039054}Next, create the index.html file you plan to
use in the containerized application in the <code>myapp</code>{.fm-code-in-text}
directory:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ cat &gt; myapp/index.html &lt;&lt; _EOF
&lt;html&gt;
 &lt;head&gt;
 &lt;/head&gt;
 &lt;body&gt;
 &lt;h1&gt;Hello World&lt;/h1&gt;
 &lt;/body&gt;
&lt;/html&gt;
_EOF</code></pre></div>
<p>[]{#02.htm#pgfId-1039064}Next, create a simple Containerfile to build
your application in the <code>myapp</code>{.fm-code-in-text} directory. The first
line of the Containerfile is the <code>FROM</code>{.fm-code-in-text}
directive[]{#02.htm#marker-1039065} to pull the ubi8/httpd-24 image you
are treating as your base image. Then add a <code>COPY</code>{.fm-code-in-text}
command[]{#02.htm#marker-1039066} to copy the index.html file into the
image. The <code>COPY</code>{.fm-code-in-text} directive[]{#02.htm#marker-1039067}
tells Podman to copy the index.html file out of the context directory
(./myapp) and copy it to the /var/www/html/index.html file within the
image:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ cat &gt; myapp/Containerfile &lt;&lt; _EOF
FROM ubi8/httpd-24
COPY index.html /var/www/html/index.html
_EOF</code></pre></div>
<p>[]{#02.htm#pgfId-1039072}Finally, use <code>podman</code>{.fm-code-in-text}
<code>build</code>{.fm-code-in-text} to build your containerized application.
Specify the <code>--tag</code>{.fm-code-in-text} (<code>-t</code>{.fm-code-in-text}) to name
the image quay.io/rhatdan/myimage. You also need to specify the context
directory ./myapp:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman build -t quay.io/rhatdan/myimage ./myapp
STEP 1/2: FROM ubi8/httpd-24
STEP 2/2: COPY index.html /var/www/html/index.html
COMMIT quay.io/rhatdan/myimage
--&gt; f81b8ace4f1
Successfully tagged quay.io/rhatdan/myimage:latest
F81b8ace4f134d08cedb20a9156ae727444ae4d4ec1ceb3b12d3aff23d18128b</code></pre></div>
<p>[]{#02.htm#pgfId-1039081}When the <code>podman</code>{.fm-code-in-text}
<code>build</code>{.fm-code-in-text} command[]{#02.htm#marker-1039080} completes,
it commits the image and tags (<code>-t</code>{.fm-code-in-text}) it with the
quay.io/rhatdan/myimage name. It is now ready to be pushed to the
container registry using the <code>podman</code>{.fm-code-in-text}
<code>push</code>{.fm-code-in-text} command[]{#02.htm#marker-1039082}.</p>
<p>[]{#02.htm#pgfId-1039083}Now you can set up a CI/CD system or even a
simple cron job to regularly build and replace
<code>myapplication</code>{.fm-code-in-text}:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ cat &gt; myapp/automate.sh &lt;&lt; _EOF
#!/bin/bash
podman build -t quay.io/rhatdan/myimage ./myapp
podman push quay.io/rhatdan/myimage
_EOF
$ chmod +x myapp/automate.sh</code></pre></div>
<p>[]{#02.htm#pgfId-1039090}Add some test scripts as well to make sure your
application works the way it was designed before replacing the previous
version. Let&rsquo;s take a look at the images that were built:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-programlisting" data-lang="programlisting">$ podman images
REPOSITORY                         TAG        IMAGE ID        CREATED    SIZE
quay.io/rhatdan/myimage         latest    f81b8ace4f13  2 minutes ago  462 MB
&lt;none&gt;                          &lt;none&gt;    2c7e43d88038     2 days ago  462 MB
registry.access.redhat
➥.com/ubi8/httpd-24            latest    8594be0a0b57    5 weeks ago  462 MB</code></pre></div>
<p>[]{#02.htm#pgfId-1039099}Notice the old version of
quay.io/rhatdan/myimage, image ID <code>2c7e43d88038</code>{.fm-code-in-text},
still exists in container storage but now has a
<code>REPOSITORY</code>{.fm-code-in-text} and <code>TAG</code>{.fm-code-in-text} of
<code>&lt;none&gt;</code>{.fm-code-in-text} <code>&lt;none&gt;</code>{.fm-code-in-text}. Images like these
are called dangling images. Since I have created a new version of
quay.io/rhatdan/myimage with the <code>podman</code>{.fm-code-in-text}
<code>build</code>{.fm-code-in-text} command[]{#02.htm#marker-1039100}, the
previous image loses that name. You can still use the Podman commands
with the image ID, or if the new image doesn&rsquo;t work, simply use
<code>podman</code>{.fm-code-in-text} <code>tag</code>{.fm-code-in-text} to rename the old
image back to quay.io/ rhatdan/myimage. If the new image works
correctly, you can remove the old image with <code>podman</code>{.fm-code-in-text}
<code>rmi</code>{.fm-code-in-text}. These <code>&lt;none&gt;&lt;none&gt;</code>{.fm-code-in-text} images
tend to build up over time, wasting space, but you can periodically use
the <code>podman</code>{.fm-code-in-text} <code>image</code>{.fm-code-in-text}
<code>prune</code>{.fm-code-in-text} command[]{#02.htm#marker-1039101} to remove
them.</p>
<p>[]{#02.htm#pgfId-1039102}The <code>podman</code>{.fm-code-in-text}
<code>build</code>{.fm-code-in-text} could really use a chapter or even a book to
itself. People build images in thousands of different ways using the
commands briefly described here.</p>
<p>[]{#02.htm#pgfId-1039104}<code>--tag</code>{.fm-code-in-text}[]{#02.htm#id_t7sehvoh2hfl1111}
is a notable <code>podman</code>{.fm-code-in-text} <code>build</code>{.fm-code-in-text} option
that specifies the image tag or name for the image. Remember that you
can always add additional names after you create the image with the
<code>podman</code>{.fm-code-in-text} <code>tag</code>{.fm-code-in-text}
command[]{#02.htm#marker-1039105} you used in section 2.2.6. Use the
<code>man</code>{.fm-code-in-text} <code>podman-build</code>{.fm-code-in-text}
command[]{#02.htm#marker-1039106} for information about all
[]{#02.htm#marker-1039107}[]{#02.htm#marker-1039108}[]{#02.htm#marker-1039109}options
[]{#02.htm#marker-1039110}[]{#02.htm#marker-1039111}(see table 2.8).</p>
<p>[]{#02.htm#pgfId-1045944}Table 2.8 Podman image commands</p>
<p>+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#    | []{#02                 | []{                               |
| 02.htm# | .htm#pgfId-1045952}Man | #02.htm#pgfId-1045954}Description |
| pgfId-1 | page                   |                                   |
| 045950} |                        |                                   |
| Command |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02. | [                      | []{#02.htm#pgfId-1045960}Builds   |
| htm#pgf | ]{#02.htm#pgfId-104595 | an image using instructions from  |
| Id-1045 | 8}<code>podman-image-build( | Containerfiles                    | | 956}</code>bu | 1)<code>{.fm-code-in-text1} |                                   | | ild</code>{.f |                        |                                   |
| m-code- |                        |                                   |
| in-text |                        |                                   |
| 1}[]{#0 |                        |                                   |
| 2.htm#m |                        |                                   |
| arker-1 |                        |                                   |
| 046087} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02  | []{#02.htm#pgfId-10459 | []{#02.htm#pgfId-1045966}Inspects |
| .htm#pg | 64}<code>podman-image-diff( | changes in image's filesystem     | | fId-104 | 1)</code>{.fm-code-in-text1} |                                   |
| 5962}<code>d |                        |                                   | | iff</code>{.f |                        |                                   |
| m-code- |                        |                                   |
| in-text |                        |                                   |
| 1}[]{#0 |                        |                                   |
| 2.htm#m |                        |                                   |
| arker-1 |                        |                                   |
| 046088} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{     | []                     | []{#02.htm#pgfId-1045972}Checks   |
| #02.htm | {#02.htm#pgfId-1045970 | whether an image                  |
| #pgfId- | }<code>podman-image-exists( | exists[]{#02.htm#marker-1046089}  | | 1045968 | 1)</code>{.fm-code-in-text1} |                                   |
| }<code>exist |                        |                                   | | s</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#    | []{                    | []{#02.htm#pgfId-1045978}Shows a  |
| 02.htm# | #02.htm#pgfId-1045976} | history[]{#02.htm#marker-1046090} |
| pgfId-1 | <code>podman-image-history( | of a specified image              | | 045974} | 1)</code>{.fm-code-in-text1} |                                   |
| <code>histor |                        |                                   | | y</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [       | []                     | []{#02.htm#pgfId-1045984}Imports  |
| ]{#02.h | {#02.htm#pgfId-1045982 | a tarball to create a filesystem  |
| tm#pgfI | }<code>podman-image-import( | image                             | | d-10459 | 1)</code>{.fm-code-in-text1} |                                   |
| 80}<code>imp |                        |                                   | | ort</code>{.f |                        |                                   |
| m-code- |                        |                                   |
| in-text |                        |                                   |
| 1}[]{#0 |                        |                                   |
| 2.htm#m |                        |                                   |
| arker-1 |                        |                                   |
| 046091} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#    | []{                    | []{#02.htm#pgfId-1045990}Displays |
| 02.htm# | #02.htm#pgfId-1045988} | the configuration of an image     |
| pgfId-1 | <code>podman-image-inspect( |                                   | | 045986} | 1)</code>{.fm-code-in-text1} |                                   |
| <code>inspec |                        |                                   | | t</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02  | []{#02.htm#pgfId-10459 | []{#02.htm#pgfId-1045996}Lists    |
| .htm#pg | 94}<code>podman-image-list( | all of the images                 | | fId-104 | 1)</code>{.fm-code-in-text1} |                                   |
| 5992}<code>l |                        |                                   | | ist</code>{.f |                        |                                   |
| m-code- |                        |                                   |
| in-text |                        |                                   |
| 1}[]{#0 |                        |                                   |
| 2.htm#m |                        |                                   |
| arker-1 |                        |                                   |
| 046092} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02  | []{#02.htm#pgfId-10460 | []{#02.htm#pgfId-1046002}Loads    |
| .htm#pg | 00}<code>podman-image-load( | image(s) from a tarball           | | fId-104 | 1)</code>{.fm-code-in-text1} |                                   |
| 5998}<code>l |                        |                                   | | oad</code>{.f |                        |                                   |
| m-code- |                        |                                   |
| in-text |                        |                                   |
| 1}[]{#0 |                        |                                   |
| 2.htm#m |                        |                                   |
| arker-1 |                        |                                   |
| 046093} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02. | [                      | []{#02.htm#pgfId-1046008}Mounts   |
| htm#pgf | ]{#02.htm#pgfId-104600 | an image&rsquo;s root filesystem        |
| Id-1046 | 6}<code>podman-image-mount( |                                   | | 004}</code>mo | 1)<code>{.fm-code-in-text1} |                                   | | unt</code>{.f |                        |                                   |
| m-code- |                        |                                   |
| in-text |                        |                                   |
| 1}[]{#0 |                        |                                   |
| 2.htm#m |                        |                                   |
| arker-1 |                        |                                   |
| 046094} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02. | [                      | []{#02.htm#pgfId-1046014}Removes  |
| htm#pgf | ]{#02.htm#pgfId-104601 | unused images                     |
| Id-1046 | 2}<code>podman-image-prune( |                                   | | 010}</code>pr | 1)<code>{.fm-code-in-text1} |                                   | | une</code>{.f |                        |                                   |
| m-code- |                        |                                   |
| in-text |                        |                                   |
| 1}[]{#0 |                        |                                   |
| 2.htm#m |                        |                                   |
| arker-1 |                        |                                   |
| 046095} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [       | []{#02.htm#pgfId-10460 | []{#02.htm#pgfId-1046020}Pulls an |
| ]{#02.h | 18}<code>podman-image-pull( | image from a registry             | | tm#pgfI | 1)</code>{.fm-code-in-text1} |                                   |
| d-10460 |                        |                                   |
| 16}<code>pul |                        |                                   | | l</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [       | []{#02.htm#pgfId-10460 | []{#02.htm#pgfId-1046026}Pushes   |
| ]{#02.h | 24}<code>podman-image-push( | an image to a registry            | | tm#pgfI | 1)</code>{.fm-code-in-text1} |                                   |
| d-10460 |                        |                                   |
| 22}<code>pus |                        |                                   | | h</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02  | []{#02.htm#pgfId-104   | []{#02.htm#pgfId-1046032}Removes  |
| .htm#pg | 6030}<code>podman-image-rm( | an image                          | | fId-104 | 1)</code>{.fm-code-in-text1} |                                   |
| 6028}<code>r |                        |                                   | | m</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [       | []{#02.htm#pgfId-10460 | []{#02.htm#pgfId-1046038}Saves    |
| ]{#02.h | 36}<code>podman-image-save( | image(s) to an archive            | | tm#pgfI | 1)</code>{.fm-code-in-text1} |                                   |
| d-10460 |                        |                                   |
| 34}<code>sav |                        |                                   | | e</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02. | []{#02.htm#pgfId-1046  | []{#02.htm#pgfId-1046044}Securely |
| htm#pgf | 042}<code>podman-image-scp( | copies images to other            | | Id-1046 | 1)</code>{.fm-code-in-text1} | containers/storage                |
| 040}<code>sc |                        |                                   | | p</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{     | []                     | []{#02.htm#pgfId-1046050}Searches |
| #02.htm | {#02.htm#pgfId-1046048 | the registry for an image         |
| #pgfId- | }<code>podman-image-search( |                                   | | 1046046 | 1)</code>{.fm-code-in-text1} |                                   |
| }<code>searc |                        |                                   | | h</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [       | []{#02.htm#pgfId-10460 | []{#02.htm#pgfId-1046056}Signs an |
| ]{#02.h | 54}<code>podman-image-sign( | image                             | | tm#pgfI | 1)</code>{.fm-code-in-text1} |                                   |
| d-10460 |                        |                                   |
| 52}<code>sig |                        |                                   | | n</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#02. | []{#02.htm#pgfId-1046  | []{#02.htm#pgfId-1046062}Adds an  |
| htm#pgf | 060}<code>podman-image-tag( | additional name to a local image  | | Id-1046 | 1)</code>{.fm-code-in-text1} |                                   |
| 058}<code>ta |                        |                                   | | g</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| [       | []{#02.htm#pgfId-10460 | []{#02.htm#pgfId-1046068}Prints   |
| ]{#02.h | 66}<code>podman-image-tree( | the layer hierarchy of an image   | | tm#pgfI | 1)</code>{.fm-code-in-text1} | in a tree format                  |
| d-10460 |                        |                                   |
| 64}<code>tre |                        |                                   | | e</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []      | [                      | []{#02.htm#pgfId-1046074}Manages  |
| {#02.ht | ]{#02.htm#pgfId-104607 | container image trust policy      |
| m#pgfId | 2}<code>podman-image-trust( |                                   | | -104607 | 1)</code>{.fm-code-in-text1} |                                   |
| 0}<code>trus |                        |                                   | | t</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []{#    | []{                    | []{#02.htm#pgfId-1046080}Unmounts |
| 02.htm# | #02.htm#pgfId-1046078} | an image&rsquo;s root filesystem        |
| pgfId-1 | <code>podman-image-unmount( |                                   | | 046076} | 1)</code>{.fm-code-in-text1} |                                   |
| <code>unmoun |                        |                                   | | t</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| []      | [                      | []{#02.htm#pgfId-1046086}Removes  |
| {#02.ht | ]{#02.htm#pgfId-104608 | a name from a local image         |
| m#pgfId | 4}<code>podman-image-untag( |                                   | | -104608 | 1)</code>{.fm-code-in-text1} |                                   |
| 2}<code>unta |                        |                                   | | g</code>{.fm- |                        |                                   |
| code-in |                        |                                   |
| -text1} |                        |                                   |
+&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+</p>
<h2 id="summary">Summary</h2>
<ul>
<li>
<p>[]{#02.htm#pgfId-1039266 .calibre17}Podman&rsquo;s simple command-line
interface makes working with containers easy.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1039269 .calibre17}Podman <code>run</code>{.fm-code-in-text},
<code>stop</code>{.fm-code-in-text}, <code>start</code>{.fm-code-in-text},
<code>ps</code>{.fm-code-in-text},
<code>inspect</code>{.fm-code-in-text}[]{#02.htm#marker-1039267 .calibre17},
<code>rm</code>{.fm-code-in-text}[]{#02.htm#marker-1039268 .calibre17}, and
<code>commit</code>{.fm-code-in-text} are all commands for working with
containers.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1039271 .calibre17}Podman
<code>pull</code>{.fm-code-in-text}[]{#02.htm#marker-1039270 .calibre17},
<code>push</code>{.fm-code-in-text}, <code>login</code>{.fm-code-in-text}, and
<code>rmi</code>{.fm-code-in-text} are tools for working with images and
sharing them via container registries.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1039272 .calibre17}Podman <code>build</code>{.fm-code-in-text}
is a great command for automating the build of container images.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1039273 .calibre17}Podman&rsquo;s command line is based
on the Docker CLI and supports it exactly, allowing us to tell
people to just alias Docker = Podman.</p>
</li>
<li>
<p>[]{#02.htm#pgfId-1039284 .calibre17}Podman has additional commands
and options to support more advanced concepts
like[]{#02.htm#marker-1039274 .calibre17}[]{#02.htm#marker-1039275
.calibre17}[]{#02.htm#marker-1039276
.calibre17}[]{#02.htm#marker-1039277
.calibre17}[]{#02.htm#marker-1039278
.calibre17}[]{#02.htm#marker-1039279
.calibre17}[]{#02.htm#marker-1039280
.calibre17}[]{#02.htm#marker-1039281
.calibre17}[]{#02.htm#marker-1039282 .calibre17}
[]{#02.htm#marker-1039283 .calibre17}<code>podman</code>{.fm-code-in-text}
<code>image</code>{.fm-code-in-text} <code>mount</code>{.fm-code-in-text}.</p>
</li>
</ul>
<p>[]{#03.htm}</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation showVisitedLinks">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<a href="https://perfectdarkmode.com">
  <img src="/images/V.svg" alt="perfectdarkmode.com" >
</a>

        </div>
        <script>
          window.index_js_url="/searchindex.en.js?1734871290";
        </script>
        <search><form action="/search/" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/js/auto-complete.js?1734871290" defer></script>
        <script src="/js/lunr/lunr.min.js?1734871290" defer></script>
        <script src="/js/lunr/lunr.stemmer.support.min.js?1734871290" defer></script>
        <script src="/js/lunr/lunr.multi.min.js?1734871290" defer></script>
        <script src="/js/lunr/lunr.en.min.js?1734871290" defer></script>
        <script src="/js/search.js?1734871290" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation">
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-shortcutmenu-home" class="R-sidebarmenu">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/linux/"><input type="checkbox" id="R-section-e2509333b88222aa06f1b5fc60b020b2" aria-controls="R-subsections-e2509333b88222aa06f1b5fc60b020b2"><label for="R-section-e2509333b88222aa06f1b5fc60b020b2"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Linux</span></label><a class="padding" href="/linux/">Linux<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-e2509333b88222aa06f1b5fc60b020b2" class="collapsible-menu">
            <li class="" data-nav-id="/linux/rhcsa/rhcsa-notes/"><a class="padding" href="/linux/rhcsa/rhcsa-notes/"><i class='fa-fw fas fa-caret-right'></i> My RHCSA 9 Notes<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/linux/rhcsa/rhcsa-vagrant-lab-setup/"><a class="padding" href="/linux/rhcsa/rhcsa-vagrant-lab-setup/"><i class='fa-fw fas fa-caret-right'></i> RHCSA Vagrant Lab Setup<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="/networking/"><input type="checkbox" id="R-section-d7c3359b808d40df139a3bb9f9073483" aria-controls="R-subsections-d7c3359b808d40df139a3bb9f9073483"><label for="R-section-d7c3359b808d40df139a3bb9f9073483"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Networking</span></label><a class="padding" href="/networking/">Networking<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-d7c3359b808d40df139a3bb9f9073483" class="collapsible-menu">
            <li class="" data-nav-id="/networking/how-to-study-for-the-ccna-exam/"><a class="padding" href="/networking/how-to-study-for-the-ccna-exam/"><i class='fa-fw fas fa-caret-right'></i> How to Study for the CCNA Exam<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/networking/resources-for-passing-ccna/"><a class="padding" href="/networking/resources-for-passing-ccna/"><i class='fa-fw fas fa-caret-right'></i> Resources for Passing CCNA<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/networking/what-to-learn-after-ccna/"><a class="padding" href="/networking/what-to-learn-after-ccna/"><i class='fa-fw fas fa-caret-right'></i> What to Learn After CCNA<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="parent " data-nav-id="/tools/"><input type="checkbox" id="R-section-bf1399820dde3dd110e03ace4147ff86" aria-controls="R-subsections-bf1399820dde3dd110e03ace4147ff86" checked><label for="R-section-bf1399820dde3dd110e03ace4147ff86"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Tools</span></label><a class="padding" href="/tools/">Tools<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-bf1399820dde3dd110e03ace4147ff86" class="collapsible-menu">
            <li class="" data-nav-id="/tools/calibre-web-with-docker-and-nginx/"><a class="padding" href="/tools/calibre-web-with-docker-and-nginx/"><i class='fa-fw fas fa-caret-right'></i> Calibre Web with Docker and NGINX<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="active hidden " data-nav-id="/tools/podman/2-command-line/"><a class="padding" href="/tools/podman/2-command-line/"><i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/tools/obsidian-site-setup/"><a class="padding" href="/tools/obsidian-site-setup/"><i class='fa-fw fas fa-caret-right'></i> Automatically Sync Obsidian to Hugo and Apache<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/tools/how-to-build-a-website-with-hugo/"><a class="padding" href="/tools/how-to-build-a-website-with-hugo/"><i class='fa-fw fas fa-caret-right'></i> How to Build a Website with Hugo<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/tools/process-bookfusion-highlights/"><a class="padding" href="/tools/process-bookfusion-highlights/"><i class='fa-fw fas fa-caret-right'></i> How to Process Bookfusion Highlights with Vim<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/tools/how-to-set-up-hugo-relearn-theme/"><a class="padding" href="/tools/how-to-set-up-hugo-relearn-theme/"><i class='fa-fw fas fa-caret-right'></i> How to Set Up Hugo Relearn Theme<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/tools/setting-up-a-self-hosted-nextcloud-server/"><a class="padding" href="/tools/setting-up-a-self-hosted-nextcloud-server/"><i class='fa-fw fas fa-caret-right'></i> Setting Up a Self-hosted NextCloud Server<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/tools/using-vagrant-on-linux/"><a class="padding" href="/tools/using-vagrant-on-linux/"><i class='fa-fw fas fa-caret-right'></i> Using Vagrant on Linux<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="/writing/"><input type="checkbox" id="R-section-e3d1318aa75db5bce0725e0a3ed7bb24" aria-controls="R-subsections-e3d1318aa75db5bce0725e0a3ed7bb24"><label for="R-section-e3d1318aa75db5bce0725e0a3ed7bb24"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Writing</span></label><a class="padding" href="/writing/">Writing<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-e3d1318aa75db5bce0725e0a3ed7bb24" class="collapsible-menu">
            <li class="" data-nav-id="/writing/19-biggest-lessons-from-reading-100-books./"><a class="padding" href="/writing/19-biggest-lessons-from-reading-100-books./"><i class='fa-fw fas fa-caret-right'></i> 19 Biggest Lessons from Reading 100 Books<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/writing/nat-eliasons-seo-course/"><a class="padding" href="/writing/nat-eliasons-seo-course/"><i class='fa-fw fas fa-caret-right'></i> Nat Eliason&#39;s SEO Course<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/writing/writing-off-the-cuff/"><a class="padding" href="/writing/writing-off-the-cuff/"><i class='fa-fw fas fa-caret-right'></i> Writing Off the Cuff<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="/philosophy/"><input type="checkbox" id="R-section-8c82ea449b1ed3a82ac9f4c033e6c771" aria-controls="R-subsections-8c82ea449b1ed3a82ac9f4c033e6c771"><label for="R-section-8c82ea449b1ed3a82ac9f4c033e6c771"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Philosophy</span></label><a class="padding" href="/philosophy/">Philosophy<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-8c82ea449b1ed3a82ac9f4c033e6c771" class="collapsible-menu">
            <li class="" data-nav-id="/philosophy/austerities/"><a class="padding" href="/philosophy/austerities/"><i class='fa-fw fas fa-caret-right'></i> Austerities<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/philosophy/the-journey/"><a class="padding" href="/philosophy/the-journey/"><i class='fa-fw fas fa-caret-right'></i> The Journey<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="/recipes/"><input type="checkbox" id="R-section-c577cf8a0811f0416711bbf6194eeea7" aria-controls="R-subsections-c577cf8a0811f0416711bbf6194eeea7"><label for="R-section-c577cf8a0811f0416711bbf6194eeea7"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Recipes</span></label><a class="padding" href="/recipes/">Recipes<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-c577cf8a0811f0416711bbf6194eeea7" class="collapsible-menu">
            <li class="" data-nav-id="/recipes/creamy-jalepeno-sauce/"><a class="padding" href="/recipes/creamy-jalepeno-sauce/"><i class='fa-fw fas fa-caret-right'></i> Creamy Jalepeno Sauce<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/recipes/easy-mango-salsa-quinoa-bowl/"><a class="padding" href="/recipes/easy-mango-salsa-quinoa-bowl/"><i class='fa-fw fas fa-caret-right'></i> Easy Mango Salsa Quinoa Bowl<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/recipes/tempeh-bacon/"><a class="padding" href="/recipes/tempeh-bacon/"><i class='fa-fw fas fa-caret-right'></i> Tempeh Bacon<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/recipes/vegan-tofu-quesadilla/"><a class="padding" href="/recipes/vegan-tofu-quesadilla/"><i class='fa-fw fas fa-caret-right'></i> Vegan Tofu Quesadilla<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/health-and-fitness/"><input type="checkbox" id="R-section-8ea26d41efde3afeda887278c69eb108" aria-controls="R-subsections-8ea26d41efde3afeda887278c69eb108" checked><label for="R-section-8ea26d41efde3afeda887278c69eb108"><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Health and Fitnesses</span></label><a class="padding" href="/health-and-fitness/">Health and Fitnesses<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-8ea26d41efde3afeda887278c69eb108" class="collapsible-menu">
            <li class="" data-nav-id="/health-and-fitness/4-ways-to-quit-caffeine/"><a class="padding" href="/health-and-fitness/4-ways-to-quit-caffeine/"><i class='fa-fw fas fa-caret-right'></i> 4 Ways to Quit Caffeine<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/health-and-fitness/7-steps-to-get-back-on-a-nofap-streak-immediately/"><a class="padding" href="/health-and-fitness/7-steps-to-get-back-on-a-nofap-streak-immediately/"><i class='fa-fw fas fa-caret-right'></i> 7 Steps to Get Back on a NoFap Streak Immediately<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/health-and-fitness/caffeine-is-destroying-you/"><a class="padding" href="/health-and-fitness/caffeine-is-destroying-you/"><i class='fa-fw fas fa-caret-right'></i> Caffeine is Destroying You<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
          </ul>
        </div>
        <div id="R-shortcutmenu-shortcuts" class="R-sidebarmenu">
          <div class="nav-title padding">More</div>
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="https://github.com/tdavetech"><a class="padding" href="https://github.com/tdavetech" target="_blank"><i class='fab fa-fw fa-github'></i> GitHub<i class="fa-fw fas fa-check read-icon"></i></a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-en" value="#R-select-language-en" data-url="/tools/podman/2-command-line/" lang="en-us" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-select-variant-amoled" value="amoled" selected>Amoled</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks showVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter">
        <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
          </div>
        </div>
      </div>
    </aside>
    <script src="/js/clipboard.min.js?1734871290" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1734871290" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/d3/d3-color.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-drag.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-ease.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-selection.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-timer.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-transition.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1734871290" defer></script>
    <script src="/js/js-yaml.min.js?1734871290" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/theme.js?1734871290" defer></script>
  </body>
</html>
