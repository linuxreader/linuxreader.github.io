<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.140.0">
    <meta name="generator" content="Relearn 7.1.1">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="7 Integration with systemd []{#07.htm#pgfId-1110287}This chapter []{#07.htm#marker-1113414}covers
[]{#07.htm#pgfId-1110288 .calibre17}Running systemd within the container as the primary process []{#07.htm#pgfId-1110289 .calibre17}Generating systemd unit files from existing containers []{#07.htm#pgfId-1110290 .calibre17}Socket-activated containerized services []{#07.htm#pgfId-1110292 .calibre17}Using sd-notify{.fm-code-in-text} containerized services[]{#07.htm#marker-1113419 .calibre17} []{#07.htm#pgfId-1110293 .calibre17}The advantages of using journald as a logging driver and events backend []{#07.htm#pgfId-1110294 .calibre17}Using Podman and systemd to manage containerized services’ life cycles on edge devices []{#07.htm#pgfId-1110295}Systemd is the de facto init system for Linux. Almost every distribution of Linux defaults to systemd as the first process launched after the kernel, which then launches all of the services, including the login sessions for the user. Podman embraces the power of systemd and uses it for starting up lots of its services. When starting containerized services at boot time, Podman encourages users to use systemd unit files with Podman commands. Unit files are what systemd calls its configuration files. Systemd supports a few different types of unit files, including service files in which you can define a service, which you would want systemd to manage. A SystemD.socket is another kind of unit file systemd uses (see section 7.6). The systemd service unit files are a way to share your containerized service with the world. As you see in figure 7.1, Podman’s []{#07.htm#id_Hlk115164025}fork/exec model grants systemd the ability to track the processes within a containerized service.">
    <meta name="author" content="David Vargas">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="7 Integration with systemd []{#07.htm#pgfId-1110287}This chapter []{#07.htm#marker-1113414}covers
[]{#07.htm#pgfId-1110288 .calibre17}Running systemd within the container as the primary process []{#07.htm#pgfId-1110289 .calibre17}Generating systemd unit files from existing containers []{#07.htm#pgfId-1110290 .calibre17}Socket-activated containerized services []{#07.htm#pgfId-1110292 .calibre17}Using sd-notify{.fm-code-in-text} containerized services[]{#07.htm#marker-1113419 .calibre17} []{#07.htm#pgfId-1110293 .calibre17}The advantages of using journald as a logging driver and events backend []{#07.htm#pgfId-1110294 .calibre17}Using Podman and systemd to manage containerized services’ life cycles on edge devices []{#07.htm#pgfId-1110295}Systemd is the de facto init system for Linux. Almost every distribution of Linux defaults to systemd as the first process launched after the kernel, which then launches all of the services, including the login sessions for the user. Podman embraces the power of systemd and uses it for starting up lots of its services. When starting containerized services at boot time, Podman encourages users to use systemd unit files with Podman commands. Unit files are what systemd calls its configuration files. Systemd supports a few different types of unit files, including service files in which you can define a service, which you would want systemd to manage. A SystemD.socket is another kind of unit file systemd uses (see section 7.6). The systemd service unit files are a way to share your containerized service with the world. As you see in figure 7.1, Podman’s []{#07.htm#id_Hlk115164025}fork/exec model grants systemd the ability to track the processes within a containerized service.">
    <meta property="og:url" content="http://perfectdarkmode.com/tools/podman/7-integration-with-systemd/">
    <meta property="og:description" content="7 Integration with systemd []{#07.htm#pgfId-1110287}This chapter []{#07.htm#marker-1113414}covers
[]{#07.htm#pgfId-1110288 .calibre17}Running systemd within the container as the primary process []{#07.htm#pgfId-1110289 .calibre17}Generating systemd unit files from existing containers []{#07.htm#pgfId-1110290 .calibre17}Socket-activated containerized services []{#07.htm#pgfId-1110292 .calibre17}Using sd-notify{.fm-code-in-text} containerized services[]{#07.htm#marker-1113419 .calibre17} []{#07.htm#pgfId-1110293 .calibre17}The advantages of using journald as a logging driver and events backend []{#07.htm#pgfId-1110294 .calibre17}Using Podman and systemd to manage containerized services’ life cycles on edge devices []{#07.htm#pgfId-1110295}Systemd is the de facto init system for Linux. Almost every distribution of Linux defaults to systemd as the first process launched after the kernel, which then launches all of the services, including the login sessions for the user. Podman embraces the power of systemd and uses it for starting up lots of its services. When starting containerized services at boot time, Podman encourages users to use systemd unit files with Podman commands. Unit files are what systemd calls its configuration files. Systemd supports a few different types of unit files, including service files in which you can define a service, which you would want systemd to manage. A SystemD.socket is another kind of unit file systemd uses (see section 7.6). The systemd service unit files are a way to share your containerized service with the world. As you see in figure 7.1, Podman’s []{#07.htm#id_Hlk115164025}fork/exec model grants systemd the ability to track the processes within a containerized service.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Tools">
    <meta itemprop="description" content="7 Integration with systemd []{#07.htm#pgfId-1110287}This chapter []{#07.htm#marker-1113414}covers
[]{#07.htm#pgfId-1110288 .calibre17}Running systemd within the container as the primary process []{#07.htm#pgfId-1110289 .calibre17}Generating systemd unit files from existing containers []{#07.htm#pgfId-1110290 .calibre17}Socket-activated containerized services []{#07.htm#pgfId-1110292 .calibre17}Using sd-notify{.fm-code-in-text} containerized services[]{#07.htm#marker-1113419 .calibre17} []{#07.htm#pgfId-1110293 .calibre17}The advantages of using journald as a logging driver and events backend []{#07.htm#pgfId-1110294 .calibre17}Using Podman and systemd to manage containerized services’ life cycles on edge devices []{#07.htm#pgfId-1110295}Systemd is the de facto init system for Linux. Almost every distribution of Linux defaults to systemd as the first process launched after the kernel, which then launches all of the services, including the login sessions for the user. Podman embraces the power of systemd and uses it for starting up lots of its services. When starting containerized services at boot time, Podman encourages users to use systemd unit files with Podman commands. Unit files are what systemd calls its configuration files. Systemd supports a few different types of unit files, including service files in which you can define a service, which you would want systemd to manage. A SystemD.socket is another kind of unit file systemd uses (see section 7.6). The systemd service unit files are a way to share your containerized service with the world. As you see in figure 7.1, Podman’s []{#07.htm#id_Hlk115164025}fork/exec model grants systemd the ability to track the processes within a containerized service.">
    <meta itemprop="wordCount" content="7027">
    <title></title>
    <link href="http://perfectdarkmode.com/tools/podman/7-integration-with-systemd/" rel="canonical" type="text/html" title="">
    <link href="/tools/podman/7-integration-with-systemd/index.xml" rel="alternate" type="application/rss+xml" title="">
    <link href="/images/logo.svg?1734871290" rel="icon" type="image/svg+xml">
    <link href="/css/fontawesome-all.min.css?1734871290" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1734871290" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1734871290" rel="stylesheet">
    <link href="/css/auto-complete.css?1734871290" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1734871290" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1734871290" rel="stylesheet">
    <link href="/css/fonts.css?1734871290" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1734871290" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1734871290" rel="stylesheet">
    <link href="/css/theme-amoled.css?1734871290" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-relearn-dark.css?1734871290" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/print.css?1734871290" rel="stylesheet" media="print">
    <link href="/css/format-print.css?1734871290" rel="stylesheet">
    <script src="/js/variant.js?1734871290"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='http:\/\/perfectdarkmode.com';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      // variant stuff
      window.variants && variants.init( [ 'amoled' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23N4FSG0HM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-23N4FSG0HM');
</script>


  </head>
  <body class="mobile-support print" data-url="/tools/podman/7-integration-with-systemd/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-back" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="history.back()" type="button" title=""><i class="fa-fw fas fa-chevron-left"></i></button>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#71-running-systemd-within-a-container">7.1 Running systemd within a container</a>
      <ul>
        <li><a href="#712-podman-container-in-systemd-mode">7.1.2 Podman container in systemd mode</a></li>
        <li><a href="#713-running-an-apache-service-within-a-systemd-container">7.1.3 Running an Apache service within a systemd container</a></li>
      </ul>
    </li>
    <li><a href="#72-journald-for-logging-and-events">7.2 Journald for logging and events</a>
      <ul>
        <li><a href="#heading_id_8">[]{#07.htm#pgfId-1110508}7.2.1 Log driver</a></li>
        <li><a href="#heading_id_9">[]{#07.htm#pgfId-1110574}7.2.2 Events</a></li>
      </ul>
    </li>
    <li><a href="#73-starting-containers-at-boot">7.3 Starting containers at boot</a></li>
    <li><a href="#731-restarting-containers">7.3.1 Restarting containers</a></li>
    <li><a href="#732-podman-containers-as-systemd-services">7.3.2 Podman containers as systemd services</a>
      <ul>
        <li><a href="#733-distributing-systemd-unit-files-to-manage-podman-containers">7.3.3 Distributing systemd unit files to manage Podman containers</a></li>
        <li><a href="#734-automatically-updating-podman-containers">7.3.4 Automatically updating Podman containers</a></li>
      </ul>
    </li>
    <li><a href="#74-running-containers-in-notify-unit-files">7.4 Running containers in notify unit files</a></li>
    <li><a href="#75-rolling-back-failed-containers-after-update">7.5 Rolling back failed containers after update</a></li>
    <li><a href="#76-socket-activated-podman-containers">7.6 Socket-activated Podman containers</a></li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-about" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/about/" title=""><span class="title">About</span></a>
            </div>

            <div class="topbar-button topbar-button-now" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/now/" title=""><span class="title">Now</span></a>
            </div>

            <div class="topbar-button topbar-button-booknotes" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/booknotes/" title=""><span class="title">Book Notes</span></a>
            </div>

            <div class="topbar-button topbar-button-contact" data-content-empty="show" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/contact/" title=""><span class="title">Contact</span></a>
            </div>






          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable tools" tabindex="-1">
        <div class="flex-block-wrapper">
        </div>
      </main>
    </div>
    <script src="/js/clipboard.min.js?1734871290" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1734871290" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/d3/d3-color.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-drag.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-ease.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-selection.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-timer.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-transition.min.js?1734871290" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1734871290" defer></script>
    <script src="/js/js-yaml.min.js?1734871290" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/theme.js?1734871290" defer></script>
  </body>
</html>
