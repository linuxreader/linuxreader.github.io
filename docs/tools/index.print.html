<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.152.2">
    <meta name="generator" content="Relearn 8.2.0+d150cc8909ed7836ff5d545e76544f6923ffacf5">
    <meta name="description" content="Calibre Web with Docker and NGINXHow to Build a website With HugoHow to Process Bookfusion Highlights with VimHow to Set Up Hugo Relearn ThemeNextcloud on RHEL Based SystemsSelf hosting a Nextcloud ServerUsing Vagrant on LinuxVim GuideYou Need to Learn Man Pages">
    <meta name="author" content="David Thomas">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Tools :: Linux Reader">
    <meta name="twitter:description" content="Calibre Web with Docker and NGINXHow to Build a website With HugoHow to Process Bookfusion Highlights with VimHow to Set Up Hugo Relearn ThemeNextcloud on RHEL Based SystemsSelf hosting a Nextcloud ServerUsing Vagrant on LinuxVim GuideYou Need to Learn Man Pages">
    <meta property="og:url" content="http://linuxreader.com/tools/">
    <meta property="og:site_name" content="Linux Reader">
    <meta property="og:title" content="Tools :: Linux Reader">
    <meta property="og:description" content="Calibre Web with Docker and NGINXHow to Build a website With HugoHow to Process Bookfusion Highlights with VimHow to Set Up Hugo Relearn ThemeNextcloud on RHEL Based SystemsSelf hosting a Nextcloud ServerUsing Vagrant on LinuxVim GuideYou Need to Learn Man Pages">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="Tools :: Linux Reader">
    <meta itemprop="description" content="Calibre Web with Docker and NGINXHow to Build a website With HugoHow to Process Bookfusion Highlights with VimHow to Set Up Hugo Relearn ThemeNextcloud on RHEL Based SystemsSelf hosting a Nextcloud ServerUsing Vagrant on LinuxVim GuideYou Need to Learn Man Pages">
    <meta itemprop="datePublished" content="2023-11-06T06:20:36-07:00">
    <meta itemprop="dateModified" content="2023-11-06T06:20:36-07:00">
    <meta itemprop="wordCount" content="49">
    <title>Tools :: Linux Reader</title>
    <link href="http://linuxreader.com/tools/" rel="canonical" type="text/html" title="Tools :: Linux Reader">
    <link href="/tools/index.xml" rel="alternate" type="application/rss+xml" title="Tools :: Linux Reader">
    <link href="/images/favicon.svg?1762527413" rel="icon" type="image/svg+xml">
    <link href="/css/auto-complete/auto-complete.min.css?1762527413" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1762527413" defer></script>
    <script src="/js/search-lunr.min.js?1762527413" defer></script>
    <script src="/js/search.min.js?1762527413" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1762527413";
    </script>
    <script src="/js/lunr/lunr.min.js?1762527413" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1762527413" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1762527413" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1762527413" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1762527413" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1762527413" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1762527413" rel="stylesheet">
    <link href="/css/theme.min.css?1762527413" rel="stylesheet">
    <link href="/css/format-print.min.css?1762527413" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/tools\/';
      window.relearn.relBasePath='..';
      window.relearn.relBaseUri='..';
      window.relearn.absBaseUri='http:\/\/linuxreader.com';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'oled' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script><style>
:root {
    --MENU-WIDTH-S: 14.375rem;
    --MENU-WIDTH-M: 14.375rem;
    --MENU-WIDTH-L: 18.75rem;
    --MAIN-WIDTH-MAX: 80rem;
    font-size: 1.2rem;
}
</style>

  </head>
  <body class="mobile-support print" data-url="/tools/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/system/process-and-task-scheduling/" title="Process and Task Scheduling (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"> 
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            Tools
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/tools/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/tools/calibre-web-with-docker-and-nginx/" title="Calibre Web with Docker and NGINX (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>







          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable tools" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="tools">Tools</h1>

<div class="children children-type-card children-sort-"><ul class="card-container">
<li>
  <article class="card card-popout" aria-labelledby="R-card-a63ee48b2b2e53f33484a231e08c6a0e">
    <div class="card-content">
      <div class="card-title" id="R-card-a63ee48b2b2e53f33484a231e08c6a0e">
        <a href="/tools/calibre-web-with-docker-and-nginx/">
        Calibre Web with Docker and NGINX
        </a>
      </div>
      <div class="card-content-text">
          <!-- raw HTML omitted -->

      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-5eb50001d417325d538511cb120f7a02">
    <div class="card-content">
      <div class="card-title" id="R-card-5eb50001d417325d538511cb120f7a02">
        <a href="/tools/how-to-build-a-website-with-hugo/">
        How to Build a website With Hugo
        </a>
      </div>
      <div class="card-content-text">
          <!-- raw HTML omitted -->

      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-946b546039ce8afa97469e40b67020ec">
    <div class="card-content">
      <div class="card-title" id="R-card-946b546039ce8afa97469e40b67020ec">
        <a href="/tools/process-bookfusion-highlights/">
        How to Process Bookfusion Highlights with Vim
        </a>
      </div>
      <div class="card-content-text">
          <!-- raw HTML omitted -->

      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-0e505397ad372f6a9390c6875c4cc66f">
    <div class="card-content">
      <div class="card-title" id="R-card-0e505397ad372f6a9390c6875c4cc66f">
        <a href="/tools/how-to-set-up-hugo-relearn-theme/">
        How to Set Up Hugo Relearn Theme
        </a>
      </div>
      <div class="card-content-text">
          <!-- raw HTML omitted -->

      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-b89d3a50bd108ba7cc49bd2f5b9df75e">
    <div class="card-content">
      <div class="card-title" id="R-card-b89d3a50bd108ba7cc49bd2f5b9df75e">
        <a href="/tools/nextcloud-on-rhel-based-systems/">
        Nextcloud on RHEL Based Systems
        </a>
      </div>
      <div class="card-content-text">
          <!-- raw HTML omitted -->

      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-cc0c6e8a952a539a13710eba67333e4c">
    <div class="card-content">
      <div class="card-title" id="R-card-cc0c6e8a952a539a13710eba67333e4c">
        <a href="/tools/setting-up-a-self-hosted-nextcloud-server/">
        Self hosting a Nextcloud Server
        </a>
      </div>
      <div class="card-content-text">
          <!-- raw HTML omitted -->

      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-2f019671350fc9086b41263449bb8c39">
    <div class="card-content">
      <div class="card-title" id="R-card-2f019671350fc9086b41263449bb8c39">
        <a href="/tools/using-vagrant-on-linux/">
        Using Vagrant on Linux
        </a>
      </div>
      <div class="card-content-text">
          <!-- raw HTML omitted -->

      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-0ea2943cf81aac272ca164d9f3a9546e">
    <div class="card-content">
      <div class="card-title" id="R-card-0ea2943cf81aac272ca164d9f3a9546e">
        <a href="/tools/vimguide/">
        Vim Guide
        </a>
      </div>
      <div class="card-content-text">
          <!-- raw HTML omitted -->

      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-aa6b0f3192ce1fe5a516c5e085f7f066">
    <div class="card-content">
      <div class="card-title" id="R-card-aa6b0f3192ce1fe5a516c5e085f7f066">
        <a href="/tools/using-man-pages/">
        You Need to Learn Man Pages
        </a>
      </div>
      <div class="card-content-text">
          <!-- raw HTML omitted -->

      </div>
    </div>
  </article>
</li>
</ul>
</div>

  <footer class="footline">
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Tools</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="calibre-web-with-docker-and-nginx">Calibre Web with Docker and NGINX</h1>

<p>I couldnâ€™t find a guide on how to set up Calibre web step-by-step as a Docker container. Especially not one that used Nginx as a reverse proxy.</p>
<p>The good news is that it is really fast and simple. Youâ€™ll need a few tools to get this done:</p>
<ul>
<li>A server with a public IP address</li>
<li>A DNS Provider (I use CloudFlare)</li>
<li>Docker</li>
<li>Nginx</li>
<li>A Calibre Library</li>
<li>Certbot</li>
<li>Rsync</li>
</ul>
<p>First, sync your local Calibre library to a folder on your server:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rsync -avuP your-library-dir root@example.org:/opt/calibre/</span></span></code></pre></div>
<h2 id="install-docker">Install Docker</h2>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update  
</span></span><span style="display:flex;"><span>sudo apt install docker.io</span></span></code></pre></div>
<p>Create a Docker network</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo docker network create calibre_network</span></span></code></pre></div>
<p>Create a Docker volume to store Calibre Web data</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo docker volume create calibre_data</span></span></code></pre></div>
<p>Pull the Calibre Web Docker image</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo docker pull linuxserver/calibre-web</span></span></code></pre></div>
<p>Start the Calibre Web Docker container</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo docker run -d <span style="color:#5af78e">\ </span>  
</span></span><span style="display:flex;"><span>--name<span style="color:#ff6ac1">=</span>calibre-web <span style="color:#5af78e">\ </span>  
</span></span><span style="display:flex;"><span>--restart<span style="color:#ff6ac1">=</span>unless-stopped <span style="color:#5af78e">\ </span>  
</span></span><span style="display:flex;"><span>-p 8083:8083 <span style="color:#5af78e">\ </span>  
</span></span><span style="display:flex;"><span>-e <span style="color:#ff5c57">PUID</span><span style="color:#ff6ac1">=</span><span style="color:#ff6ac1">$(</span>id -u<span style="color:#ff6ac1">)</span> <span style="color:#5af78e">\ </span>  
</span></span><span style="display:flex;"><span>-e <span style="color:#ff5c57">PGID</span><span style="color:#ff6ac1">=</span><span style="color:#ff6ac1">$(</span>id -g<span style="color:#ff6ac1">)</span> <span style="color:#5af78e">\ </span>  
</span></span><span style="display:flex;"><span>-v calibre_data:/config <span style="color:#5af78e">\ </span>  
</span></span><span style="display:flex;"><span>-v /opt/calibre/Calibre:/books <span style="color:#5af78e">\ </span>  
</span></span><span style="display:flex;"><span>--network calibre_network <span style="color:#5af78e">\ </span>  
</span></span><span style="display:flex;"><span>linuxserver/calibre-web</span></span></code></pre></div>
<h2 id="configure-nginx-to-act-as-a-reverse-proxy-for-calibre-web">Configure Nginx to act as a reverse proxy for Calibre Web</h2>
<p>Create the site file</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo vim /etc/nginx/sites-available/calibre-web</span></span></code></pre></div>
<p>Add the following to the file</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>server { listen 80;   
server_name example.com; # Replace with your domain or server IP location /   
{   
proxy_pass http://localhost:8083;   
proxy_set_header Host $host;   
proxy_set_header X-Real-IP $remote_addr;   
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;   
proxy_set_header X-Forwarded-Proto $scheme;   
} }</code></pre></div>
<p>Enable the site</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo ln -s /etc/nginx/sites-available/calibre-web /etc/nginx/sites-enabled/</span></span></code></pre></div>
<p>Restart Nginx</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo service nginx restart</span></span></code></pre></div>
<h2 id="dns-cname-record">DNS CNAME Record</h2>
<p>Make sure to set up a cname record for your site with your DNS provider such as: calibre.example.com</p>
<h2 id="ssl-certificate">SSL Certificate</h2>
<p>Install ssl cert using certbot</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>certbot --nginx</span></span></code></pre></div>
<h2 id="site-setup">Site Setup</h2>
<p>Head to the site atÂ <a href="https://calibre.example.com/" rel="external" target="_blank">https://calibre.example.com</a>Â and log in with default credentials:</p>
<p>username: admin
password: admin123</p>
<p>Select /books as the library directory. Go into admin settings and change your password.</p>
<h2 id="adding-new-books">Adding new books</h2>
<p>Whenever you add new books to your server via the rsync command from earlier, you will need to restart the Calibre Web Docker container. Then restart Nginx.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo docker restart calibre-web  
</span></span><span style="display:flex;"><span>systemctl restart nginx</span></span></code></pre></div>
<p>Thatâ€™s all there is to it. Feel free to reach out if you have issues.</p>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="how-to-build-a-website-with-hugo">How to Build a website With Hugo</h1>

<p>Word Press is great, but it is probably a lot more bloated then you need for a personal website. Enter Hugo, it has less server capacity and storage needs than Word Press. Hugo is a static site generator than takes markdown files and converts them to html.</p>
<p>Hosting your own website is also a lot cheaper than having a provider like Bluehost do it for you. Instead of $15 per month, I am currently paying $10 per year.</p>
<p>This guide will walk through building a website step-by-step.</p>
<ol>
<li>Setting up a Virtual Private Server (VPS)</li>
<li>Registering a domain name</li>
<li>Pointing the domain to your server</li>
<li>Setting up hugo on your local PC</li>
<li>Syncing your Hugo generate site with your server</li>
<li>Using nginx to serve your site</li>
<li>Enable http over SSL</li>
</ol>
<h2 id="setting-up-a-virtual-private-server-vps">Setting up a Virtual Private Server (VPS)</h2>
<p>I use Vultr as my VPS. When I signed up they had a $250 credit towards a new account. If you select the cheapest server (you shouldn&rsquo;t need anything else for a basic site) that comes out to about $6 a month. Of course the $250 credit goes towards that which equates to around 41 months free.</p>
<p>Head to vultr.com. Create and account and  Select the Cloud Compute option.</p>
<p>Under CPU &amp; Storage Technology, select &ldquo;Regular Performance&rdquo;. Then under &ldquo;Server Location, select the server closest to you. Or closest to where you think your main audience will be.</p>
<p>Under Server image, select the OS you are most comfortable with. This guide uses Debian.</p>
<p>Under Server Size, slect the 10GB SSD. Do not select the &ldquo;IPv6 ONLY&rdquo; option. Leave the other options as default and enter your server hostname.</p>
<p>On the products page, click your new server. You can find your server credentials and IPv4 address here. You will need these to log in to your server.</p>
<p>Log into your sever via ssh to test. From a Linux terminal run:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ssh username@serveripaddress</code></pre></div>
<p>Then, enter your password when prompted.</p>
<h2 id="registering-a-domain-name">Registering a Domain Name</h2>
<p>I got my domain perfectdarkmode.com from Cloudflare.com for about $10 per year. You can check to see available domains there. You can also check <a href="https://www.namecheckr.com/" rel="external" target="_blank">https://www.namecheckr.com/</a> to see iof that name is available on various social media sites.</p>
<p>In CloudFlare, just click &ldquo;add a site&rdquo; and pick a domain that works for you. Next, you will need your server address from earlier.</p>
<p>Under domain Registration, click &ldquo;Manage Domains&rdquo;, click &ldquo;manage&rdquo; on your domain. One the sidebar to the right, there is a qucik actions menu. Click &ldquo;update DNS configuration&rdquo;.</p>
<p>Click &ldquo;Add record&rdquo;. Type is an &ldquo;A&rdquo; record. Enter the name and the ip address that you used earlier for your server. Uncheck &ldquo;Proxy Status&rdquo; and save.</p>
<p>You can check to see if your DNS has updated on various DNS severs at <a href="https://dnschecker.org/" rel="external" target="_blank">https://dnschecker.org/</a>. Once those are up to date (after a couple minutes) you should be able to ping your new domain.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>$ ping perfectdarkmode.com
PING perfectdarkmode.com (104.238.140.131) 56(84) bytes of data.
64 bytes from 104.238.140.131.vultrusercontent.com (104.238.140.131): icmp_seq=1 ttl=53 time=33.2 ms
64 bytes from 104.238.140.131.vultrusercontent.com (104.238.140.131): icmp_seq=2 ttl=53 time=28.2 ms
64 bytes from 104.238.140.131.vultrusercontent.com (104.238.140.131): icmp_seq=3 ttl=53 time=31.0 ms</code></pre></div>
<p>Now, you can use the same ssh command to ssh into your vultr serverusing your domain name.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ssh username@domain.com</code></pre></div>
<h2 id="setting-up-hugo-on-your-local-pc">Setting up hugo on your local PC</h2>
<p>Hugo is a popular open-source static site generator. It allows you to take markdown files, and builds them into and html website. To start go to <a href="https://gohugo.io/installation/" rel="external" target="_blank">https://gohugo.io/installation/</a> and download Hugo on your local computer. (I will show you how to upload the site to your server later.)</p>
<p>Pick a theme
The theme I use is here <a href="https://themes.gohugo.io/themes/hugo-theme-hello-friend-ng/" rel="external" target="_blank">https://themes.gohugo.io/themes/hugo-theme-hello-friend-ng/</a></p>
<p>You can browse your own themes as well. Just make sure to follow the installation instructions. Let&rsquo;s create a new Hugo site. Change into the directory where you want your site to be located in. Mine rests in ~/Documents/.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cd ~/Documents/</code></pre></div>
<p>Create your new Hugo site.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>hugo new site site-name</code></pre></div>
<p>This will make a new folder with your site name in the ~/Documents directory. This folder will have a few directories and a config file in it.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>archetypes  config.toml  content  data  layouts  public  resources  static  themes</code></pre></div>
<p>For this tutorial, we will be working with the config.toml file and the  content, public, static, and themes. Next, load the theme into your site directory. For the Hello Friend NG theme:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>git clone https://github.com/rhazdon/hugo-theme-hello-friend-ng.git themes/hello-friend-ng</code></pre></div>
<p>Now we will load the example site into our working site. Say yes to overwrite.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cp -a themes/hello-friend-ng/exampleSite/* .</code></pre></div>
<p>The top of your new config.toml site now contains:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>baseURL = &#34;https://example.com&#34;
title   = &#34;Hello Friend NG&#34;
languageCode = &#34;en-us&#34;
theme = &#34;hello-friend-ng&#34;</code></pre></div>
<p>Replace your baseURL with your site name and give your site a title. Set the enableGlobalLanguageMenu option to false if you want to remove the language swithcer option at the top. I also set enableThemeToggle to true so users could set the theme to dark or light.</p>
<p>You can also fill in the links to your social handles. Comment out any lines you don&rsquo;t want with a &ldquo;#&rdquo; like so:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[params.social](params.social)
    name = &#34;twitter&#34;
    url  = &#34;https://twitter.com/&#34;

  [params.social](params.social)
    name = &#34;email&#34;
    url  = &#34;mailto:nobody@example.com&#34;

  [params.social](params.social)
    name = &#34;github&#34;
    url  = &#34;https://github.com/&#34;

  [params.social](params.social)
    name = &#34;linkedin&#34;
    url  = &#34;https://www.linkedin.com/&#34;

 # [params.social](params.social)
   # name = &#34;stackoverflow&#34;
   # url  = &#34;https://www.stackoverflow.com/&#34;</code></pre></div>
<p>You may also want to edit the footer text to your liking. I commented out the second line that comes with the example site:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[params.footer]
    trademark = true
    rss = true
    copyright = true
    author = true

    topText = []
    bottomText = [
     # &#34;Powered by &lt;a href=\&#34;http://gohugo.io\&#34;&gt;Hugo&lt;/a&gt;&#34;,
     #  &#34;Made with &amp;#10084; by &lt;a href=\&#34;https://github.com/rhazdon\&#34;&gt;Djordje Atlialp&lt;/a&gt;&#34;
    ]</code></pre></div>
<p>Now, move the contents of the example contents folder over to your site&rsquo;s contents folder (giggidy):</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cp -r ~/Documents/hugo/themes/hello-friend-ng/exampleSite/content/* ~/Documents/hugo/content/</code></pre></div>
<p>Let&rsquo;s clean up a little bit. Cd into ~/Documents/hugo/content/posts. Rename the file to the name of your first post. Also, delete all of the other files here:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cd ~/Documents/hugo/contents/posts
mv goisforlovers.md newpostnamehere.md
find . ! -name &#39;newpostnamehere.md&#39; -type f -exec rm -f {} +</code></pre></div>
<p>Open the new post file and delete everything after this:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>+++
title = &#34;Building a Minimalist Website with Hugo&#34;
description = &#34;&#34;
type = [&#34;posts&#34;,&#34;post&#34;]
tags = [
    &#34;hugo&#34;,
    &#34;nginx&#34;,
    &#34;ssl&#34;,
    &#34;http&#34;,
    &#34;vultr&#34;,
]
date = &#34;2023-03-26&#34;
categories = [
    &#34;tools&#34;,
    &#34;linux&#34;,
]
series = [&#34;tools&#34;]
[ author ]
  name = &#34;David Thomas&#34;
+++</code></pre></div>
<p>You will need to fill out this header information for each new post you make. This will allow you to give your site a title, tags, date, categories, etc. This is what is called a TOML header. TOML stands for Tom&rsquo;s Obvious Minimal Language. Which is a minimal language used for parsing data. Hugo uses TOML to fill out your site.</p>
<p>Save your doc and exit. Next, there should be an about.md page now in your ~/Documents/hugo/Contents folder. Edit this to edit your about page for your site. You can use this Markdown Guide if you need help learning markdown language. <a href="https://www.markdownguide.org/" rel="external" target="_blank">https://www.markdownguide.org/</a></p>
<h3 id="serve-your-website-locally">Serve your website locally</h3>
<p>Let&rsquo;s test the website by serving it locally and accessing it at localhost:1313 in your web browser. Enter the command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>hugo serve</code></pre></div>
<p>Hugo will now be generating your website. You can view it by entering localhost:1313 in your webbrowser.</p>
<p>You can use this to test new changes before uploading them to your server. When you svae a post or page file such as your about page, hugo will automatically update the changes to this local page if the local server is running.</p>
<p>Press &ldquo;Ctrl + c&rdquo; to stop this local server. This is only for testing and does not need to be running to make your site work.</p>
<h3 id="build-out-your-public-directory">Build out your public directory</h3>
<p>Okay, your website is working locally, how do we get it to your server to host it online? We are almost there. First, we will use the hugo command to build your website in the public folder. Then, we will make a copy of our public folder on our server using rsync. I will also show you how to create an alias so you do not have to remember the rsync command every time.</p>
<p>From your hugo site folder run:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>hugo</code></pre></div>
<p>Next, we will put your public hugo folder into /var/www/ on your server. Here is how to do that with an alias. Open ~/.bashrc.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>vim ~/.bashrc</code></pre></div>
<p>Add the following line to the end of the file, making sure to replace the username and server name:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code># My custom aliases
alias rsyncp=&#39;rsync -rtvzP ~/Documents/hugo/public/ username@myserver.com:/var/www/public&#39;</code></pre></div>
<p>Save and exit the file. Then tell bash to update it&rsquo;s source config file.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>source ~/.bashrc</code></pre></div>
<p>Now your can run the command by just using the new alias any time. Your will need to do this every time you update your site locally.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>rsyncp</code></pre></div>
<h2 id="set-up-nginx-on-your-server">Set up nginx on your server</h2>
<p>Install nginx</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>apt update
apt upgrade
apt install nginx</code></pre></div>
<p>create an nginx config file in /etc/nginx/sites-available/</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>vim /etc/nginx/sites-available/public</code></pre></div>
<p>You will need to add the following to the file, update the options, then save and exit:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>server {
        listen 80 ;
        listen [::]:80 ;
        server_name example.org ;
        root /var/www/mysite ;
        index index.html index.htm index.nginx-debian.html ;
        location / {
                try_files $uri $uri/ =404 ;
        }
}</code></pre></div>
<p>Enter your domain in &ldquo;server_name&rdquo; line in place of &ldquo;example.org&rdquo;. Also, point &ldquo;root&rdquo; to your new site file from earlier. (/var/www/public). Then save and exit.</p>
<p>Link this site-available config file to sites-enabled to enable it. Then restart nginx:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ln -s /etc/nginx/sites-available/public /etc/nginx/sites-enabled
systemctl reload nginx</code></pre></div>
<h3 id="access-permissions">Access Permissions</h3>
<p>We will need to make sure nginx has permissions to your site folder so that it can access them to serve your site. Run:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>chmod 777 /var/www/public</code></pre></div>
<h3 id="firewall-permissions">Firewall Permissions</h3>
<p>You will need to make sure your firewall allows port 80 and 443. Vultr installs the ufw program by default. But your can install it if you used a different provider. Beware, enabling a firewalll could block you from accessing your vm, so do your research before tinkering outside of these instructions.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ufw allow 80
ufw allow 443</code></pre></div>
<h3 id="nginx-security">Nginx Security</h3>
<p>We will want to hide your nginx version number on error pages. This will make your site a bit harder for hackers to find exploits. Open your Nginx config file at /etc/nginx/nginx.conf and remove the &ldquo;#&rdquo; before &ldquo;server_tokens off;&rdquo;</p>
<p>Enter your domain into your browser. Congrats! You now have a running website!</p>
<h2 id="use-certbot-to-enable-https">Use Certbot to enable HTTPS</h2>
<p>Right now, our site uses the unencrypted http. We want it to use the encrypted version HTTPS (HTTP over SSL). This will increase user privacy, hide usernames and passwords used on your site, and you get the lock symbol by your URL name instead of &ldquo;!not secure&rdquo;.</p>
<h3 id="install-certbot-and-its-nginx-module">Install Certbot and It&rsquo;s Nginx Module</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>apt install python3-certbot-nginx</code></pre></div>
<h3 id="run-certbot">Run certbot</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>certbot --nginx</code></pre></div>
<p>Fill out the information, certbot asks for your emaill so it can send you a reminder when the certs need to be renewed every 3 months. You do not need to consent to giving your email to the EFF. Press 1 to select your domain. And 2 too redirect all connections to HTTPS.</p>
<p>Certbot will build out some information in your site&rsquo;s config file. Refresh your site. You should see your new fancy lock icon.</p>
<h3 id="set-up-a-cronjob-to-automatically-renew-certbot-certs">Set Up a Cronjob to automatically Renew certbot certs</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>crontab -e</code></pre></div>
<p>Select a text editor and add this line to the end of the file. Then save and exit the file:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>0 0 1 * * certbot --nginx renew</code></pre></div>
<p>You now have a running website. Just make new posts locally, the run &ldquo;hugo&rdquo; to rebuild the site. And use the rsync alias to update the folder on your server. I will soon be making tutorials on making an email address for your domain, such as <a href="mailto:david@perfectdarkmode.com" rel="external" target="_blank">david@perfectdarkmode.com</a> on my site. I will also be adding a comments section, RSS feed, email subscription, sidebar, and more.</p>
<p>Feel free to reach out with any questions if you get stuck. This is meant to be an all encompassing guide. So I want it to work.</p>
<h2 id="extras">Extras</h2>
<h3 id="optimizing-images">Optimizing images</h3>
<p>Create assets folder in main directory.</p>
<p>Create images folder in /assets</p>
<p>Access image using hugo pipes</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>{{ $image := resources.Get &#34;images/test-image.jpg&#34; }}
&lt;img src=&#34;{{ ( $image.Resize &#34;500x&#34; ).RelPermalink }}&#34; /&gt;</code></pre></div>
<p><a href="https://gohugo.io/content-management/image-processing/" rel="external" target="_blank">https://gohugo.io/content-management/image-processing/</a></p>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="how-to-process-bookfusion-highlights-with-vim">How to Process Bookfusion Highlights with Vim</h1>

<p>Here are my highlights pulled up in Vim:</p>
<p><a href="#R-image-328a712962184066e3e19492efe0a072" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240414034031.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-328a712962184066e3e19492efe0a072"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240414034031.png"></a></p>
<p>As you can see, Bookfusion gives you a lot of extra information when you export highlights. First, let&rsquo;s get rid of the lines that begin with <code>##</code></p>
<p>Enter command mode in Vim by pressing <code>esc</code>. Then type <code>:g/^##/d</code> and press enter.</p>
<p>Much better.</p>
<p><a href="#R-image-dbb59e0e7bff5c84584b6dd00814338f" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240414034407.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-dbb59e0e7bff5c84584b6dd00814338f"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240414034407.png"></a></p>
<p>Now let&rsquo;s get rid of the color references:`</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>:g/^Color/d</span></span></code></pre></div>
<p><a href="#R-image-35cc2e755af5d1643b6d00d8e3462ac3" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240414034652.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-35cc2e755af5d1643b6d00d8e3462ac3"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240414034652.png"></a></p>
<p>To get rid of the timestamps, we must find a different commonality between the lines. In this case, each line ends with &ldquo;UTC&rdquo;. Let&rsquo;s match that:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>:g/UTC$/d</span></span></code></pre></div>
<p>Where <code>$</code> matches the end of the line.</p>
<p><a href="#R-image-bf566a5a6aa71173ad27c7bbbdf57355" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240414035013.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-bf566a5a6aa71173ad27c7bbbdf57355"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240414035013.png"></a></p>
<p>Now, I want to get rid of the <code>&gt; </code> on each line:
<code>%s/&gt; //g</code></p>
<p><a href="#R-image-c371038597fa565c0c459f22395b67da" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240414035218.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c371038597fa565c0c459f22395b67da"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240414035218.png"></a></p>
<p>Almost there, you&rsquo;ll notice there are 6 empty lines in between each highlight. Let&rsquo;s shrink those down into one:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>:%s/<span style="color:#5af78e">\(\n\)\{</span>3,<span style="color:#ff6ac1">}</span>/<span style="color:#5af78e">\r\r</span>/g</span></span></code></pre></div>
<p><a href="#R-image-b4e7d8e5522db40eca64a5b03eecdc3c" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240414035716.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b4e7d8e5522db40eca64a5b03eecdc3c"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240414035716.png"></a></p>
<p>The command above matches newline character <code>n</code> 3 or more times and replaces them with two newline characters <code>/r/r</code>.</p>
<p>As we scroll down, I see a few weird artifacts from the book conversion to markdown.</p>
<p><a href="#R-image-72a461fb8bb578cabb7bf79495cf87ab" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240414040052.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-72a461fb8bb578cabb7bf79495cf87ab"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240414040052.png"></a></p>
<p>Now, I want to get rid of any carrot brackets in the file. Let&rsquo;s use the substitute command again here:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>%s/&lt;//g</span></span></code></pre></div>
<p><a href="#R-image-ae3399e999c48c51b54525714216405f" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240414040338.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ae3399e999c48c51b54525714216405f"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240414040338.png"></a></p>
<p>Depending on your book and formatting. You may have some other stuff to edit.</p>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="how-to-set-up-hugo-relearn-theme">How to Set Up Hugo Relearn Theme</h1>

<h1 id="hugo-setup">Hugo Setup</h1>
<h2 id="adding-a-module-as-a-theme">Adding a module as a theme</h2>
<p>Make sure Go is installed</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>go version</code></pre></div>
<p>Create a new site</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>hugo new site sitename
cd sitename</code></pre></div>
<p>Initialize your site as a module</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>hugo mod init sitename</code></pre></div>
<p>Confirm</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cat go.mod</code></pre></div>
<p>Add the module as a dependency using it&rsquo;s git link</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>hugo mod get github.com/McShelby/hugo-theme-relearn</code></pre></div>
<p>Confirm</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cat go.mod</code></pre></div>
<p>add the theme to config.toml</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code># add this line to config.toml and save
theme = [&#34;github.com/McShelby/hugo-theme-relearn&#34;]</code></pre></div>
<p>Confirm by viewing site</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>hugo serve
# visit browser at http://localhost:1313/ to view site</code></pre></div>
<p>Adding a new &ldquo;chapter&rdquo; page</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>hugo new --kind chapter Chapter/_index.md</code></pre></div>
<p>Add a home page</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hugo new --kind home _index.md</span></span></code></pre></div>
<p>Add a default page</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hugo new &lt;chapter&gt;/&lt;name&gt;/_index.md</span></span></code></pre></div>
<p>or</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hugo new &lt;chapter&gt;/&lt;name&gt;.md</span></span></code></pre></div>
<p>You will need to change some options in _index.md</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>+++
# is this a &#34;chaper&#34;?
chapter=true
archetype = &#34;chapter&#34;
# page title name
title = &#34;Linux&#34;
# The &#34;chapter&#34; number
weight = 1
+++</code></pre></div>
<p>Adding a &ldquo;content page&rdquo; under a category</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hugo new basics/first-content.md</span></span></code></pre></div>
<p>Create a sub directory:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>hugo new basics/second-content/_index.md</code></pre></div>
<ul>
<li>change draft = true to draft = false in the content page to make a page render.</li>
</ul>
<h2 id="global-site-parameters">Global site parameters</h2>
<p>Add these to your config.toml file and edit as you please</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>params<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># This controls whether submenus will be expanded (true), or collapsed (false) in the</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># menu; if no setting is given, the first menu level is set to false, all others to true;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># this can be overridden in the pages frontmatter</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">alwaysopen</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Prefix URL to edit current page. Will display an &#34;Edit&#34; button on top right hand corner of every page.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Useful to give opportunity to people to create merge request for your doc.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># See the config.toml file from this documentation site to have an example.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">editURL</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Author of the site, will be used in meta information</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">author</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Description of the site, will be used in meta information</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">description</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Shows a checkmark for visited pages on the menu</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">showVisitedLinks</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Disable search function. It will hide search bar</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableSearch</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Disable search in hidden pages, otherwise they will be shown in search box</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableSearchHiddenPages</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Disables hidden pages from showing up in the sitemap and on Google (et all), otherwise they may be indexed by search engines</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableSeoHiddenPages</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Disables hidden pages from showing up on the tags page although the tag term will be displayed even if all pages are hidden</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableTagHiddenPages</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Javascript and CSS cache are automatically busted when new version of site is generated.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Set this to true to disable this behavior (some proxies don&#39;t handle well this optimization)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableAssetsBusting</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Set this to true if you want to disable generation for generator version meta tags of hugo and the theme;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># don&#39;t forget to also set Hugo&#39;s disableHugoGeneratorInject=true, otherwise it will generate a meta tag into your home page</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableGeneratorVersion</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Set this to true to disable copy-to-clipboard button for inline code.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableInlineCopyToClipBoard</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># A title for shortcuts in menu is set by default. Set this to true to disable it.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableShortcutsTitle</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># If set to false, a Home button will appear below the search bar on the menu.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># It is redirecting to the landing page of the current language if specified. (Default is &#34;/&#34;)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableLandingPageButton</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># When using mulitlingual website, disable the switch language button.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableLanguageSwitchingButton</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Hide breadcrumbs in the header and only show the current page title</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableBreadcrumb</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># If set to true, hide table of contents menu in the header of all pages</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableToc</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># If set to false, load the MathJax module on every page regardless if a MathJax shortcode is present</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableMathJax</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Specifies the remote location of the MathJax js</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">customMathJaxURL</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Initialization parameter for MathJax, see MathJax documentation</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">mathJaxInitialize</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;{}&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># If set to false, load the Mermaid module on every page regardless if a Mermaid shortcode or Mermaid codefence is present</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableMermaid</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Specifies the remote location of the Mermaid js</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">customMermaidURL</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;https://unpkg.com/mermaid/dist/mermaid.min.js&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Initialization parameter for Mermaid, see Mermaid documentation</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">mermaidInitialize</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;{ \&#34;theme\&#34;: \&#34;default\&#34; }&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># If set to false, load the Swagger module on every page regardless if a Swagger shortcode is present</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableSwagger</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Specifies the remote location of the RapiDoc js</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">customSwaggerURL</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;https://unpkg.com/rapidoc/dist/rapidoc-min.js&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Initialization parameter for Swagger, see RapiDoc documentation</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">swaggerInitialize</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;{ \&#34;theme\&#34;: \&#34;light\&#34; }&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Hide Next and Previous page buttons normally displayed full height beside content</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableNextPrev</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Order sections in menu by &#34;weight&#34; or &#34;title&#34;. Default to &#34;weight&#34;;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># this can be overridden in the pages frontmatter</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">ordersectionsby</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;weight&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Change default color scheme with a variant one. Eg. can be &#34;auto&#34;, &#34;red&#34;, &#34;blue&#34;, &#34;green&#34; or an array like [ &#34;blue&#34;, &#34;green&#34; ].</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">themeVariant</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;auto&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># Change the title separator. Default to &#34;::&#34;.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">titleSeparator</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;-&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># If set to true, the menu in the sidebar will be displayed in a collapsible tree view. Although the functionality works with old browsers (IE11), the display of the expander icons is limited to modern browsers</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">collapsibleMenu</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># If a single page can contain content in multiple languages, add those here</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">additionalContentLanguage</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff6ac1">[</span> <span style="color:#5af78e">&#34;en&#34;</span> <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># If set to true, no index.html will be appended to prettyURLs; this will cause pages not</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># to be servable from the file system</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">disableExplicitIndexURLs</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff5c57">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># For external links you can define how they are opened in your browser; this setting will only be applied to the content area but not the shortcut menu</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">externalLinkTarget</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;_blank&#34;</span></span></span></code></pre></div>
<h2 id="syntax-highlighting">Syntax highlighting</h2>
<p>Supports a variety of [Code Syntaxes]
To select the syntax, wrap the code in backticks and place the syntax by the first set of backticks.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>```bash
echo hello
\```</code></pre></div>
<h2 id="adding-tags">Adding tags</h2>
<p>Tags are displayed in order at the top of the page. They will also display using the menu shortcut made further down.</p>
<p>Add tags to a page:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#ff5c57">+++</span>
</span></span><span style="display:flex;"><span>tags = [<span style="color:#5af78e">&#34;tutorial&#34;</span>, <span style="color:#5af78e">&#34;theme&#34;</span>]
</span></span><span style="display:flex;"><span>title = <span style="color:#5af78e">&#34;Theme tutorial&#34;</span>
</span></span><span style="display:flex;"><span>weight = <span style="color:#ff9f43">15</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">+++</span></span></span></code></pre></div>
<h2 id="choose-a-default-color-theme">Choose a default color <a href="https://xyproto.github.io/splash/docs/all.html" rel="external" target="_blank">theme</a></h2>
<p>Add to config.toml with the chosen theme for the &ldquo;style&rdquo; option:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[markup]
</span></span><span style="display:flex;"><span>  [markup.highlight]
</span></span><span style="display:flex;"><span>    <span style="color:#78787e"># if `guessSyntax = true`, there will be no unstyled code even if no language</span>
</span></span><span style="display:flex;"><span>    <span style="color:#78787e"># was given BUT Mermaid and Math codefences will not work anymore! So this is a</span>
</span></span><span style="display:flex;"><span>    <span style="color:#78787e"># mandatory setting for your site if you want to use Mermaid or Math codefences</span>
</span></span><span style="display:flex;"><span>    guessSyntax = <span style="color:#ff6ac1">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#78787e"># choose a color theme or create your own</span>
</span></span><span style="display:flex;"><span>    style = <span style="color:#5af78e">&#34;base16-snazzy&#34;</span></span></span></code></pre></div>
<h2 id="add-print-option-and-search-output-page">Add Print option and search output page.</h2>
<p>add the following to config.toml</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[outputs]
  home = [&#34;HTML&#34;, &#34;RSS&#34;, &#34;PRINT&#34;, &#34;SEARCH&#34;]
  section = [&#34;HTML&#34;, &#34;RSS&#34;, &#34;PRINT&#34;]
  page = [&#34;HTML&#34;, &#34;RSS&#34;, &#34;PRINT&#34;]</code></pre></div>
<h2 id="customization">Customization</h2>
<p>This theme has a bunch of editable customizations called partials. You can overwrite the default partials by putting new ones in /layouts/partials/.</p>
<p>to customize &ldquo;partials&rdquo;, create a  &ldquo;partials&rdquo; directory under site/layouts/</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cd layouts
mkdir partials
cd partials</code></pre></div>
<p>You can find all of the partials available for this theme <a href="https://mcshelby.github.io/hugo-theme-relearn/basics/customization/index.html" rel="external" target="_blank">here</a></p>
<h3 id="change-the-site-logo-using-the-logohtml-partial">Change the site logo using the logo.html partial</h3>
<p>Create logo.html in /layouts/partials</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>vim logo.html</code></pre></div>
<p>Add the content you want in html. This can be an img html tag referencing an image in the static folder. Or even basic text. Here is the basic syntax of an html page, adding &ldquo;Perfect Dark Mode&rdquo; as the text to display:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;

&lt;h3&gt;Perfect Dark Mode&lt;/h3&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre></div>
<h3 id="add-a-favicon-to-your-site">Add a favicon to your site</h3>
<ul>
<li>This is pasted from the relearn site. Add Favicon and edit *
If your favicon is a SVG, PNG or ICO, just drop off your image in your localÂ <code>static/images/</code>Â folder and name itÂ <code>favicon.svg</code>,Â <code>favicon.png</code>Â orÂ <code>favicon.ico</code>Â respectively.</li>
</ul>
<p>If no favicon file is found, the theme will lookup the alternative filenameÂ <code>logo</code>Â in the same location and will repeat the search for the list of supported file types.</p>
<p>If you need to change this default behavior, create a new file inÂ <code>layouts/partials/</code>Â namedÂ <code>favicon.html</code>. Then write something like this:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#ff6ac1">link</span> <span style="color:#57c7ff">rel</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;icon&#34;</span> <span style="color:#57c7ff">href</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;/images/favicon.bmp&#34;</span> <span style="color:#57c7ff">type</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;image/bmp&#34;</span>&gt;</span></span></code></pre></div>
<h2 id="changing-theme-colors">Changing theme colors</h2>
<p>In your config.toml file edit the themeVariant option under [params]</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>  themeVariant = <span style="color:#5af78e">&#34;relearn-dark&#34;</span></span></span></code></pre></div>
<p>There are some options to choose from or you can custom make your theme colors by using this <a href="https://mcshelby.github.io/hugo-theme-relearn/basics/generator/index.html" rel="external" target="_blank">stylesheet generator</a></p>
<p>Menu Shortcuts
Add a [[menu.shortcuts]] entry for each link</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[[menu.shortcuts]]
</span></span><span style="display:flex;"><span>name = <span style="color:#5af78e">&#34;&lt;i class=&#39;fab fa-fw fa-github&#39;&gt;&lt;/i&gt; GitHub repo&#34;</span>
</span></span><span style="display:flex;"><span>identifier = <span style="color:#5af78e">&#34;ds&#34;</span>
</span></span><span style="display:flex;"><span>url = <span style="color:#5af78e">&#34;https://github.com/McShelby/hugo-theme-relearn&#34;</span>
</span></span><span style="display:flex;"><span>weight = <span style="color:#ff9f43">10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[[menu.shortcuts]]
</span></span><span style="display:flex;"><span>name = <span style="color:#5af78e">&#34;&lt;i class=&#39;fas fa-fw fa-camera&#39;&gt;&lt;/i&gt; Showcases&#34;</span>
</span></span><span style="display:flex;"><span>url = <span style="color:#5af78e">&#34;more/showcase/&#34;</span>
</span></span><span style="display:flex;"><span>weight = <span style="color:#ff9f43">11</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[[menu.shortcuts]]
</span></span><span style="display:flex;"><span>name = <span style="color:#5af78e">&#34;&lt;i class=&#39;fas fa-fw fa-bookmark&#39;&gt;&lt;/i&gt; Hugo Documentation&#34;</span>
</span></span><span style="display:flex;"><span>identifier = <span style="color:#5af78e">&#34;hugodoc&#34;</span>
</span></span><span style="display:flex;"><span>url = <span style="color:#5af78e">&#34;https://gohugo.io/&#34;</span>
</span></span><span style="display:flex;"><span>weight = <span style="color:#ff9f43">20</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[[menu.shortcuts]]
</span></span><span style="display:flex;"><span>name = <span style="color:#5af78e">&#34;&lt;i class=&#39;fas fa-fw fa-bullhorn&#39;&gt;&lt;/i&gt; Credits&#34;</span>
</span></span><span style="display:flex;"><span>url = <span style="color:#5af78e">&#34;more/credits/&#34;</span>
</span></span><span style="display:flex;"><span>weight = <span style="color:#ff9f43">30</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[[menu.shortcuts]]
</span></span><span style="display:flex;"><span>name = <span style="color:#5af78e">&#34;&lt;i class=&#39;fas fa-fw fa-tags&#39;&gt;&lt;/i&gt; Tags&#34;</span>
</span></span><span style="display:flex;"><span>url = <span style="color:#5af78e">&#34;tags/&#34;</span>
</span></span><span style="display:flex;"><span>weight = <span style="color:#ff9f43">40</span></span></span></code></pre></div>
<p>Extras</p>
<p>Menu button arrows. (Add to page frontmatter)</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>menuPre = &#34;&lt;i class=&#39;fa-fw fas fa-caret-right&#39;&gt;&lt;/i&gt; &#34;</code></pre></div>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="nextcloud-on-rhel-based-systems">Nextcloud on RHEL Based Systems</h1>

<p>I&rsquo;m going to show you how to set up your own, self-hosted Nextcloud server using Alma Linux 9 and Apache.</p>
<h3 id="what-is-nextcloud">What is Nextcloud?</h3>
<p>Nextcloud is so many things. It offers so many features and options, it deserves a bulleted list:</p>
<ul>
<li>Free and open source</li>
<li>Cloud storage and syncing</li>
<li>Email client</li>
<li>Custom browser dashboard with widgets</li>
<li>Office suite</li>
<li>RSS newsfeed</li>
<li>Project organization (deck)</li>
<li>Notebook</li>
<li>Calender</li>
<li>Task manager</li>
<li>Connect to decentralized social media (like Mastodon)</li>
<li>Replacement for all of google&rsquo;s services</li>
<li>Create web forms or surveys</li>
</ul>
<p>It is also free and open source. This mean the source code is available to all. And hosting yourself means you can guarantee that your data isn&rsquo;t being shared.</p>
<p>As you can see. Nextcloud is feature packed and offers an all in one solution for many needs. The set up is fairly simple.</p>
<p><strong>You will need:</strong></p>
<ul>
<li>Domain hosted through CloudFlare or other hosting.</li>
<li>Server with Alma Linux 9 with a dedicated public ip address.</li>
</ul>
<p>Nextcloud dependencies:</p>
<ul>
<li>PHP 8.3</li>
<li>Apache</li>
<li>sql database (This tutorial uses MariaDB)</li>
</ul>
<p>Official docs: <a href="https://docs.nextcloud.com/server/latest/admin_manual/installation/source_installation.html" rel="external" target="_blank">https://docs.nextcloud.com/server/latest/admin_manual/installation/source_installation.html</a></p>
<h2 id="server-specs">Server Specs</h2>
<p>Hard drives:
120g main
500g data
250g backup</p>
<p>OS: Alma 9
CPU: 4 sockets 8 cores
RAM: 32768</p>
<p>ip 10.0.10.56/24
root: { password }
davidt: { password }</p>
<h3 id="storage-setup">Storage setup</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir /var/www/nextcloud/ -p
</span></span><span style="display:flex;"><span>mkdir /home/databkup
</span></span><span style="display:flex;"><span>parted /dev/sdb mklabel gpt
</span></span><span style="display:flex;"><span>parted /dev/sdb mkpart primary 0% 100%
</span></span><span style="display:flex;"><span>parted /dev/sdc mklabel gpt
</span></span><span style="display:flex;"><span>parted /dev/sdc mkpart primary 0% 100%
</span></span><span style="display:flex;"><span>mkfs.xfs /dev/sdb1
</span></span><span style="display:flex;"><span>mkfs.xfs /dev/sdc1
</span></span><span style="display:flex;"><span>lsblk
</span></span><span style="display:flex;"><span>blkid /dev/sdb1 &gt;&gt; /etc/fstab
</span></span><span style="display:flex;"><span>blkid /dev/sdc1 &gt;&gt; /etc/fstab
</span></span><span style="display:flex;"><span>vim /etc/fstab
</span></span><span style="display:flex;"><span>mount -a</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@dt-lab2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk</span>
</span></span><span style="display:flex;"><span>NAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda                  8:0    <span style="color:#ff9f43">0</span>  120G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€sda1               8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part /boot
</span></span><span style="display:flex;"><span>â””â”€sda2               8:2    <span style="color:#ff9f43">0</span>  119G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€almalinux-root 253:0    <span style="color:#ff9f43">0</span>   70G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  â”œâ”€almalinux-swap 253:1    <span style="color:#ff9f43">0</span>   12G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>  â””â”€almalinux-home 253:2    <span style="color:#ff9f43">0</span>   37G  <span style="color:#ff9f43">0</span> lvm  /home
</span></span><span style="display:flex;"><span>sdb                  8:16   <span style="color:#ff9f43">0</span>  500G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€sdb1               8:17   <span style="color:#ff9f43">0</span>  500G  <span style="color:#ff9f43">0</span> part /var/www/nextcloud
</span></span><span style="display:flex;"><span>sdc                  8:32   <span style="color:#ff9f43">0</span>  250G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€sdc1               8:33   <span style="color:#ff9f43">0</span>  250G  <span style="color:#ff9f43">0</span> part /home/databkup</span></span></code></pre></div>
<h1 id="setting-up-dependencies">Setting up dependencies</h1>
<h2 id="install-latest-supported-php">Install latest supported PHP</h2>
<p>I used this guide to help get a supported php version. As php 2 installed from dnf repos by default:
<a href="https://orcacore.com/php83-installation-almalinux9-rockylinux9/" rel="external" target="_blank">https://orcacore.com/php83-installation-almalinux9-rockylinux9/</a></p>
<p>Make sure dnf is up to date:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo dnf update -y
</span></span><span style="display:flex;"><span>sudo dnf upgrade -y</span></span></code></pre></div>
<p>Set up the epel repository:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf install epel-release -y</code></pre></div>
<p>Set up remi to manage php modules:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf install -y dnf-utils http://rpms.remirepo.net/enterprise/remi-release-9.rpm
sudo dnf update -y</code></pre></div>
<p>Remove old versions of php:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf remove php* -y</code></pre></div>
<p>List available php streams:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf module list reset php -y

Last metadata expiration check: 1:03:46 ago on Sun 29 Dec 2024 03:34:52 AM MST.
AlmaLinux 9 - AppStream
Name                Stream                      Profiles                                  Summary                             
php                 8.1                         common [d], devel, minimal                PHP scripting language              
php                 8.2                         common [d], devel, minimal                PHP scripting language              

Remi&#39;s Modular repository for Enterprise Linux 9 - x86_64
Name                Stream                      Profiles                                  Summary                             
php                 remi-7.4                    common [d], devel, minimal                PHP scripting language              
php                 remi-8.0                    common [d], devel, minimal                PHP scripting language              
php                 remi-8.1                    common [d], devel, minimal                PHP scripting language              
php                 remi-8.2                    common [d], devel, minimal                PHP scripting language              
php                 remi-8.3 [e]                common [d], devel, minimal                PHP scripting language              
php                 remi-8.4                    common [d], devel, minimal                PHP scripting language       </code></pre></div>
<p>Enable the correct stream:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf module enable php:remi-8.3</code></pre></div>
<p>Now the default to install is version 8.3, install it like this:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf install php -y
php -v</code></pre></div>
<p>Let&rsquo;s install git, as it&rsquo;s also needed in this setup:
<code>sudo dnf -y install git</code></p>
<p>Install Composer for managing php modules:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">cd</span> <span style="color:#ff6ac1">&amp;&amp;</span> curl -sS https://getcomposer.org/installer | php
</span></span><span style="display:flex;"><span>sudo mv composer.phar /usr/local/bin/composer</span></span></code></pre></div>
<p>Install needed PHP modules:
<code>sudo dnf -y install php-process php-zip php-gd php-mysqlnd php-ldap php-imagick php-bcmath php-gmp php-intl</code></p>
<p>Upgrade php memory limit:
<code>sudo vim /etc/php.ini</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">memory_limit</span> <span style="color:#ff6ac1">=</span> 512M</span></span></code></pre></div>
<h2 id="apache-setup">Apache setup</h2>
<p>Add Apache config for vhost:
<code>sudo vim /etc/httpd/conf.d/nextcloud.conf</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  DocumentRoot /var/www/nextcloud/
</span></span><span style="display:flex;"><span>  ServerName  cloud.<span style="color:#ff6ac1">{</span> site-name <span style="color:#ff6ac1">}</span>.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;Directory /var/www/nextcloud/&gt;
</span></span><span style="display:flex;"><span>    Require all granted
</span></span><span style="display:flex;"><span>    AllowOverride All
</span></span><span style="display:flex;"><span>    Options FollowSymLinks MultiViews
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;IfModule mod_dav.c&gt;
</span></span><span style="display:flex;"><span>      Dav off
</span></span><span style="display:flex;"><span>    &lt;/IfModule&gt;
</span></span><span style="display:flex;"><span>  &lt;/Directory&gt;
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;</span></span></code></pre></div>
<h2 id="set-up-the-mysql-database">Set up the mysql database</h2>
<p>Install:
<code>sudo dnf install mariadb-server -y</code></p>
<p>Enable the service:
<code>sudo systemctl enable --now mariadb</code></p>
<p>Nextcloud needs some tables setup in order to store information in a database. First set up a secure sql database:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo mysql_secure_installation</code></pre></div>
<p>Say â€œYesâ€ to the prompts and enter root password:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>Switch to unix_socket authentication [Y/n]: Y
Change the root password? [Y/n]: Y	# enter password.
Remove anonymous users? [Y/n]: Y
Disallow root login remotely? [Y/n]: Y
Remove test database and access to it? [Y/n]: Y
Reload privilege tables now? [Y/n]: Y</code></pre></div>
<p>Sign in to your SQL database with the password you just chose:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>mysql -u root -p</code></pre></div>
<h3 id="create-the-database">Create the database:</h3>
<p>While signed in with the mysql command, enter the commands below one at a time. Make sure to replace the username and password. But leave localhost as is:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>CREATE DATABASE nextcloud;
GRANT ALL ON nextcloud.* TO &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;{ password }&#39;;
FLUSH PRIVILEGES;
EXIT;</code></pre></div>
<h1 id="nextcloud-install">Nextcloud Install</h1>
<p>Download nextcloud onto the server.
Extract the contents to /var/www/nextcloud
<code>tar -xjf nextcloud-31.0.4.tar.bz2 -C /var/www/ --strip-components=1</code></p>
<p>Change the nextcloud folder ownership to apache and add permissions:
<code>sudo chmod -R 755 /var/www/nextcloud</code>
<code>sudo chown -R apache:apache /var/www/nextcloud</code></p>
<p>Selinux:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo semanage fcontext -a -t httpd_sys_content_t <span style="color:#5af78e">&#34;/var/www/nextcloud(/.*)?&#34;</span> <span style="color:#ff6ac1">&amp;&amp;</span> <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>sudo semanage fcontext -a -t httpd_sys_rw_content_t <span style="color:#5af78e">&#34;/var/www/nextcloud/(config|data|apps)(/.*)?&#34;</span> <span style="color:#ff6ac1">&amp;&amp;</span> <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>sudo semanage fcontext -a -t httpd_sys_rw_content_t <span style="color:#5af78e">&#34;/var/www/nextcloud/data(/.*)?&#34;</span>
</span></span><span style="display:flex;"><span>sudo restorecon -Rv /var/www/nextcloud/</span></span></code></pre></div>
<p>Now we can actually install Nextcloud. <code>cd</code> to the /var/www/nextcloud directory and run occ with these settings to install:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo -u apache php occ  maintenance:install <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>--database<span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;mysql&#39;</span> --database-name<span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;nextcloud&#39;</span> <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>--database-user<span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;root&#39;</span> --database-pass<span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;{ password }&#39;</span> <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>--admin-user<span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;admin&#39;</span> --admin-pass<span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;{ password }&#39;</span></span></span></code></pre></div>
<h3 id="create-a-cname-record-for-dns">Create a CNAME record for DNS.</h3>
<p>Before you go any further, you will need to have a domain name set up for your server. I use Cloudflare to manage my DNS records. You will want to make a CNAME record for your nextcloud subdomain.</p>
<p>Just add &ldquo;nextcloud&rdquo; as the name and &ldquo;yourwebsite.com&rdquo; as the content. This will make it so &ldquo;nextcloud.yourwebsite.com&rdquo; is the site for your nextcloud dashboard. Also, make sure to select &ldquo;DNS Only&rdquo; under proxy status.</p>
<p>Here&rsquo;s what my CloudFlare domain setup looks with this blog as the main site, and cloud.perfectdarkmode.com as the nextcloud site:</p>
<p><a href="#R-image-cc1322d435bde2a9b5d76c6850f57dd8" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020241229050325.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-cc1322d435bde2a9b5d76c6850f57dd8"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020241229050325.png"></a></p>
<p>Then you need to update trusted domains in /var/www/nextcloud/config/config.php:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#5af78e">&#39;trusted_domains&#39;</span> <span style="color:#ff6ac1">=</span>&gt;
</span></span><span style="display:flex;"><span>   <span style="color:#ff6ac1">[</span>
</span></span><span style="display:flex;"><span>    <span style="color:#5af78e">&#39;cloud.{ site-name }.com&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#5af78e">&#39;localhost&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">]</span>,</span></span></code></pre></div>
<h3 id="install-apache">Install Apache</h3>
<p>Install:
<code>sudo dnf -y install httpd</code></p>
<p>Enable:
<code>systemctl enable --now httpd</code></p>
<p>Restart httpd
<code>systemctl restart httpd</code></p>
<p>Firewall rules:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo firewall-cmd --add-service https --permanent
</span></span><span style="display:flex;"><span>sudo firewall-cmd --add-service http --permanent
</span></span><span style="display:flex;"><span>sudo firewall-cmd --reload</span></span></code></pre></div>
<h3 id="install-ssl-with-certbot">Install SSL with Certbot</h3>
<p>Install certbot:
<code>sudo dnf install certbot python3-certbot-apache -y</code></p>
<p>Obtain an SSL certificate. (See my <a href="/tools/obsidian-site-setup/">Obsidian site setup</a> post for information about Certbot and Apache setup.)</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo certbot -d {subdomain}.{domain}.com</code></pre></div>
<p>Now log into nextcloud with your admin account using the DNS name you set earlier:</p>
<p><a href="#R-image-001e4708f9045d9d933b70f94f5c34f3" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020241229050541.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-001e4708f9045d9d933b70f94f5c34f3"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020241229050541.png"></a></p>
<p>I recommend setting up a normal user account instead of doing everything as &ldquo;admin&rdquo;. Just hit the &ldquo;A&rdquo; icon at the top right and go to &ldquo;Accounts&rdquo;. Then just select &ldquo;New Account&rdquo; and create a user account with whatever privileges you want.</p>
<p><a href="#R-image-2d3e04cdedf18c481b3c6012a8400285" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../images/Pasted%20image%2020241229051101.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2d3e04cdedf18c481b3c6012a8400285"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../images/Pasted%20image%2020241229051101.png"></a></p>
<p>I may make a post about which Nextcloud apps I recommend and customize the setup a bit. Let me know if that&rsquo;s something you&rsquo;d like to see. That&rsquo;s all for now.</p>
<h3 id="make-log-dir">Make log dir:</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir /var/log/nextcloud
</span></span><span style="display:flex;"><span>touch /var/log/nextcloud.log
</span></span><span style="display:flex;"><span>chown apache:apache -R /var/log/nextcloud</span></span></code></pre></div>
<h3 id="change-apps-to-read-only">Change apps to read only</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>semanage fcontext -a -t httpd_sys_content_t <span style="color:#5af78e">&#34;/var/www/nextcloud/apps(/.*)?&#34;</span>
</span></span><span style="display:flex;"><span>restorecon -R /var/www/nextcloud/apps</span></span></code></pre></div>
<h3 id="allow-outbound-network">Allow outbound network:</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo setsebool -P httpd_can_network_connect <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>sudo setsebool -P httpd_graceful_shutdown <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>sudo setsebool -P httpd_can_network_relay <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>sudo ausearch -c <span style="color:#5af78e">&#39;php-fpm&#39;</span> --raw | audit2allow -M my-phpfpm
</span></span><span style="display:flex;"><span>sudo semodule -X <span style="color:#ff9f43">300</span> -i my-phpfpm.pp</span></span></code></pre></div>
<h3 id="backup">Backup</h3>
<p><code>mkdir /home/databkup</code>
chown -R apache:apache /home/databkup</p>
<p><code>vim /root/cleanbackups.sh</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>#!/bin/bash

find /home/backup -type f -mtime +5 -exec rm {} \;</code></pre></div>
<p><code>chmod +x /root/cleanbackups.sh</code></p>
<p><code>crontab -e</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e"># Clean up old backups every day at midnight</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span> * * * /root/cleanbackups.sh &gt; /dev/null 2&gt;&amp;<span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Backup MySQL database every 12 hours</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">0</span> */12 * * * bash -c <span style="color:#5af78e">&#39;/usr/bin/mysqldump --single-transaction -u root -p{password} nextcloud &gt; /home/backup/nextclouddb-backup_$(date +&#34;\%Y\%m\%d\%H\%M\%S&#34;).bak&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Rsync Nextcloud data directory every day at midnight</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">15</span> <span style="color:#ff9f43">0</span> * * * /usr/bin/rsync -Aavx /var/www/nextcloud/ /home/databkup/ --delete-before</span></span></code></pre></div>
<p><code>mkdir /home/backup</code></p>
<h3 id="update-mariadb">Update Mariadb:</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl stop mariadb.service
</span></span><span style="display:flex;"><span>dnf module switch-to mariadb:10.11
</span></span><span style="display:flex;"><span>systemctl start mariadb.service
</span></span><span style="display:flex;"><span>mariadb-upgrade --user<span style="color:#ff6ac1">=</span>root --password<span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;{ password }&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mariadb --version</span></span></code></pre></div>
<p>Mimetype migration error:
<code>sudo -u apache /var/www/nextcloud/occ maintenance:repair --include-expensive</code></p>
<p>Indices error:
<code>sudo -u apache /var/www/nextcloud/occ db:add-missing-indices</code></p>
<h3 id="redis-install-for-memcache">Redis install for memcache</h3>
<p>This setup uses Redis for File locking and APCu for memcache</p>
<p><code>dnf -y install redis php-pecl-redis php-pecl-apcu</code></p>
<p><code>systemctl enable --now redis</code></p>
<p>Add to config.php:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#5af78e">&#39;memcache.locking&#39;</span> <span style="color:#ff6ac1">=</span>&gt; <span style="color:#5af78e">&#39;\OC\Memcache\Redis&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#5af78e">&#39;memcache.local&#39;</span> <span style="color:#ff6ac1">=</span>&gt; <span style="color:#5af78e">&#39;\OC\Memcache\APCu&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#5af78e">&#39;redis&#39;</span> <span style="color:#ff6ac1">=</span>&gt; <span style="color:#ff6ac1">[</span>
</span></span><span style="display:flex;"><span>   <span style="color:#5af78e">&#39;host&#39;</span>     <span style="color:#ff6ac1">=</span>&gt; <span style="color:#5af78e">&#39;/run/redis/redis-server.sock&#39;</span>,
</span></span><span style="display:flex;"><span>   <span style="color:#5af78e">&#39;port&#39;</span>     <span style="color:#ff6ac1">=</span>&gt; 0,
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">]</span>,</span></span></code></pre></div>
<p>Update /etc/redis/redis.conf
<code>vim /etc/redis/redis.conf</code>
change port to <code>port 0</code>/</p>
<p>uncomment the socket options under &ldquo;Unix Socket&rdquo; and change to:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>unixsocket /run/redis/redis-server.sock
</span></span><span style="display:flex;"><span>unixsocketperm <span style="color:#ff9f43">770</span></span></span></code></pre></div>
<p>Update permissions for redis
<code>usermod -a -G redis apache</code></p>
<p>Uncomment the line in /etc/php.d/40-apcu.ini and change from 32M to 256M
<code>vim /etc/php.d/40-apcu.ini</code>
<code>apc.shm_size=256M</code></p>
<p>Restart apache and redis:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl restart redis
</span></span><span style="display:flex;"><span>systemctl restart httpd</span></span></code></pre></div>
<p>Added logging and phone region to config.php:
<code>mkdir /var/log/nextcloud/</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>  <span style="color:#5af78e">&#39;log_type&#39;</span> <span style="color:#ff6ac1">=</span>&gt; <span style="color:#5af78e">&#39;file&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#5af78e">&#39;logfile&#39;</span> <span style="color:#ff6ac1">=</span>&gt; <span style="color:#5af78e">&#39;/var/log/nextcloud/nextcloud.log&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#5af78e">&#39;logfilemode&#39;</span> <span style="color:#ff6ac1">=</span>&gt; 416,
</span></span><span style="display:flex;"><span>  <span style="color:#5af78e">&#39;default_phone_region&#39;</span> <span style="color:#ff6ac1">=</span>&gt; <span style="color:#5af78e">&#39;US&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#5af78e">&#39;logtimezone&#39;</span> <span style="color:#ff6ac1">=</span>&gt; <span style="color:#5af78e">&#39;America/Phoenix&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#5af78e">&#39;loglevel&#39;</span> <span style="color:#ff6ac1">=</span>&gt; <span style="color:#5af78e">&#39;1&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#5af78e">&#39;logdateformat&#39;</span> <span style="color:#ff6ac1">=</span>&gt; <span style="color:#5af78e">&#39;F d, Y H:i:s&#39;</span>,</span></span></code></pre></div>
<h3 id="op-cache-error">OP-Cache error</h3>
<p>Change opcache.interned_strings_buffer to 16 and uncomment:</p>
<p><code>vim /etc/php.d/10-opcache.ini</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>opcache.interned_strings_buffer=16</code></pre></div>
<p><code>systemctl restart php-fpm httpd</code></p>
<h3 id="last-job-execution-ran-2-months-ago-something-seems-wrong">Last job execution ran 2 months ago. Something seems wrong.</h3>
<p>Set up cron job for the Apache user:
<code>crontab -u apache -e</code></p>
<p>Add to file that shows up:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>*/5  *  *  *  * php -f /var/www/nextcloud/cron.php</span></span></code></pre></div>
<h3 id="other-errors">Other Errors</h3>
<ul>
<li>The &ldquo;files_reminders&rdquo; app needs the notification app to work properly. You should either enable notifications or disable files_reminder.</li>
</ul>
<p>Disabled files_reminder app</p>
<ul>
<li>Server has no maintenance window start time configured. This means resource intensive daily background jobs will also be executed during your main usage time. We recommend to set it to a time of low usage, so users are less impacted by the load caused from these heavy tasks. For more details see theÂ <a href="https://docs.nextcloud.com/server/32/go.php?to=admin-background-jobs" rel="external" target="_blank">documentation â†—</a>.</li>
</ul>
<p>Added <code>'maintenance_window_start' =&gt; 1,</code> to config.php</p>
<ul>
<li>Some headers are not set correctly on your instance - The <code>Strict-Transport-Security</code> HTTP header is not set (should be at least <code>15552000</code> seconds). For enhanced security, it is recommended to enable HSTS. For more details see theÂ <a href="https://docs.nextcloud.com/server/32/go.php?to=admin-security" rel="external" target="_blank">documentation â†—</a>.</li>
</ul>
<p>Added after closing directory line in SSL config:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim nextcloud-le-ssl.conf </span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>Header always set Strict-Transport-Security &#34;max-age=15552000; includeSubDomains; preload&#34;</code></pre></div>
<p>And add to the bottom of /var/www/nextcloud/.htaccess:
<code>&quot;Header always set Strict-Transport-Security &quot;max-age=15552000; includeSubDomains&quot;</code></p>
<p>Change this line in config.php from localhost to server name:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> &#39;overwrite.cli.url&#39; =&gt; &#39;http://cloud.{ site-name }.com&#39;,</code></pre></div>
<ul>
<li>Integrity checker has been disabled. Integrity cannot be verified.</li>
</ul>
<p>Ignore this</p>
<p>Your webserver does not serve <code>.mjs</code> files using the JavaScript MIME type. This will break some apps by preventing browsers from executing the JavaScript files. You should configure your webserver to serve <code>.mjs</code> files with either the <code>text/javascript</code> or <code>application/javascript</code> MIME type.</p>
<ul>
<li><code>sudo vim /etc/httpd/conf.d/nextcloud.conf</code></li>
<li>ad <code>AddType text/javascript .mjs</code> inside the virtual host block. Restart apache.</li>
</ul>
<p>Your web server is not properly set up to resolve &ldquo;/ocm-provider/&rdquo;. This is most likely related to a web server configuration that was not updated to deliver this folder directly. Please compare your configuration against the shipped rewrite rules in &ldquo;.htaccess&rdquo; for Apache
add to <code>vim /var/www/nextcloud/.htaccess</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&lt;IfModule mod_rewrite.c&gt;
</span></span><span style="display:flex;"><span>  RewriteEngine on
</span></span><span style="display:flex;"><span>  RewriteRule ^ocm-provider/<span style="color:#ff6ac1">(</span>.*<span style="color:#ff6ac1">)</span>$ /index.php/apps/ocm/<span style="color:#ff5c57">$1</span> <span style="color:#ff6ac1">[</span>QSA,L<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>&lt;/IfModule&gt;</span></span></code></pre></div>
<p>Your web server is not properly set up to resolve <code>.well-known</code> URLs, failed on: <code>/.well-known/caldav</code></p>
<p>added to <code>vim /var/www/nextcloud/.htaccess</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e"># .well-known URLs for CalDAV/CardDAV and other services</span>
</span></span><span style="display:flex;"><span>&lt;IfModule mod_rewrite.c&gt;
</span></span><span style="display:flex;"><span>  RewriteEngine On
</span></span><span style="display:flex;"><span>  RewriteRule ^<span style="color:#5af78e">\.</span>well-known/caldav$ /remote.php/dav/ <span style="color:#ff6ac1">[</span><span style="color:#ff5c57">R</span><span style="color:#ff6ac1">=</span>301,L<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>  RewriteRule ^<span style="color:#5af78e">\.</span>well-known/carddav$ /remote.php/dav/ <span style="color:#ff6ac1">[</span><span style="color:#ff5c57">R</span><span style="color:#ff6ac1">=</span>301,L<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>  RewriteRule ^<span style="color:#5af78e">\.</span>well-known/webfinger$ /index.php/.well-known/webfinger <span style="color:#ff6ac1">[</span><span style="color:#ff5c57">R</span><span style="color:#ff6ac1">=</span>301,L<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>  RewriteRule ^<span style="color:#5af78e">\.</span>well-known/nodeinfo$ /index.php/.well-known/nodeinfo <span style="color:#ff6ac1">[</span><span style="color:#ff5c57">R</span><span style="color:#ff6ac1">=</span>301,L<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>  RewriteRule ^<span style="color:#5af78e">\.</span>well-known/acme-challenge/.*$ - <span style="color:#ff6ac1">[</span>L<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>&lt;/IfModule&gt;</span></span></code></pre></div>
<p><strong>PHP configuration option &ldquo;output_buffering&rdquo; must be disabled</strong>
<code>vim /etc/php.ini</code></p>
<p><code>output_buffering = Off</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@oort31 nextcloud<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo &#34;output_buffering=off&#34; &gt; .user.ini</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@oort31 nextcloud<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chown apache:apache .user.ini</span>
</span></span><span style="display:flex;"><span>chmod <span style="color:#ff9f43">644</span> .user.ini
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@oort31 nextcloud<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl restart httpd</span></span></span></code></pre></div>
<p><strong>Installed tmux</strong>
<code>dnf -y install tmux</code></p>
<h3 id="apps">Apps</h3>
<p>Disabled File Reminders app</p>
<h3 id="add-fail2ban">Add fail2ban</h3>
<p>sudo dnf -y install fail2ban</p>
<p>vim /etc/fail2ban/jail.local</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[DEFAULT]
bantime = 24h
ignoreip = 10.0.0.0/8
usedns = no

[sshd]
enabled = true
maxretry = 3
findtime = 43200
bantime = 86400</code></pre></div>
<p>systemctl enable &ndash;now fail2ban
fail2ban-client status sshd</p>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="self-hosting-a-nextcloud-server">Self hosting a Nextcloud Server</h1>

<p>This is a step-by-step guide to setting up Nextcloud on a Debian server. You will need a server hosted by a VPS like Vultr. And a Domain hosted by a DNS provider such as Cloudflare</p>
<h3 id="what-is-nextcloud">What is Nextcloud?</h3>
<p>Nextcloud is so many things. It offers so many features and options, it deserves a bulleted list:</p>
<ul>
<li>Free and open source</li>
<li>Cloud storage and syncing</li>
<li>Email client</li>
<li>Custom browser dashboard with widgets</li>
<li>Office suite</li>
<li>RSS newsfeed</li>
<li>Project organization (deck)</li>
<li>Notebook</li>
<li>Calender</li>
<li>Task manager</li>
<li>Connect to decentralized social media (like Mastodon)</li>
<li>Replacement for all of google&rsquo;s services</li>
<li>Create web forms or surveys</li>
</ul>
<p>It is also free and open source. This mean the source code is available to all. And hosting yourself means you can guarantee that your data isn&rsquo;t being shared.</p>
<p>As you can see. Nextcloud is feature packed and offers an all in one solution for many needs. The set up is fairly simple!</p>
<h3 id="install-dependencies">Install Dependencies</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo apt update </code></pre></div>
<h4 id="sury-dependencies">Sury Dependencies</h4>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo apt install software-properties-common ca-certificates lsb-release apt-transport-https </code></pre></div>
<h4 id="enable-sury-repository">Enable Sury Repository</h4>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo sh -c &#39;echo &#34;deb https://packages.sury.org/php/ $(lsb_release -sc) main&#34; &gt; /etc/apt/sources.list.d/php.list&#39; </code></pre></div>
<h4 id="import-the-gpg-key-for-the-repository">Import the GPG key for the repository</h4>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>wget -qO - https://packages.sury.org/php/apt.gpg | sudo apt-key add - </code></pre></div>
<h4 id="install-php-82">Install PHP 8.2</h4>
<p><a href="https://computingforgeeks.com/how-to-install-php-8-2-on-debian/?expand_article=1" rel="external" target="_blank">https://computingforgeeks.com/how-to-install-php-8-2-on-debian/?expand_article=1</a>
(This is also part of the other dependencies install command below)</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo apt install php8.2 </code></pre></div>
<h4 id="install-other-dependencies">Install other dependencies:</h4>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>apt install -y nginx python3-certbot-nginx mariadb-server php8.2 php8.2-{fpm,bcmath,bz2,intl,gd,mbstring,mysql,zip,xml,curl}</code></pre></div>
<h3 id="improving-nextcloud-server-performance">Improving Nextcloud server performance</h3>
<p>Adding more child processes for PHP to use:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>vim /etc/php/8.2/fpm/pool.d/www.conf

# update the following parameters in the file
pm = dynamic
pm.max_children = 120
pm.start_servers = 12
pm.min_spare_servers = 6
pm.max_spare_servers = 18</code></pre></div>
<h3 id="start-your-mariadb-server">Start your MariaDB server:</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>systemctl enable mariadb --now</code></pre></div>
<h3 id="set-up-a-sql-database">Set up a SQL Database</h3>
<p>Nextcloud needs some tables setup in order to store information in a database. First set up a secure sql database:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo mysql_secure_installation</code></pre></div>
<p>Say â€œYesâ€ to the prompts and enter root password:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>Switch to unix_socket authentication [Y/n]: Y
Change the root password? [Y/n]: Y	# enter password.
Remove anonymous users? [Y/n]: Y
Disallow root login remotely? [Y/n]: Y
Remove test database and access to it? [Y/n]: Y
Reload privilege tables now? [Y/n]: Y</code></pre></div>
<p>Sign in to your SQL database with the password you just chose:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>mysql -u root -p</code></pre></div>
<h3 id="creating-a-database-for-nextcloud">Creating a database for NextCloud</h3>
<p>While signed in with the mysql command, enter the commands below one at a time. Make sure to replace the username and password. But leave localhost as is:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>CREATE DATABASE nextcloud;
GRANT ALL ON nextcloud.* TO &#39;david&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;@Rfanext12!&#39;;
FLUSH PRIVILEGES;
EXIT;</code></pre></div>
<h3 id="install-ssl-with-certbot">Install SSL with Certbot</h3>
<p>Obtain an SSL certificate. See my <a href="https://perfectdarkmode.com/posts/2023/03/building-a-minimalist-website-with-hugo/" rel="external" target="_blank">website setup</a> post for information about Certbot and nginx setup.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>certbot certonly --nginx -d nextcloud.example.com</code></pre></div>
<h3 id="create-a-cname-record-for-dns">Create a CNAME record for DNS.</h3>
<p>You will need to have a domain name set up for your server. I use Cloudflare to manage my DNS records. You will want to make a CNAME record for your nextcloud subdomain.</p>
<p>Just add &ldquo;nextcloud&rdquo; as the name and &ldquo;yourwebsite.com&rdquo; as the content. This will make it so &ldquo;nextcloud.yourwebsite.com&rdquo;. Make sure to select &ldquo;DNS Only&rdquo; under proxy status.</p>
<h3 id="nginx-setup">Nginx Setup</h3>
<p>Edit your sites-available config at /etc/nginx/sites-available/nextcloud. See comments in the following text box:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>vim /etc/nginx/sites-available/nextcloud

# Add this to the file:
# replace example.org with your domain name
# use the following vim command to make this easier
# :%s/example.org/perfectdarkmode.com/g
# ^ this will replace all instances of example.org with perfectdarkmode.com. Replace with yur domain

upstream php-handler {
    server unix:/var/run/php/php8.2-fpm.sock;
    server 127.0.0.1:9000;
}
map $arg_v $asset_immutable {
    &#34;&#34; &#34;&#34;;
    default &#34;immutable&#34;;
}
server {
    listen 80;
    listen [::]:80;
    server_name nextcloud.example.org ;
    return 301 https://$server_name$request_uri;
}
server {
    listen 443      ssl http2;
    listen [::]:443 ssl http2;
    server_name nextcloud.example.org ;
    root /var/www/nextcloud;
    ssl_certificate     /etc/letsencrypt/live/nextcloud.example.org/fullchain.pem ;
    ssl_certificate_key /etc/letsencrypt/live/nextcloud.example.org/privkey.pem ;
    client_max_body_size 512M;
    client_body_timeout 300s;
    fastcgi_buffers 64 4K;
    gzip on;
    gzip_vary on;
    gzip_comp_level 4;
    gzip_min_length 256;
    gzip_proxied expired no-cache no-store private no_last_modified no_etag auth;
    gzip_types application/atom+xml application/javascript application/json application/ld+json application/manifest+json application/rss+xml application/vnd.geo+json application/vnd.ms-fontobject application/wasm application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/bmp image/svg+xml image/x-icon text/cache-manifest text/css text/plain text/vcard text/vnd.rim.location.xloc text/vtt text/x-component text/x-cross-domain-policy;
    client_body_buffer_size 512k;
    add_header Referrer-Policy                      &#34;no-referrer&#34;   always;
    add_header X-Content-Type-Options               &#34;nosniff&#34;       always;
    add_header X-Download-Options                   &#34;noopen&#34;        always;
    add_header X-Frame-Options                      &#34;SAMEORIGIN&#34;    always;
    add_header X-Permitted-Cross-Domain-Policies    &#34;none&#34;          always;
    add_header X-Robots-Tag                         &#34;none&#34;          always;
    add_header X-XSS-Protection                     &#34;1; mode=block&#34; always;
    fastcgi_hide_header X-Powered-By;
    index index.php index.html /index.php$request_uri;
    location = / {
        if ( $http_user_agent ~ ^DavClnt ) {
            return 302 /remote.php/webdav/$is_args$args;
        }
    }
    location = /robots.txt {
        allow all;
        log_not_found off;
        access_log off;
    }
    location ^~ /.well-known {
        location = /.well-known/carddav { return 301 /remote.php/dav/; }
        location = /.well-known/caldav  { return 301 /remote.php/dav/; }
        location /.well-known/acme-challenge    { try_files $uri $uri/ =404; }
        location /.well-known/pki-validation    { try_files $uri $uri/ =404; }
        return 301 /index.php$request_uri;
    }
    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)(?:$|/)  { return 404; }
    location ~ ^/(?:\.|autotest|occ|issue|indie|db_|console)                { return 404; }
    location ~ \.php(?:$|/) {
        # Required for legacy support
        rewrite ^/(?!index|remote|public|cron|core\/ajax\/update|status|ocs\/v[12]|updater\/.+|oc[ms]-provider\/.+|.+\/richdocumentscode\/proxy) /index.php$request_uri;
        fastcgi_split_path_info ^(.+?\.php)(/.*)$;
        set $path_info $fastcgi_path_info;
        try_files $fastcgi_script_name =404;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $path_info;
        fastcgi_param HTTPS on;
        fastcgi_param modHeadersAvailable true;
        fastcgi_param front_controller_active true;
        fastcgi_pass php-handler;
        fastcgi_intercept_errors on;
        fastcgi_request_buffering off;
        fastcgi_max_temp_file_size 0;
    }
    location ~ \.(?:css|js|svg|gif|png|jpg|ico|wasm|tflite|map)$ {
        try_files $uri /index.php$request_uri;
        add_header Cache-Control &#34;public, max-age=15778463, $asset_immutable&#34;;
        access_log off;     # Optional: Don&#39;t log access to assets
        location ~ \.wasm$ {
            default_type application/wasm;
        }
    }
    location ~ \.woff2?$ {
        try_files $uri /index.php$request_uri;
        expires 7d;
        access_log off;
    }
    location /remote {
        return 301 /remote.php$request_uri;
    }
    location / {
        try_files $uri $uri/ /index.php$request_uri;
    }
}</code></pre></div>
<h3 id="enable-the-site">Enable the site</h3>
<p>Create a link between the file you just made and /etc/nginx/sites-enabled</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ln -s /etc/nginx/sites-available/nextcloud /etc/nginx/sites-enabled/</code></pre></div>
<h3 id="install-nextcloud">Install Nextcloud</h3>
<p>Download the latest Nextcloud version. Then extract into /var/www/. Also, update the file&rsquo;s permissions to give nginx access:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>wget https://download.nextcloud.com/server/releases/latest.tar.bz2
tar -xjf latest.tar.bz2 -C /var/www
chown -R www-data:www-data /var/www/nextcloud
chmod -R 755 /var/www/nextcloud</code></pre></div>
<h3 id="start-and-enable-php-fpm-on-startup">Start and enable php-fpm on startup</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>&lt;systemctl enable php8.2fpm --now](&gt;&lt;--may not need this.
# Do need this-&gt;
sudo systemctl enable php8.2-fpm.service --now</code></pre></div>
<h3 id="reload-nginx">Reload nginx</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>systemctl reload nginx</code></pre></div>
<h3 id="nextcloud-occ-tool">Nextcloud occ tool</h3>
<p>Here is a built in Nextcloud tool just in case things break. Here is a <a href="https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/occ_command.html" rel="external" target="_blank">guide</a> on troubleshooting with occ. The basic command is as follows:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo -u www-data php /var/www/nextcloud/occ</code></pre></div>
<p>Add this as an alias in ~/.bashrc for ease of use.</p>
<h3 id="you-are-ready-to-log-in-to-nextcloud">You are ready to log in to Nextcloud!</h3>
<p>Go to your nextcloud domain in a browser. In my case, I head to nextcloud.perfectdarkmode.com. Fill out the form to create your first Nextcloud user:</p>
<ul>
<li>Choose an admin username and secure password.</li>
<li>Leave Data folder as the default value.</li>
<li>For Database user, enter the user you set for the SQL database.</li>
<li>For Database password, enter the password you chose for the new user in MariaDB.</li>
<li>For Database name, enter: nextcloud</li>
<li>Leave &ldquo;localhost&rdquo; as &ldquo;localhost&rdquo;.</li>
<li>Click Finish.</li>
</ul>
<p>Now that you are signed in. Here are a few things you can do to start you off:</p>
<ul>
<li>Download the desktop and mobile app and sync all of your data. (covered below)</li>
<li>Look at different apps to consolodate your programs all in one place.</li>
<li>Put the Nextcloud dashboard as your default browser homepage and customize themes.</li>
<li>Set up email integration.</li>
</ul>
<h3 id="nextcloud-desktop-synchronization">NextCloud desktop synchronization</h3>
<p>Install the desktop client (Fedora)</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>Sudo dnf install nextcloudclient</code></pre></div>
<p>Install on other distros: <a href="https://help.nextcloud.com/t/install-nextcloud-client-for-opensuse-arch-linux-fedora-ubuntu-based-android-ios/13657" rel="external" target="_blank">https://help.nextcloud.com/t/install-nextcloud-client-for-opensuse-arch-linux-fedora-ubuntu-based-android-ios/13657</a></p>
<ol>
<li>Run the nextcloud desktop app and sign in.</li>
<li>Choose folders to sync.</li>
<li>Folder will be ~/Nextcloud.</li>
<li>Move everything into your nextcloud folder.</li>
</ol>
<p>This may break things with filepaths so beware. Now you are ready to use and explore nextcloud. Here is a <a href="https://www.youtube.com/watch?v=j0APTeBFfSU" rel="external" target="_blank">video</a> from TechHut to get you started down the NextCloud rabbit hole.</p>
<h4 id="change-max-upload-size-default-is-500mg">Change max upload size (default is 500mg)</h4>
<p>/var/www/nextcloud/.user.ini
php_value upload_max_filesize = 16G
php_value post_max_size = 16G</p>
<h3 id="remove-file-locks">Remove file locks</h3>
<p>Put Nextcloud in maintenance mode: EditÂ <code>config/config.php</code>Â and change this line:<br>
<code>'maintenance' =&gt; true,</code></p>
<p>Empty tableÂ <code>oc_file_locks</code>: Use tools such as phpmyadmin or connect directly to your database and run (the default table prefix isÂ <code>oc_</code>, this prefix can be different or even empty):<br>
<code>DELETE FROM oc_file_locks WHERE 1</code></p>
<ul>
<li>disable maintenance mode (undo first step).</li>
<li>Make sure your cron-jobs run properly (you admin page tells you when cron ran the last time):Â <a href="https://docs.nextcloud.org/server/13/admin_manual/configuration_server/background_jobs_configuration.html" rel="external" target="_blank">https://docs.nextcloud.org/server/13/admin_manual/configuration_server/background_jobs_configuration.htmlÂ 2.7k</a></li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>mysql -u root -p
MariaDB [(none)]&gt; use nextcloud;
MariaDB [nextcloud]&gt; DELETE FROM oc_file_locks WHERE 1;

*figure out redis install if this happens regularly* [https://docs.nextcloud.org/server/13/admin_manual/configuration_server/caching_configuration.html#id4Â 9.1k](https://docs.nextcloud.org/server/13/admin_manual/configuration_server/caching_configuration.html#id4)</code></pre></div>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="using-vagrant-on-linux">Using Vagrant on Linux</h1>

<p>Vagrant is software that lets you set up multiple, pre-configured virtual machines in a flash. I am going to show you how to do this using Linux and Virtual Box. But you can do this on MacOS and Windows as well.</p>
<p>Download Vagrant, VirtualBox and Git.</p>
<p><a href="https://www.vagrantup.com/downloads" rel="external" target="_blank">Vagrant</a> link.</p>
<p><a href="https://www.virtualbox.org/wiki/Downloads" rel="external" target="_blank">Virtualbox</a> link.</p>
<p>You may want to follow another <a href="https://www.youtube.com/watch?v=8mns5yqMfZk" rel="external" target="_blank">tutorial</a> for setting up VirtualBox.</p>
<p><a href="https://git-scm.com/download/win" rel="external" target="_blank">Git</a> link.</p>
<p>Installing git will install ssh on windows. Which you will use to access your lab. Just make sure you select the option to add git and unit tools to your PATH variable.</p>
<p>Make a Vagrant project folder.</p>
<p>Note: All of these commands are going to be in a Bash command prompt.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir vagranttest</span></span></code></pre></div>
<p>Move in to your new directory.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">cd</span> vagranttest</span></span></code></pre></div>
<p>Add and Initialize Your Vagrant Project.</p>
<p>You can find preconfigured virtual machines <a href="https://app.vagrantup.com/boxes/search" rel="external" target="_blank">here</a>.</p>
<p>We are going to use ubuntu/trusty64.</p>
<p>Add the Vagrant box</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant box add ubuntu/trusty64</span></span></code></pre></div>
<p>Initialize your new Vagrant box</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant init ubuntu/trusty64</span></span></code></pre></div>
<p>Use the dir command to see the contents of this directory.</p>
<p>We are going to edit this Vagrantfile to set up our multiple configurations.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim Vagrantfile</span></span></code></pre></div>
<p>Here is the new config without all of the commented lines. Add this (minus the top line) under Vagrant.configure(&ldquo;2&rdquo;) do |config|.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Vagrant.configure<span style="color:#ff6ac1">(</span><span style="color:#5af78e">&#34;2&#34;</span><span style="color:#ff6ac1">)</span> <span style="color:#ff6ac1">do</span> |config|  
</span></span><span style="display:flex;"><span>Â  config.vm.box <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;ubuntu/trusty64&#34;</span>  
</span></span><span style="display:flex;"><span>Â  config.vm.define <span style="color:#5af78e">&#34;server1&#34;</span> <span style="color:#ff6ac1">do</span> |server1|  
</span></span><span style="display:flex;"><span>Â Â Â  server1.vm.hostname <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;server1&#34;</span>  
</span></span><span style="display:flex;"><span>Â Â Â  server1.vm.network <span style="color:#5af78e">&#34;private_network&#34;</span>, ip: <span style="color:#5af78e">&#34;10.1.1.2&#34;</span>  
</span></span><span style="display:flex;"><span>Â  end  
</span></span><span style="display:flex;"><span>Â  config.vm.define <span style="color:#5af78e">&#34;server2&#34;</span> <span style="color:#ff6ac1">do</span> |server2|  
</span></span><span style="display:flex;"><span>Â Â Â  server2.vm.hostname <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;server2&#34;</span>  
</span></span><span style="display:flex;"><span>Â Â Â  server2.vm.network <span style="color:#5af78e">&#34;private_network&#34;</span>, ip: <span style="color:#5af78e">&#34;10.1.1.3&#34;</span>  
</span></span><span style="display:flex;"><span>Â  end  
</span></span><span style="display:flex;"><span>end</span></span></code></pre></div>
<p>Now save your Vagrant file in Vim.</p>
<p>Bring up your selected vagrant boxes:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant up</span></span></code></pre></div>
<p>Now if you open virtual box, you should see the new machines running in headless mode. This means that the machines have no user interface..</p>
<p>Ssh into server1</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant ssh server1</span></span></code></pre></div>
<p>You are now in serve1&rsquo;s terminal.</p>
<p>From server1, ssh into server2</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh 10.1.1.3</span></span></code></pre></div>
<p>Success! You are now in server2 and can access both machines from your network. Just enter &ldquo;exit&rdquo; to return to the previous terminal.</p>
<p>Additional Helpful Vagrant Commands.</p>
<p>Without the machine name specified, vagrant commands will work on all virtual machines in your vagrant folder. I&rsquo;ve thrown in a couple examples using [machine-name] at the end.</p>
<p>Shut down Vagrant machines</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant halt</span></span></code></pre></div>
<p>Shut down only one machine</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant halt <span style="color:#ff6ac1">[</span>machine-name<span style="color:#ff6ac1">]</span></span></span></code></pre></div>
<p>Suspend and resume a machine</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant suspend</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant resume</span></span></code></pre></div>
<p>Restart a virtual machine</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant reload</span></span></code></pre></div>
<p>Destroy a virtual machine</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant detstroy <span style="color:#ff6ac1">[</span>machine-name<span style="color:#ff6ac1">]</span></span></span></code></pre></div>
<p>Show running vms</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant status</span></span></code></pre></div>
<p>List Vagrant options</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant</span></span></code></pre></div>
<p>Playground for future labs</p>
<p>This type of deployment is going to be the bedrock of many Linux and Red Hat labs. You can easily use pre-configured machines to create a multi-machine environment. This is also a quick way to test your network and server changes without damaging anything.</p>
<p>Now go set up a Vagrant lab yourself and let me know what you plan to do with it!</p>
<h2 id="what-is-vagrant">What is Vagrant?</h2>
<ul>
<li>Easy to configure, reproducible environments</li>
<li>Provisions virtualbox vms</li>
<li>Vagrant box: OS image</li>
</ul>
<p>Syntax:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant box add user/box</span></span></code></pre></div>
<p>Add centos7 box</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant box add jasonc/centos7</span></span></code></pre></div>
<p>Many public boxes to download</p>
<p>Vagrant project = folder with a vagrant file</p>
<p>Install Vagrant here: <a href="https://www.vagrantup.com/downloads" rel="external" target="_blank" title="https://www.vagrantup.com/downloads">https://www.vagrantup.com/downloads</a></p>
<p>Make a vagrant folder:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir vm1
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">cd</span> vm1</span></span></code></pre></div>
<p>initialize vagrant project:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant init jasonc/centos7</span></span></code></pre></div>
<p>bring up all vms defined in the vagrant file)</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant up</span></span></code></pre></div>
<p>vagrant will import the box into virtualbox and start it</p>
<p>the vm is started in headless mode</p>
<p>(there is no user interfaces)</p>
<p>Vagrant up / multi machine</p>
<p>Bring up only one specific vm</p>
<ul>
<li>vagrant up [vm-name]</li>
</ul>
<p>SSH Vagrant</p>
<ul>
<li>vagrant ssh [vm_name] or vagrant ssh if there is only one vm in the vagrant file</li>
</ul>
<p>Need to download ssh for windows</p>
<p>downloading git will install this:</p>
<p><a href="https://desktop.github.com/" rel="external" target="_blank" title="https://desktop.github.com/">https://desktop.github.com/</a></p>
<p>Shut down vagrant machines
<code>vagrant halt</code></p>
<p>Shutdown only one machine
<code>vagrant halt [vm]</code></p>
<p>Saves present state of the machine</p>
<p>just run vagrant up without having to import tha machines again</p>
<p>Suspend the machine
<code>vagrant suspend [VM]</code></p>
<p>Resume
<code>vagrant resume [VM]</code></p>
<p>Destroy VM
<code>vagrant destroy [VM]</code></p>
<p>List options
<code>vagrant</code></p>
<p>Vagrant command works on the vagrant folder that you are in</p>
<p>Vagrant File</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>Vagrant.configure (2) do | config |

config.vm.box = &#34;jasonc/centos7&#34;

config.vm.hostname = &#34;linuxsvr1&#34;

(default files)

config.vm.network &#34;private_network&#34;, ip: &#34;10.2.3.4&#34;

config.vm.provider &#34;virtualbox&#34; do | vbi

vb.gui = true

vb.memory = &#34;1024&#34;

(shell provisioner)

config.vm.provision &#34;shell&#34;, path: &#34;setup.sh&#34;

end

end</code></pre></div>
<p>Configuring a multi machine setup:</p>
<p>Specify common configurations at the top of the file</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>Vagrant.configure (2) do | config |

config.vm.box = &#34;jasonc/centos7&#34;

config.vm.define = &#34;server1&#34; do | server1 |

server1.vm.hostname = &#34;server1&#34;

server1.vm.network &#34;private_network&#34;, ip: &#34;10.2.3.4&#34;

end

config.vm.define = &#34;server2&#34; do | server2 |

server2.vm.hostname = &#34;server2&#34;

server2.vm.network &#34;private_network&#34;, ip: &#34;10.2.3.5&#34;

end

end</code></pre></div>
<p>You can search for vagrant boxes at <a href="https://app.vagrantup.com/boxes/search" rel="external" target="_blank" title="https://app.vagrantup.com/boxes/search">https://app.vagrantup.com/boxes/search</a></p>
<p>Course software downloads: <a href="http://mirror.linuxtrainingacademy.com/" rel="external" target="_blank" title="http://mirror.linuxtrainingacademy.com/">http://mirror.linuxtrainingacademy.com/</a></p>
<p>Install Git: <a href="https://git-scm.com/download/win" rel="external" target="_blank" title="https://git-scm.com/download/win">https://git-scm.com/download/win</a></p>
<ul>
<li>make sure to check option for git and unit tools to be added to the PATH</li>
</ul>
<p><code>vagrant ssh</code></p>
<ul>
<li>to connect to the vagrant machine in the folder that you are in</li>
<li>default password in vagrant</li>
<li>tyoe &rsquo;exit to return to  prompt</li>
</ul>
<p><code>vagrant halt</code></p>
<ul>
<li>stop the vm and save it&rsquo;s current state</li>
</ul>
<p><code>vagrant reload</code></p>
<ul>
<li>restarts the vm</li>
</ul>
<p><code>vagrant status</code></p>
<ul>
<li>shows running vms in that folder</li>
</ul>
<p>You can access files in the vagrant directory from both VMs</p>
<h2 id="example-rhel8-config">Example RHEL8 Config</h2>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Vagrant.configure<span style="color:#ff6ac1">(</span><span style="color:#5af78e">&#34;2&#34;</span><span style="color:#ff6ac1">)</span> <span style="color:#ff6ac1">do</span> |config|
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>config.vm.box <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;generic/rhel8&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>config.vm.define <span style="color:#5af78e">&#34;server1&#34;</span> <span style="color:#ff6ac1">do</span> |server1|
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>server1.vm.hostname <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;server1.example.com&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>server1.vm.network <span style="color:#5af78e">&#34;private_network&#34;</span>, ip: <span style="color:#5af78e">&#34;192.168.1.110&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>config.disksize.size <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#39;10GB&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>end
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>config.vm.define <span style="color:#5af78e">&#34;server2&#34;</span> <span style="color:#ff6ac1">do</span> |server2|
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>server2.vm.hostname <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;server2.example.com&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>server2.vm.network <span style="color:#5af78e">&#34;private_network&#34;</span>, ip: <span style="color:#5af78e">&#34;192.168.1.120&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>config.disksize.size <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#39;16GB&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>end
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>config.vm.provider <span style="color:#5af78e">&#34;virtualbox&#34;</span> <span style="color:#ff6ac1">do</span> |vb|
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>vb.memory <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;2048&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>end
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>end</span></span></code></pre></div>
<p>Plugin to change the disk size:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vagrant plugin install vagrant-disksize</span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="vim-guide">Vim Guide</h1>

<p>Vim (Vi Improved)</p>
<p><code>Vim</code> stands for vi (Improved) just like its name it stands for an improved version of the <code>vi</code> text editor command.</p>
<p>Lightweight</p>
<p>Start Vim</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim</span></span></code></pre></div>
<h2 id="vim-search-patterns">Vim Search Patterns</h2>
<h3 id="moving-the-cursor">Moving the Cursor</h3>
<p>h or left arrow - move left one character
k or up arrow - move up one line
j or down arrow - move down one line
l or right arrow - will move you right one character</p>
<h3 id="different-vim-modes">Different Vim Modes</h3>
<p>I -  Enter INSERT mode from command mode
esc - Go back to command mode
v - visual mode</p>
<h2 id="vim-appending-text">Vim Appending Text</h2>
<p>In enter while in command mode and will bring you to insert mode.</p>
<p>I - insert text before the cursor
O - insert text on the previous line
o - insert text on the next line
a - append text after cursor
A - append text at the end of the line</p>
<h2 id="vim-editing">Vim editing</h2>
<p>x - used to cut the selected text also used for deleting characters
dd - used to delete the current line
y - yank or copy whatever is selected
yy - yank or copy the current line
p - paste the copied text before the cursor</p>
<h2 id="vim-saving-and-exiting">Vim Saving and exiting</h2>
<p>:w - writes or saves the file
:q - quit out of vim
:wq - write and then quit
:q! - quit out of vim without saving the file
ZZ - equivalent of :wq, but one character faster</p>
<p>u - undo your last action
Ctrl-r - redo your last action
:% sort - Sort lines</p>
<h1 id="vim-splits">Vim Splits</h1>
<p>Add to .vimrc for different key mappings for easy navigation between splits to save a keystroke. So instead ofÂ <code>ctrl-w</code>Â thenÂ <code>j</code>, itâ€™s justÂ <code>ctrl-j</code>:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>nnoremap &lt;C-J&gt; &lt;C-W&gt;&lt;C-J&gt; 
nnoremap &lt;C-K&gt; &lt;C-W&gt;&lt;C-K&gt; 
nnoremap &lt;C-L&gt; &lt;C-W&gt;&lt;C-L&gt; 
nnoremap &lt;C-H&gt; &lt;C-W&gt;&lt;C-H&gt;</code></pre></div>
<h1 id="open-file-in-new-split">Open file in new split</h1>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>:vsp filename</code></pre></div>
<p><a href="https://github.com/preservim/nerdtree" rel="external" target="_blank">https://github.com/preservim/nerdtree</a></p>
<h2 id="find-and-replace">Find and Replace</h2>
<p><a href="https://linuxize.com/post/vim-find-replace/" rel="external" target="_blank">https://linuxize.com/post/vim-find-replace/</a></p>
<h1 id="find-and-replace-text-in-files-with-vim">Find and Replace Text in File(s) with Vim</h1>
<h2 id="find-and-replace-in-a-single-file">Find and replace in a single file</h2>
<p>Open the file in Vim, this command will replace all occurances of the word &ldquo;foo&rdquo; with &ldquo;bar&rdquo;.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>:%s/foo/bar/g</code></pre></div>
<p>% - apply to whole file
s  - substitution
g - operate on all results</p>
<h2 id="find-and-replace-a-string-in-all-files-in-current-directory">Find and replace a string in all files in current directory</h2>
<p>In vim, select all files with args. Use regex to select the files you want. Select all files with *</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>:args *</code></pre></div>
<p>You can also select all recursively:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>:args **</code></pre></div>
<p>Run :args to see which files are selected&quot;</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>:args</code></pre></div>
<h3 id="perform-substitution-with-argdo">Perform substitution with argdo</h3>
<p>This applies the replacement command to all selected args:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>:argdo %s/foo/bar/g | update</code></pre></div>
<h1 id="nerd-tree-plugin">Nerd Tree Plugin</h1>
<p>Add to .vimrc</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>call plug#begin()
Plug &#39;preservim/nerdtree&#39;

call plug#end()

nnoremap &lt;leader&gt;n :NERDTreeFocus&lt;CR&gt;
nnoremap &lt;C-n&gt; :NERDTree&lt;CR&gt;
nnoremap &lt;C-t&gt; :NERDTreeToggle&lt;CR&gt;
nnoremap &lt;C-f&gt; :NERDTreeFind&lt;CR&gt;</code></pre></div>
<h2 id="vim-calendar">Vim Calendar</h2>
<p>dhttps://blog.mague.com/?p=602</p>
<p>Add to vim.rc</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>:auto FileType vim/wiki map d :Vim/wikiMakeDiaryNote
function! ToggleCalendar()
  execute &#34;:Calendar&#34;
  if exists(&#34;g:calendar_open&#34;)
    if g:calendar_open == 1
      execute &#34;q&#34;
      unlet g:calendar_open
    else
      g:calendar_open = 1
    end
  else
    let g:calendar_open = 1
  end
endfunction
:auto FileType vim/wiki map c :call ToggleCalendar()i</code></pre></div>
<h2 id="vimwiki">Vimwiki</h2>
<h2 id="cheat-sheet">Cheat sheet</h2>
<p><a href="http://thedarnedestthing.com/vimwiki%20cheatsheet" rel="external" target="_blank">http://thedarnedestthing.com/vimwiki%20cheatsheet</a></p>
<h3 id="set-up">Set up</h3>
<p>Make sure git is installed? <a href="https://github.com/git-guides/install-git" rel="external" target="_blank" title="https://github.com/git-guides/install-git">https://github.com/git-guides/install-git</a></p>
<h3 id="check-git-version">Check git version</h3>
<p><code>git --version</code> Check git version</p>
<h3 id="dnf-git-install">dnf git install</h3>
<p>sudo dnf install git-all</p>
<p><a href="https://github.com/junegunn/vim-plug" rel="external" target="_blank" title="https://github.com/junegunn/vim-plug">https://github.com/junegunn/vim-plug</a></p>
<p>Download plug.vim and put it in ~/.vim/autoload</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</code></pre></div>
<h3 id="create-vimrc">Create ~/.vimrc</h3>
<p><code>touch ~/.vimrc</code></p>
<h3 id="add-to-vimrc">Add to ~/.vimrc</h3>
<h4 id="installation-using-vim-plug">Installation using <a href="https://github.com/junegunn/vim-plug" rel="external" target="_blank" title="https://github.com/junegunn/vim-plug">Vim-Plug</a></h4>
<p>Install Vim Plug</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>curl -fLo ~/.vim/autoload/plug.vim --create-dirs \https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</code></pre></div>
<p>Add the following to the plugin-configuration in your vimrc:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>set nocompatible  
filetype plugin on  
syntax on

call plug#begin()  
Plug &#39;vimwiki/vimwiki&#39;

call plug#end()

let mapleader=&#34; &#34;  
let wiki_1 = {}  
let wiki_1.path = &#39;~/Documents/PerfectDarkMode/&#39;  
let wiki_1.syntax = &#39;markdown&#39;  
let wiki_1.ext = &#39;&#39;  
let wiki_2 = {}  
let wiki_2.path = &#39;~/Documents/vim/wiki_personal/&#39;  
let wiki_2.syntax = &#39;markdown&#39;  
let wiki_2.ext = &#39;&#39;  
let g:vimwiki_list = [wiki_1, wiki_2]  </code></pre></div>
<p>Then run <code>:PlugInstall</code>.</p>
<p>(leader)ws
select which wiki to use</p>
<h2 id="basic-markup">Basic Markup</h2>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>= Header1 =
== Header2 ==
=== Header3 ===


*bold* -- bold text
_italic_ -- italic text

[wiki link](wiki%20link) -- wiki link
[description](wiki%20link) -- wiki link with description </code></pre></div>
<h3 id="lists"><a href="https://github.com/vim/wiki/vim/wiki#lists" rel="external" target="_blank" title="https://github.com/vim/wiki/vim/wiki#lists"></a>Lists</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>* bullet list item 1
    - bullet list item 2
    - bullet list item 3
        * bullet list item 4
        * bullet list item 5
* bullet list item 6
* bullet list item 7
    - bullet list item 8
    - bullet list item 9

1. numbered list item 1
2. numbered list item 2
    a) numbered list item 3
    b) numbered list item 4 </code></pre></div>
<p>For other syntax elements, see <code>:h vimwiki-syntax</code></p>
<h3 id="vimwiki-table-of-contents">Vimwiki Table of Contents</h3>
<p><em>:VimwikiTOC</em>
Create or update the Table of Contents for the current wiki file.
See |vimwiki-toc|.</p>
<p>Table of Contents                    <em>vimwiki-toc</em> <em>vimwiki-table-of-contents</em></p>
<p>You can create a &ldquo;table of contents&rdquo; at the top of your wiki file.
The command |:VimwikiTOC| creates the magic header &gt;
= Contents =
in the current file and below it a list of all the headers in this file as
links, so you can directly jump to specific parts of the file.</p>
<p>For the indentation of the list, the value of |vimwiki-option-list_margin| is
used.</p>
<p>If you don&rsquo;t want the TOC to sit in the very first line, e.g. because you have
a modeline there, put the magic header in the second or third line and run
:VimwikiTOC to update the TOC.</p>
<p>If English is not your preferred language, set the option
|g:vimwiki_toc_header| to your favorite translation.</p>
<p>If you want to keep the TOC up to date automatically, use the option
|vimwiki-option-auto_toc|.</p>
<p>vimwiki-option-auto_toc</p>
<p>Key             Default value     Values~
auto_toc        0                 0, 1</p>
<p>Description~
Set this option to 1 to automatically update the table of contents when the
current wiki page is saved: &gt;
let g:vimwiki_list = [{&lsquo;path&rsquo;: &lsquo;~/my_site/&rsquo;, &lsquo;auto_toc&rsquo;: 1}]</p>
<p><em>vimwiki-option-list_margin</em></p>
<p>Key               Default value~
list_margin       -1 (0 for markdown)</p>
<p>Description~
Width of left-hand margin for lists.  When negative, the current &lsquo;shiftwidth&rsquo;
is used.  This affects the appearance of the generated links (see
|:VimwikiGenerateLinks|), the Table of contents (|vimwiki-toc|) and the
behavior of the list manipulation commands |:VimwikiListChangeLvl| and the
local mappings |vimwiki_glstar|, |vimwiki_gl#| |vimwiki_gl-|, |vimwiki_gl-|,
|vimwiki_gl1|, |vimwiki_gla|, |vimwiki_glA|, |vimwiki_gli|, |vimwiki_glI| and
|vimwiki_i_<!-- raw HTML omitted -->_<!-- raw HTML omitted -->|.</p>
<p>Note: if you use Markdown or MediaWiki syntax, you probably would like to set
this option to 0, because every indented line is considered verbatim text.</p>
<p><em>g:vimwiki_toc_header_level</em></p>
<p>The header level of the Table of Contents (see |vimwiki-toc|). Valid values
are from 1 to 6.</p>
<p>The default is 1.</p>
<p><em>g:vimwiki_toc_link_format</em></p>
<p>The format of the links in the Table of Contents (see |vimwiki-toc|).</p>
<p>Value           Description~
0               Extended: The link contains the description and URL. URL
references all levels.
1               Brief: The link contains only the URL. URL references only
the immediate level.</p>
<p>Default: 0</p>
<h2 id="key-bindings">Key bindings</h2>
<h3 id="normal-mode"><a href="https://github.com/vim/wiki/vim/wiki#normal-mode" rel="external" target="_blank" title="https://github.com/vim/wiki/vim/wiki#normal-mode"></a>Normal mode</h3>
<p><strong>Note:</strong> your terminal may prevent capturing some of the default bindings listed below. See <code>:h vimwiki-local-mappings</code> for suggestions for alternative bindings if you encounter a problem.</p>
<h4 id="basic-key-bindings"><a href="https://github.com/vim/wiki/vim/wiki#basic-key-bindings" rel="external" target="_blank" title="https://github.com/vim/wiki/vim/wiki#basic-key-bindings"></a>Basic key bindings</h4>
<ul>
<li><code>&lt;Leader&gt;ww</code> &ndash; Open default /wiki index file.</li>
<li><code>&lt;Leader&gt;wt</code> &ndash; Open default /wiki index file in a new tab.</li>
<li><code>&lt;Leader&gt;ws</code> &ndash; Select and open /wiki index file.</li>
<li><code>&lt;Leader&gt;wd</code> &ndash; Delete /wiki file you are in.</li>
<li><code>&lt;Leader&gt;wr</code> &ndash; Rename /wiki file you are in.</li>
<li><code>&lt;Enter&gt;</code> &ndash; Follow/Create /wiki link.</li>
<li><code>&lt;Shift-Enter&gt;</code> &ndash; Split and follow/create /wiki link.</li>
<li><code>&lt;Ctrl-Enter&gt;</code> &ndash; Vertical split and follow/create /wiki link.</li>
<li><code>&lt;Backspace&gt;</code> &ndash; Go back to parent(previous) /wiki link.</li>
<li><code>&lt;Tab&gt;</code> &ndash; Find next /wiki link.</li>
<li><code>&lt;Shift-Tab&gt;</code> &ndash; Find previous /wiki link.</li>
</ul>
<h4 id="advanced-key-bindings"><a href="https://github.com/vim/wiki/vim/wiki#advanced-key-bindings" rel="external" target="_blank" title="https://github.com/vim/wiki/vim/wiki#advanced-key-bindings"></a>Advanced key bindings</h4>
<p>Refer to the complete documentation at <code>:h vimwiki-mappings</code> to see many more bindings.</p>
<h2 id="commands"><a href="https://github.com/vim/wiki/vim/wiki#commands" rel="external" target="_blank" title="https://github.com/vim/wiki/vim/wiki#commands"></a>Commands</h2>
<ul>
<li><code>:Vimwiki2HTML</code> &ndash; Convert current wiki link to HTML.</li>
<li><code>:VimwikiAll2HTML</code> &ndash; Convert all your wiki links to HTML.</li>
<li><code>:help vimwiki-commands</code> &ndash; List all commands.</li>
<li><code>:help vimwiki</code> &ndash; General vimwiki help docs.</li>
</ul>
<h1 id="diary">Diary</h1>
<h3 id="alias">alias</h3>
<p>alias todo=&lsquo;vim -c VimwikiDiaryIndex&rsquo;</p>
<h3 id="hotkeys">Hotkeys</h3>
<p>:VimwikiDiaryGenerateLinks
^w^i
Generate links
^w^w
open today
^wi
Open diary index
ctrl + up previous day
ctrl + down next day</p>
<ul>
<li>How to create Weekly, Monthly, and yearly notes</li>
<li>How to do a template for daily</li>
<li>set folder location for diary</li>
</ul>
<h3 id="diary-template">Diary Template</h3>
<p><a href="https://frostyx.cz/posts/vimwiki-diary-template" rel="external" target="_blank">https://frostyx.cz/posts/vimwiki-diary-template</a></p>
<h1 id="nested-folder-structure">Nested folder structure</h1>
<p>[dev](dev/ndex)</p>
<p>Say yes to make new directory</p>
<h1 id="wiki">wiki</h1>
<p>Convert to html live and shows some design stuff
<a href="https://www.youtube.com/watch?v=A1YgbAp5YRc" rel="external" target="_blank">https://www.youtube.com/watch?v=A1YgbAp5YRc</a></p>
<p><a href="https://github.com/Dynalonwiki" rel="external" target="_blank">https://github.com/Dynalonwiki</a></p>
<h1 id="taskwarrior">Taskwarrior</h1>
<p><a href="https://www.youtube.com/watch?v=UuHJloiDErM" rel="external" target="_blank">https://www.youtube.com/watch?v=UuHJloiDErM</a>
requires neovim?</p>
<h2 id="taskwiki">taskwiki</h2>
<p>vimwiki integration with task warrior
<a href="https://github.com/tools-life/taskwiki" rel="external" target="_blank">https://github.com/tools-life/taskwiki</a>
<a href="https://www.youtube.com/watch?v=UuHJloiDErM" rel="external" target="_blank">https://www.youtube.com/watch?v=UuHJloiDErM</a></p>
<h1 id="ctrl-p">Ctrl P</h1>
<h2 id="install">Install</h2>
<p>Plug &lsquo;ctrlpvim/ctrlp.vim&rsquo;</p>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="you-need-to-learn-man-pages">You Need to Learn Man Pages</h1>

<p><a href="https://www.youtube.com/watch?v=RzAkjX_9B7E&t=295s" rel="external" target="_blank">https://www.youtube.com/watch?v=RzAkjX_9B7E&t=295s</a></p>
<p>Man (manual) pages are the built in help system for Linux. They contain documentation for most commands.</p>
<p>Run the <code>man</code> command on a command to get to it&rsquo;s man page.
<code>man man</code></p>
<p><strong>Navigating a man page</strong>
<code>h</code></p>
<ul>
<li>Get help</li>
</ul>
<p><code>q</code></p>
<ul>
<li>Quit out of the man page</li>
</ul>
<p>Man uses less</p>
<p>^ mean ctrl</p>
<p>^f Forward one page</p>
<p>^b backward one page</p>
<p>can use # followed by command to repeat that many times</p>
<p>g first line in file</p>
<p>G last line in file</p>
<p>CR means press enter</p>
<h2 id="searching">Searching</h2>
<p>/searchword</p>
<p>press enter to jump first occurance of searched word</p>
<p>n to jump to next match</p>
<p>N to go to previous match</p>
<p>?searchword to do a backward search (n and N are reversed when going through results)</p>
<h2 id="man-page-conventions">Man page conventions</h2>
<p><strong>bold text</strong> type as shown</p>
<p><em>italic text</em> replace with arguments</p>
<ul>
<li>Italic may not render in terminal and may be underlined or colored text instead.</li>
</ul>
<p>[-abc] optional</p>
<p>-a | -b Options separated by a pipe symbol cannot be used together.</p>
<p><!-- raw HTML omitted -->argument<!-- raw HTML omitted --> &hellip; (followed by 3 dots) can be repeated. (Argument is repeatable)</p>
<p><!-- raw HTML omitted -->[expression]<!-- raw HTML omitted --> &hellip; entire expression within [ ] is repeatable.</p>
<h2 id="parts-of-a-man-page">Parts of a man page</h2>
<p><strong>Name</strong></p>
<ul>
<li>name of command</li>
</ul>
<p><strong>Synopsis</strong></p>
<ul>
<li>How to use the command</li>
</ul>
<p>When you see file in a man page, think file and or directory</p>
<p><strong>Description</strong>
short and long options do the same thing
<a href="#R-image-8aaf9338b9554d7e2bd4615b2b46b583" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240709211540.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8aaf9338b9554d7e2bd4615b2b46b583"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240709211540.png"></a></p>
<p>Current section number is printed at the top left of the man page.</p>
<p>-k to search sections using apropos</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># man -k unlink</span>
</span></span><span style="display:flex;"><span>mq_unlink <span style="color:#ff6ac1">(</span>2<span style="color:#ff6ac1">)</span>        - remove a message queue
</span></span><span style="display:flex;"><span>mq_unlink <span style="color:#ff6ac1">(</span>3<span style="color:#ff6ac1">)</span>        - remove a message queue
</span></span><span style="display:flex;"><span>mq_unlink <span style="color:#ff6ac1">(</span>3p<span style="color:#ff6ac1">)</span>       - remove a message queue <span style="color:#ff6ac1">(</span>REALT...
</span></span><span style="display:flex;"><span>sem_unlink <span style="color:#ff6ac1">(</span>3<span style="color:#ff6ac1">)</span>       - remove a named semaphore
</span></span><span style="display:flex;"><span>sem_unlink <span style="color:#ff6ac1">(</span>3p<span style="color:#ff6ac1">)</span>      - remove a named semaphore
</span></span><span style="display:flex;"><span>shm_open <span style="color:#ff6ac1">(</span>3<span style="color:#ff6ac1">)</span>         - create/open or unlink POSIX s...
</span></span><span style="display:flex;"><span>shm_unlink <span style="color:#ff6ac1">(</span>3<span style="color:#ff6ac1">)</span>       - create/open or unlink POSIX s...
</span></span><span style="display:flex;"><span>shm_unlink <span style="color:#ff6ac1">(</span>3p<span style="color:#ff6ac1">)</span>      - remove a shared memory object...
</span></span><span style="display:flex;"><span>unlink <span style="color:#ff6ac1">(</span>1<span style="color:#ff6ac1">)</span>           - call the unlink <span style="color:#ff6ac1">function</span> to r...
</span></span><span style="display:flex;"><span>unlink <span style="color:#ff6ac1">(</span>1p<span style="color:#ff6ac1">)</span>          - call theunlink<span style="color:#ff6ac1">()</span> <span style="color:#ff6ac1">function</span>
</span></span><span style="display:flex;"><span>unlink <span style="color:#ff6ac1">(</span>2<span style="color:#ff6ac1">)</span>           - delete a name and possibly th...
</span></span><span style="display:flex;"><span>unlink <span style="color:#ff6ac1">(</span>3p<span style="color:#ff6ac1">)</span>          - remove a directory entry
</span></span><span style="display:flex;"><span>unlinkat <span style="color:#ff6ac1">(</span>2<span style="color:#ff6ac1">)</span>         - delete a name and possibly th...<span style="color:#ff6ac1">]</span></span></span></code></pre></div>
<p>Shows page number in ()</p>
<p>The sections that end in p are POSIX documentation. Theese are not specific to Linux.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># man -k &#34;man pages&#34;</span>
</span></span><span style="display:flex;"><span>lexgrog <span style="color:#ff6ac1">(</span>1<span style="color:#ff6ac1">)</span>          - parse header information in man pages
</span></span><span style="display:flex;"><span>man <span style="color:#ff6ac1">(</span>7<span style="color:#ff6ac1">)</span>              - macros to format man pages
</span></span><span style="display:flex;"><span>man-pages <span style="color:#ff6ac1">(</span>7<span style="color:#ff6ac1">)</span>        - conventions <span style="color:#ff6ac1">for</span> writing Linux man pages
</span></span><span style="display:flex;"><span>man.man-pages <span style="color:#ff6ac1">(</span>7<span style="color:#ff6ac1">)</span>    - macros to format man pages
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># man man-pages</span></span></span></code></pre></div>
<p>Use man-pages to learn more about man pages</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Sections within a manual page
</span></span><span style="display:flex;"><span>       The list below shows conventional or suggested sections.  Most manual
</span></span><span style="display:flex;"><span>       pages should include at least the highlighted  sections.   Arrange  a
</span></span><span style="display:flex;"><span>       new manual page so that sections are placed in the order shown in the
</span></span><span style="display:flex;"><span>       list.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>              NAME
</span></span><span style="display:flex;"><span>              LIBRARY          <span style="color:#ff6ac1">[</span>Normally only in Sections 2, 3<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>              SYNOPSIS
</span></span><span style="display:flex;"><span>              CONFIGURATION    <span style="color:#ff6ac1">[</span>Normally only in Section 4<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>              DESCRIPTION
</span></span><span style="display:flex;"><span>              OPTIONS          <span style="color:#ff6ac1">[</span>Normally only in Sections 1, 8<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>              EXIT STATUS      <span style="color:#ff6ac1">[</span>Normally only in Sections 1, 8<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>              RETURN VALUE     <span style="color:#ff6ac1">[</span>Normally only in Sections 2, 3<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>              ERRORS           <span style="color:#ff6ac1">[</span>Typically only in Sections 2, 3<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>              ENVIRONMENT
</span></span><span style="display:flex;"><span>              FILES
</span></span><span style="display:flex;"><span>              ATTRIBUTES       <span style="color:#ff6ac1">[</span>Normally only in Sections 2, 3<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>              VERSIONS         <span style="color:#ff6ac1">[</span>Normally only in Sections 2, 3<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>              STANDARDS
</span></span><span style="display:flex;"><span>              HISTORY
</span></span><span style="display:flex;"><span>              NOTES
</span></span><span style="display:flex;"><span>              CAVEATS
</span></span><span style="display:flex;"><span>              BUGS
</span></span><span style="display:flex;"><span>              EXAMPLES
</span></span><span style="display:flex;"><span>              AUTHORS          <span style="color:#ff6ac1">[</span>Discouraged<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>              REPORTING BUGS   <span style="color:#ff6ac1">[</span>Not used in man-pages<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>              COPYRIGHT        <span style="color:#ff6ac1">[</span>Not used in man-pages<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>              SEE ALSO</span></span></code></pre></div>
<p>Shell builtins do not have man pages. Look at the shell man page for info on them.
<code>man bash</code></p>
<p>Search for the Shell Builtins section:
<code>/SHELL BUILTIN COMMANDS</code></p>
<p><a href="#R-image-0f04f1222cad9859f3f7dfa69683a473" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240710050240.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0f04f1222cad9859f3f7dfa69683a473"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240710050240.png"></a></p>
<p>You can find help on builtins with the help command:
<a href="#R-image-5afac235adc10ae76f892951f8d2fc9d" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240710050536.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5afac235adc10ae76f892951f8d2fc9d"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240710050536.png"></a></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>david@fedora:~$ <span style="color:#ff5c57">help</span> <span style="color:#ff5c57">hash</span>
</span></span><span style="display:flex;"><span>hash: <span style="color:#ff5c57">hash</span> <span style="color:#ff6ac1">[</span>-lr<span style="color:#ff6ac1">]</span> <span style="color:#ff6ac1">[</span>-p pathname<span style="color:#ff6ac1">]</span> <span style="color:#ff6ac1">[</span>-dt<span style="color:#ff6ac1">]</span> <span style="color:#ff6ac1">[</span>name ...<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>    Remember or display program locations.
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Determine and remember the full pathname of each <span style="color:#ff5c57">command</span> NAME.  If
</span></span><span style="display:flex;"><span>    no arguments are given, information about remembered commands is displayed.
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Options:
</span></span><span style="display:flex;"><span>      -d	forget the remembered location of each NAME
</span></span><span style="display:flex;"><span>      -l	display in a format that may be reused as input
</span></span><span style="display:flex;"><span>      -p pathname	use PATHNAME as the full pathname of NAME
</span></span><span style="display:flex;"><span>      -r	forget all remembered locations
</span></span><span style="display:flex;"><span>      -t	print the remembered location of each NAME, preceding
</span></span><span style="display:flex;"><span>    		each location with the corresponding NAME <span style="color:#ff6ac1">if</span> multiple
</span></span><span style="display:flex;"><span>    		NAMEs are given
</span></span><span style="display:flex;"><span>    Arguments:
</span></span><span style="display:flex;"><span>      NAME	Each NAME is searched <span style="color:#ff6ac1">for</span> in <span style="color:#ff5c57">$PATH</span> and added to the list
</span></span><span style="display:flex;"><span>    		of remembered commands.
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Exit Status:
</span></span><span style="display:flex;"><span>    Returns success unless NAME is not found or an invalid option is given.</span></span></code></pre></div>
<p><code>help</code> without any arguments displays commands you can get help on.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>david@fedora:~/Documents/davidvargas/davidvargasxyz.github.io$ <span style="color:#ff5c57">help</span> <span style="color:#ff5c57">help</span>
</span></span><span style="display:flex;"><span>help: <span style="color:#ff5c57">help</span> <span style="color:#ff6ac1">[</span>-dms<span style="color:#ff6ac1">]</span> <span style="color:#ff6ac1">[</span>pattern ...<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>    Display information about <span style="color:#ff5c57">builtin</span> commands.
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Displays brief summaries of <span style="color:#ff5c57">builtin</span> commands.  If PATTERN is
</span></span><span style="display:flex;"><span>    specified, gives detailed <span style="color:#ff5c57">help</span> on all commands matching PATTERN,
</span></span><span style="display:flex;"><span>    otherwise the list of <span style="color:#ff5c57">help</span> topics is printed.
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Options:
</span></span><span style="display:flex;"><span>      -d	output short description <span style="color:#ff6ac1">for</span> each topic
</span></span><span style="display:flex;"><span>      -m	display usage in pseudo-manpage format
</span></span><span style="display:flex;"><span>      -s	output only a short usage synopsis <span style="color:#ff6ac1">for</span> each topic matching
</span></span><span style="display:flex;"><span>    		PATTERN
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Arguments:
</span></span><span style="display:flex;"><span>      PATTERN	Pattern specifying a <span style="color:#ff5c57">help</span> topic
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Exit Status:
</span></span><span style="display:flex;"><span>    Returns success unless PATTERN is not found or an invalid option is given.</span></span></code></pre></div>
<p><code>type</code> command tells you what type of command something is.</p>
<p>Using man on some shell builtins brings you to the bash man page Shell Builtin Section</p>
<p>Many commands support <code>-h</code> or <code>--help</code> options to get quick info on a command.</p>

  <footer class="footline">
  </footer>
</article>
          </section>
        </div>
      </main>
    </div>
    <script>
      window.MathJax = Object.assign( window.MathJax || {}, {
        tex: {
          inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
          displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        },
        options: {
          enableMenu: false 
        }
      }, JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/js-yaml/js-yaml.min.js?1762527413" defer></script>
    <script src="/js/d3/d3-color.min.js?1762527413" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1762527413" defer></script>
    <script src="/js/d3/d3-drag.min.js?1762527413" defer></script>
    <script src="/js/d3/d3-ease.min.js?1762527413" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1762527413" defer></script>
    <script src="/js/d3/d3-selection.min.js?1762527413" defer></script>
    <script src="/js/d3/d3-timer.min.js?1762527413" defer></script>
    <script src="/js/d3/d3-transition.min.js?1762527413" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1762527413" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.relearn.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/clipboard/clipboard.min.js?1762527413" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1762527413" defer></script>
    <script src="/js/theme.min.js?1762527413" defer></script>
  </body>
</html>
