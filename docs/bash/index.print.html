<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.152.2">
    <meta name="generator" content="Relearn 8.2.0+d150cc8909ed7836ff5d545e76544f6923ffacf5">
    <meta name="description" content="BashContainersDesktopPackagesBashShell Scripting">
    <meta name="author" content="David Thomas">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Bash :: Linux Reader">
    <meta name="twitter:description" content="BashContainersDesktopPackagesBashShell Scripting">
    <meta property="og:url" content="http://linuxreader.com/bash/">
    <meta property="og:site_name" content="Linux Reader">
    <meta property="og:title" content="Bash :: Linux Reader">
    <meta property="og:description" content="BashContainersDesktopPackagesBashShell Scripting">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="Bash :: Linux Reader">
    <meta itemprop="description" content="BashContainersDesktopPackagesBashShell Scripting">
    <meta itemprop="wordCount" content="7">
    <title>Bash :: Linux Reader</title>
    <link href="http://linuxreader.com/bash/" rel="canonical" type="text/html" title="Bash :: Linux Reader">
    <link href="/bash/index.xml" rel="alternate" type="application/rss+xml" title="Bash :: Linux Reader">
    <link href="/images/favicon.svg?1763752405" rel="icon" type="image/svg+xml">
    <link href="/css/auto-complete/auto-complete.min.css?1763752405" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1763752405" defer></script>
    <script src="/js/search-lunr.min.js?1763752405" defer></script>
    <script src="/js/search.min.js?1763752405" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1763752405";
    </script>
    <script src="/js/lunr/lunr.min.js?1763752405" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1763752405" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1763752405" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1763752405" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1763752405" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1763752405" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1763752405" rel="stylesheet">
    <link href="/css/theme.min.css?1763752405" rel="stylesheet">
    <link href="/css/format-print.min.css?1763752405" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/bash\/';
      window.relearn.relBasePath='..';
      window.relearn.relBaseUri='..';
      window.relearn.absBaseUri='http:\/\/linuxreader.com';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'oled' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script><style>
:root {
    --MENU-WIDTH-S: 14.375rem;
    --MENU-WIDTH-M: 14.375rem;
    --MENU-WIDTH-L: 18.75rem;
    --MAIN-WIDTH-MAX: 80rem;
    font-size: 1.2rem;
}
</style>

  </head>
  <body class="mobile-support print" data-url="/bash/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/ansible/variables/" title="Variables (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"> 
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            Bash
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/bash/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/bash/bash/" title="Bash (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>







          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable bash" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="bash">Bash</h1>

<div class="children children-type-card children-sort-"><ul class="card-container">
<li>
  <article class="card card-popout" aria-labelledby="R-card-7024ff0860dec6ab1519a3f71c7d8779">
    <div class="card-content">
      <div class="card-title" id="R-card-7024ff0860dec6ab1519a3f71c7d8779">
        <a href="/bash/bash/">
        Bash
        </a>
      </div>
    </div>
    <div class="card-image">
        <img src="images/bash.png">
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-5382aaf8b3d2fdeb6717f9805b0dd511">
    <div class="card-content">
      <div class="card-title" id="R-card-5382aaf8b3d2fdeb6717f9805b0dd511">
        <a href="/bash/containers/">
        Containers
        </a>
      </div>
    </div>
    <div class="card-image">
        <img src="images/containers.png">
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-2310408a63388fe57e3a4177168a8798">
    <div class="card-content">
      <div class="card-title" id="R-card-2310408a63388fe57e3a4177168a8798">
        <a href="/bash/desktop/">
        Desktop
        </a>
      </div>
    </div>
    <div class="card-image">
        <img src="images/desktop.png">
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-27fe4eb3edbaff8f250e2d51f7462681">
    <div class="card-content">
      <div class="card-title" id="R-card-27fe4eb3edbaff8f250e2d51f7462681">
        <a href="/bash/packages/">
        Packages
        </a>
      </div>
    </div>
    <div class="card-image">
        <img src="images/packages.png">
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-7024ff0860dec6ab1519a3f71c7d8779">
    <div class="card-content">
      <div class="card-title" id="R-card-7024ff0860dec6ab1519a3f71c7d8779">
        <a href="/bash/bash-shell/">
        Bash
        </a>
      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-5747bb5ca0970da50e5d49fc0773fec0">
    <div class="card-content">
      <div class="card-title" id="R-card-5747bb5ca0970da50e5d49fc0773fec0">
        <a href="/bash/shell-scripting/">
        Shell Scripting
        </a>
      </div>
    </div>
  </article>
</li>
</ul>
</div>

  <footer class="footline">
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Bash</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="bash">Bash</h1>

<div class="children children-type-card children-sort-"><ul class="card-container">
<li>
  <article class="card card-popout" aria-labelledby="R-card-7024ff0860dec6ab1519a3f71c7d8779">
    <div class="card-content">
      <div class="card-title" id="R-card-7024ff0860dec6ab1519a3f71c7d8779">
        <a href="/bash/bash/bash-shell/">
        Bash
        </a>
      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-5747bb5ca0970da50e5d49fc0773fec0">
    <div class="card-content">
      <div class="card-title" id="R-card-5747bb5ca0970da50e5d49fc0773fec0">
        <a href="/bash/bash/shell-scripting/">
        Shell Scripting
        </a>
      </div>
    </div>
  </article>
</li>
</ul>
</div>

  <footer class="footline">
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Bash</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="bash">Bash</h1>

<h2 id="my-name-is-marcel-and-im-partially-a-shell">My name is Marcel and I&rsquo;m partially a shell..</h2>
<p><a href="#R-image-1f9e4484ecce3991d2ca87b822d40207" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020250316051144.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1f9e4484ecce3991d2ca87b822d40207"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020250316051144.png"></a></p>
<p>A shell is a program that takes commands and passes them to the operating system.^1^ This is done via <strong>terminal emulator</strong> with keyboard commands or by using scripts ran on the system. There are many shell programs that you can use on Linux. Almost all Linux distributions come with a shell called <strong>Bash</strong>. Some others include <strong>zsh</strong>, <strong>fsh</strong>, <strong>ksh</strong>, and <strong>Tcsh</strong>. (But not limited to)</p>
<p>Shells have different features such as built in commands, job control, alias definitions, history substitution, PATH searching, command completion, and more. Each shell has it&rsquo;s own syntax, hotkeys, way of doing things. Most of them follow a standard called &ldquo;POSIX&rdquo; that help with script portability between shells.</p>
<p>You can see a list of more shells and a comparison of their features on this <a href="https://en.wikipedia.org/wiki/Comparison_of_command_shells" rel="external" target="_blank">Wikipedia page</a>.</p>
<h2 id="terminator-emulators">Terminator emulators..</h2>
<p><a href="#R-image-7805086ec0a86f058d515e627dd161db" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020250316051955.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7805086ec0a86f058d515e627dd161db"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020250316051955.png"></a></p>
<p>I meant Terminal Emulators! Silly me..</p>
<p>The <strong>Current shell</strong></p>
<ul>
<li>Where a program is executed.</li>
</ul>
<p><strong>Sub-shell (child shell)</strong></p>
<ul>
<li>created within a shell to run a program.</li>
</ul>
<p>There are two types of variables. <strong>Local variables</strong> are private variables to the shell that creates it. And they are only used by programs started in the shell that created them. <strong>Environment variables</strong> are passed to any sub-shells created by the current shell. As well as any programs ran in the current and sub shells.</p>
<pre><code>- Value stored in an environment variable is accessible to the program, as well as any sub-programs that it spawns during its lifecycle. 
- Any environment variable set in a sub-shell is lost when the sub-shell terminates.
- `env` or the `printenv` command to view predefined environment variables.
- Common predefined environment variables:
	- **DISPLAY** 
		- Stores the hostname or IP address for graphical terminal sessions 
	- **HISTFILE** 
		- Defines the file for storing the history of executed commands 
	- **HISTSIZE** 
		- Defines the maximum size for the HISTFILE 
	- **HOME** 
		- Sets the home directory path LOGNAME Retains the login name 
	- **MAIL** 
		- Contains the path to the user mail directory
	- **PATH** 
		- Directories to be searched when executing a command. Eliminates the need to specify the absolute path of a command to run it. 
	- **PPID** 
		- Holds the identifier number for the parent program 
	- **PS1** 
		- Defines the primary command prompt PS2 Defines the secondary command prompt 
	- **PWD** 
		- Stores the current directory location 
	- **SHELL** 
		- Holds the absolute path to the primary primary shell file
	- **TERM** 
		- Holds the terminal type value 
	- **UID** 
		- Holds the logged-in user‚Äôs UID 
	- **USER** 
		- Retains the name of the logged-in user
</code></pre>
<h3 id="setting-and-unsetting-variables">Setting and unsetting variables</h3>
<ul>
<li><code>export</code>, <code>unset</code>, and <code>echo</code> to define and undefine environment variables</li>
<li>Use uppercase for variables</li>
</ul>
<h3 id="echo-command">echo command</h3>
<ul>
<li>Restricted to showing the value of a specific variable</li>
</ul>
<h3 id="env-command">env command</h3>
<ul>
<li>Displays the environment variables only.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># env</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SHELL</span><span style="color:#ff6ac1">=</span>/bin/bash
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">HISTCONTROL</span><span style="color:#ff6ac1">=</span>ignoredups
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">HISTSIZE</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1000</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">HOSTNAME</span><span style="color:#ff6ac1">=</span>localhost
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">PWD</span><span style="color:#ff6ac1">=</span>/root
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">LOGNAME</span><span style="color:#ff6ac1">=</span>root
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">XDG_SESSION_TYPE</span><span style="color:#ff6ac1">=</span>tty
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">MOTD_SHOWN</span><span style="color:#ff6ac1">=</span>pam
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">HOME</span><span style="color:#ff6ac1">=</span>/root
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">LANG</span><span style="color:#ff6ac1">=</span>en_US.UTF-8
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">LS_COLORS</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">rs</span><span style="color:#ff6ac1">=</span>0:di<span style="color:#ff6ac1">=</span>01;34:ln<span style="color:#ff6ac1">=</span>01;36:mh<span style="color:#ff6ac1">=</span>00:pi<span style="color:#ff6ac1">=</span>40;33:so<span style="color:#ff6ac1">=</span>01;35:do<span style="color:#ff6ac1">=</span>01;35:bd<span style="color:#ff6ac1">=</span>40;33;01:cd<span style="color:#ff6ac1">=</span>40;33;01:or<span style="color:#ff6ac1">=</span>40;31;01:mi<span style="color:#ff6ac1">=</span>01;37;41:su<span style="color:#ff6ac1">=</span>37;41:sg<span style="color:#ff6ac1">=</span>30;43:ca<span style="color:#ff6ac1">=</span>30;41:tw<span style="color:#ff6ac1">=</span>30;42:ow<span style="color:#ff6ac1">=</span>34;42:st<span style="color:#ff6ac1">=</span>37;44:ex<span style="color:#ff6ac1">=</span>01;32:*.tar<span style="color:#ff6ac1">=</span>01;31:*.tgz<span style="color:#ff6ac1">=</span>01;31:*.arc<span style="color:#ff6ac1">=</span>01;31:*.arj<span style="color:#ff6ac1">=</span>01;31:*.taz<span style="color:#ff6ac1">=</span>01;31:*.lha<span style="color:#ff6ac1">=</span>01;31:*.lz4<span style="color:#ff6ac1">=</span>01;31:*.lzh<span style="color:#ff6ac1">=</span>01;31:*.lzma<span style="color:#ff6ac1">=</span>01;31:*.tlz<span style="color:#ff6ac1">=</span>01;31:*.txz<span style="color:#ff6ac1">=</span>01;31:*.tzo<span style="color:#ff6ac1">=</span>01;31:*.t7z<span style="color:#ff6ac1">=</span>01;31:*.zip<span style="color:#ff6ac1">=</span>01;31:*.z<span style="color:#ff6ac1">=</span>01;31:*.dz<span style="color:#ff6ac1">=</span>01;31:*.gz<span style="color:#ff6ac1">=</span>01;31:*.lrz<span style="color:#ff6ac1">=</span>01;31:*.lz<span style="color:#ff6ac1">=</span>01;31:*.lzo<span style="color:#ff6ac1">=</span>01;31:*.xz<span style="color:#ff6ac1">=</span>01;31:*.zst<span style="color:#ff6ac1">=</span>01;31:*.tzst<span style="color:#ff6ac1">=</span>01;31:*.bz2<span style="color:#ff6ac1">=</span>01;31:*.bz<span style="color:#ff6ac1">=</span>01;31:*.tbz<span style="color:#ff6ac1">=</span>01;31:*.tbz2<span style="color:#ff6ac1">=</span>01;31:*.tz<span style="color:#ff6ac1">=</span>01;31:*.deb<span style="color:#ff6ac1">=</span>01;31:*.rpm<span style="color:#ff6ac1">=</span>01;31:*.jar<span style="color:#ff6ac1">=</span>01;31:*.war<span style="color:#ff6ac1">=</span>01;31:*.ear<span style="color:#ff6ac1">=</span>01;31:*.sar<span style="color:#ff6ac1">=</span>01;31:*.rar<span style="color:#ff6ac1">=</span>01;31:*.alz<span style="color:#ff6ac1">=</span>01;31:*.ace<span style="color:#ff6ac1">=</span>01;31:*.zoo<span style="color:#ff6ac1">=</span>01;31:*.cpio<span style="color:#ff6ac1">=</span>01;31:*.7z<span style="color:#ff6ac1">=</span>01;31:*.rz<span style="color:#ff6ac1">=</span>01;31:*.cab<span style="color:#ff6ac1">=</span>01;31:*.wim<span style="color:#ff6ac1">=</span>01;31:*.swm<span style="color:#ff6ac1">=</span>01;31:*.dwm<span style="color:#ff6ac1">=</span>01;31:*.esd<span style="color:#ff6ac1">=</span>01;31:*.jpg<span style="color:#ff6ac1">=</span>01;35:*.jpeg<span style="color:#ff6ac1">=</span>01;35:*.mjpg<span style="color:#ff6ac1">=</span>01;35:*.mjpeg<span style="color:#ff6ac1">=</span>01;35:*.gif<span style="color:#ff6ac1">=</span>01;35:*.bmp<span style="color:#ff6ac1">=</span>01;35:*.pbm<span style="color:#ff6ac1">=</span>01;35:*.pgm<span style="color:#ff6ac1">=</span>01;35:*.ppm<span style="color:#ff6ac1">=</span>01;35:*.tga<span style="color:#ff6ac1">=</span>01;35:*.xbm<span style="color:#ff6ac1">=</span>01;35:*.xpm<span style="color:#ff6ac1">=</span>01;35:*.tif<span style="color:#ff6ac1">=</span>01;35:*.tiff<span style="color:#ff6ac1">=</span>01;35:*.png<span style="color:#ff6ac1">=</span>01;35:*.svg<span style="color:#ff6ac1">=</span>01;35:*.svgz<span style="color:#ff6ac1">=</span>01;35:*.mng<span style="color:#ff6ac1">=</span>01;35:*.pcx<span style="color:#ff6ac1">=</span>01;35:*.mov<span style="color:#ff6ac1">=</span>01;35:*.mpg<span style="color:#ff6ac1">=</span>01;35:*.mpeg<span style="color:#ff6ac1">=</span>01;35:*.m2v<span style="color:#ff6ac1">=</span>01;35:*.mkv<span style="color:#ff6ac1">=</span>01;35:*.webm<span style="color:#ff6ac1">=</span>01;35:*.webp<span style="color:#ff6ac1">=</span>01;35:*.ogm<span style="color:#ff6ac1">=</span>01;35:*.mp4<span style="color:#ff6ac1">=</span>01;35:*.m4v<span style="color:#ff6ac1">=</span>01;35:*.mp4v<span style="color:#ff6ac1">=</span>01;35:*.vob<span style="color:#ff6ac1">=</span>01;35:*.qt<span style="color:#ff6ac1">=</span>01;35:*.nuv<span style="color:#ff6ac1">=</span>01;35:*.wmv<span style="color:#ff6ac1">=</span>01;35:*.asf<span style="color:#ff6ac1">=</span>01;35:*.rm<span style="color:#ff6ac1">=</span>01;35:*.rmvb<span style="color:#ff6ac1">=</span>01;35:*.flc<span style="color:#ff6ac1">=</span>01;35:*.avi<span style="color:#ff6ac1">=</span>01;35:*.fli<span style="color:#ff6ac1">=</span>01;35:*.flv<span style="color:#ff6ac1">=</span>01;35:*.gl<span style="color:#ff6ac1">=</span>01;35:*.dl<span style="color:#ff6ac1">=</span>01;35:*.xcf<span style="color:#ff6ac1">=</span>01;35:*.xwd<span style="color:#ff6ac1">=</span>01;35:*.yuv<span style="color:#ff6ac1">=</span>01;35:*.cgm<span style="color:#ff6ac1">=</span>01;35:*.emf<span style="color:#ff6ac1">=</span>01;35:*.ogv<span style="color:#ff6ac1">=</span>01;35:*.ogx<span style="color:#ff6ac1">=</span>01;35:*.aac<span style="color:#ff6ac1">=</span>01;36:*.au<span style="color:#ff6ac1">=</span>01;36:*.flac<span style="color:#ff6ac1">=</span>01;36:*.m4a<span style="color:#ff6ac1">=</span>01;36:*.mid<span style="color:#ff6ac1">=</span>01;36:*.midi<span style="color:#ff6ac1">=</span>01;36:*.mka<span style="color:#ff6ac1">=</span>01;36:*.mp3<span style="color:#ff6ac1">=</span>01;36:*.mpc<span style="color:#ff6ac1">=</span>01;36:*.ogg<span style="color:#ff6ac1">=</span>01;36:*.ra<span style="color:#ff6ac1">=</span>01;36:*.wav<span style="color:#ff6ac1">=</span>01;36:*.oga<span style="color:#ff6ac1">=</span>01;36:*.opus<span style="color:#ff6ac1">=</span>01;36:*.spx<span style="color:#ff6ac1">=</span>01;36:*.xspf<span style="color:#ff6ac1">=</span>01;36:
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SSH_CONNECTION</span><span style="color:#ff6ac1">=</span>192.168.0.233 <span style="color:#ff9f43">56990</span> 192.168.0.169 <span style="color:#ff9f43">22</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">XDG_SESSION_CLASS</span><span style="color:#ff6ac1">=</span>user
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SELINUX_ROLE_REQUESTED</span><span style="color:#ff6ac1">=</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">TERM</span><span style="color:#ff6ac1">=</span>xterm-256color
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">LESSOPEN</span><span style="color:#ff6ac1">=||</span>/usr/bin/lesspipe.sh %s
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">USER</span><span style="color:#ff6ac1">=</span>root
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SELINUX_USE_CURRENT_RANGE</span><span style="color:#ff6ac1">=</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SHLVL</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">XDG_SESSION_ID</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">XDG_RUNTIME_DIR</span><span style="color:#ff6ac1">=</span>/run/user/0
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SSH_CLIENT</span><span style="color:#ff6ac1">=</span>192.168.0.233 <span style="color:#ff9f43">56990</span> <span style="color:#ff9f43">22</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">which_declare</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">declare</span> -f
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">PATH</span><span style="color:#ff6ac1">=</span>/root/.local/bin:/root/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SELINUX_LEVEL_REQUESTED</span><span style="color:#ff6ac1">=</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">DBUS_SESSION_BUS_ADDRESS</span><span style="color:#ff6ac1">=</span>unix:path<span style="color:#ff6ac1">=</span>/run/user/0/bus
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">MAIL</span><span style="color:#ff6ac1">=</span>/var/spool/mail/root
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SSH_TTY</span><span style="color:#ff6ac1">=</span>/dev/pts/0
</span></span><span style="display:flex;"><span>BASH_FUNC_which%%<span style="color:#ff6ac1">=()</span> <span style="color:#ff6ac1">{</span>  <span style="color:#ff6ac1">(</span> alias;
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">eval</span> <span style="color:#5af78e">${</span><span style="color:#ff5c57">which_declare</span><span style="color:#5af78e">}</span> <span style="color:#ff6ac1">)</span> | /usr/bin/which --tty-only --read-alias --read-functions --show-tilde --show-dot <span style="color:#ff5c57">$@</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">_</span><span style="color:#ff6ac1">=</span>/usr/bin/env
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">OLDPWD</span><span style="color:#ff6ac1">=</span>/dev/vg200</span></span></code></pre></div>
<h3 id="printenv-command">printenv command</h3>
<ul>
<li>Displays the environment variables only.</li>
</ul>
<h3 id="set-command">set command</h3>
<ul>
<li>View both local and environment variables.</li>
</ul>
<h3 id="command-and-variable-substitutions">Command and Variable substitutions</h3>
<ul>
<li>PS1 Environment variable sets what the prompt looks like.</li>
<li>Default value is \u@\h \W\$
<ul>
<li>\u
<ul>
<li>logged-in user name</li>
</ul>
</li>
<li>\h
<ul>
<li>System hostname</li>
</ul>
</li>
<li>\W
<ul>
<li>Working directory</li>
</ul>
</li>
<li>\$
<ul>
<li>End of command prompt</li>
</ul>
</li>
</ul>
</li>
<li>Command whose output you want assigned to a variable must be encapsulated within either backticks <code>hostname</code> or parentheses $(hostname).</li>
</ul>
<h2 id="input-output-and-error-redirections">Input, Output, and Error Redirections</h2>
<ul>
<li>Input, output, and error character streams:
<ul>
<li><strong>standard input (or stdin)</strong>
<ul>
<li>Input redirection</li>
<li>&lt;</li>
</ul>
</li>
<li><strong>standard output (or stdout)</strong>
<ul>
<li>
<blockquote>
</blockquote>
</li>
<li>
<blockquote>
<blockquote>
</blockquote>
</blockquote>
<ul>
<li>Append instead of overwrite</li>
</ul>
</li>
<li>&amp;&gt;
<ul>
<li>Redirect standard error and output</li>
</ul>
</li>
</ul>
</li>
<li><strong>standard error (or stderr)</strong>
<ul>
<li>2&gt;</li>
</ul>
</li>
</ul>
</li>
<li>File descriptors:
<ul>
<li>0, 1, and 2
<ul>
<li>1
<ul>
<li>Represents standard output location</li>
</ul>
</li>
</ul>
</li>
<li>Can use these to represent character streams instead of &lt;, and &gt;</li>
</ul>
</li>
<li><strong>noclobber</strong> feature
<ul>
<li>prevent overwriting of the output file</li>
<li><code>set -o noclobber</code>
<ul>
<li>activates the feature</li>
</ul>
</li>
<li><code>set +o noclobber</code>
<ul>
<li>deactivate the feature</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim test.txt</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># set -o noclobber</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo &#34;Hello&#34; &gt; test.txt</span>
</span></span><span style="display:flex;"><span>-bash: test.txt: cannot overwrite existing file
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># set +o noclobber</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo &#34;Hello&#34; &gt; test.txt</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat test.txt</span>
</span></span><span style="display:flex;"><span>Hello</span></span></code></pre></div>
<h2 id="history-substitution">History Substitution</h2>
<ul>
<li>Command history or history expansion.</li>
<li>Can disable and re-enable if required.</li>
<li>Values may be altered for individual users by editing <em>.bashrc</em> or <em>.bash_profile</em> in the user&rsquo;s home directory.</li>
<li>Three variables
<ul>
<li><strong>HISTFILE</strong>
<ul>
<li>Defines the name and location of the history file to be used to store command history,</li>
<li>Default is .bash_history in the user‚Äôs home directory.</li>
</ul>
</li>
<li><strong>HISTSIZE</strong>
<ul>
<li>Size of the history buffer for the current shell.</li>
</ul>
</li>
<li><strong>HISTFILESIZE</strong>
<ul>
<li>Sets the maximum number of commands allowed for storage in the history file at the beginning of the current session and are written to the HISTFILE from memory at the end of the current terminal session.</li>
<li>Usually, HISTSIZE and HISTFILESIZE are set to a common value.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="history-command"><code>history</code> command</h3>
<ul>
<li>Displays or reruns previously executed commands.</li>
<li>Gets the history data from the system memory as well as from the .bash_history file.</li>
<li>Shows all entries by default.</li>
<li><code>set +o history</code>
<ul>
<li>disable history expansion</li>
</ul>
</li>
<li><code>set -o history</code>
<ul>
<li>re-enable history expansion</li>
</ul>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># set +o history</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># history | tail </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">126</span>  ls
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">127</span>  vim test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">128</span>  <span style="color:#ff5c57">set</span> -o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">129</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">130</span>  <span style="color:#ff5c57">set</span> +o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">131</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">132</span>  cat test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">133</span>  <span style="color:#ff5c57">history</span> | tail 
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">134</span>  <span style="color:#ff5c57">set</span> +0 <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">135</span>  <span style="color:#ff5c57">set</span> +o <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim test2.txt</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># history | tail </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">126</span>  ls
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">127</span>  vim test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">128</span>  <span style="color:#ff5c57">set</span> -o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">129</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">130</span>  <span style="color:#ff5c57">set</span> +o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">131</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">132</span>  cat test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">133</span>  <span style="color:#ff5c57">history</span> | tail 
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">134</span>  <span style="color:#ff5c57">set</span> +0 <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">135</span>  <span style="color:#ff5c57">set</span> +o <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># set -o history</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim test2.txt</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># history | tail </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">128</span>  <span style="color:#ff5c57">set</span> -o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">129</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">130</span>  <span style="color:#ff5c57">set</span> +o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">131</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">132</span>  cat test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">133</span>  <span style="color:#ff5c57">history</span> | tail 
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">134</span>  <span style="color:#ff5c57">set</span> +0 <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">135</span>  <span style="color:#ff5c57">set</span> +o <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">136</span>  vim test2.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">137</span>  <span style="color:#ff5c57">history</span> | tail </span></span></code></pre></div>
<p>Add timestamps to history output system wide:
<code>echo &quot;export HISTTIMEFORMAT='%F %T '&quot; &gt;&gt; /etc/profile &amp;&amp; source /etc/profile</code></p>
<h2 id="editing-at-the-command-line">Editing at the Command line</h2>
<h3 id="common-key-combinations">Common key combinations:</h3>
<ul>
<li><strong>Ctrl+a / Home</strong>
<ul>
<li>Moves the cursor to the beginning of the command line</li>
</ul>
</li>
<li><strong>Ctrl+e / End</strong>
<ul>
<li>Moves the cursor to the end of the command line</li>
</ul>
</li>
<li><strong>Ctrl+u</strong>
<ul>
<li>Erase everything at and before cursor</li>
</ul>
</li>
<li><strong>Ctrl+k</strong>
<ul>
<li>Erase Everything at cursor and after</li>
</ul>
</li>
<li><strong>Alt+f</strong>
<ul>
<li>Moves the cursor to the right one word at a time</li>
</ul>
</li>
<li><strong>Alt+b</strong>
<ul>
<li>Moves the cursor to the left one word at a time</li>
</ul>
</li>
<li><strong>Ctrl+f / Right arrow</strong>
<ul>
<li>Moves the cursor to the right one character at a time</li>
</ul>
</li>
<li><strong>Ctrl+b / Left arrow</strong>
<ul>
<li>Moves the cursor to the left one character at a time</li>
</ul>
</li>
</ul>
<h3 id="tab-completion">Tab completion</h3>
<ul>
<li>Hitting the Tab key twice automatically completes the entire name.</li>
<li>In case of multiple possibilities matching the entered characters, it completes up to the point they have in common and prints the rest of the possibilities on the screen.</li>
</ul>
<h3 id="tilde-substitution-tilde-expansion">Tilde Substitution (tilde expansion)</h3>
<ul>
<li>Performed on words that begin with the tilde character (~).
~
<ul>
<li>refers to user&rsquo;s home directory.</li>
</ul>
</li>
</ul>
<p>~+
- refers to current directory</p>
<p>~-
- Refers to previous working directory.</p>
<p>~USER
- Refers to specific user&rsquo;s home directory.</p>
<h3 id="alias-substitution-command-aliasing-or-alias">Alias Substitution (command aliasing or alias)</h3>
<ul>
<li>Define shortcuts for commands.</li>
<li>Bash shell includes several predefined aliases that are set during user login.</li>
<li>Shell gives precedent to an alias if an alias matches a command or program.
<ul>
<li>can still run the command without using the alias but preceding command with a backslash. \</li>
</ul>
</li>
</ul>
<h3 id="alias-command">alias command</h3>
<ul>
<li>Set an alias.</li>
<li>Internal shell command.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># alias</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">cp</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;cp -i&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">egrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;egrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">fgrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;fgrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">grep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;grep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> l.<span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;ls -d .* --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">ll</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;ls -l --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">ls</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;ls --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">mv</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;mv -i&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">rm</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;rm -i&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">xzegrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;xzegrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">xzfgrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;xzfgrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">xzgrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;xzgrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">zegrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;zegrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">zfgrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;zfgrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">zgrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;zgrep --color=auto&#39;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[root@localhost ~]# alias frog=&#39;pwd&#39;
[root@localhost ~]# frog
/root</code></pre></div>
<h3 id="unalias-command">unalias command</h3>
<ul>
<li>Unset an alias.</li>
<li>Internal shell command.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># unalias frog</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># frog</span>
</span></span><span style="display:flex;"><span>-bash: frog: <span style="color:#ff5c57">command</span> not found</span></span></code></pre></div>
<h2 id="metacharacters-and-wildcard">Metacharacters and Wildcard</h2>
<ul>
<li>Metacharacters
<ul>
<li>Special characters that possess special meaning to the shell.</li>
<li>Used in pattern matching (a.k.a. filename expansion or file globbing) and regular expressions.
<strong>dollar sign ($)</strong></li>
</ul>
</li>
<li>mark the end of a line</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>caret (^)</strong></p>
<ul>
<li>mark the beginning of a line</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>period (.)</strong></p>
<ul>
<li>Match a single position</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>asterisk (*)</strong></p>
<ul>
<li>used in pattern matching</li>
<li>wildcard character</li>
<li>Matches zero to an unlimited number of characters except for the leading period (.) in a hidden filename.</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>question mark (?)</strong></p>
<ul>
<li>Used in pattern matching</li>
<li>Wildcard character</li>
<li>Matches exactly one character except for the leading period in a hidden filename.</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>pipe (|)</strong></p>
<ul>
<li>Send the output of one command as input to the next.</li>
<li>Also used to define alternations in regular expressions.</li>
<li>Can use as many times in a command as you need. (pipeline)	- Can be used as an OR operator (alternation)
<ul>
<li>this|that|other</li>
</ul>
</li>
</ul>
<p><strong>angle brackets (&lt; &gt;)</strong></p>
<ul>
<li>Redirections</li>
</ul>
<p><strong>curly brackets ({})</strong></p>
<ul>
<li>Used in regular expressions</li>
<li>Match an element a specific number of times</li>
</ul>
<p><strong>square brackets ([])</strong></p>
<ul>
<li>Used in pattern matching</li>
<li>Wildcard character</li>
<li>Match either a set of characters or a range of characters for a single character position.</li>
<li>Order in which they are listed has no importance.</li>
<li>Range of characters must be specified in a proper sequence such as [a-z] or [0-9].</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>parentheses (())</strong></p>
<ul>
<li>Create a sub shell</li>
</ul>
<p><strong>plus (+)</strong></p>
<ul>
<li>Match a character one or more time</li>
</ul>
<p><strong>exclamation mark (!)</strong></p>
<ul>
<li>inverse matches</li>
</ul>
<p><strong>semicolon (;)</strong></p>
<ul>
<li>Run a second command after the ;</li>
</ul>
<h3 id="quoting-mechanisms">Quoting Mechanisms</h3>
<ul>
<li>Disable special meaning of metacharacters</li>
</ul>
<p><strong>Backslash (\)</strong></p>
<ul>
<li>Escape character</li>
<li>Cancel out a special character&rsquo;s meaning.</li>
</ul>
<p><strong>single quotation (‚Äò‚Äô)</strong></p>
<ul>
<li>Mask the meaning of all encapsulated special characters.</li>
</ul>
<p><strong>double quotation (‚Äú‚Äù)</strong></p>
<ul>
<li>Mask the meaning of all but the backslash (), dollar sign ($), and single quotes (‚Äò‚Äô).</li>
</ul>
<h3 id="regular-expressions-regexp-or-regex">Regular expressions (regexp or regex)</h3>
<ul>
<li>Text pattern or an expression that is matched against a string of characters in a file or supplied input in a search operation.</li>
<li>Pattern may include a single character, multiple random characters, a range of characters, word, phrase, or an entire sentence.</li>
<li>Any pattern containing one or more white spaces must be surrounded by quotation marks.</li>
</ul>
<h3 id="grep-command"><code>grep</code> command</h3>
<ul>
<li>Searches the contents of one or more text files or input supplied for a match.</li>
</ul>
<p>Flags
-i</p>
<ul>
<li>case insensitive search</li>
</ul>
<p>-n</p>
<ul>
<li>number the lines</li>
</ul>
<p>-v</p>
<ul>
<li>exclude these lines</li>
</ul>
<p>-w</p>
<ul>
<li>find an exact match for a word</li>
</ul>
<p>-E</p>
<ul>
<li>match one or the other</li>
</ul>
<p>-e</p>
<ul>
<li>-Use patterns for matching</li>
</ul>
<h2 id="jobs">Jobs</h2>
<ul>
<li>job
<ul>
<li>Process that is started in the background and controlled by the terminal where it is spawned.</li>
<li>Assigned a PID (process identifier) by the kernel and, additionally, a job ID by the shell.</li>
<li>Does not hold the terminal window where it is initiated.</li>
<li>Can run multiple job simultaneously.</li>
<li>Can be brought to foreground, returned to the background, suspended, or stopped.</li>
</ul>
</li>
<li>job control
<ul>
<li>management of multiple jobs within a shell environment</li>
</ul>
</li>
</ul>
<p>commands and control sequences for administering the jobs.</p>
<ul>
<li><code>jobs</code>
<ul>
<li>Shell built-in command</li>
<li>display jobs.</li>
</ul>
</li>
<li><code>bg </code>
<ul>
<li>Shell built-in command</li>
<li>Move a job to the background or restart a job in the background that was suspended with <code>Ctrl+z</code>.</li>
</ul>
</li>
<li><code>fg </code>
<ul>
<li>Shell built-in command</li>
<li>Move a job to the foreground</li>
</ul>
</li>
<li><code>Ctrl+z </code>
<ul>
<li>Suspends a foreground job and allows the terminal window to be used for other purposes</li>
</ul>
</li>
</ul>
<h3 id="jobs-command">jobs command</h3>
<p>output
plus sign (+)
- indicates the current background job
minus sign (-)
- signifies the previous job.
Stopped
- currently suspended
- can be signaled to continue their execution with bg or fg</p>
<h2 id="shell-startup-files">Shell Startup Files</h2>
<ul>
<li>Sourced by the shell following user authentication at the time of logging in and before the command prompt appears.</li>
<li>Aliases, functions, and scripts can be added to these files as well.</li>
<li>two types of startup files:
<ul>
<li><strong>system-wide</strong>
<ul>
<li>Set the general environment for all users at the time of their login to the system.</li>
<li>Located in the /etc directory</li>
<li>Maintained by the Linux admin.</li>
<li>System-wide startup files for bash shell users:
<ul>
<li><em>/etc/bashrc</em>
<ul>
<li>Defines functions and aliases, sets umask for user accounts with a non-login shell, establishes the command prompt, etc.</li>
<li>May include settings from the shell scripts located in the <em>/etc/profile.d</em> directory.</li>
</ul>
</li>
<li><em>/etc/profile</em>
<ul>
<li>Sets common environment variables such as <strong>PATH</strong>, <strong>USER</strong>, <strong>LOGNAME</strong>, <strong>MAIL</strong>, <strong>HOSTNAME</strong>, <strong>HISTSIZE</strong>, and <strong>HISTCONTROL</strong> for all users, establishes umask for user accounts with a login shell, processes the shell scripts located in the <em>/etc/profile.d</em> directory, and so on.</li>
</ul>
</li>
<li><em>/etc/profile.d</em>
<ul>
<li>Contains scripts for bash shell users that are executed by the <em>/etc/profile</em> file.</li>
<li>Files can be edited and updated.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>per-user</strong>
<ul>
<li>Override or modify system default definitions set by the system-wide startup files.</li>
<li>By default, two files, in addition to the <em>.bash_logout file</em>, are located in the skeleton directory <em>/etc/skel</em> and are copied into user home directories at the time of user creation.</li>
<li><em>.bashrc</em>
<ul>
<li>Defines functions and aliases. This file sources global definitions from the <em>/etc/bashrc</em> file.</li>
</ul>
</li>
<li><em>.bash_profile</em>
<ul>
<li>Sets environment variables and sources the <em>.bashrc</em> file to set functions and aliases.</li>
</ul>
</li>
<li><em>.gnome2/</em>
<ul>
<li>Directory that holds environment settings when GNOME desktop is started. Only available if GNOME is installed.</li>
</ul>
</li>
<li><em>.bash_logout</em>
<ul>
<li>Executed when the user leaves the shell or logs off.</li>
<li>May be customized</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Startup file order:
<ul>
<li><em>/etc/profile</em> &gt; <em>.bash_profile</em> &gt; <em>.bashrc</em> &gt; <em>/etc/bashrc</em></li>
</ul>
</li>
<li>Per user settings must be added to the appropriate file for persistence.</li>
</ul>
<h2 id="bash-labs">Bash Labs</h2>
<h3 id="lab-view-environment-variables">Lab: View environment variables</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>env
printenv</code></pre></div>
<h3 id="lab-viewing-environment-variable-values">Lab: Viewing Environment variable values</h3>
<ol>
<li>View the value for the PATH variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $PATH</code></pre></div>
<ol start="2">
<li>View the value for the HOME variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $HOME</code></pre></div>
<ol start="3">
<li>View the value for the SHELL variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $SHELL</code></pre></div>
<ol start="4">
<li>View the value for the TERM variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $TERM</code></pre></div>
<ol start="5">
<li>View the value for the PPID variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $PPID</code></pre></div>
<ol start="6">
<li>View the value for the PS1 variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $PS1</code></pre></div>
<ol start="7">
<li>View the value for the USER variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $USER</code></pre></div>
<h3 id="lab-setting-and-unsetting-variables">Lab: Setting and Unsetting Variables</h3>
<ol>
<li>Define a local variable called VR1:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>VR1=RHEL9</code></pre></div>
<ol start="2">
<li>View the value of VR1:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $VR1</code></pre></div>
<ol start="3">
<li>Type bash at the command prompt to enter a sub-shell and then run echo $VR1 to check whether the variable is visible in the sub-shell.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $VR1</code></pre></div>
<ol start="4">
<li>Exit out of the subshell:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>exit</code></pre></div>
<ol start="5">
<li>Turn VR1 into an environment variable:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>export VR1</code></pre></div>
<ol start="6">
<li>Type bash at the command prompt to enter a sub-shell and then run echo $VR1 to check whether the variable is visible in the sub-shell.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $VR1</code></pre></div>
<ol start="7">
<li>Undefine this variable and erase it from the shell environment:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>unset VR1</code></pre></div>
<ol start="8">
<li>Define a local variable that contains a value with one or more white spaces:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>VR2=&#34;I love RHEL 9&#34;</code></pre></div>
<ol start="9">
<li>Define and make the variable an environment variable at the same time:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>export VR3=&#34;I love RHEL 9&#34;</code></pre></div>
<ol start="10">
<li>View local and environment variables:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>set</code></pre></div>
<h3 id="lab-modify-primary-command-prompt">Lab: Modify Primary Command Prompt</h3>
<ol>
<li>Change the value of the variable PS1 to reflect the desired information:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>export PS1=&#34;&lt; $LOGNAME on $HOSTNAME in \$PWD &gt; &#34; </code></pre></div>
<ol start="2">
<li>Edit the .bash_profile file for user1 and define the value exactly as it was run in Step 1.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>vim .bash_profile</code></pre></div>
<ol start="3">
<li>Test by logging off as user1 and logging back in. The new command prompt will be displayed.</li>
</ol>
<h3 id="lab-redirecting-standard-input">Lab: Redirecting Standard Input</h3>
<ol>
<li>Have the cat command read the <em>/etc/redhat-release</em> file and display its content on the standard output (terminal screen):</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cat &lt; /etc/redhat-release</code></pre></div>
<h3 id="lab-redirecting-standard-output">Lab: Redirecting Standard Output</h3>
<ol>
<li>Direct the ls command output to a file called ls.out:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ls &gt; ls.out</code></pre></div>
<ol start="2">
<li>Do the same thing but using file descriptors:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ls 1&gt; ls.out</code></pre></div>
<ol start="3">
<li>Activate the noclobber feature then try the redirect feature again:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>set -o noclobber
ls &gt; ls.out</code></pre></div>
<ol start="4">
<li>Deactivate noclobber</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">set</span> +o noclobber</span></span></code></pre></div>
<ol start="5">
<li>Direct the ls command to append the output to the ls.out file instead of overwriting it:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls &gt;&gt; ls.out
</span></span><span style="display:flex;"><span>or
</span></span><span style="display:flex;"><span>ls 1&gt;&gt; ls.out</span></span></code></pre></div>
<h3 id="lab-redirecting-standard-error">Lab: Redirecting Standard Error</h3>
<ol>
<li>Direct the find command issued as a normal user to search for all occurrences of files by the name core in the entire directory tree and sends any error messages produced to /dev/null</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>find / -name core -print 2&gt; /dev/null</span></span></code></pre></div>
<ol start="2">
<li>Redirect both standard output and error:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /usr /cdr &amp;&gt; outerr.out
</span></span><span style="display:flex;"><span>or
</span></span><span style="display:flex;"><span>ls /usr /cdr 1&gt; outerr.out 2&gt;&amp;<span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#5af78e">\#</span> means to redirect file descriptor <span style="color:#ff9f43">1</span> to file outerr.out as well as to file descriptor 2.</span></span></code></pre></div>
<ol start="3">
<li>Same as above but append to file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /usr/cdr &amp;&gt;&gt; outerr.out</span></span></code></pre></div>
<h3 id="lab-show-history-variables">Lab: Show History Variables</h3>
<ol>
<li>View HISTFILE Variable:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#ff5c57">$HISTFILE</span></span></span></code></pre></div>
<ol start="2">
<li>View HISTSIZE variable:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#ff5c57">$HISTSIZE</span></span></span></code></pre></div>
<ol start="3">
<li>View HISTFILESIZE variable:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#ff5c57">$HISTFILESIZE</span></span></span></code></pre></div>
<h3 id="lab-history-command">Lab: History command</h3>
<ol>
<li>Rune history without any options:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>history</span></span></code></pre></div>
<ol start="2">
<li>Display 10 entries:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">history</span> <span style="color:#ff9f43">10</span></span></span></code></pre></div>
<ol start="3">
<li>Run the 15th command in history:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>!15</span></span></code></pre></div>
<ol start="4">
<li>re-execute the most recent occurrence of a command that started with a particular letter or series of letters (ch for example):</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>!ch</span></span></code></pre></div>
<ol start="5">
<li>Issue the most recent command that contained ‚Äúgrep‚Äù:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>!?grep?</span></span></code></pre></div>
<ol start="6">
<li>Remove entry 24 from history:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">history</span> -d <span style="color:#ff9f43">24</span></span></span></code></pre></div>
<ol start="7">
<li>Repeat the last command executed:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>!!</span></span></code></pre></div>
<h3 id="lab-tilde-expansion">Lab: Tilde expansion</h3>
<ol>
<li>Display user&rsquo;s home directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> ~</span></span></code></pre></div>
<ol start="2">
<li>Display the current directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> ~+</span></span></code></pre></div>
<ol start="3">
<li>Display the previous working directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> ~-</span></span></code></pre></div>
<ol start="4">
<li>Display user1&rsquo;s home directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> ~user1</span></span></code></pre></div>
<ol start="5">
<li>cd into the home directory of user1 and confirm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">cd</span> ~user1
</span></span><span style="display:flex;"><span>pwd</span></span></code></pre></div>
<ol start="6">
<li>cd into a subdirectory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">cd</span> ~/Documents/</span></span></code></pre></div>
<ol start="7">
<li>View directory information of the root user&rsquo;s desktop:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -ld ~root/Desktop</span></span></code></pre></div>
<h3 id="lab-command-aliasing">Lab: Command Aliasing</h3>
<ol>
<li>shows all aliases that are currently set for user1:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>su - user1
</span></span><span style="display:flex;"><span>alias</span></span></code></pre></div>
<ol start="2">
<li>Run alias as root:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>alias</span></span></code></pre></div>
<ol start="3">
<li>Create an alias ‚Äúsearch‚Äù to abbreviate the find command with several switches and arguments. Enclose the entire command within single quotation marks (‚Äò‚Äô) to ensure white spaces are taken care of. Do not leave any spaces before and after the equal sign (=).</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">search</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;find / -name core -exec ls -l {} \;&#39;</span></span></span></code></pre></div>
<ol start="4">
<li>Search with the new alias:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>search</span></span></code></pre></div>
<ol start="5">
<li>Create and alias by the same name as rm command but adding the -i flag:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">rm</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;rm -i&#39;</span></span></span></code></pre></div>
<ol start="6">
<li>Run rm without using the alias:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rm file1</span></span></code></pre></div>
<ol start="7">
<li>Remove the two aliases we just created:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">unalias</span> search rm</span></span></code></pre></div>
<h3 id="lab-wildcards-and-metacharacters">Lab: Wildcards and Metacharacters</h3>
<ol>
<li>List all files in the <em>/etc</em> directory that begin with letters ‚Äúma‚Äù and followed by any characters:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /etc/ma*</span></span></code></pre></div>
<ol start="2">
<li>List all hidden files and directories in /home/user1:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -d .*</span></span></code></pre></div>
<ol start="3">
<li>List all files in the <em>/var/log</em> directory that end in ‚Äú.log‚Äù:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /var/log/*.log</span></span></code></pre></div>
<ol start="4">
<li>List all files and directories under <em>/var/log</em> with exactly four characters in their names:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -d /var/log/????</span></span></code></pre></div>
<ol start="5">
<li>Include all files and directories that begin with either of the two characters and followed by any number of characters.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /usr/bin/<span style="color:#ff6ac1">[</span>yw<span style="color:#ff6ac1">]</span>*</span></span></code></pre></div>
<ol start="6">
<li>Match all directory names that begin with any letter between ‚Äúm‚Äù and ‚Äúo‚Äù in the <em>/etc/systemd/system</em> directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -d /etc/systemd/system/<span style="color:#ff6ac1">[</span>m-o<span style="color:#ff6ac1">]</span>*</span></span></code></pre></div>
<ol start="6">
<li>Inverse results of the previous:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -d /etc/systemd/system/<span style="color:#ff6ac1">[</span>!m-o<span style="color:#ff6ac1">]</span>*</span></span></code></pre></div>
<h3 id="lab-piping">Lab: Piping</h3>
<ol>
<li>Pipe the output to the less command in order to view the directory listing one screenful at a time:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l /etc | less</span></span></code></pre></div>
<ol start="2">
<li>Run the last command and pipe the output to nl to number each line:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>last | nl</span></span></code></pre></div>
<ol start="3">
<li>Send the output of ls to grep for the lines that do not contain the pattern ‚Äúroot‚Äù.  Piped again for a case-insensitive selection of all lines that exclude the pattern ‚Äúdec‚Äù. Number the output, and show the last four lines on the display:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l /proc | grep -v root | grep -iv dec | nl | tail -4</span></span></code></pre></div>
<h3 id="lab-quoting-mechanisms">Lab: Quoting Mechanisms</h3>
<ol>
<li>Remove a file called * without deleting everything in the directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rm <span style="color:#5af78e">\*</span></span></span></code></pre></div>
<ol start="2">
<li>Display $LOGNAME without expanding the LOGNAME variable:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;$LOGNAME&#39;</span></span></span></code></pre></div>
<ol start="3">
<li>Run the following with double quotes and without:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$SHELL</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;\$PWD&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;&#39;\&#39;&#34;</span></span></span></code></pre></div>
<h3 id="lab-grep-and-regex">Lab: grep and regex</h3>
<ol>
<li>Search for the pattern ‚Äúoperator‚Äù in the <em>/etc/passwd</em> file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep operator /etc/passwd</span></span></code></pre></div>
<ol start="2">
<li>Search for the space-separated pattern ‚Äúaliases and functions‚Äù in the <em>$HOME/.bashrc</em> file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep <span style="color:#5af78e">&#39;aliases and functions&#39;</span> .bashrc</span></span></code></pre></div>
<ol start="3">
<li>Search for the pattern ‚Äúnologin‚Äù in the passwd file and exclude (-v) the lines in the output that contain this pattern. Add the -n switch to show the line numbers associated with the matched lines.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep -nv nologin /etc/passwd</span></span></code></pre></div>
<ol start="4">
<li>Find any duplicate entries for the root user in the passwd file. Prepend the caret sign (^) to the pattern ‚Äúroot‚Äù to mark the beginning of a line.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep ^root /etc/passwd</span></span></code></pre></div>
<ol start="5">
<li>Identify all users in the passwd file with bash as their primary shell.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep bash$ /etc/passwd</span></span></code></pre></div>
<ol start="6">
<li>Show the entire login.defs file but exclude all the empty lines:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep -v ^$ /etc/login.defs</span></span></code></pre></div>
<ol start="7">
<li>Perform a case-insensitive search (-i) for all the lines in the /etc/bashrc file that match the pattern ‚Äúpath.‚Äù</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep -i path /etc/bashrc</span></span></code></pre></div>
<ol start="8">
<li>Print all the lines from the <em>/etc/lvm/lvm.conf</em> file that contain an exact match for a word (-w) ‚Äúacce‚Äù followed by exactly two characters:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep -w acce.. /etc/lvm/lvm.conf</span></span></code></pre></div>
<ol start="9">
<li>Print all the lines from the <code>ls</code> command output that include either (-E) the pattern ‚Äúcron‚Äù or ‚Äúly‚Äù.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l /etc | grep -E <span style="color:#5af78e">&#39;cron|ly&#39;</span></span></span></code></pre></div>
<ol start="10">
<li>Show all the lines from the <em>/etc/ssh/sshd_config</em> file but exclude (-v) the empty lines and commented lines. Use the -e flag multiple times instead of | for either or.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo grep -ve ^$ -ve ^# /etc/ssh/sshd_config</span></span></code></pre></div>
<ol start="11">
<li>Learn more about regex:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>man <span style="color:#ff9f43">7</span> regex</span></span></code></pre></div>
<ol start="12">
<li>Consult the grep man pages:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>man grep</span></span></code></pre></div>
<h3 id="lab-managing-jobs">Lab: Managing jobs</h3>
<ol>
<li>Issue the jobs command with the -l switch to view all the jobs running in the background:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">jobs</span> -l</span></span></code></pre></div>
<ol start="2">
<li>bring job ID 1 to the foreground and start running it:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>fg %1</code></pre></div>
<ol start="3">
<li>Suspend job 1 with ctrl+z and then let it run in the background:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>bg %1</code></pre></div>
<ol start="4">
<li>Terminate job ID 1, supply its PID (31726) to the kill command:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>kill 31726</code></pre></div>
<h3 id="lab-shell-startup-files">Lab: Shell Startup Files</h3>
<ol>
<li>View the first 10 lines of /etc/bashrc:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>head /etc/bashrc</span></span></code></pre></div>
<ol start="2">
<li>View the first 10 lines of /etc/profile:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>head /etc/profile</span></span></code></pre></div>
<ol start="3">
<li>View the directory /etc/profile.d</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l /etc/profile.d/</span></span></code></pre></div>
<ol start="4">
<li>View .bashrc</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat ~/.bashrc</span></span></code></pre></div>
<ol start="5">
<li>View .bash_profile</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat ~/.bash_profile</span></span></code></pre></div>
<h3 id="lab--customize-the-command-prompt-user1">Lab:  Customize the Command Prompt (user1)</h3>
<ol>
<li>Permanently customize the primary shell prompt to display ‚Äú&lt;user1@server1 in /etc &gt;:‚Äù when this user switches into the /etc directory. The prompt should always reflect the current directory directory path.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim ~/.bash_profile
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">export</span> <span style="color:#ff5c57">PS1</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;$USERNAME $PWD&#39;</span></span></span></code></pre></div>
<h3 id="lab-7-2-redirect-the-standard-input-output-and-error-user1">Lab 7-2: Redirect the Standard Input, Output, and Error (user1)</h3>
<ol>
<li>Run the <code>ls</code> command on <em>/etc</em>, <em>/dvd</em>, and <em>/var</em>. Have the output printed on the screen and the errors forwarded to file <em>/tmp/ioerror</em>.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /etc /dvd /var 2&gt; /tmp/ioerror</span></span></code></pre></div>
<ol start="2">
<li>Check the file after the command execution and analyze the results:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat /tmp/ioerror</span></span></code></pre></div>
<h2 id="notes">Notes</h2>
<ol>
<li>It is NOT, a hard, protective outer layer usually created by an animal or organism that lives in the sea.</li>
</ol>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="shell-scripting">Shell Scripting</h1>

<h2 id="shell-scripts">Shell Scripts</h2>
<ul>
<li>
<p>A group of Linux commands along with control structures and optional comments stored in a text file.</p>
</li>
<li>
<p>Can be executed directly at the Linux command prompt.</p>
</li>
<li>
<p>Do not need to be compiled as they are interpreted by the shell line by line.</p>
</li>
<li>
<p>Managing packages and users, administering partitions and file systems, monitoring file system utilization, trimming log files, archiving and compressing files, finding and removing unnecessary files, starting and stopping database services and applications, and producing reports.</p>
</li>
<li>
<p>Run by the shell one at a time in the order in which they are listed.</p>
</li>
<li>
<p>Each line is executed as if it is typed and run at the command prompt.</p>
</li>
<li>
<p>Control structures are utilized for creating and managing conditional and looping constructs.</p>
</li>
<li>
<p>Comments are also generally included to add information about the script such as the author name, creation date, previous modification dates, purpose, and usage.</p>
</li>
<li>
<p>If the script encounters an error during execution, the error message is printed on the screen.</p>
</li>
<li>
<p>Can use the <code>nl</code> command to enumerate the lines for troubleshooting.</p>
</li>
<li>
<p>Can store your scripts in the <em>/usr/local/bin</em> directory, which is included in the PATH of all users by default.</p>
</li>
</ul>
<h3 id="script01-displaying-system-information">Script01: Displaying System Information</h3>
<ul>
<li>Create the first script called <em>sys_info.sh</em> in <em>/usr/local/bin/</em></li>
<li>Use the vim editor with sudo to write the script.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Display Basic System Information&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;==================================&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The hostname, hardware, and OS information is:&#34;</span>
</span></span><span style="display:flex;"><span>/usr/bin/hostnamectl
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The Following users are currently logged in:&#34;</span>
</span></span><span style="display:flex;"><span>/usr/bin/who</span></span></code></pre></div>
<ul>
<li>Within vim, press the ESC key and then type :set nu to view line numbers associated with each line entry.</li>
<li>Must add execute bit to run the script</li>
</ul>
<h3 id="executing-a-script">Executing a Script</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod +x /usr/local/bin/sys_info.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ll /usr/local/bin/sys_info.sh
</span></span><span style="display:flex;"><span>-rwxr-xr-x. <span style="color:#ff9f43">1</span> root root <span style="color:#ff9f43">244</span> Jul <span style="color:#ff9f43">30</span> 09:47 /usr/local/bin/sys_info.sh&gt;<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<ul>
<li>Any user on the system can now run this script using either its name or the full path.</li>
</ul>
<p>Let&rsquo;s run the script and see what the output will look like:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ sys_info.sh
</span></span><span style="display:flex;"><span>Display Basic System <span style="color:#ff5c57">Information</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">==================================</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The hostname, hardware, and OS information is:
</span></span><span style="display:flex;"><span> Static hostname: server30
</span></span><span style="display:flex;"><span>       Icon name: computer-vm
</span></span><span style="display:flex;"><span>         Chassis: vm üñ¥
</span></span><span style="display:flex;"><span>      Machine ID: eaa6174e108d4a27bd619754‚Ä¶
</span></span><span style="display:flex;"><span>         Boot ID: 13d8b3c167b24757b3678e4f‚Ä¶
</span></span><span style="display:flex;"><span>  Virtualization: oracle
</span></span><span style="display:flex;"><span>Operating System: Red Hat Enterprise Linux‚Ä¶
</span></span><span style="display:flex;"><span>     CPE OS Name: cpe:/o:redhat:enterprise‚Ä¶
</span></span><span style="display:flex;"><span>          Kernel: Linux 5.14.0-362.24.1.el‚Ä¶
</span></span><span style="display:flex;"><span>    Architecture: x86-64
</span></span><span style="display:flex;"><span> Hardware Vendor: innotek GmbH
</span></span><span style="display:flex;"><span>  Hardware Model: VirtualBox
</span></span><span style="display:flex;"><span>Firmware Version: VirtualBox
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The Following users are currently logged in:
</span></span><span style="display:flex;"><span>root     pts/0        2024-07-30 07:22 <span style="color:#ff6ac1">(</span>172.16.7.95<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<h3 id="debugging-a-script">Debugging a Script</h3>
<p>Can either append the <code>-x</code> option to the &ldquo;<code>#!/bin/bash</code>&rdquo; at the beginning of the script to look like &ldquo;<code>#!/bin/bash -x</code>&rdquo;, or execute the script as follows:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># bash -x sys_info.sh</span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;Display Basic System Information&#39;</span>
</span></span><span style="display:flex;"><span>Display Basic System Information
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#ff6ac1">==================================</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">==================================</span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;The hostname, hardware, and OS information is:&#39;</span>
</span></span><span style="display:flex;"><span>The hostname, hardware, and OS information is:
</span></span><span style="display:flex;"><span>+ /usr/bin/hostnamectl
</span></span><span style="display:flex;"><span> Static hostname: server30
</span></span><span style="display:flex;"><span>       Icon name: computer-vm
</span></span><span style="display:flex;"><span>         Chassis: vm üñ¥
</span></span><span style="display:flex;"><span>      Machine ID: eaa6174e108d4a27bd6197548ce77270
</span></span><span style="display:flex;"><span>         Boot ID: 13d8b3c167b24757b3678e4fd3fe19ee
</span></span><span style="display:flex;"><span>  Virtualization: oracle
</span></span><span style="display:flex;"><span>Operating System: Red Hat Enterprise Linux 9.3 <span style="color:#ff6ac1">(</span>Plow<span style="color:#ff6ac1">)</span>     
</span></span><span style="display:flex;"><span>     CPE OS Name: cpe:/o:redhat:enterprise_linux:9::baseos
</span></span><span style="display:flex;"><span>          Kernel: Linux 5.14.0-362.24.1.el9_3.x86_64
</span></span><span style="display:flex;"><span>    Architecture: x86-64
</span></span><span style="display:flex;"><span> Hardware Vendor: innotek GmbH
</span></span><span style="display:flex;"><span>  Hardware Model: VirtualBox
</span></span><span style="display:flex;"><span>Firmware Version: VirtualBox
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;The Following users are currently logged in:&#39;</span>
</span></span><span style="display:flex;"><span>The Following users are currently logged in:
</span></span><span style="display:flex;"><span>+ /usr/bin/who
</span></span><span style="display:flex;"><span>root     pts/0        2024-07-30 07:22 <span style="color:#ff6ac1">(</span>172.16.7.95<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<ul>
<li>Actual lines from the script prefixed by the + sign and followed by the command execution result.</li>
<li>Shows the line number of the problem line in the output if there is any.</li>
<li>This way you can identify any issues pertaining to the path, command name, use of special characters, etc., and address it quickly.</li>
</ul>
<p>Change one of the echo commands in the script to &ldquo;iecho&rdquo; and re-run the script in the debug mode to see the error:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># bash -x sys_info.sh</span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;Display Basic System Information&#39;</span>
</span></span><span style="display:flex;"><span>Display Basic System Information
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#ff6ac1">==================================</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">==================================</span>
</span></span><span style="display:flex;"><span>+ iecho
</span></span><span style="display:flex;"><span>/usr/local/bin/sys_info.sh: line 4: iecho: <span style="color:#ff5c57">command</span> not found
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;The hostname, hardware, and OS information is:&#39;</span>
</span></span><span style="display:flex;"><span>The hostname, hardware, and OS information is:
</span></span><span style="display:flex;"><span>+ /usr/bin/hostnamectl
</span></span><span style="display:flex;"><span> Static hostname: server30
</span></span><span style="display:flex;"><span>       Icon name: computer-vm
</span></span><span style="display:flex;"><span>         Chassis: vm üñ¥
</span></span><span style="display:flex;"><span>      Machine ID: eaa6174e108d4a27bd6197548ce77270
</span></span><span style="display:flex;"><span>         Boot ID: 13d8b3c167b24757b3678e4fd3fe19ee
</span></span><span style="display:flex;"><span>  Virtualization: oracle
</span></span><span style="display:flex;"><span>Operating System: Red Hat Enterprise Linux 9.3 <span style="color:#ff6ac1">(</span>Plow<span style="color:#ff6ac1">)</span>     
</span></span><span style="display:flex;"><span>     CPE OS Name: cpe:/o:redhat:enterprise_linux:9::baseos
</span></span><span style="display:flex;"><span>          Kernel: Linux 5.14.0-362.24.1.el9_3.x86_64
</span></span><span style="display:flex;"><span>    Architecture: x86-64
</span></span><span style="display:flex;"><span> Hardware Vendor: innotek GmbH
</span></span><span style="display:flex;"><span>  Hardware Model: VirtualBox
</span></span><span style="display:flex;"><span>Firmware Version: VirtualBox
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;The Following users are currently logged in:&#39;</span>
</span></span><span style="display:flex;"><span>The Following users are currently logged in:
</span></span><span style="display:flex;"><span>+ /usr/bin/who
</span></span><span style="display:flex;"><span>root     pts/0        2024-07-30 07:22 <span style="color:#ff6ac1">(</span>172.16.7.95<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<h3 id="script02-using-local-variables">Script02: Using Local Variables</h3>
<ul>
<li>Create a script called <em>use_var.sh</em></li>
<li>Define a local variable and display its value on the screen.</li>
<li>Re-check the value of the variable after the script execution has completed.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/use_var.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Setting a Local Variable&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;========================&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SYSNAME</span><span style="color:#ff6ac1">=</span>server30.example.com
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The hostname of this system is </span><span style="color:#ff5c57">$SYSNAME</span><span style="color:#5af78e">&#34;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/use_var.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># use_var.sh</span>
</span></span><span style="display:flex;"><span>Setting a Local <span style="color:#ff5c57">Variable</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">========================</span>
</span></span><span style="display:flex;"><span>The hostname of this system is server30.example.com</span></span></code></pre></div>
<p>If you run the echo command to see what is stored in the SYSNAME
variable, you will get nothing:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $SYSNAME</span></span></span></code></pre></div>
<h3 id="script03-using-pre-defined-environment-variables">Script03: Using Pre-Defined Environment Variables</h3>
<p>The following script called pre_env.sh will display the values of SHELL and LOGNAME environment variables:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/pre_env.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The location of my shell command is:&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#ff5c57">$SHELL</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;I am logged in as </span><span style="color:#ff5c57">$LOGNAME</span><span style="color:#5af78e">&#34;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/pre_env.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pre_env.sh</span>
</span></span><span style="display:flex;"><span>The location of my shell <span style="color:#ff5c57">command</span> is:
</span></span><span style="display:flex;"><span>/bin/bash
</span></span><span style="display:flex;"><span>I am logged in as root</span></span></code></pre></div>
<h3 id="script04-using-command-substitution">Script04: Using Command Substitution</h3>
<ul>
<li>
<p>Can use the command substitution feature of the bash shell and store the output generated by the command into a variable.</p>
</li>
<li>
<p>Two different ways to use command substitution: Backtics or subshell</p>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff5c57">SYSNAME</span><span style="color:#ff6ac1">=</span><span style="color:#ff6ac1">$(</span>hostname<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">KERNVER</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">`</span>uname -r<span style="color:#5af78e">`</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The hostname is </span><span style="color:#ff5c57">$SYSNAME</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The kernel version is </span><span style="color:#ff5c57">$KERNVER</span><span style="color:#5af78e">&#34;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/cmd_out.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/cmd_out.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cmd_out.sh</span>
</span></span><span style="display:flex;"><span>The hostname is server30
</span></span><span style="display:flex;"><span>The kernel version is 5.14.0-362.24.1.el9_3.x86_64</span></span></code></pre></div>
<h1 id="shell-parameters">Shell Parameters</h1>
<ul>
<li>An entity that holds a value such as a name, special character, or number.</li>
<li>The parameter that holds a <strong>name</strong> is referred to as a <strong>variable</strong></li>
<li>A parameter that holds a <strong>special character</strong> is referred to as a <strong>special parameter</strong>
<ul>
<li>Represents the command or script itself ($0), count of supplied arguments ($* or $@), all arguments ($#), and PID of the process ($$)</li>
</ul>
</li>
<li>One or more digits, except for 0 is referred to as a <strong>positional parameter</strong> (a command line argument).
<ul>
<li>($1, $2, $3 . . .) is an argument supplied to a script at the time of its invocation</li>
<li>Position is determined by the shell based on its location with respect to the calling script.</li>
<li>Positional parameters beyond 9 are to be enclosed in curly brackets.</li>
</ul>
</li>
</ul>
<p><a href="#R-image-d91d2eb23eecaf7379d6308dc96adec3" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../../images/image-G1VF6C4I%201.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d91d2eb23eecaf7379d6308dc96adec3"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../../images/image-G1VF6C4I%201.jpg"></a></p>
<ul>
<li>Just like the variable and command substitutions, the shell uses the dollar ($) sign for special and positional parameter expansions as well.</li>
</ul>
<h3 id="script05-using-special-and-positional-parameters">Script05: Using Special and Positional Parameters</h3>
<p>Create <em>com_line_arg.sh</em> to show the supplied arguments, total count, value of the first argument, and PID of the script:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;There are </span><span style="color:#ff5c57">$#</span><span style="color:#5af78e"> arguments specified at the command line&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The arguments supplied are: </span><span style="color:#ff5c57">$*</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The first argument is: </span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The Process ID of the script is: </span><span style="color:#ff5c57">$$</span><span style="color:#5af78e">&#34;</span>                                          </span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ff9f43">0</span> arguments specified at the <span style="color:#ff5c57">command</span> line
</span></span><span style="display:flex;"><span>The arguments supplied are: 
</span></span><span style="display:flex;"><span>The first argument is: 
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ff9f43">1935</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># com_line_arg.sh the dog jumped over the frog</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ff9f43">6</span> arguments specified at the <span style="color:#ff5c57">command</span> line
</span></span><span style="display:flex;"><span>The arguments supplied are: the dog jumped over the frog
</span></span><span style="display:flex;"><span>The first argument is: the
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ff9f43">1936</span></span></span></code></pre></div>
<h3 id="script06-shifting-command-line-arguments">Script06: Shifting Command Line Arguments</h3>
<p><code>shift</code> command</p>
<ul>
<li>Used to move arguments one position to the left.</li>
<li>During this move, the value of the first argument is lost.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;There are </span><span style="color:#ff5c57">$#</span><span style="color:#5af78e"> arguments specified at the command line&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The arguments supplied are: </span><span style="color:#ff5c57">$*</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The first argument is: </span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The Process ID of the script is: </span><span style="color:#ff5c57">$$</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">shift</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The new first argument after the first shift is: </span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">shift</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The new first argument after the second shift is: </span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ff9f43">0</span> arguments specified at the <span style="color:#ff5c57">command</span> line
</span></span><span style="display:flex;"><span>The arguments supplied are: 
</span></span><span style="display:flex;"><span>The first argument is: 
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ff9f43">1941</span>
</span></span><span style="display:flex;"><span>The new first argument after the first <span style="color:#ff5c57">shift</span> is: 
</span></span><span style="display:flex;"><span>The new first argument after the second <span style="color:#ff5c57">shift</span> is: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># com_line_arg_shift.sh the dog jumped over the frog</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ff9f43">6</span> arguments specified at the <span style="color:#ff5c57">command</span> line
</span></span><span style="display:flex;"><span>The arguments supplied are: the dog jumped over the frog
</span></span><span style="display:flex;"><span>The first argument is: the
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ff9f43">1942</span>
</span></span><span style="display:flex;"><span>The new first argument after the first <span style="color:#ff5c57">shift</span> is: dog
</span></span><span style="display:flex;"><span>The new first argument after the second <span style="color:#ff5c57">shift</span> is: jumped</span></span></code></pre></div>
<ul>
<li>Multiple shifts in a single attempt may be performed by furnishing a count of desired shifts to the shift command as an argument. For example, &ldquo;shift 2&rdquo; will carry out two shifts, &ldquo;shift 3&rdquo; will make three shifts, and so on.</li>
</ul>
<h2 id="logical-constructs">Logical Constructs</h2>
<ul>
<li>Use test conditions, which decides what to do next based on the true or false status of the condition.</li>
</ul>
<p>The shell offers two logical constructs:
<strong>if-then-fi</strong>
<strong>case</strong></p>
<p><strong>Exit Codes</strong> (exit values)</p>
<ul>
<li>Refer to the value returned by a command when it finishes execution.
<ul>
<li>Value is based on the outcome of the command.</li>
</ul>
</li>
<li>If the command runs successfully, you typically get a zero exit code(return code), otherwise you get a non-zero value.</li>
<li>Return code is stored in a special shell parameter called ? (question mark).</li>
</ul>
<p>Let&rsquo;s look at the following two examples to understand their usage:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pwd</span>
</span></span><span style="display:flex;"><span>/root
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># man</span>
</span></span><span style="display:flex;"><span>What manual page <span style="color:#ff6ac1">do</span> you want?
</span></span><span style="display:flex;"><span>For example, try <span style="color:#5af78e">&#39;man man&#39;</span>.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">1</span></span></span></code></pre></div>
<ul>
<li>Exit code was returned and stored in the ?.</li>
<li>Non-zero exit code was stored in ? with an error.</li>
<li>Can define exit codes within a script at different locations to help debug the script by knowing where exactly it terminated.</li>
</ul>
<p><strong>Test Conditions</strong></p>
<ul>
<li>Used in logical constructs to decide what to do next.</li>
<li>Can be set on integer values, string values, or files using the <code>test</code> command or by enclosing them within the square brackets [].</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>man test</span></span></code></pre></div>
<p><strong>Operation on Integer Value</strong></p>
<p><code>integer1 -eq (-ne) integer2</code></p>
<ul>
<li>Integer1 is equal (not equal) to integer2</li>
</ul>
<p><code>integer1 -lt (-gt) integer2 </code></p>
<ul>
<li>Integer1 is less (greater) than integer2</li>
</ul>
<p><code>integer1 -le (-ge) integer2</code></p>
<ul>
<li>Integer1 is less (greater) than or equal to integer2</li>
</ul>
<p><strong>Operation on String Value</strong></p>
<p><code>string1=(!=)string2</code></p>
<ul>
<li>Tests whether the two strings are identical (not identical)</li>
</ul>
<p><code>-l string or -z string</code></p>
<ul>
<li>Tests whether the string length is zero</li>
</ul>
<p><code>string or -n string</code></p>
<ul>
<li>Tests whether the string length is non-zero</li>
</ul>
<p><strong>Operation on File</strong></p>
<p><code>-b (-c) file</code></p>
<ul>
<li>Tests whether the file is a block (character) device file</li>
</ul>
<p><code>-d (-f) file</code></p>
<ul>
<li>Tests whether the file is a directory (normal file)</li>
</ul>
<p><code>-e (-s) file</code></p>
<ul>
<li>Tests whether the file exists (non-empty)</li>
</ul>
<p><code>-L file</code></p>
<ul>
<li>Tests whether the file is a symlink</li>
</ul>
<p><code>-r (-w) (-x) file</code></p>
<ul>
<li>Tests whether the file is readable (writable) (executable)</li>
</ul>
<p><code>-u (-g) (-k) file</code></p>
<ul>
<li>Tests whether the file has the setuid (setgid) (sticky) bit</li>
</ul>
<p><code>file1 -nt (-ot) file2</code></p>
<ul>
<li>Tests whether file1 is newer (older) than file2</li>
</ul>
<p><strong>Logical Operators</strong></p>
<p><code>!</code></p>
<ul>
<li>The logical NOT operator</li>
</ul>
<p><code>-a</code> or <code>&amp;&amp;</code> (two ampersand characters)</p>
<ul>
<li>The logical AND operator. Both operands must be true for the condition to be true. Syntax: <code>[ -b file1 &amp;&amp; -r file1 ]</code></li>
</ul>
<p><code>-o </code> or <code> ||</code> (two pipe characters)</p>
<ul>
<li>The logical OR operator. Either of the two or both operands must be true for the condition to be true. Syntax: <code>[ (x == 1 -o y == 2) ]</code></li>
</ul>
<h3 id="if-then-fi-construct">if-then-fi Construct</h3>
<ul>
<li>Evaluates the condition for true or false.</li>
<li>Executes the specified action if the condition is true.</li>
<li>Otherwise, it exits the construct.</li>
<li>Begins with an <code>if</code> and ends with a <code>fi</code></li>
<li>Can execute an action only if the specified condition is true. It quits the statement if the condition is untrue.</li>
</ul>
<p><a href="#R-image-52b0f33308eb205cf34f29a6d592d669" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../../images/image-7FX8FVMW%201.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-52b0f33308eb205cf34f29a6d592d669"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../../images/image-7FX8FVMW%201.jpg"></a></p>
<p>The general syntax of this statement is as follows:</p>
<p>if condition &gt; then &gt; action &gt; fi</p>
<h3 id="script07-the-if-then-fi-construct">Script07: The if-then-fi Construct</h3>
<p>Create <em>if_then_fi.sh</em> to determine the number of arguments and print an error message if there are none provided:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/if_then_fi.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash </span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">if</span> <span style="color:#ff6ac1">[</span> <span style="color:#ff5c57">$#</span> -ne <span style="color:#ff9f43">2</span> <span style="color:#ff6ac1">]</span> <span style="color:#78787e"># Ensure there is a space after [ and before ] </span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Error: Invalid number of arguments supplied&#34;</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Usage: </span><span style="color:#ff5c57">$0</span><span style="color:#5af78e"> source_file destination_file&#34;</span> 
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span> <span style="color:#ff9f43">2</span> 
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">fi</span> 
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Script terminated&#34;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/if_then_fi.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_fi.sh</span>
</span></span><span style="display:flex;"><span>Error: Invalid number of arguments supplied
</span></span><span style="display:flex;"><span>Usage: /usr/local/bin/if_then_fi.sh source_file destination_file</span></span></code></pre></div>
<p>This script will display the following messages on the screen if it is
executed without exactly two arguments specified at the command line:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_fi.sh</span>
</span></span><span style="display:flex;"><span>Error: Invalid number of arguments supplied
</span></span><span style="display:flex;"><span>Usage: /usr/local/bin/if_then_fi.sh source_file destination_file</span></span></code></pre></div>
<p>Return code value reflects the exit code in the script .</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">2</span></span></span></code></pre></div>
<p>Return code will be 0 if you supply a pair of arguments:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_fi.sh a b</span>
</span></span><span style="display:flex;"><span>Script terminated
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<h3 id="if-then-else-fi-construct">if-then-else-fi Construct</h3>
<ul>
<li>Can execute an action if the condition is true and another action if the condition is false.</li>
</ul>
<p><a href="#R-image-5634116d91a0da5ab50e772ea1fc9a19" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../../images/image-CMLV644G%201.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5634116d91a0da5ab50e772ea1fc9a19"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../../images/image-CMLV644G%201.jpg"></a></p>
<p>The general syntax of this statement is as follows:</p>
<p>if condition &gt; then &gt; action1 &gt; else &gt; action2 &gt; fi</p>
<h3 id="script08-the-if-then-else-fi-construct">Script08: The if-then-else-fi Construct</h3>
<p>Create a script called <em>if_then_else_fi.sh</em> that will accept an integer value as an argument and tell if the value is positive or negative:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /usr/local/bin/if_then_else_fi.sh</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>#!/bin/bash
if [ $1 -gt 0 ]
then
        echo &#34;$1 is a positive integer value&#34;
else
        echo &#34;$1 is a negative integer value&#34;
fi</code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/if_then_else_fi.sh</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_else_fi.sh</span>
</span></span><span style="display:flex;"><span>/usr/local/bin/if_then_else_fi.sh: line 2: <span style="color:#ff6ac1">[</span>: -gt: unary operator expected
</span></span><span style="display:flex;"><span> is a negative integer value
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_else_fi.sh 3</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">3</span> is a positive integer value
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_else_fi.sh -3</span>
</span></span><span style="display:flex;"><span>-3 is a negative integer value</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_else_fi.sh a</span>
</span></span><span style="display:flex;"><span>/usr/local/bin/if_then_else_fi.sh: line 2: <span style="color:#ff6ac1">[</span>: a: integer expression expected
</span></span><span style="display:flex;"><span>a is a negative integer value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<h3 id="the-if-then-elif-fi-construct">The if-then-elif-fi Construct</h3>
<ul>
<li>Can define multiple conditions and associate an action with each one of them.</li>
<li>The action corresponding to the true condition is performed.</li>
</ul>
<p><a href="#R-image-a62f4a1c54fcb6099a3cdb79f7d2f61d" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../../images/image-TNYN7SP2%201.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a62f4a1c54fcb6099a3cdb79f7d2f61d"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../../images/image-TNYN7SP2%201.jpg"></a></p>
<p>The general syntax of this statement is as follows:</p>
<p>if  condition1 &gt; then action1 &gt; elif condition2 &gt; then action2 &gt; elif  condition3 &gt; then action3 &gt; else &gt; action(n) &gt; fi</p>
<h3 id="script09-the-if-then-elif-fi-construct-example-1">Script09: The if-then-elif-fi Construct (Example 1)</h3>
<p>Create <em>if_then_elif_fi.sh</em> script to accept an integer value as an argument and tell if the integer is positive, negative, or zero. If a non-integer value or no argument is supplied, the script will complain. Employ the exit command after each action to help you identify where it exited.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/if_then_elif_fi.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff6ac1">if</span> <span style="color:#ff6ac1">[</span> <span style="color:#ff5c57">$1</span> -gt <span style="color:#ff9f43">0</span> <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e"> is a positive integer value&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span> <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">elif</span> <span style="color:#ff6ac1">[</span> <span style="color:#ff5c57">$1</span> -eq <span style="color:#ff9f43">0</span> <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e"> is a zero integer value&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span> <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">elif</span> <span style="color:#ff6ac1">[</span> <span style="color:#ff5c57">$1</span> -lt <span style="color:#ff9f43">0</span> <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e"> is a negative integer value&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span> <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e"> is not an integer value. Please supply an i
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">nteger.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span> <span style="color:#ff9f43">4</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">fi</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_elif_fi.sh -0</span>
</span></span><span style="display:flex;"><span>-0 is a zero integer value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_elif_fi.sh -1</span>
</span></span><span style="display:flex;"><span>-1 is a negative integer value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_elif_fi.sh 10</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">10</span> is a positive integer value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_elif_fi.sh abd</span>
</span></span><span style="display:flex;"><span>/usr/local/bin/if_then_elif_fi.sh: line 2: <span style="color:#ff6ac1">[</span>: abd: integer expression expected
</span></span><span style="display:flex;"><span>/usr/local/bin/if_then_elif_fi.sh: line 6: <span style="color:#ff6ac1">[</span>: abd: integer expression expected
</span></span><span style="display:flex;"><span>/usr/local/bin/if_then_elif_fi.sh: line 10: <span style="color:#ff6ac1">[</span>: abd: integer expression expected
</span></span><span style="display:flex;"><span>abd is not an integer value. Please supply an i
</span></span><span style="display:flex;"><span>nteger.&gt;<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">4</span></span></span></code></pre></div>
<h3 id="script10-the-if-then-elif-fi-construct-example-2">Script10: The if-then-elif-fi Construct (Example 2)</h3>
<p>Create <em>ex200_ex294.sh</em> to display the name of the Red Hat exam RHCSA or RHCE in the output based on the input argument (ex200 or ex294). If a random or no argument is provided, it will print &ldquo;Usage: Acceptable values are ex200 and ex294&rdquo;. Add white spaces in the conditions.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/ex200_ex294.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff6ac1">if</span> <span style="color:#ff6ac1">[</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span> <span style="color:#ff6ac1">=</span> ex200 <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;RHCSA&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">elif</span> <span style="color:#ff6ac1">[</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span> <span style="color:#ff6ac1">=</span> ex294 <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;RHCE&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Usage: Acceptable values are ex200 and ex294&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">fi</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/ex200_ex294.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ex200_ex294.sh ex200</span>
</span></span><span style="display:flex;"><span>RHCSA
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ex200_ex294.sh ex294</span>
</span></span><span style="display:flex;"><span>RHCE
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ex200_ex294.sh frog</span>
</span></span><span style="display:flex;"><span>Usage: Acceptable values are ex200 and ex294</span></span></code></pre></div>
<h3 id="looping-constructs">Looping Constructs</h3>
<ul>
<li>Perform certain task on a number of given elements.</li>
<li>Or repeatedly until a specified condition becomes true or false.</li>
<li>Examples:
<ul>
<li>if plenty of disks need to be initialized for use in LVM, you can either run the <code>pvcreate</code> command on each disk one at a time manually or employ a loop to do it for you.</li>
<li>Based on a condition, you may want a program to continue to run until that condition becomes true or false.</li>
</ul>
</li>
</ul>
<p>Three looping constructs:
<strong>for-do-done</strong></p>
<ul>
<li><strong>for loop</strong> is also referred to as the <strong>foreach</strong> loop.</li>
<li>iterates on a list of given values until the list is exhausted.
<strong>while-do-done</strong></li>
<li>while loop runs repeatedly until the specified condition becomes false.
<strong>until-do-done</strong></li>
<li>until loop does just the opposite of the while loop</li>
<li>Performs an operation repeatedly until the specified condition becomes true.</li>
</ul>
<h3 id="test-conditions">Test Conditions</h3>
<p><code>let</code> command</p>
<ul>
<li>Used in looping constructs to evaluate a condition at each iteration.</li>
<li>Compares the value stored in a variable against a pre-defined value</li>
<li>Each time the loop does an iteration, the variable value is altered.</li>
<li>Can enclose the condition for arithmetic evaluation within a pair of parentheses (( )) or quotation marks (&quot; &ldquo;) instead of using the let command explicitly.</li>
</ul>
<p>Operators used in test conditions</p>
<p><strong>!</strong></p>
<ul>
<li>Negation</li>
</ul>
<p><strong>+ / &ndash; / * / /</strong></p>
<ul>
<li>Addition / subtraction /multiplication / division</li>
</ul>
<p><strong>%</strong></p>
<ul>
<li>Remainder</li>
</ul>
<p><strong>&lt; / &lt;=</strong></p>
<ul>
<li>Less than / less than or equal to</li>
</ul>
<p><strong>&gt; / &gt;=</strong></p>
<ul>
<li>Greater than / greater than or equal to</li>
</ul>
<p><strong>=</strong></p>
<ul>
<li>Assignment</li>
</ul>
<p><strong>== / !=</strong></p>
<ul>
<li>Comparison for equality /non-equality</li>
</ul>
<h3 id="the-for-loop">The for Loop</h3>
<ul>
<li>Executed on an array of elements until all the elements in the array are consumed.</li>
<li>Each element is assigned to a variable one after the other for processing.</li>
</ul>
<p><a href="#R-image-b0340a8b3beb428bf7216faf69150d20" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../../images/image-BPQ7RWER%201.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b0340a8b3beb428bf7216faf69150d20"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../../images/image-BPQ7RWER%201.jpg"></a></p>
<p>The general syntax of this construct is as follows:</p>
<p>for VAR in list &gt; do &gt; action &gt; done</p>
<h3 id="script11-print-alphabets-using-for-loop">Script11: Print Alphabets Using for Loop</h3>
<p>Create script <em>for_do_done.sh</em> script that initializes the variable COUNT to 0. The for loop will read each letter sequentially from the range placed within curly brackets (no spaces before the letter A and after the letter Z), assign it to another variable LETTER, and display the value on the screen. The <code>expr</code> command is an arithmetic processor, and it is used here to increment the COUNT by 1 at each loop iteration.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/for_do_done.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff5c57">COUNT</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">for</span> LETTER in <span style="color:#ff6ac1">{</span>A..Z<span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">do</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">COUNT</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">`</span>/usr/bin/expr <span style="color:#ff5c57">$COUNT</span> + 1<span style="color:#5af78e">`</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Letter </span><span style="color:#ff5c57">$COUNT</span><span style="color:#5af78e"> is [</span><span style="color:#ff5c57">$LETTER</span><span style="color:#5af78e">]&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">done</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/for_do_done.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># for_do_done.sh</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">1</span> is <span style="color:#ff6ac1">[</span>A<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">2</span> is <span style="color:#ff6ac1">[</span>B<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">3</span> is <span style="color:#ff6ac1">[</span>C<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">4</span> is <span style="color:#ff6ac1">[</span>D<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">5</span> is <span style="color:#ff6ac1">[</span>E<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">6</span> is <span style="color:#ff6ac1">[</span>F<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">7</span> is <span style="color:#ff6ac1">[</span>G<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">8</span> is <span style="color:#ff6ac1">[</span>H<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">9</span> is <span style="color:#ff6ac1">[</span>I<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">10</span> is <span style="color:#ff6ac1">[</span>J<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">11</span> is <span style="color:#ff6ac1">[</span>K<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">12</span> is <span style="color:#ff6ac1">[</span>L<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">13</span> is <span style="color:#ff6ac1">[</span>M<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">14</span> is <span style="color:#ff6ac1">[</span>N<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">15</span> is <span style="color:#ff6ac1">[</span>O<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">16</span> is <span style="color:#ff6ac1">[</span>P<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">17</span> is <span style="color:#ff6ac1">[</span>Q<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">18</span> is <span style="color:#ff6ac1">[</span>R<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">19</span> is <span style="color:#ff6ac1">[</span>S<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">20</span> is <span style="color:#ff6ac1">[</span>T<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">21</span> is <span style="color:#ff6ac1">[</span>U<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">22</span> is <span style="color:#ff6ac1">[</span>V<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">23</span> is <span style="color:#ff6ac1">[</span>W<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">24</span> is <span style="color:#ff6ac1">[</span>X<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">25</span> is <span style="color:#ff6ac1">[</span>Y<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">26</span> is <span style="color:#ff6ac1">[</span>Z<span style="color:#ff6ac1">]</span></span></span></code></pre></div>
<h3 id="script12-create-users-using-for-loop">Script12: Create Users Using for Loop</h3>
<p>Create script <em>create_user.sh</em> script to create several Linux user accounts. As each account is created, the value of the variable ? is checked. If the value is 0, a message saying the account is created successfully will be displayed, otherwise the script will terminate. In case of a successful
account creation, the <code>passwd</code> command will be invoked to assign the user the same password as their username.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/create_user.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">for</span> USER in user<span style="color:#ff6ac1">{</span>10..12<span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">do</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Create account for user </span><span style="color:#ff5c57">$USER</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span>        /usr/sbin/useradd <span style="color:#ff5c57">$USER</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">if</span> <span style="color:#ff6ac1">[</span> <span style="color:#ff5c57">$?</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">0</span> <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#ff5c57">$USER</span> | /usr/bin/passwd --stdin <span style="color:#ff5c57">$USER</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$USER</span><span style="color:#5af78e"> is created successfully&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Failed to create account </span><span style="color:#ff5c57">$USER</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">done</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/create_user.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># create_user.sh</span>
</span></span><span style="display:flex;"><span>Create account <span style="color:#ff6ac1">for</span> user user10
</span></span><span style="display:flex;"><span>Changing password <span style="color:#ff6ac1">for</span> user user10.
</span></span><span style="display:flex;"><span>passwd: all authentication tokens updated successfully.
</span></span><span style="display:flex;"><span>user10 is created successfully
</span></span><span style="display:flex;"><span>Create account <span style="color:#ff6ac1">for</span> user user11
</span></span><span style="display:flex;"><span>Changing password <span style="color:#ff6ac1">for</span> user user11.
</span></span><span style="display:flex;"><span>passwd: all authentication tokens updated successfully.
</span></span><span style="display:flex;"><span>user11 is created successfully
</span></span><span style="display:flex;"><span>Create account <span style="color:#ff6ac1">for</span> user user12
</span></span><span style="display:flex;"><span>Changing password <span style="color:#ff6ac1">for</span> user user12.
</span></span><span style="display:flex;"><span>passwd: all authentication tokens updated successfully.
</span></span><span style="display:flex;"><span>user12 is created successfully</span></span></code></pre></div>
<p>Script fails if ran again:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># create_user.sh</span>
</span></span><span style="display:flex;"><span>Create account <span style="color:#ff6ac1">for</span> user user10
</span></span><span style="display:flex;"><span>useradd: user <span style="color:#5af78e">&#39;user10&#39;</span> already exists
</span></span><span style="display:flex;"><span>Failed to create account user10</span></span></code></pre></div>
<h2 id="shell-scripting-diy-labs">Shell Scripting DIY Labs</h2>
<h3 id="lab-write-script-to-create-logical-volumes">Lab: Write Script to Create Logical Volumes</h3>
<ul>
<li>Present 2x1GB virtual disks to server40 in VirtualBox Manager.</li>
<li>As user1 with sudo on server40, write a single bash script to create 2x400MB partitions on each disk using parted and then bring both partitions into LVM control with the <code>pvcreate</code> command.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> vim /usr/local/bin/lvscript.sh</span></span></code></pre></div>
<ul>
<li>Create a volume group called <code>vgscript</code> and add both physical volumes to it.</li>
<li>Create three logical volumes each of size 200MB and name them lvscript1, lvscript2, and lvscript3.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">for</span> DEVICE in <span style="color:#5af78e">&#34;/dev/sd&#34;</span><span style="color:#ff6ac1">{</span>b..c<span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">do</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating partition 1 with the size of 400MB on </span><span style="color:#ff5c57">$DEVICE</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span>        parted <span style="color:#ff5c57">$DEVICE</span> mklabel msdos
</span></span><span style="display:flex;"><span>        parted <span style="color:#ff5c57">$DEVICE</span> mkpart primary <span style="color:#ff9f43">1</span> <span style="color:#ff9f43">401</span>
</span></span><span style="display:flex;"><span>        pvcreate <span style="color:#ff5c57">$DEVICE</span><span style="color:#ff6ac1">[</span>1<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating partition 2 with the size of 400MB on </span><span style="color:#ff5c57">$DEVICE</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span>        parted <span style="color:#ff5c57">$DEVICE</span> mkpart primary <span style="color:#ff9f43">402</span> <span style="color:#ff9f43">802</span>
</span></span><span style="display:flex;"><span>        pvcreate <span style="color:#ff5c57">$DEVICE</span><span style="color:#ff6ac1">[</span>2<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>        vgcreate vgscript <span style="color:#ff5c57">$DEVICE</span><span style="color:#ff6ac1">[</span>1<span style="color:#ff6ac1">]</span> <span style="color:#ff5c57">$DEVICE</span><span style="color:#ff6ac1">[</span>2<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">for</span> LV in <span style="color:#5af78e">&#34;lvscript&#34;</span><span style="color:#ff6ac1">{</span>1..3<span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">do</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating logical volume </span><span style="color:#ff5c57">$LV</span><span style="color:#5af78e"> in volume group vgscript with the size of 200MB&#34;</span>
</span></span><span style="display:flex;"><span>        lvcreate vgscript -L 200MB -n <span style="color:#ff5c57">$LV</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">done</span></span></span></code></pre></div>
<h3 id="lab-write-script-to-create-file-systems">Lab: Write Script to Create File Systems</h3>
<ul>
<li>Write another bash script to create xfs, ext4, and vfat file system structures in the logical volumes, respectively.</li>
<li>Create mount points /mnt/xfs, /mnt/ext4, and /mnt/vfat, and mount the file systems.</li>
<li>Include the df command with -h in the script to list the mounted file systems.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> vim /usr/local/bin/fsscript.sh</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/fsscript.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">for</span> DEVICE in lvscript<span style="color:#ff6ac1">{</span>1..3<span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">do</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">if</span> <span style="color:#ff6ac1">[</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$DEVICE</span><span style="color:#5af78e">&#34;</span> <span style="color:#ff6ac1">=</span> lvscript1 <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating xfs filesystem on logical volume lvscript1&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>        mkfs.xfs /dev/vgscript/lvscript1
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating /mnt/xfs&#34;</span>
</span></span><span style="display:flex;"><span>        mkdir /mnt/xfs
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Mounting filesystem&#34;</span>
</span></span><span style="display:flex;"><span>        mount /dev/vgscript/lvscript1 /mnt/xfs
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">elif</span> <span style="color:#ff6ac1">[</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$DEVICE</span><span style="color:#5af78e">&#34;</span> <span style="color:#ff6ac1">=</span> lvscript2 <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">then</span>    
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating ext4 filesystem on logical volume lvscript2&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>        mkfs.ext4 /dev/vgscript/lvscript2
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating /mnt/ext4&#34;</span>
</span></span><span style="display:flex;"><span>        mkdir /mnt/ext4
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Mounting filesystem&#34;</span>
</span></span><span style="display:flex;"><span>        mount /dev/vgscript/lvscript2 /mnt/ext4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">elif</span> <span style="color:#ff6ac1">[</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$DEVICE</span><span style="color:#5af78e">&#34;</span> <span style="color:#ff6ac1">=</span> lvscript3 <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">then</span>    
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating vfat filesystem on logical volume lvscript3&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>        mkfs.vfat /dev/vgscript/lvscript3
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating /mnt/vfat&#34;</span>
</span></span><span style="display:flex;"><span>        mkdir /mnt/vfat
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Mounting filesystem&#34;</span>
</span></span><span style="display:flex;"><span>        mount /dev/vgscript/lvscript3 /mnt/vfat
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Done!&#34;</span>
</span></span><span style="display:flex;"><span>                df -h
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">fi</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">done</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># fsscript.sh</span>
</span></span><span style="display:flex;"><span> Creating xfs filesystem on logical volume lvscript1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Filesystem should be larger than 300MB.
</span></span><span style="display:flex;"><span> Log size should be at least 64MB.
</span></span><span style="display:flex;"><span> Support <span style="color:#ff6ac1">for</span> filesystems like this one is deprecated and they will not be supported in future releases.
</span></span><span style="display:flex;"><span> meta-data<span style="color:#ff6ac1">=</span>/dev/vgscript/lvscript1 <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4,  <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">12800</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1,  <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>  <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>51200, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>1368, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks, lazy- <span style="color:#ff5c57">count</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span> Creating /mnt/xfs
</span></span><span style="display:flex;"><span> Mounting filesystem
</span></span><span style="display:flex;"><span> Creating ext4 filesystem on logical volume lvscript2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> mke2fs 1.46.5 <span style="color:#ff6ac1">(</span>30-Dec-2021<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Creating filesystem with <span style="color:#ff9f43">204800</span> 1k blocks and <span style="color:#ff9f43">51200</span> inodes
</span></span><span style="display:flex;"><span> Filesystem UUID: b16383bf-7b65-4a00-bb6d-c297733f60b3
</span></span><span style="display:flex;"><span> Superblock backups stored on blocks: 
</span></span><span style="display:flex;"><span>	8193, 24577, 40961, 57345, <span style="color:#ff9f43">73729</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Allocating group tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span> Writing inode tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span> Creating journal <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4096</span> blocks<span style="color:#ff6ac1">)</span>: <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span> Writing superblocks and filesystem accounting information: <span style="color:#ff6ac1">done</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Creating /mnt/ext4
</span></span><span style="display:flex;"><span> Mounting filesystem
</span></span><span style="display:flex;"><span> Creating vfat filesystem on logical volume lvscript3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> mkfs.fat 4.2 <span style="color:#ff6ac1">(</span>2021-01-31<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Creating /mnt/vfat
</span></span><span style="display:flex;"><span> Mounting filesystem
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Done!</span></span></code></pre></div>
<h3 id="lab-21-3-write-script-to-configure-new-network-connection-profile">Lab 21-3: Write Script to Configure New Network Connection Profile</h3>
<ul>
<li>Present a new network interface to server40 in VirtualBox Manager.</li>
<li>As user1 with sudo on server40, write a single bash script to run the nmcli command to configure custom IP assignments (choose your own settings) on the new network device.</li>
<li>Make a copy of the /etc/hosts file as part of this script.</li>
<li>Choose a hostname of your choice and add a mapping to the /etc/hosts file without overwriting existing file content.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/network.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span> cp /etc/hosts /etc/hosts.bak <span style="color:#ff6ac1">&amp;&amp;</span>
</span></span><span style="display:flex;"><span> nmcli c a <span style="color:#ff5c57">type</span> Ethernet con-name enp0s9 ifname enp0s9 ip4  10.32.32.2/24 gw4 10.32.32.1
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;10.32.33.14 frog.example.com frog&#34;</span> &gt;&gt; /etc/hosts</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/network.sh</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># network.sh</span>
</span></span><span style="display:flex;"><span> Connection <span style="color:#5af78e">&#39;enp0s9&#39;</span> <span style="color:#ff6ac1">(</span>5a342243-e77b-452e-88e2-8838d3ecea6d<span style="color:#ff6ac1">)</span>  successfully added.</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /etc/hosts</span>
</span></span><span style="display:flex;"><span> 127.0.0.1   localhost localhost.localdomain localhost4  localhost4.localdomain4
</span></span><span style="display:flex;"><span> ::1         localhost localhost.localdomain localhost6  localhost6.localdomain6
</span></span><span style="display:flex;"><span> 10.32.33.14 frog.example.com frog</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ip a</span>
</span></span><span style="display:flex;"><span> enp0s9: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style="color:#ff9f43">1500</span> qdisc fq_codel  state UP group default qlen <span style="color:#ff9f43">1000</span>
</span></span><span style="display:flex;"><span>    link/ether 08:00:27:1d:f4:c1 brd ff:ff:ff:ff:ff:ff
</span></span><span style="display:flex;"><span>    inet 10.32.32.2/24 brd 10.32.32.255 scope global noprefixroute enp0s9
</span></span><span style="display:flex;"><span>       valid_lft forever preferred_lft forever
</span></span><span style="display:flex;"><span>    inet6 fe80::2c5d:31cc:1d79:6b43/64 scope link noprefixroute 
</span></span><span style="display:flex;"><span>       valid_lft forever preferred_lft forever</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># nmcli d s</span>
</span></span><span style="display:flex;"><span> DEVICE  TYPE      STATE                   CONNECTION 
</span></span><span style="display:flex;"><span> enp0s3  ethernet  connected               enp0s3     
</span></span><span style="display:flex;"><span> enp0s8  ethernet  connected               enp0s8     
</span></span><span style="display:flex;"><span> enp0s9  ethernet  connected               enp0s9     
</span></span><span style="display:flex;"><span> lo      loopback  connected <span style="color:#ff6ac1">(</span>externally<span style="color:#ff6ac1">)</span>  lo  </span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
          </section>
<article class="default">
  <header class="headline">
  </header>

<h1 id="containers">Containers</h1>

<div class="children children-type-card children-sort-"><ul class="card-container">
<li>
  <article class="card card-popout" aria-labelledby="R-card-5382aaf8b3d2fdeb6717f9805b0dd511">
    <div class="card-content">
      <div class="card-title" id="R-card-5382aaf8b3d2fdeb6717f9805b0dd511">
        <a href="/bash/containers/containers-1/">
        Containers
        </a>
      </div>
    </div>
  </article>
</li>
</ul>
</div>

  <footer class="footline">
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Containers</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="containers">Containers</h1>

<h1 id="introduction-to-containers">Introduction to Containers</h1>
<ul>
<li>Take advantage of the native virtualization features available in the Linux kernel.</li>
<li>Each container typically encapsulates one self-contained application that includes all dependencies such as library files, configuration files, software binaries, and services.</li>
</ul>
<p>Traditional server/ application deployment:</p>
<ul>
<li>Applications may have conflicting requirements in terms of shared library files, package dependencies, and software versioning.</li>
<li>Patching or updating the operating system may result in breaking an application functionality.</li>
<li>Developers perform an analysis on their current deployments before they decide whether to collocate a new application with an existing one or to go with a new server without taking the risk of breaking the current operation.</li>
</ul>
<p>Container Model:</p>
<ul>
<li>
<p>Developers can now package their application alongside dependencies, shared library files, environment variables, and other specifics in a single image file and use that file to run the application in a unique, isolated &ldquo;environment&rdquo; called container.</p>
</li>
<li>
<p>A container is essentially a set of processes that runs in complete seclusion on a Linux system.</p>
</li>
<li>
<p>A single Linux system running on bare metal hardware or in a virtual machine may have tens or hundreds of containers running at a time.</p>
</li>
<li>
<p>The underlying hardware may be located either on the ground or in the cloud.</p>
</li>
<li>
<p>Each container is treated as a complete whole, which can be tagged, started, stopped, restarted, or even transported to another server without impacting other running containers.</p>
</li>
<li>
<p>Any conflicts that may exist among applications, within application components, or with the operating system can be evaded.</p>
</li>
<li>
<p>Applications encapsulated to run inside containers are called containerized applications.</p>
</li>
<li>
<p>Containerization is a growing trend for architecting and deploying applications, application components, and databases in real world environments.</p>
</li>
</ul>
<h3 id="containers-and-the-linux-features">Containers and the Linux Features</h3>
<ul>
<li>Container technology employs some of the core features available in the Linux kernel.</li>
<li>These features include:
<ul>
<li><strong>control groups</strong></li>
<li><strong>namespaces</strong></li>
<li><strong>seccomp</strong> (secure computing mode)</li>
<li><strong>SELinux</strong></li>
</ul>
</li>
</ul>
<p><strong>Control Groups</strong> (cgroups)</p>
<ul>
<li>Split processes into groups to set limits on their consumption of compute resources&mdash;CPU, memory, disk, and network I/O.</li>
<li>These restrictions result in controlling individual processes from over utilizing available resources.</li>
</ul>
<p><strong>Namespaces</strong></p>
<ul>
<li>Restrict the ability of process groups from seeing or accessing system resources&mdash;PIDs, network interfaces, mount points, hostname, etc.</li>
<li>Creates a layer of isolation between process groups and the rest of the system.</li>
<li>Guarantees a secure, performant, and stable environment for containerized applications as well as the host operating system.</li>
</ul>
<p><strong>Secure Computing Mode (seccomp) and SELinux</strong></p>
<ul>
<li>Impose security constraints thereby protecting processes from one another and the host operating system from running processes.</li>
<li>Container technology employs these characteristics to run processes isolated in a highly secure environment with full control over what they can or cannot do.</li>
</ul>
<h2 id="benefits-of-using-containers">Benefits of Using Containers</h2>
<h3 id="isolation">Isolation</h3>
<ul>
<li>Containers are not affected due to changes in the host operating system or in other hosted or containerized applications, as they run fully isolated from the rest of the environment.</li>
</ul>
<h3 id="loose-coupling">Loose Coupling</h3>
<ul>
<li>Containerized applications are loosely coupled with the underlying operating system due to their self-containment and minimal level of dependency.</li>
</ul>
<h3 id="maintenance-independence">Maintenance Independence</h3>
<ul>
<li>Maintenance is performed independently on individual containers.</li>
</ul>
<h3 id="less-overhead">Less Overhead</h3>
<ul>
<li>Containers require fewer system resources than do bare metal and virtual servers.</li>
</ul>
<h3 id="transition-time">Transition Time</h3>
<ul>
<li>Containers require a few seconds to start and stop.</li>
</ul>
<h3 id="transition-independence">Transition Independence</h3>
<ul>
<li>Transitioning from one state to another (start or stop) is independent of other containers, and it does not affect or require a restart of any underlying host operating system service.</li>
</ul>
<h3 id="portability">Portability</h3>
<ul>
<li>Containers can be migrated to other servers without modifications to the contained applications.</li>
<li>Target servers may be bare metal or virtual and located on-premises or in the cloud.</li>
</ul>
<h3 id="reusability">Reusability</h3>
<ul>
<li>The same container image can be used to run identical containers in development, test, preproduction, and production environments.</li>
<li>There is no need to rebuild the image.</li>
</ul>
<h3 id="rapidity">Rapidity</h3>
<ul>
<li>The container technology allows for accelerated application development, testing, deployment, patching, and scaling.</li>
<li>There is no need for an exhaustive testing.</li>
</ul>
<h3 id="version-control">Version Control</h3>
<ul>
<li>Container images can be version-controlled, which gives users the flexibility in choosing the right version to run a container.</li>
</ul>
<h3 id="container-home-bare-metal-or-virtual-machine">Container Home: Bare Metal or Virtual Machine</h3>
<p>Containers</p>
<ul>
<li>run directly on the underlying operating system whether it be running on a bare metal server or in a virtual machine.</li>
<li>Share hardware and operating system resources securely among themselves.</li>
<li>Containerized applications stay lightweight and isolated, and run in parallel.</li>
<li>Share the same Linux kernel and require far fewer hardware resources than do virtual machines, which contributes to their speedy start and stop.</li>
<li>Given the presence of an extra layer of hypervisor services, it may be more beneficial and economical to run containers directly on non-virtualized physical servers.</li>
</ul>
<p><a href="#R-image-7de49ad95e43d0784814851548a0a8ed" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/image-3RXCU9W7%201.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7de49ad95e43d0784814851548a0a8ed"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/image-3RXCU9W7%201.jpg"></a></p>
<h3 id="container-images-and-container-registries">Container Images and Container Registries</h3>
<ul>
<li>Launching a container requires a pre-packaged image to be available.</li>
</ul>
<p><strong>container image</strong></p>
<ul>
<li>
<p>Essentially a static file that is built with all necessary components (application binaries, library files, configuration settings, environment variables, static data files, etc.)</p>
</li>
<li>
<p>Required by an application to run smoothly, securely, and independently.</p>
</li>
<li>
<p>RHEL follows the <strong>open container initiative</strong> (<strong>OCI</strong>) to allow users to build images based on industry standard specifications that define the image format, host operating system metadata, and supported hardware architectures.</p>
</li>
<li>
<p>An OCI-compliant image can be executed and managed with OCI-compliant tools such as podman (pod manager) and Docker.</p>
</li>
<li>
<p>Images can be version-controlled giving users the suppleness to use the latest or any of the previous versions to launch their containers.</p>
</li>
<li>
<p>A single image can be used to run several containers at once.</p>
</li>
<li>
<p>Container images adhere to a standard naming convention for identification.</p>
</li>
<li>
<p>This is referred to as <strong>fully qualified image name</strong> (<strong>FQIN</strong>).</p>
<ul>
<li>Comprised of four components:
<ul>
<li>(1) the storage location (registry_name)</li>
<li>(2) the owner or organization name (user_name)</li>
<li>(3) a unique repository name (repo_name)</li>
<li>(4) an optional version (tag).</li>
</ul>
</li>
<li>The syntax of an FQIN is:
<em>registry_hostname/user_name/repo_name:tag</em>.</li>
</ul>
</li>
<li>
<p>Images are stored and maintained in public or private registries;</p>
</li>
<li>
<p>They need to be downloaded and made locally available for consumption.</p>
</li>
<li>
<p>There are several registries available on the Internet.</p>
<ul>
<li><em>registry.redhat.io</em> (/images/images based on official Red Hat products; requires authentication),</li>
<li><em>registry.access.redhat.com</em> (requires no authentication)</li>
<li><em>registry.connect.redhat.com</em> (/images/images based on third-party products)</li>
<li><em>hub.docker.com</em> (Docker Hub).</li>
</ul>
</li>
<li>
<p>The three Red Hat registries may be searched using the Red Hat Container Catalog at catalog.redhat.com/software/containers/search.</p>
</li>
<li>
<p>Additional registries may be added as required.</p>
</li>
<li>
<p>Private registries may also require authentication for access.</p>
</li>
</ul>
<h3 id="rootful-vs-rootless-containers">Rootful vs. Rootless Containers</h3>
<ul>
<li>
<p>Containers can be launched with the root user privileges (sudo or directly as the root user).</p>
</li>
<li>
<p>This gives containers full access to perform administrative functions including the ability to map privileged network ports (1024 and below).</p>
</li>
<li>
<p>Launching containers with superuser rights opens a gate to potential unauthorized access to the container host if a container is compromised due to a vulnerability or misconfiguration.</p>
</li>
<li>
<p>To secure containers and the underlying operating system, containers should be launched and interacted with as normal Linux users.</p>
</li>
<li>
<p>Such containers are referred to as <strong>rootless containers</strong>.</p>
</li>
<li>
<p>Rootless containers allow regular, unprivileged users to run containers without the ability to perform tasks that require privileged access.</p>
</li>
</ul>
<h2 id="working-with-images-and-containers">Working with Images and Containers</h2>
<h3 id="lab-install-necessary-container-support">Lab: Install Necessary Container Support</h3>
<ul>
<li>Install the necessary software to set the foundation for completing the exercises in the remainder of the chapter.</li>
<li>The standard RHEL 9.1 image includes a package called <code>container-tools</code> that consists of all the required components and commands.</li>
<li>Use the standard <code>dnf</code> command to install the package.</li>
</ul>
<p>1. Install the container-tools package:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># dnf install -y container-tools</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Upgraded:
</span></span><span style="display:flex;"><span>  aardvark-dns-2:1.10.0-3.el9_4.x86_64 
</span></span><span style="display:flex;"><span>  buildah-2:1.33.7-3.el9_4.x86_64         
</span></span><span style="display:flex;"><span>  netavark-2:1.10.3-1.el9.x86_64            
</span></span><span style="display:flex;"><span>  podman-4:4.9.4-6.el9_4.x86_64                                   
</span></span><span style="display:flex;"><span> Installed:
</span></span><span style="display:flex;"><span>  container-tools-1-14.el9.noarch        
</span></span><span style="display:flex;"><span>  podman-docker-4:4.9.4-6.el9_4.noarch 
</span></span><span style="display:flex;"><span>  podman-remote-4:4.9.4-6.el9_4.x86_64    
</span></span><span style="display:flex;"><span>  python3-podman-3:4.9.0-1.el9.noarch 
</span></span><span style="display:flex;"><span>  python3-pyxdg-0.27-3.el9.noarch    
</span></span><span style="display:flex;"><span>  python3-tomli-2.0.1-5.el9.noarch   
</span></span><span style="display:flex;"><span>  skopeo-2:1.14.3-3.el9_4.x86_64             
</span></span><span style="display:flex;"><span>  toolbox-0.0.99.5-2.el9.x86_64      
</span></span><span style="display:flex;"><span>  udica-0.2.8-1.el9.noarch    </span></span></code></pre></div>
<p>2. Verify the package installation:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># dnf list container-tools</span>
</span></span><span style="display:flex;"><span> Updating Subscription Management repositories.
</span></span><span style="display:flex;"><span> Last metadata expiration check: 14:53:32 ago on Wed <span style="color:#ff9f43">31</span> Jul <span style="color:#ff9f43">2024</span> 05:45:56 PM MST.
</span></span><span style="display:flex;"><span> Installed Packages
</span></span><span style="display:flex;"><span> container-tools.noarch   1-14.el9    @rhel-9-for-x86_64-appstream-rpms</span></span></code></pre></div>
<h3 id="podman-command"><code>podman</code> Command</h3>
<ul>
<li>Finding, inspect, retrieve, and delete images</li>
<li>Run, stop, list, and delete containers.</li>
<li>Used for most of these operations.</li>
</ul>
<h3 id="subcommands">Subcommands</h3>
<h4 id="image-management">Image Management</h4>
<p><strong>build</strong></p>
<ul>
<li>Builds an image using instructions delineated in a Container file</li>
</ul>
<p><strong>images</strong></p>
<ul>
<li>Lists downloaded images from local storage</li>
</ul>
<p><strong>inspect</strong></p>
<ul>
<li>Examines an image and displays its details</li>
</ul>
<p><strong>login/logout</strong></p>
<ul>
<li>Logs in/out to/from a container registry. A login may be required to access private and protected registries.</li>
</ul>
<p><strong>pull</strong></p>
<ul>
<li>Downloads an image to local storage from a registry</li>
</ul>
<p><strong>rmi</strong></p>
<ul>
<li>Removes an image from local storage</li>
</ul>
<p><strong>search</strong></p>
<ul>
<li>Searches for an image. The following options can be included with this subcommand:</li>
</ul>
<ol>
<li>A <em>partial image name</em> in the search will produce a list of all images containing the partial name.</li>
<li>The <code>--no-trunc</code> option makes the command exhibit output without truncating it.</li>
<li>The <code>--limit &lt;number&gt;</code> option limits the displayed results to the specified number.</li>
</ol>
<p><strong>tag</strong></p>
<ul>
<li>Adds a name to an image. The default is &rsquo;latest&rsquo; to classify the image as the latest version. Older images may have specific version identifiers.</li>
</ul>
<h4 id="container-management">Container Management</h4>
<p><strong>attach</strong></p>
<ul>
<li>Attaches to a running container</li>
</ul>
<p><strong>exec</strong></p>
<ul>
<li>Runs a process in a running container</li>
</ul>
<p><strong>generate</strong></p>
<ul>
<li>Generates a systemd unit configuration file that can be used to control the operational state of a container. The <code>--new</code> option is important and is employed in later exercises.</li>
</ul>
<p><strong>info</strong></p>
<ul>
<li>Reveals system information, including the defined registries</li>
</ul>
<p><strong>inspect</strong></p>
<ul>
<li>Exhibits the configuration of a container</li>
</ul>
<p><strong>ps</strong></p>
<ul>
<li>Lists running containers (includes stopped containers with the -a option)</li>
</ul>
<p><strong>rm</strong></p>
<ul>
<li>Removes a container</li>
</ul>
<p><strong>run</strong></p>
<ul>
<li>Launches a new container from an image. Some options such as -d (detached), -i (interactive), and -t (terminal) are important and are employed in exercises where needed.</li>
</ul>
<p><strong>start/stop/restart</strong></p>
<ul>
<li>Starts, stops, or restarts a container</li>
</ul>
<h3 id="skopeo-command"><code>skopeo</code> Command</h3>
<ul>
<li>Utilized for interacting with local and remote images and registries.</li>
<li>Has numerous subcommands available; however, you will be using only the <code>inspect</code> subcommand to examine the details of an image stored in a remote registry.</li>
</ul>
<p><em>/etc/containers/registries.conf</em></p>
<ul>
<li>System-wide configuration file for image registries.</li>
<li>Normal Linux users may store a customized copy of this file, if required, under the <em>~/.config/containers</em> directory.</li>
<li>Settings stored in the per-user file will take precedence over those stored in the system-wide file.
<ul>
<li>Useful for running rootless containers.</li>
</ul>
</li>
<li>Defines searchable and blocked registries.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># grep -Ev &#39;^#|^$&#39; /etc/containers/registries.conf</span>
</span></span><span style="display:flex;"><span> unqualified-search-registries <span style="color:#ff6ac1">=</span> <span style="color:#ff6ac1">[</span><span style="color:#5af78e">&#34;registry.access.redhat.com&#34;</span>, <span style="color:#5af78e">&#34;registry.redhat.io&#34;</span>, <span style="color:#5af78e">&#34;docker.io&#34;</span><span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> short-name-mode <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;enforcing&#34;</span></span></span></code></pre></div>
<ul>
<li>The output shows three registries.</li>
<li>The <code>podman</code> command searches these registries for container images in the given order.</li>
<li>Can add additional registries to the list.</li>
</ul>
<p>Add a private registry called <em>registry.private.myorg.io</em> to be added with the highest priority:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/containers/registries.conf</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> unqualified-search-registries <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">\[</span><span style="color:#5af78e">&#34;registry.private.myorg.io&#34;</span>,
</span></span><span style="display:flex;"><span> <span style="color:#5af78e">&#34;registry.access.redhat.com&#34;</span>, <span style="color:#5af78e">&#34;registry.redhat.io&#34;</span>, <span style="color:#5af78e">&#34;docker.io&#34;</span><span style="color:#5af78e">\]</span></span></span></code></pre></div>
<p>If this private registry is the only one to be used, you can take the rest of the registry entries out of the list:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> unqualified-search-registries <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">\[</span><span style="color:#5af78e">&#34;registry.private.myorg.io&#34;</span><span style="color:#5af78e">\]</span></span></span></code></pre></div>
<p>EXAM TIP: As there is no Internet access provided during Red Hat exams, you may have to access a network-based registry to download images.</p>
<h3 id="viewing-podman-configuration-and-version">Viewing Podman Configuration and Version</h3>
<ul>
<li>The podman command references various system runtime and configuration files and runs certain Linux commands in the background to gather and display information.</li>
<li>For instance, it looks for registries and storage data in the system-wide and per-user configuration files, pulls memory information from the <em>/proc/meminfo</em> file, executes <code>uname -r</code>to obtain the kernel version, and so on.</li>
<li>podman&rsquo;s <code>info</code> subcommand shows all this information.</li>
</ul>
<p>Here is a sample when this command is executed as a normal
user (user1):</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[[</span>user1@server10 root<span style="color:#ff6ac1">]</span>$ podman info
</span></span><span style="display:flex;"><span> ERRO<span style="color:#ff6ac1">[</span>0000<span style="color:#ff6ac1">]</span> XDG_RUNTIME_DIR directory <span style="color:#5af78e">&#34;/run/user/0&#34;</span> is not owned by the current user<span style="color:#ff6ac1">](</span>&lt;<span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman info
</span></span><span style="display:flex;"><span> host:
</span></span><span style="display:flex;"><span>  arch: amd64
</span></span><span style="display:flex;"><span>  buildahVersion: 1.33.8
</span></span><span style="display:flex;"><span>  cgroupControllers:
</span></span><span style="display:flex;"><span>  - memory
</span></span><span style="display:flex;"><span>  - pids
</span></span><span style="display:flex;"><span>  cgroupManager: systemd
</span></span><span style="display:flex;"><span>  cgroupVersion: v2
</span></span><span style="display:flex;"><span>  conmon:
</span></span><span style="display:flex;"><span> ...</span></span></code></pre></div>
<ul>
<li>
<p>Re-run the command as root (preceded by sudo if running as user1) and compare the values for the settings &ldquo;rootless&rdquo; under host and &ldquo;ConfigFile&rdquo; and &ldquo;ImageStore&rdquo; under store.</p>
</li>
<li>
<p>The differences lie between where the root and rootless (normal) users store and obtain configuration data, the number of container images they have locally available, and so on.</p>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># podman info</span>
</span></span><span style="display:flex;"><span> host:
</span></span><span style="display:flex;"><span>  arch: amd64
</span></span><span style="display:flex;"><span>  buildahVersion: 1.33.8
</span></span><span style="display:flex;"><span>  cgroupControllers:
</span></span><span style="display:flex;"><span>  - cpuset
</span></span><span style="display:flex;"><span>  - cpu
</span></span><span style="display:flex;"><span>  - io
</span></span><span style="display:flex;"><span>  - memory
</span></span><span style="display:flex;"><span>  - hugetlb
</span></span><span style="display:flex;"><span>  - pids
</span></span><span style="display:flex;"><span>  - rdma
</span></span><span style="display:flex;"><span>  - misc
</span></span><span style="display:flex;"><span>...</span></span></code></pre></div>
<p>Similarly, you can run the podman command as follows to check its
version:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># podman version</span>
</span></span><span style="display:flex;"><span> Client:       Podman Engine
</span></span><span style="display:flex;"><span> Version:      4.9.4-rhel
</span></span><span style="display:flex;"><span> API Version:  4.9.4-rhel
</span></span><span style="display:flex;"><span> Go Version:   go1.21.11 <span style="color:#ff6ac1">(</span>Red Hat 1.21.11-1.el9_4<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Built:        Mon Jul  <span style="color:#ff9f43">1</span> 03:27:14 <span style="color:#ff9f43">2024</span>
</span></span><span style="display:flex;"><span> OS/Arch:      linux/amd64</span></span></code></pre></div>
<h3 id="image-management-1">Image Management</h3>
<p>Container images</p>
<ul>
<li>Are available from numerous private and public registries.</li>
<li>They are pre-built for a variety of use cases.</li>
<li>You can search through registries to find the one that suits your needs.</li>
<li>You can examine their metadata before downloading them for consumption.</li>
<li>Downloaded images can be removed when no longer needed to conserve local storage.</li>
<li>The same pair of commands&mdash;<code>podman</code> and <code>skopeo</code>&mdash;is employed for these operations.</li>
</ul>
<h3 id="lab-search-examine-download-and-remove-an-image">Lab: Search, Examine, Download, and Remove an Image</h3>
<ul>
<li>Log in to the registry.access.redhat.com registry</li>
<li>Look for an image called <em>mysql-80</em> in the registry, examine its details, pull it to your system, confirm the retrieval, and finally erase it from the local storage.</li>
</ul>
<p>1. Log in to the specified Red Hat registry:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman login registry.redhat.io</span></span></code></pre></div>
<p>2. Confirm a successful login:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman login registry.redhat.io --get-login</span></span></code></pre></div>
<p>3. Find the mysql-80 image in the specified registry. Add the
<code>--no-trunc</code> option to view full output.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman search registry.redhat.io/mysql-80 --no-trunc
</span></span><span style="display:flex;"><span> NAME                                     DESCRIPTION
</span></span><span style="display:flex;"><span> registry.redhat.io/rhel8/mysql-80        This container image provides a containerized packaging of the MySQL mysqld daemon and client application. The  mysqld server daemon accepts connections from clients and provides access to content from MySQL databases on behalf of the clients.
</span></span><span style="display:flex;"><span>...</span></span></code></pre></div>
<p>4. Select the second image rhel9/mysql-80 for this exercise. Inspect the image without downloading it using skopeo inspect. A long output
will be generated. The command uses the docker:// mechanism to access
the image.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ skopeo inspect docker://registry.redhat.io/rhel9/mysql-80
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#5af78e">&#34;Name&#34;</span>: <span style="color:#5af78e">&#34;registry.redhat.io/rhel9/mysql-80&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#5af78e">&#34;Digest&#34;</span>: <span style="color:#5af78e">&#34;sha256:247903d2103a3c1db9401f6340ecdcd97c6244480b7a3419e6303dda650491dc&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#5af78e">&#34;RepoTags&#34;</span>: <span style="color:#ff6ac1">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-190&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-190.1655192188&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-190.1655192188-source&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-190-source&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-197&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-197-source&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#5af78e">&#34;1-206&#34;</span>,
</span></span><span style="display:flex;"><span>...</span></span></code></pre></div>
<p>Output:</p>
<ul>
<li>
<p>Shows older versions under RepoTags</p>
</li>
<li>
<p>Creation time for the latest version</p>
</li>
<li>
<p>Build date of the image</p>
</li>
<li>
<p>description</p>
</li>
<li>
<p>other information.</p>
</li>
<li>
<p>It is a good practice to analyze the metadata of an image prior to downloading and consuming it.</p>
</li>
</ul>
<p>5. Download the image by specifying the fully qualified image name using podman pull:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman pull docker://registry.redhat.io/rhel9/mysql-80
</span></span><span style="display:flex;"><span> Trying to pull registry.redhat.io/rhel9/mysql-80:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob 846c0bdf4e30 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying blob cc296d75b612 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying blob db22e630b1c7 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config b5782120a3 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures
</span></span><span style="display:flex;"><span> b5782120a320e5915d86555e661c357cfa56dd8320ba4c54a58caa1e1c91925f</span></span></code></pre></div>
<p>6. List the image to confirm the retrieval using podman images:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman images
</span></span><span style="display:flex;"><span> REPOSITORY                         TAG         IMAGE ID      CREATED      SIZE
</span></span><span style="display:flex;"><span> registry.redhat.io/rhel9/mysql-80  latest      b5782120a320  <span style="color:#ff9f43">2</span> weeks ago  <span style="color:#ff9f43">555</span> MB</span></span></code></pre></div>
<p>7. Display the image&rsquo;s details using <code>podman inspect</code>:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman inspect mysql-80
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>
</span></span><span style="display:flex;"><span>     <span style="color:#ff6ac1">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#5af78e">&#34;Id&#34;</span>: <span style="color:#5af78e">&#34;b5782120a320e5915d86555e661c357cfa56dd8320ba4c54a58caa1e1c91925f&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#5af78e">&#34;Digest&#34;</span>: <span style="color:#5af78e">&#34;sha256:247903d2103a3c1db9401f6340ecdcd97c6244480b7a3419e6303dda650491dc&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#5af78e">&#34;RepoTags&#34;</span>: <span style="color:#ff6ac1">[</span>
</span></span><span style="display:flex;"><span>               <span style="color:#5af78e">&#34;registry.redhat.io/rhel9/mysql-80:latest&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#ff6ac1">]</span>,</span></span></code></pre></div>
<p>8. Remove the mysql-80 image from local storage:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman rmi mysql-80
</span></span><span style="display:flex;"><span> Untagged: registry.redhat.io/rhel9/mysql-80:latest
</span></span><span style="display:flex;"><span> Deleted: b5782120a320e5915d86555e661c357cfa56dd8320ba4c54a58caa1e1c91925f</span></span></code></pre></div>
<ul>
<li>Shows the ID of the image after deletion.</li>
</ul>
<p>9. Confirm the removal:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman images
</span></span><span style="display:flex;"><span> REPOSITORY  TAG         IMAGE ID    CREATED     SIZE</span></span></code></pre></div>
<h3 id="containerfile">Containerfile</h3>
<ul>
<li>Can build a custom image by outlining the steps you need to be run in a file called Containerfile.</li>
<li>The podman command can then be used to read those instructions and executes them to produce a new image.</li>
<li>File name <em>containerfile</em> is widespread; but you can use any name of your liking.</li>
</ul>
<p>Instructions that may be utilized inside a Containerfile to perform specific functions during the build process:</p>
<p><strong>CMD</strong></p>
<ul>
<li>Runs a command</li>
</ul>
<p><strong>COPY</strong></p>
<ul>
<li>Copies files to the specified location</li>
</ul>
<p><strong>ENV</strong></p>
<ul>
<li>Defines environment variables to be used during the build process</li>
</ul>
<p><strong>EXPOSE</strong></p>
<ul>
<li>A port number that will be opened when a container is launched using this image</li>
</ul>
<p><strong>FROM</strong></p>
<ul>
<li>Identifies the base container image to use</li>
</ul>
<p><strong>RUN</strong></p>
<ul>
<li>Executes the specified commands</li>
</ul>
<p><strong>USER</strong></p>
<ul>
<li>Defines a non-root user to run the commands as</li>
</ul>
<p><strong>WORKDIR</strong></p>
<ul>
<li>Sets the working directory. This directory is automatically created if it does not already exist.</li>
</ul>
<p>A sample container file is presented below:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ vim containerfile</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#78787e"># Use RHEL9 base image</span>
</span></span><span style="display:flex;"><span> FROM registry.redhat.io/ubi9/ubi
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Install Apache web server software</span>
</span></span><span style="display:flex;"><span> RUN dnf -y install httpd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Copy the website</span>
</span></span><span style="display:flex;"><span> COPY ./index.html /var/www/html/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Expose Port 80/tcp</span>
</span></span><span style="display:flex;"><span> EXPOSE <span style="color:#ff9f43">80</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Start Apache web server</span>
</span></span><span style="display:flex;"><span> CMD <span style="color:#ff6ac1">[</span><span style="color:#5af78e">&#34;httpd&#34;</span><span style="color:#ff6ac1">]</span></span></span></code></pre></div>
<ul>
<li>The index.html file may contain a basic statement such as &ldquo;This is a custom-built Apache web server container image based on RHEL 9&rdquo;.</li>
</ul>
<h3 id="lab-use-containerfile-to-build-image">Lab: Use Containerfile to Build Image</h3>
<ul>
<li>Use a containerfile to build a custom image based on the latest version of the RHEL 9 universal base image (ubi) available from a Red Hat container registry.</li>
<li>Confirm the image creation.</li>
<li>Use the podman command for these activities.</li>
</ul>
<p>1. Log in to the specified Red Hat registry:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman login registry.redhat.io
</span></span><span style="display:flex;"><span> Authenticating with existing credentials <span style="color:#ff6ac1">for</span> registry.redhat.io
</span></span><span style="display:flex;"><span> Existing credentials are valid. Already logged in to registry.redhat.io</span></span></code></pre></div>
<p>2. Confirm a successful login:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman login registry.redhat.io --get-login</span></span></code></pre></div>
<p>3. Create a file called containerfile with the following code:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ vim containerfile2</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#78787e"># Use RHEL9 base image</span>
</span></span><span style="display:flex;"><span> FROM registry.redhat.io/ubi9/ubi
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Count the number of characters</span>
</span></span><span style="display:flex;"><span> CMD <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;RHCSA exam is hands-on.&#34;</span> | wc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Copy a local file to /tmp</span>
</span></span><span style="display:flex;"><span> COPY ./testfile /tmp</span></span></code></pre></div>
<p>4. Create a file called testfile with some random text in it and place it in the same directory as the containerfile.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;boo bee doo bee doo&#34;</span> &gt;&gt; testfile
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ cat testfile 
</span></span><span style="display:flex;"><span> boo bee doo bee doo</span></span></code></pre></div>
<p>5. Build an image by specifying the containerfile name and an image tag such as <code>ubi9-simple-image</code>. The period character at the end represents the current directory and this is where both containerfile and testfile are located.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman image build -f containerfile2 -t ubi9-simple-image .
</span></span><span style="display:flex;"><span> STEP 1/3: FROM registry.redhat.io/ubi9/ubi
</span></span><span style="display:flex;"><span> Trying to pull registry.redhat.io/ubi9/ubi:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob cc296d75b612 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config 159a1e6731 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures
</span></span><span style="display:flex;"><span> STEP 2/3: CMD <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;RHCSA exam is hands-on.&#34;</span> | wc
</span></span><span style="display:flex;"><span> --&gt; 4c005bfd0b34
</span></span><span style="display:flex;"><span> STEP 3/3: COPY ./testfile /tmp
</span></span><span style="display:flex;"><span> COMMIT ubi9-simple-image
</span></span><span style="display:flex;"><span> --&gt; a2797b06a129
</span></span><span style="display:flex;"><span> Successfully tagged localhost/ubi9-simple-image:latest
</span></span><span style="display:flex;"><span> a2797b06a1294ed06edab2ba1c21d2bddde3eb3af1d8ed286781837f62992622</span></span></code></pre></div>
<p>6. Confirm image creation:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman image ls
</span></span><span style="display:flex;"><span> REPOSITORY                   TAG         IMAGE ID      CREATED        SIZE
</span></span><span style="display:flex;"><span> localhost/ubi9-simple-image  latest      a2797b06a129  <span style="color:#ff9f43">2</span> minutes ago  <span style="color:#ff9f43">220</span> MB
</span></span><span style="display:flex;"><span> registry.redhat.io/ubi9/ubi  latest      159a1e67312e  <span style="color:#ff9f43">2</span> weeks ago    <span style="color:#ff9f43">220</span> MB</span></span></code></pre></div>
<p>Output:</p>
<ul>
<li>
<p>downloaded image</p>
</li>
<li>
<p>new custom image along with their image IDs, creation time, and size.</p>
</li>
<li>
<p>Do not remove the custom image yet as you will be using it to launch a container in the next section.</p>
</li>
</ul>
<h3 id="basic-container-management">Basic Container Management</h3>
<ul>
<li>Starting, stopping, listing, viewing information about, and deleting them.</li>
<li>Depending on the use case, containers can be launched in different ways.</li>
<li>They can:
<ul>
<li>Have a name assigned or be nameless</li>
<li>Have a terminal session opened for interaction</li>
<li>Execute an entry point command (the command specified at the launch time) and be auto-terminated right after.</li>
<li>etc.</li>
</ul>
</li>
<li>Running containers can be stopped and restarted, or discarded if no longer needed.</li>
<li>The podman command is utilized to start containers and manage their lifecycle.</li>
<li>This command is also employed to list stopped and running containers, and view their details.</li>
</ul>
<h3 id="lab-run-interact-with-and-remove-a-named-container">Lab: Run, Interact with, and Remove a Named Container</h3>
<ul>
<li>Run a container based on the latest version of the RHEL 8 ubi available in the Red Hat container registry.</li>
<li>Assign this container a name and run a few native Linux commands in a terminal window interactively.</li>
<li>Exit out of the container to mark the completion of the exercise.</li>
</ul>
<p>1. Launch a container using ubi8 (RHEL 8). Name this container rhel8-base-os and open a terminal session for interaction:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman run -ti --name rhel8-base-os ubi8
</span></span><span style="display:flex;"><span> Resolved <span style="color:#5af78e">&#34;ubi8&#34;</span> as an <span style="color:#ff5c57">alias</span> <span style="color:#ff6ac1">(</span>/etc/containers/registries.conf.d/001-rhel-shortnames.conf<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Trying to pull registry.access.redhat.com/ubi8:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob 8694db102e5b <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config 269749ad51 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># </span></span></span></code></pre></div>
<ul>
<li>
<p>Downloaded the latest version of the specified image automatically even though no FQIN was provided.</p>
<ul>
<li>This is because it searched through the registries listed in the <em>/etc/containers/registries.conf</em> file and retrieved the image from wherever it found it first (registry.access.redhat.com).</li>
</ul>
</li>
<li>
<p>Opened a terminal session inside the container as the root user to interact with the containerized RHEL 8 OS.</p>
</li>
<li>
<p>The container ID is reflected as the hostname in the container&rsquo;s command prompt (last line in the output). This is an auto-generated ID.</p>
</li>
<li>
<p>If you encounter any permission issues, delete the /etc/docker directory (if it exists) and try again.</p>
</li>
</ul>
<p>2. Run a few basic commands such as pwd, ls, cat, and date inside the
container for verification:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pwd</span>
</span></span><span style="display:flex;"><span> /
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls</span>
</span></span><span style="display:flex;"><span> bin   dev  home  lib64	     media  opt   root	sbin  sys  usr
</span></span><span style="display:flex;"><span> boot  etc  lib	 lost+found  mnt    proc  run	srv   tmp  var
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /etc/redhat-release</span>
</span></span><span style="display:flex;"><span> Red Hat Enterprise Linux release 8.10 <span style="color:#ff6ac1">(</span>Ootpa<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># date</span>
</span></span><span style="display:flex;"><span> Thu Aug  <span style="color:#ff9f43">1</span> 21:09:13 UTC <span style="color:#ff9f43">2024</span></span></span></code></pre></div>
<p>3. Close the terminal session when done:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@30c7cccd8490 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># exit</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">exit</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ </span></span></code></pre></div>
<p>4. Delete the container using podman rm:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman rm rhel8-base-os
</span></span><span style="display:flex;"><span> rhel8-base-os</span></span></code></pre></div>
<p>Confirm the removal with podman ps.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES</span></span></code></pre></div>
<h3 id="lab-run-a-nameless-container-and-auto-remove-it-after-entry-point-command-execution">Lab: Run a Nameless Container and Auto-Remove it After Entry Point Command Execution</h3>
<ul>
<li>Launch a container based on the latest version of RHEL 7 ubi available in a Red Hat container registry.
<ul>
<li>This image provides the base operating system layer to deploy containerized applications.</li>
</ul>
</li>
<li>Enter a Linux command at the command line for execution inside the container as an entry point command and the container should be automatically deleted right after that.</li>
</ul>
<p>1. Start a container using ubi7 (RHEL 7) and run ls as an entry point command. Remove the container as soon as the entry point command has finished running.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server10 ~<span style="color:#ff6ac1">]</span>$ podman run --rm ubi7 ls
</span></span><span style="display:flex;"><span> Resolved <span style="color:#5af78e">&#34;ubi7&#34;</span> as an <span style="color:#ff5c57">alias</span> <span style="color:#ff6ac1">(</span>/etc/containers/registries.conf.d/001-rhel-shortnames.conf<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Trying to pull registry.access.redhat.com/ubi7:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob 7f2c2c4492b6 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config a084eb42a5 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures
</span></span><span style="display:flex;"><span> bin
</span></span><span style="display:flex;"><span> boot
</span></span><span style="display:flex;"><span> dev
</span></span><span style="display:flex;"><span> etc
</span></span><span style="display:flex;"><span> home
</span></span><span style="display:flex;"><span>...</span></span></code></pre></div>
<p>2. Confirm the container removal with podman ps:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES</span></span></code></pre></div>
<h2 id="advanced-container-management">Advanced Container Management</h2>
<ul>
<li>Preset environment variables may be passed when launching containers or new variables may be set for containerized applications to consume for proper operation.</li>
<li>Information stored during an application execution is lost when a container is restarted or erased.</li>
<li>This behavior can be overridden by making a directory on the host available inside the container for saving data persistently.</li>
<li>Containers may be configured to start and stop with the transitioning of the host system via the systemd service. These advanced tasks are also performed with the <code>podman</code> command.</li>
</ul>
<h2 id="containers-and-port-mapping">Containers and Port Mapping</h2>
<ul>
<li>Applications running in different containers often need to exchange data for proper operation.</li>
<li>For instance, a containerized Apache web server may need to talk to a MySQL database instance running in a different container.</li>
<li>It may also need to talk to the outside world over a port such as 80 or 8080.</li>
<li>To support this traffic flow, appropriate port mappings are established between the host system and each container.</li>
</ul>
<p>EXAM TIP: As a normal user, you cannot map a host port below 1024 to a container port.</p>
<h3 id="lab-configure-port-mapping">Lab: Configure Port Mapping</h3>
<ul>
<li>Launch a container called rhel7-port-map in detached mode (as a daemon) with host port 10000 mapped to port 8000 inside the container.</li>
<li>Use a version of the RHEL 7 image with Apache web server software pre-installed.</li>
<li>This image is available from a Red Hat container registry.</li>
<li>List the running container and confirm the port mapping.</li>
</ul>
<p>1. Search for an Apache web server image for RHEL 7 using podman
search:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman search registry.redhat.io/rhel7/httpd
</span></span><span style="display:flex;"><span> NAME                                      DESCRIPTION
</span></span><span style="display:flex;"><span> registry.redhat.io/rhscl/httpd-24-rhel7   Apache HTTP 2.4 Server</span></span></code></pre></div>
<p>2. Log in to registry.redhat.io using the Red Hat credentials to access
the image:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman login registry.redhat.io
</span></span><span style="display:flex;"><span> Username: tdavetech@gmail.com
</span></span><span style="display:flex;"><span> Password: 
</span></span><span style="display:flex;"><span> Login Succeeded!</span></span></code></pre></div>
<p>3. Download the latest version of the Apache image using podman pull:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman pull registry.redhat.io/rhscl/httpd-24- rhel7
</span></span><span style="display:flex;"><span> Trying to pull registry.redhat.io/rhscl/httpd-24-rhel7:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob fd77da0b900b <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying blob 7f2c2c4492b6 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying blob ea092d7970b2 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config 847db19d6c <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures
</span></span><span style="display:flex;"><span> 847db19d6cbc726106c901a7713d30dccc9033031ec812037c4c458319a1b328</span></span></code></pre></div>
<p>4. Verify the download using podman images:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman images
</span></span><span style="display:flex;"><span> REPOSITORY                               TAG         IMAGE ID       CREATED       SIZE
</span></span><span style="display:flex;"><span> registry.redhat.io/rhscl/httpd-24-rhel7  latest      847db19d6cbc  <span style="color:#ff9f43">2</span>  months ago  <span style="color:#ff9f43">332</span> MB</span></span></code></pre></div>
<p>5. Launch a container named <em>rhel7-port-map</em> in detached mode to run the containerized Apache web server with host port 10000
mapped to container port 8000.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman run -dp 10000:8000 --name rhel7-port-map  httpd-24-rhel7
</span></span><span style="display:flex;"><span> cd063dff352dfbcd57dd417587513b12ca4033ed657f3baaa28d54df19d4df1c</span></span></code></pre></div>
<p>6. Verify that the container was launched successfully using podman ps:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                           COMMAND               CREATED         STATUS         PORTS                    NAMES
</span></span><span style="display:flex;"><span> cd063dff352d  registry.redhat.io/rhscl/httpd-24-rhel7:latest   /usr/bin/run-http...  <span style="color:#ff9f43">36</span> seconds ago  Up <span style="color:#ff9f43">36</span> seconds  0.0.0.0:10000- &gt;8000/tcp  rhel7-port-map</span></span></code></pre></div>
<p>7. You can also use <code>podman port</code> to view the mapping:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman port rhel7-port-map
</span></span><span style="display:flex;"><span> 8000/tcp -&gt; 0.0.0.0:10000</span></span></code></pre></div>
<ul>
<li>Now any inbound web traffic on host port 10000 will be redirected to the container.</li>
</ul>
<h3 id="exercise-22-7-stop-restart-and-remove-a-container">Exercise 22-7: Stop, Restart, and Remove a Container</h3>
<ul>
<li>Stop the container, restart it, stop it again, and then erase it.</li>
<li>Use appropriate <code>podman</code> subcommands and verify each transition.</li>
</ul>
<p>1. Verify the current operational state of the container rhel7-port-map:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                           COMMAND               CREATED        STATUS        PORTS                    NAMES
</span></span><span style="display:flex;"><span> cd063dff352d  registry.redhat.io/rhscl/httpd-24-rhel7:latest   /usr/bin/run-http...  <span style="color:#ff9f43">3</span> minutes ago  Up <span style="color:#ff9f43">3</span> minutes  0.0.0.0:10000- &gt;8000/tcp  rhel7-port-map</span></span></code></pre></div>
<p>2. Stop the container and confirm.
(the <code>-a</code> option with <code>ps</code> also includes the stopped containers in the output):</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman stop rhel7-port-map
</span></span><span style="display:flex;"><span> rhel7-port-map
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman ps -a
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                           COMMAND               CREATED        STATUS                    PORTS                    NAMES
</span></span><span style="display:flex;"><span> cd063dff352d  registry.redhat.io/rhscl/httpd-24-rhel7:latest   /usr/bin/run-http...  <span style="color:#ff9f43">6</span> minutes ago  Exited <span style="color:#ff6ac1">(</span>0<span style="color:#ff6ac1">)</span> <span style="color:#ff9f43">5</span> seconds ago   0.0.0.0:10000-&gt;8000/tcp  rhel7-port-map</span></span></code></pre></div>
<p>3. Start the container and confirm:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman start rhel7-port-map
</span></span><span style="display:flex;"><span> rhel7-port-map
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman ps -a
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                           COMMAND               CREATED        STATUS         PORTS                    NAMES
</span></span><span style="display:flex;"><span> cd063dff352d  registry.redhat.io/rhscl/httpd-24-rhel7:latest   /usr/bin/run-http...  <span style="color:#ff9f43">8</span> minutes ago  Up <span style="color:#ff9f43">11</span> seconds  0.0.0.0:10000- &gt;8000/tcp  rhel7-port-map</span></span></code></pre></div>
<p>4. Stop the container and remove it:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman rm rhel7-port-map
</span></span><span style="display:flex;"><span> rhel7-port-map</span></span></code></pre></div>
<p>5. Confirm the removal:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman ps -a
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES</span></span></code></pre></div>
<h2 id="containers-and-environment-variables">Containers and Environment Variables</h2>
<ul>
<li>Many times it is necessary to pass a host&rsquo;s pre-defined environment variable, such as PATH, to a containerized application for consumption.</li>
<li>Moreover, it may also be necessary at times to set new variables to inject debugging flags or sensitive information such as passwords, access keys, or other secrets for use inside containers.</li>
<li>Passing host environment variables or setting new environment variables is done at the time of launching a container.</li>
<li>The <code>podman</code> command allows multiple variables to be passed or set with the <code>-e</code> option.</li>
</ul>
<p>EXAM TIP: Use the <code>-e</code> option with each variable that you want to pass or set.</p>
<h3 id="lab-pass-and-set-environment-variables">Lab: Pass and Set Environment Variables</h3>
<ul>
<li>Launch a container using the latest version of a ubi for RHEL 9 available in a Red Hat container registry.</li>
<li>Inject the HISTSIZE environment variable, and a variable called SECRET with a value &ldquo;secret123&rdquo;.</li>
<li>Name this container rhel9-env-vars and have a shell terminal opened to check the variable settings.</li>
<li>Remove this container.</li>
</ul>
<p>1. Launch a container with an interactive terminal session and inject variables <strong>HISTSIZE</strong> and <strong>SECRET</strong> as directed. Use the specified container image.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman run -it -e HISTSIZE -e <span style="color:#ff5c57">SECRET</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;secret123&#34;</span> --name rhel9-env-vars ubi9
</span></span><span style="display:flex;"><span> Resolved <span style="color:#5af78e">&#34;ubi9&#34;</span> as an <span style="color:#ff5c57">alias</span> <span style="color:#ff6ac1">(</span>/etc/containers/registries.conf.d/001- rhel-shortnames.conf<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Trying to pull registry.access.redhat.com/ubi9:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob cc296d75b612 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config 159a1e6731 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@b587355b8fc1 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># </span></span></span></code></pre></div>
<p>2. Verify both variables using the echo command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@b587355b8fc1 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $HISTSIZE $SECRET</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1000</span> secret123
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@b587355b8fc1 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># </span></span></span></code></pre></div>
<p>3. Disconnect from the container, and stop and remove it:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman stop rhel9-env-vars
</span></span><span style="display:flex;"><span> rhel9-env-vars
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman rm rhel9-env-vars
</span></span><span style="display:flex;"><span> rhel9-env-vars</span></span></code></pre></div>
<p>Confirm the deletion:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ podman ps -a
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES</span></span></code></pre></div>
<h2 id="containers-and-persistent-storage">Containers and Persistent Storage</h2>
<ul>
<li>Containers are normally launched for a period of time to run an application and then stopped or deleted when their job is finished.</li>
<li>Any data that is produced during runtime is lost on their restart, failure, or termination.</li>
<li>This data may be saved for persistence on a host directory by attaching the host directory to a container.</li>
<li>The containerized application will see the attached directory just like any other local directory and will use it to store data if it is configured to do so.</li>
<li>Any data that is saved on the directory will be available even after the container is rebooted or removed.</li>
<li>Later, this directory can be re-attached to other containers to give them access to the stored data or to save their own data.</li>
<li>The source directory on the host may itself exist on any local or remote file system.</li>
</ul>
<p>EXAM TIP: Proper ownership, permissions, and SELinux file type must be set to ensure persistent storage is accessed and allows data writes without issues.</p>
<ul>
<li>There are a few simple steps that should be performed to configure a host directory before it can be attached to a container.</li>
<li>These steps include the correct ownership, permissions, and SELinux type (<em>container_file_t</em>).</li>
<li>The special SELinux file type is applied to prevent containerized applications (especially those running in root containers) from gaining undesired privileged access to host files and processes, or other running containers on the host if compromised.</li>
</ul>
<h3 id="lab-attach-persistent-storage-and-access-data-across-containers">Lab: Attach Persistent Storage and Access Data Across Containers</h3>
<ul>
<li>Set up a directory on server20 and attach it to a new container.</li>
<li>Write some data to the directory while in the container.</li>
<li>Delete the container and launch another container with the same directory attached.</li>
<li>Observe the persistence of saved data in the new container and that it is accessible.</li>
<li>Remove the container to mark the completion of this exercise.</li>
</ul>
<p>1. Create a directory called /host_data, set full permissions on it, and confirm:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo mkdir /host_data
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>sudo<span style="color:#ff6ac1">]</span> password <span style="color:#ff6ac1">for</span> user1: 
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo chmod <span style="color:#ff9f43">777</span> /host_data/
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ ll -d /host_data/
</span></span><span style="display:flex;"><span> drwxrwxrwx. <span style="color:#ff9f43">2</span> root root <span style="color:#ff9f43">6</span> Aug  <span style="color:#ff9f43">1</span> 22:59 /host_data/</span></span></code></pre></div>
<p>2. Launch a root container called <em>rhel9-persistent-data</em>  in interactive mode using the latest ubi9 image. Specify the attachment point (<em>/container_data</em>) to be used inside the container for the host directory (<em>/host_data</em>) Ensure the SELinux type container_file_t is automatically set on the directory and files within.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman run --name rhel9-persistent-data -v  /host_data:/container_data:Z -it ubi9
</span></span><span style="display:flex;"><span> Resolved <span style="color:#5af78e">&#34;ubi9&#34;</span> as an <span style="color:#ff5c57">alias</span> <span style="color:#ff6ac1">(</span>/etc/containers/registries.conf.d/001- rhel-shortnames.conf<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Trying to pull registry.access.redhat.com/ubi9:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob cc296d75b612 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config 159a1e6731 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures</span></span></code></pre></div>
<p>3. Confirm the presence of the directory inside the container with <code>ls</code> on /container_data:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@e8711892370f /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls -ldZ /container_data</span>
</span></span><span style="display:flex;"><span> drwxrwxrwx. <span style="color:#ff9f43">2</span> root root  system_u:object_r:container_file_t:s0:c376,c965 <span style="color:#ff9f43">6</span> Aug  <span style="color:#ff9f43">2</span> 05:59  /container_data</span></span></code></pre></div>
<p>4. Create a file called testfile with the echo command under /container_data:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@e8711892370f /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo &#34;This is persistent storage.&#34; &gt;  /container_data/testfile</span></span></span></code></pre></div>
<p>5. Verify the file creation and the SELinux type on it:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@e8711892370f /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls -lZ /container_data/</span>
</span></span><span style="display:flex;"><span> total <span style="color:#ff9f43">4</span>
</span></span><span style="display:flex;"><span> -rw-r--r--. <span style="color:#ff9f43">1</span> root root  system_u:object_r:container_file_t:s0:c376,c965 <span style="color:#ff9f43">28</span> Aug  <span style="color:#ff9f43">2</span> 06:03  testfile</span></span></code></pre></div>
<p>6. Exit out of the container and check the presence of the file in the host directory:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@e8711892370f /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># exit</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">exit</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ ls -lZ /host_data/
</span></span><span style="display:flex;"><span> total <span style="color:#ff9f43">4</span>
</span></span><span style="display:flex;"><span> -rw-r--r--. <span style="color:#ff9f43">1</span> root root  system_u:object_r:container_file_t:s0:c376,c965 <span style="color:#ff9f43">28</span> Aug  <span style="color:#ff9f43">1</span> 23:03  testfile</span></span></code></pre></div>
<p>7. Stop and remove the container:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman stop rhel9-persistent-data
</span></span><span style="display:flex;"><span> rhel9-persistent-data
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman rm rhel9-persistent-data
</span></span><span style="display:flex;"><span> rhel9-persistent-data</span></span></code></pre></div>
<p>8. Launch a new root container called <em>rhel8-persistent-data</em> in interactive mode using the latest ubi8 image from any of the defined registries. Specify the attachment point (<em>/container_data2</em>) to be used inside the container for the host directory (<em>/host_data</em>). Ensure the SELinux type <em>container_file_t</em> is automatically set on the directory and files within.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman run -it --name rhel8-persistent-data -v /host_data:/container_data2:Z ubi8
</span></span><span style="display:flex;"><span> Resolved <span style="color:#5af78e">&#34;ubi8&#34;</span> as an <span style="color:#ff5c57">alias</span> <span style="color:#ff6ac1">(</span>/etc/containers/registries.conf.d/001- rhel-shortnames.conf<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Trying to pull registry.access.redhat.com/ubi8:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob 8694db102e5b <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config 269749ad51 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures </span></span></code></pre></div>
<p>9. Confirm the presence of the directory inside the container with ls on /container_data2:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@af6773299c7e /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls -ldZ /container_data2/</span>
</span></span><span style="display:flex;"><span> drwxrwxrwx. <span style="color:#ff9f43">2</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span style="color:#ff9f43">22</span> Aug  <span style="color:#ff9f43">2</span> 06:03  /container_data2/
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@af6773299c7e /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls -lZ /container_data2/</span>
</span></span><span style="display:flex;"><span> total <span style="color:#ff9f43">4</span>
</span></span><span style="display:flex;"><span> -rw-r--r--. <span style="color:#ff9f43">1</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span style="color:#ff9f43">28</span> Aug  <span style="color:#ff9f43">2</span> 06:03  testfile
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@af6773299c7e /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /container_data2/testfile</span>
</span></span><span style="display:flex;"><span> This is persistent storage.</span></span></code></pre></div>
<p>10. Create a file called testfile2 with the echo command under /container_data2:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@af6773299c7e /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo &#34;This is persistent storage2.&#34; &gt;  /container_data2/testfile2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@af6773299c7e /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls -lZ /container_data2/</span>
</span></span><span style="display:flex;"><span> total <span style="color:#ff9f43">8</span>
</span></span><span style="display:flex;"><span> -rw-r--r--. <span style="color:#ff9f43">1</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span style="color:#ff9f43">28</span> Aug  <span style="color:#ff9f43">2</span> 06:03  testfile
</span></span><span style="display:flex;"><span> -rw-r--r--. <span style="color:#ff9f43">1</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span style="color:#ff9f43">29</span> Aug  <span style="color:#ff9f43">2</span> 06:10  testfile2</span></span></code></pre></div>
<p>11. Exit out of the container and confirm the existence of both files in the host directory:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@af6773299c7e /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># exit</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">exit</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ ls -lZ /host_data/
</span></span><span style="display:flex;"><span> total <span style="color:#ff9f43">8</span>
</span></span><span style="display:flex;"><span> -rw-r--r--. <span style="color:#ff9f43">1</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span style="color:#ff9f43">28</span> Aug  <span style="color:#ff9f43">1</span> 23:03  testfile
</span></span><span style="display:flex;"><span> -rw-r--r--. <span style="color:#ff9f43">1</span> root root  system_u:object_r:container_file_t:s0:c198,c914 <span style="color:#ff9f43">29</span> Aug  <span style="color:#ff9f43">1</span> 23:10  testfile2</span></span></code></pre></div>
<p>12. Stop and remove the container using the stop and rm subcommands:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman stop rhel8-persistent-data
</span></span><span style="display:flex;"><span> rhel8-persistent-data
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman rm rhel8-persistent-data
</span></span><span style="display:flex;"><span> rhel8-persistent-data</span></span></code></pre></div>
<p>13. Re-check the presence of the files in the host directory:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ ll /host_data
</span></span><span style="display:flex;"><span> total <span style="color:#ff9f43">8</span>
</span></span><span style="display:flex;"><span> -rw-r--r--. <span style="color:#ff9f43">1</span> root root <span style="color:#ff9f43">28</span> Aug  <span style="color:#ff9f43">1</span> 23:03 testfile
</span></span><span style="display:flex;"><span> -rw-r--r--. <span style="color:#ff9f43">1</span> root root <span style="color:#ff9f43">29</span> Aug  <span style="color:#ff9f43">1</span> 23:10 testfile2</span></span></code></pre></div>
<h2 id="container-state-management-with-systemd">Container State Management with systemd</h2>
<ul>
<li>
<p>Multiple containers run on a single host and it becomes a challenging task to change their operational state or delete them manually.</p>
</li>
<li>
<p>In RHEL 9, these administrative functions can be automated via the systemd service</p>
</li>
<li>
<p>There are several steps that need to be completed to configure container state management via systemd.</p>
</li>
<li>
<p>These steps vary for rootful and rootless container setups and include the creation of service unit files and their storage in appropriate directory locations (<em>~/.config/systemd/user</em> for rootless containers and <em>/etc/systemd/system</em> for rootful containers).</p>
</li>
<li>
<p>Once setup and enabled, the containers will start and stop automatically as a systemd service with the host state transition or manually with the <code>systemctl</code> command.</p>
</li>
<li>
<p>The <code>podman</code> command to start and stop containers is no longer needed if the systemd setup is in place.</p>
</li>
<li>
<p>You may experience issues if you continue to use <code>podman</code> for container state transitioning alongside.</p>
</li>
<li>
<p>The start and stop behavior for rootless containers differs slightly from that of rootful containers.</p>
</li>
<li>
<p>For the rootless setup, the containers are started when the relevant user logs in to the host and stopped when that user logs off from all their open terminal sessions;</p>
</li>
<li>
<p>However, this default behavior can be altered by enabling <strong>lingering</strong> for that user with the <code>loginctl</code> command.</p>
</li>
<li>
<p>User lingering is a feature that, if enabled for a particular user, spawns a user manager for that user at system startup and keeps it running in the background to support long-running services configured for that user.</p>
</li>
<li>
<p>The user need not log in.</p>
</li>
</ul>
<p>EXAM TIP: Make sure that you use a normal user to launch rootless containers and the root user (or sudo) for rootful containers.</p>
<ul>
<li>Rootless setup does not require elevated privileges of the root user.</li>
</ul>
<h3 id="lab-configure-a-rootful-container-as-a-systemd-service">Lab: Configure a Rootful Container as a systemd Service</h3>
<ul>
<li>Create a systemd unit configuration file for managing the state of your rootful containers.</li>
<li>Launch a new container and use it as a template to generate a service unit file.</li>
<li>Stop and remove the launched container to avoid conflicts with new containers that will start.</li>
<li>Use the <code>systemctl</code> command to verify the automatic container start, stop, and deletion.</li>
</ul>
<p>1. Launch a new container called <em>rootful-container</em> in detached mode using the latest ubi9:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman run -dt --name rootful-container ubi9
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>sudo<span style="color:#ff6ac1">]</span> password <span style="color:#ff6ac1">for</span> user1: 
</span></span><span style="display:flex;"><span> 0ed04dcedec418068acd14c864e95e78f56a38dd57d2349cf2c46b0de1a1bf1b</span></span></code></pre></div>
<p>2. Confirm the new container using podman ps. Note the container ID.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                   COMMAND      CREATED         STATUS         PORTS       NAMES
</span></span><span style="display:flex;"><span> 0ed04dcedec4  registry.access.redhat.com/ubi9:latest  /bin/bash   <span style="color:#ff9f43">20</span>  seconds ago  Up <span style="color:#ff9f43">20</span> seconds              rootful-container</span></span></code></pre></div>
<p>3. Create (generate) a service unit file called <em>rootful-container.service</em> under <em>/etc/systemd/system</em> while ensuring that the next new container that will be launched based on this configuration file will not require the source container  to work. The <code>tee</code> command will show the generated file content on the screen as well as store it in the specified file.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman generate systemd --new --name  rootful-container | sudo tee /etc/systemd/system/rootful-qcontainer.service
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>Unit<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Description</span><span style="color:#ff6ac1">=</span>Podman container-rootful-container.service
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Documentation</span><span style="color:#ff6ac1">=</span>man:podman-generate-systemd<span style="color:#ff6ac1">(</span>1<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Wants</span><span style="color:#ff6ac1">=</span>network-online.target
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">After</span><span style="color:#ff6ac1">=</span>network-online.target
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">RequiresMountsFor</span><span style="color:#ff6ac1">=</span>%t/containers
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>Service<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Environment</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">PODMAN_SYSTEMD_UNIT</span><span style="color:#ff6ac1">=</span>%n
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Restart</span><span style="color:#ff6ac1">=</span>on-failure
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">TimeoutStopSec</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">70</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">ExecStart</span><span style="color:#ff6ac1">=</span>/usr/bin/podman run <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cidfile<span style="color:#ff6ac1">=</span>%t/%n.ctr-id <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cgroups<span style="color:#ff6ac1">=</span>no-conmon <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--rm <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--sdnotify<span style="color:#ff6ac1">=</span>conmon <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--replace <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	-dt <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--name rootful-container ubi9
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">ExecStop</span><span style="color:#ff6ac1">=</span>/usr/bin/podman stop <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--ignore -t <span style="color:#ff9f43">10</span> <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cidfile<span style="color:#ff6ac1">=</span>%t/%n.ctr-id
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">ExecStopPost</span><span style="color:#ff6ac1">=</span>/usr/bin/podman rm <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	-f <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--ignore -t <span style="color:#ff9f43">10</span> <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cidfile<span style="color:#ff6ac1">=</span>%t/%n.ctr-id
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Type</span><span style="color:#ff6ac1">=</span>notify
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">NotifyAccess</span><span style="color:#ff6ac1">=</span>all
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>Install<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">WantedBy</span><span style="color:#ff6ac1">=</span>default.target</span></span></code></pre></div>
<ul>
<li>The unit file has the same syntax as any other systemd service configuration file.</li>
<li>There are three sections&mdash;Unit, Service, and Install.
<ul>
<li>(1) The <strong>unit</strong> section provides a short description of the service, the manual page location, and the dependencies (wants and after).</li>
<li>(2) The <strong>service</strong> section highlights the full commands for starting (<strong>ExecStart</strong>) and stopping (<strong>ExecStop</strong>) containers.
<ul>
<li>It also highlights the commands that will be executed before the container start (<strong>ExecStartPre</strong>) and after the container stop (<strong>ExecStopPost</strong>).</li>
<li>There are a number of options and arguments with the commands to ensure a proper transition.</li>
<li>The <strong>restart</strong> on-failure stipulates that systemd will try to restart the container in the event of a failure.</li>
</ul>
</li>
<li>(3) The <strong>install</strong> section identifies the operational target the host needs to be running in before this container service can start.</li>
</ul>
</li>
</ul>
<p>4. Stop and delete the source container (rootful-container):</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman stop rootful-container
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>sudo<span style="color:#ff6ac1">]</span> password <span style="color:#ff6ac1">for</span> user1: 
</span></span><span style="display:flex;"><span> WARN<span style="color:#ff6ac1">[</span>0010<span style="color:#ff6ac1">]</span> StopSignal SIGTERM failed to stop container rootful- container in <span style="color:#ff9f43">10</span> seconds, resorting to SIGKILL 
</span></span><span style="display:flex;"><span> rootful-container
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman rm rootful-container
</span></span><span style="display:flex;"><span> rootful-container</span></span></code></pre></div>
<p>Verify the removal by running sudo podman ps -a:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman ps -a
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES</span></span></code></pre></div>
<p>5. Update systemd to bring the new service under its control (reboot the system if required):</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo systemctl daemon-reload</span></span></code></pre></div>
<p>6. Enable and start the container service:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo systemctl <span style="color:#ff5c57">enable</span> --now rootful-container
</span></span><span style="display:flex;"><span> Created symlink /etc/systemd/system/default.target.wants/rootful- container.service ‚Üí /etc/systemd/system/rootful-container.service.</span></span></code></pre></div>
<p>7. Check the running status of the new service:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo systemctl status rootful-container
</span></span><span style="display:flex;"><span> rootful-container.service - Podman container-rootful-container.s&gt;
</span></span><span style="display:flex;"><span>     Loaded: loaded <span style="color:#ff6ac1">(</span>/etc/systemd/system/rootful-container.service&gt;
</span></span><span style="display:flex;"><span>     Active: active <span style="color:#ff6ac1">(</span>running<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<p>8. Verify the launch of a new container (compare the container ID with that of the source root container):</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                   COMMAND      CREATED             STATUS             PORTS       NAMES
</span></span><span style="display:flex;"><span> 440a57c26186  registry.access.redhat.com/ubi9:latest  /bin/bash    About a minute ago  Up About a minute              rootful-container</span></span></code></pre></div>
<p>9. Restart the container service using the systemctl command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo systemctl restart rootful-container
</span></span><span style="display:flex;"><span> sudo systemctl status rootful-
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo systemctl status rootful-container
</span></span><span style="display:flex;"><span> rootful-container.service - Podman container-rootful-container.s&gt;
</span></span><span style="display:flex;"><span>     Loaded: loaded <span style="color:#ff6ac1">(</span>/etc/systemd/system/rootful-container.service&gt;
</span></span><span style="display:flex;"><span>     Active: active <span style="color:#ff6ac1">(</span>running<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<p>10. Check the status of the container again. Observe the removal of the previous container and the launch of a new container (compare container IDs).</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                   COMMAND      CREATED         STATUS             PORTS       NAMES
</span></span><span style="display:flex;"><span> 0a980537b83a  registry.access.redhat.com/ubi9:latest  /bin/bash   <span style="color:#ff9f43">59</span>  seconds ago  Up About a minute              rootful-container</span></span></code></pre></div>
<ul>
<li>Each time the rootful-container service is restarted or server20 is rebooted, a new container will be launched.</li>
</ul>
<h3 id="lab-configure-rootless-container-as-a-systemd-service">Lab: Configure Rootless Container as a systemd Service</h3>
<ul>
<li>Create a systemd unit configuration file for managing the state of your rootless containers.</li>
<li>Launch a new container as conuser1 (create this user) and use it as a template to generate a service unit file.</li>
<li>Stop and remove the launched container to avoid conflicts with new containers that will start.</li>
<li>Use the <code>systemctl</code> command as conuser1 to verify the automatic container start, stop, and deletion.</li>
</ul>
<p>1. Create a user account called conuser1 and assign a simple password:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ sudo useradd conuser1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user1@server30 ~<span style="color:#ff6ac1">]</span>$ <span style="color:#ff5c57">echo</span> conuser1 | sudo passwd -- stdin conuser1
</span></span><span style="display:flex;"><span> Changing password <span style="color:#ff6ac1">for</span> user conuser1.
</span></span><span style="display:flex;"><span> passwd: all authentication tokens updated  successfully.</span></span></code></pre></div>
<p>2. Open a new terminal window on server20 and log in as conuser1. Create directory <em>~/.config/systemd/user</em> to store a service unit file:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ mkdir ~/.config/systemd/user -p</span></span></code></pre></div>
<p>3. Launch a new container called rootless-container in detached mode using the latest ubi8:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ podman run -dt --name  rootless-container ubi8
</span></span><span style="display:flex;"><span> Resolved <span style="color:#5af78e">&#34;ubi8&#34;</span> as an <span style="color:#ff5c57">alias</span>  <span style="color:#ff6ac1">(</span>/etc/containers/registries.conf.d/001-rhel- shortnames.conf<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Trying to pull  registry.access.redhat.com/ubi8:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob 8694db102e5b <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config 269749ad51 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures
</span></span><span style="display:flex;"><span> 381d46ae9a3e11723c3bde35090782129e6937c461f8c2621bc9725f6b9efc27</span></span></code></pre></div>
<p>4. Confirm the new container using podman ps. Note the container ID.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                   COMMAND     CREATED         STATUS         PORTS       NAMES
</span></span><span style="display:flex;"><span> 381d46ae9a3e  registry.access.redhat.com/ubi8:latest  /bin/bash   <span style="color:#ff9f43">27</span> seconds ago  Up <span style="color:#ff9f43">27</span> seconds              rootless-container</span></span></code></pre></div>
<p>5. Create (generate) a service unit file called <em>rootless-container.service</em> under <em>~/.config/systemd/user</em> while ensuring that the next new container that will be launched based on this configuration will not require the source container to work:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ podman generate systemd --new --name rootless-container &gt;  ~/.config/systemd/user/rootless-container.service
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> DEPRECATED command:
</span></span><span style="display:flex;"><span> It is recommended to use Quadlets <span style="color:#ff6ac1">for</span> running  containers and pods under systemd.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Please refer to podman-systemd.unit<span style="color:#ff6ac1">(</span>5<span style="color:#ff6ac1">)</span> <span style="color:#ff6ac1">for</span> details.</span></span></code></pre></div>
<p>6. Display the content of the unit file:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ cat  ~/.config/systemd/user/rootless-container.service 
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># container-rootless-container.service</span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># autogenerated by Podman 4.9.4-rhel</span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Thu Aug  1 23:42:11 MST 2024</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>Unit<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Description</span><span style="color:#ff6ac1">=</span>Podman container-rootless- container.service
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Documentation</span><span style="color:#ff6ac1">=</span>man:podman-generate-systemd<span style="color:#ff6ac1">(</span>1<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Wants</span><span style="color:#ff6ac1">=</span>network-online.target
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">After</span><span style="color:#ff6ac1">=</span>network-online.target
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">RequiresMountsFor</span><span style="color:#ff6ac1">=</span>%t/containers
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>Service<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Environment</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">PODMAN_SYSTEMD_UNIT</span><span style="color:#ff6ac1">=</span>%n
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Restart</span><span style="color:#ff6ac1">=</span>on-failure
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">TimeoutStopSec</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">70</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">ExecStart</span><span style="color:#ff6ac1">=</span>/usr/bin/podman run <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cidfile<span style="color:#ff6ac1">=</span>%t/%n.ctr-id <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cgroups<span style="color:#ff6ac1">=</span>no-conmon <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--rm <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--sdnotify<span style="color:#ff6ac1">=</span>conmon <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--replace <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	-dt <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--name rootless-container ubi8
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">ExecStop</span><span style="color:#ff6ac1">=</span>/usr/bin/podman stop <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--ignore -t <span style="color:#ff9f43">10</span> <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cidfile<span style="color:#ff6ac1">=</span>%t/%n.ctr-id
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">ExecStopPost</span><span style="color:#ff6ac1">=</span>/usr/bin/podman rm <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	-f <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--ignore -t <span style="color:#ff9f43">10</span> <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cidfile<span style="color:#ff6ac1">=</span>%t/%n.ctr-id
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Type</span><span style="color:#ff6ac1">=</span>notify
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">NotifyAccess</span><span style="color:#ff6ac1">=</span>all
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>Install<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">WantedBy</span><span style="color:#ff6ac1">=</span>default.target</span></span></code></pre></div>
<p>7. Stop and delete the source container rootless-container using the stop and rm subcommands:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ podman stop rootless-container
</span></span><span style="display:flex;"><span> rootless-container
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ podman rm rootless-container
</span></span><span style="display:flex;"><span> rootless-container</span></span></code></pre></div>
<p>Verify the removal by running podman ps -a:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ podman ps -a
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE       COMMAND     CREATED      STATUS      PORTS       NAMES</span></span></code></pre></div>
<p>8. Update systemd to bring the new service to its control</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ systemctl --user daemon-reload</span></span></code></pre></div>
<p>9. Enable and start the container service:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ systemctl --user <span style="color:#ff5c57">enable</span> --now rootless-container.service 
</span></span><span style="display:flex;"><span> Created symlink  /home/conuser1/.config/systemd/user/default.target.wa nts/rootless-container.service ‚Üí  /home/conuser1/.config/systemd/user/rootless- container.service.</span></span></code></pre></div>
<p>10. Check the running status of the new service:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ systemctl --user status  rootless-container
</span></span><span style="display:flex;"><span> rootless-container.service - Podman container- rootless-container&gt;
</span></span><span style="display:flex;"><span>     Loaded: loaded <span style="color:#ff6ac1">(</span>/home/conuser1/.config/systemd/user/rootless-&gt;
</span></span><span style="display:flex;"><span>     Active: active <span style="color:#ff6ac1">(</span>running<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<p>11. Verify the launch of a new container (compare the container ID with that of the source rootless container):</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                   COMMAND     CREATED             STATUS              PORTS       NAMES
</span></span><span style="display:flex;"><span> 57f946085605  registry.access.redhat.com/ubi8:latest  /bin/bash   About a minute ago  Up About a minute              rootless-container</span></span></code></pre></div>
<p>12. Enable the container service to start and stop with host transition using the <code>loginctl</code> command (systemd login manager) and confirm:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ loginctl enable-linger
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ loginctl show-user conuser1 | grep -i linger
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Linger</span><span style="color:#ff6ac1">=</span>yes</span></span></code></pre></div>
<p>13. Restart the container service using the <code>systemctl</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ systemctl --user restart  rootless-container
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ systemctl --user status  rootless-container
</span></span><span style="display:flex;"><span> rootless-container.service - Podman container- rootless-container&gt;
</span></span><span style="display:flex;"><span>     Loaded: loaded  <span style="color:#ff6ac1">(</span>/home/conuser1/.config/systemd/user/rootless-&gt;
</span></span><span style="display:flex;"><span>     Active: active <span style="color:#ff6ac1">(</span>running<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<p>14. Check the status of the container again. Observe the removal of the previous container and the launch of a new container (compare container IDs).</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ podman ps
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                   COMMAND     CREATED         STATUS         PORTS       NAMES
</span></span><span style="display:flex;"><span> 4dec33db41b5  registry.access.redhat.com/ubi8:latest  /bin/bash   <span style="color:#ff9f43">41</span> seconds ago  Up <span style="color:#ff9f43">41</span> seconds              rootless-container</span></span></code></pre></div>
<ul>
<li>Each time the rootless-container service is restarted or server20 is rebooted, a new container will be launched. You can verify this by comparing their container IDs.</li>
</ul>
<h2 id="containers-diy-labs">Containers DIY Labs</h2>
<h3 id="lab-launch-named-root-container-with-port-mapping">Lab: Launch Named Root Container with Port Mapping</h3>
<ul>
<li>Create a new user account called conadm on server30 and give them full sudo rights.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@se
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> -bash: 3: <span style="color:#ff5c57">command</span> not found
</span></span><span style="display:flex;"><span> rver30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># adduser conadm</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># visudo</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> conadm <span style="color:#ff5c57">ALL</span><span style="color:#ff6ac1">=(</span>ALL<span style="color:#ff6ac1">)</span>        ALL</span></span></code></pre></div>
<ul>
<li>As conadm with sudo (where required) on server30, inspect the latest version of ubi9 and then download it to your computer.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># dnf install container-tools</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># podman login registry.redhat.io</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ podman pull ubi9
</span></span><span style="display:flex;"><span> Resolved <span style="color:#5af78e">&#34;ubi9&#34;</span> as an <span style="color:#ff5c57">alias</span>  <span style="color:#ff6ac1">(</span>/etc/containers/registries.conf.d/001-rhel- shortnames.conf<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Trying to pull  registry.access.redhat.com/ubi9:latest...
</span></span><span style="display:flex;"><span> Getting image <span style="color:#ff5c57">source</span> signatures
</span></span><span style="display:flex;"><span> Checking <span style="color:#ff6ac1">if</span> image destination supports signatures
</span></span><span style="display:flex;"><span> Copying blob cc296d75b612 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Copying config 159a1e6731 <span style="color:#ff6ac1">done</span>   | 
</span></span><span style="display:flex;"><span> Writing manifest to image destination
</span></span><span style="display:flex;"><span> Storing signatures  159a1e67312ef50059357047ebe2a365afea904504fca9561abb3 85ecd942d62
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conuser1@server30 ~<span style="color:#ff6ac1">]</span>$ podman inspect ubi9</span></span></code></pre></div>
<ul>
<li>Launch a container called <em>rootful-cont-port</em> in attached terminal mode with host port 80 mapped to container port 8080.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo podman run -it --name rootful-cont-port -p  80:8080 ubi9</span></span></code></pre></div>
<ul>
<li>Run a few basic Linux commands such as <code>ls</code>, <code>pwd</code>, <code>df</code>, <code>cat</code> <em>/etc/redhat-release</em>, and <em>os-release</em> while in the container.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@349163a6e431 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls</span>
</span></span><span style="display:flex;"><span> afs  boot  etc	 lib	lost+found  mnt  proc  run    srv  tmp  var
</span></span><span style="display:flex;"><span> bin  dev   home  lib64	media	    opt  root  sbin   sys  usr
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@349163a6e431 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pwd</span>
</span></span><span style="display:flex;"><span> /
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@349163a6e431 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -hT</span>
</span></span><span style="display:flex;"><span> Filesystem     Type      Size  Used Avail Use%  Mounted on
</span></span><span style="display:flex;"><span> overlay        overlay    17G  4.3G   13G  26% /
</span></span><span style="display:flex;"><span> tmpfs          tmpfs      64M     <span style="color:#ff9f43">0</span>   64M   0% /dev
</span></span><span style="display:flex;"><span> shm            tmpfs      63M     <span style="color:#ff9f43">0</span>   63M   0%  /dev/shm
</span></span><span style="display:flex;"><span> tmpfs          tmpfs     356M  6.0M  350M   2%  /etc/hosts
</span></span><span style="display:flex;"><span> devtmpfs       devtmpfs  4.0M     <span style="color:#ff9f43">0</span>  4.0M   0%  /proc/keys
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@349163a6e431 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /etc/redhat-release</span>
</span></span><span style="display:flex;"><span> Red Hat Enterprise Linux release 9.4 <span style="color:#ff6ac1">(</span>Plow<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<ul>
<li>Check to confirm the port mapping from server30.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman port rootful-cont- port
</span></span><span style="display:flex;"><span> 8080/tcp -&gt; 0.0.0.0:80</span></span></code></pre></div>
<ul>
<li>Do not remove the container yet.</li>
</ul>
<h3 id="lab-launch-nameless-rootless-container-with-two-variables">Lab: Launch Nameless Rootless Container with Two Variables</h3>
<ul>
<li>As conadm on server30, launch a container using the latest version of ubi8 in interactive mode (-it) with two environment variables VAR1=lab1 and VAR2=lab2 defined.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ podman run -d -e <span style="color:#ff5c57">VAR1</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;lab1&#34;</span> -e <span style="color:#ff5c57">VAR2</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;lab2&#34;</span> --name variables8 ubi8 </span></span></code></pre></div>
<ul>
<li>Check the variables from within the container.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@803642faea28 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $VAR1</span>
</span></span><span style="display:flex;"><span> lab1
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@803642faea28 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $VAR2</span>
</span></span><span style="display:flex;"><span> lab2</span></span></code></pre></div>
<ul>
<li>Delete the container and the image when done.</li>
</ul>
<h3 id="lab-launch-named-rootless-container-with-persistent-storage">Lab: Launch Named Rootless Container with Persistent Storage</h3>
<ul>
<li>As conadm with sudo (where required) on server30, create a directory called <em>/host_perm1</em> with full permissions, and a file called <em>str1</em> in it.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ sudo mkdir /host_perm1
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>sudo<span style="color:#ff6ac1">]</span> password <span style="color:#ff6ac1">for</span> conadm: 
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ sudo chmod <span style="color:#ff9f43">777</span> /host_perm1
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ sudo touch /host_perm1/str1</span></span></code></pre></div>
<ul>
<li>Launch a container called <em>rootless-cont-str</em> in attached terminal mode with the created directory mapped to <em>/cont_perm1</em> inside the container.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ sudo podman run --name  rootless-cont-str -v /host_perm1:/cont_perm1:Z -it  ubi8
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@a1326200eae1 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># </span></span></span></code></pre></div>
<ul>
<li>While in the container, check access to the directory and the presence of the file.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@a1326200eae1 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls /cont_perm1</span>
</span></span><span style="display:flex;"><span> str1</span></span></code></pre></div>
<ul>
<li>Create a sub-directory and a file under <em>/cont_perm1</em> and exit out of the container shell.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@a1326200eae1 cont_perm1<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkdir permdir2</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@a1326200eae1 cont_perm1<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls</span>
</span></span><span style="display:flex;"><span> permdir2  str1
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@a1326200eae1 cont_perm1<span style="color:#ff6ac1">]</span><span style="color:#78787e"># exit</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">exit</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ </span></span></code></pre></div>
<ul>
<li>List <em>/host_perm1</em> on server30 to verify the sub-directory and the file.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ sudo ls /host_perm1
</span></span><span style="display:flex;"><span> permdir2  str1</span></span></code></pre></div>
<ul>
<li>Stop and delete the container.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ podman stop rootless-cont-str
</span></span><span style="display:flex;"><span> rootless-cont-str
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ podman rm rootless-cont-str
</span></span><span style="display:flex;"><span> rootless-cont-str</span></span></code></pre></div>
<ul>
<li>Remove <em>/host_perm1</em>.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ sudo rm -r /host_perm1</span></span></code></pre></div>
<h3 id="lab-launch-named-rootless-container-with-port-mapping-environment-variables-and-persistent-storage">Lab: Launch Named Rootless Container with Port Mapping, Environment Variables, and Persistent Storage</h3>
<ul>
<li>As conadm with sudo (where required) on server30, launch a named rootless container called <em>rootless-cont-adv</em> in attached mode with two variables (<strong>HISTSIZE</strong>=100 and <strong>MYNAME</strong>=RedHat), host port 9000 mapped to container port 8080, and <em>/host_perm2</em> mounted at <em>/cont_perm2</em></li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ podman run --name rootless-cont-adv -v ~/host_perm2:/cont_perm2:Z -e <span style="color:#ff5c57">HISTSIZE</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;100&#34;</span> -e <span style="color:#ff5c57">MYNAME</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;RedHat&#34;</span> -p 9000:8080 -it --replace ubi8
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@79e965cd1436 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># </span></span></span></code></pre></div>
<ul>
<li>Check and confirm the settings while inside the container.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@79e965cd1436 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $HISTSIZE</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">100</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@79e965cd1436 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $MYNAME</span>
</span></span><span style="display:flex;"><span> RedHat
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@79e965cd1436 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls -ld /cont_perm2 </span>
</span></span><span style="display:flex;"><span> drwxrwxrwx. <span style="color:#ff9f43">2</span> root root <span style="color:#ff9f43">6</span> Aug  <span style="color:#ff9f43">4</span> 02:16 /cont_perm2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ podman port rootless-cont-adv
</span></span><span style="display:flex;"><span> 8080/tcp -&gt; 0.0.0.0:9000</span></span></code></pre></div>
<ul>
<li>Exit out of the container.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@5d510a1b2293 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># exit</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">exit</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ </span></span></code></pre></div>
<ul>
<li>Do not remove the container yet.</li>
</ul>
<h3 id="lab-22-5-control-rootless-container-states-via-systemd">Lab 22-5: Control Rootless Container States via systemd</h3>
<ul>
<li>As conadm on server30, use the <em>rootless-cont-adv</em> container launched in the last lab as a template and generate a systemd service configuration file and store the file in the appropriate directory.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ podman run --name rootless-cont-adv -v ~/host_perm2:/cont_perm2:Z -e <span style="color:#ff5c57">HISTSIZE</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;100&#34;</span> -e <span style="color:#ff5c57">MYNAME</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;RedHat&#34;</span> -p 9000:8080 -dt --replace ubi8
</span></span><span style="display:flex;"><span> da8faf434813242985b8e332dc06b0e6da78e7125bc36579ffc8d82b0bcafb8e
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ podman generate systemd --new --name rootless-cont-adv &gt;  ~/.config/systemd/user/rootless-container.service
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> DEPRECATED command:
</span></span><span style="display:flex;"><span> It is recommended to use Quadlets <span style="color:#ff6ac1">for</span> running  containers and pods under systemd.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Please refer to podman-systemd.unit<span style="color:#ff6ac1">(</span>5<span style="color:#ff6ac1">)</span> <span style="color:#ff6ac1">for</span> details.</span></span></code></pre></div>
<ul>
<li>Stop and remove the source container rootless-cont-adv.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ podman stop rootless-cont-adv
</span></span><span style="display:flex;"><span> rootless-cont-adv
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ podman rm rootless-cont-adv
</span></span><span style="display:flex;"><span> rootless-cont-adv</span></span></code></pre></div>
<ul>
<li>Add the support for the new service to systemd and enable the new service to auto-start at system reboots.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ systemctl --user daemon-reload
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 user<span style="color:#ff6ac1">]</span>$ systemctl --user <span style="color:#ff5c57">enable</span> -- now rootless-container.service
</span></span><span style="display:flex;"><span> Created symlink  /home/conadm/.config/systemd/user/default.target.want s/rootless-container.service ‚Üí  /home/conadm/.config/systemd/user/rootless- container.service.</span></span></code></pre></div>
<ul>
<li>Perform the required setup to ensure the container is launched without the need for the conadm user to log in.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 user<span style="color:#ff6ac1">]</span>$ loginctl enable-linger
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 user<span style="color:#ff6ac1">]</span>$ loginctl show-user conadm |  grep -i linger
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Linger</span><span style="color:#ff6ac1">=</span>yes</span></span></code></pre></div>
<ul>
<li>Reboot server30 and confirm a successful start of the container service and the container.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@rhcsa3 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl --user --machine=conadm@ list-units --type=service</span>
</span></span><span style="display:flex;"><span>  UNIT                           LOAD   ACTIVE SUB     DESCRIPTION           &gt;
</span></span><span style="display:flex;"><span>  dbus-broker.service            loaded active running D-Bus User Message Bus
</span></span><span style="display:flex;"><span>  rootless-cont-adv.service      loaded active running Podman container-rootl&gt;
</span></span><span style="display:flex;"><span>  systemd-tmpfiles-setup.service loaded active exited  Create User<span style="color:#5af78e">&#39;s Volatile&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">LOAD   = Reflects whether the unit definition was properly loaded.
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">SUB    = The low-level unit activation state, values depend on unit type.
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">3 loaded units listed. Pass --all to see loaded but inactive units, too.
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">To show all installed unit files use &#39;</span>systemctl list-unit-files<span style="color:#ff5c57">&#39;</span>.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@rhcsa3 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo -i -u conadm podman ps -a</span>
</span></span><span style="display:flex;"><span>CONTAINER ID  IMAGE                                   COMMAND     CREATED         STATUS         PORTS                   NAMES
</span></span><span style="display:flex;"><span>a48fd2c25be4  registry.access.redhat.com/ubi9:latest  /bin/bash   <span style="color:#ff9f43">10</span> minutes ago  Up <span style="color:#ff9f43">10</span> minutes  0.0.0.0:9000-&gt;8080/tcp  rootless-cont-adv</span></span></code></pre></div>
<h3 id="lab-22-6-control-rootful-container-states-via-systemd">Lab 22-6: Control Rootful Container States via systemd</h3>
<ul>
<li>As conadm with sudo where required on server10, use the rootful-cont-port container launched in Lab 22-1 as a template and generate a systemd service configuration file and store the file in the appropriate directory.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># podman generate systemd --new -- name rootful-cont-port | tee  /etc/systemd/system/rootful-cont-port.service</span>
</span></span><span style="display:flex;"><span> DEPRECATED command:
</span></span><span style="display:flex;"><span> It is recommended to use Quadlets <span style="color:#ff6ac1">for</span> running  containers and pods under systemd.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Please refer to podman-systemd.unit<span style="color:#ff6ac1">(</span>5<span style="color:#ff6ac1">)</span> <span style="color:#ff6ac1">for</span> details.
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># container-rootful-cont-port.service</span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># autogenerated by Podman 4.9.4-rhel</span>
</span></span><span style="display:flex;"><span> <span style="color:#78787e"># Sat Aug  3 20:49:32 MST 2024</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>Unit<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Description</span><span style="color:#ff6ac1">=</span>Podman container-rootful-cont- port.service
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Documentation</span><span style="color:#ff6ac1">=</span>man:podman-generate-systemd<span style="color:#ff6ac1">(</span>1<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Wants</span><span style="color:#ff6ac1">=</span>network-online.target
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">After</span><span style="color:#ff6ac1">=</span>network-online.target
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">RequiresMountsFor</span><span style="color:#ff6ac1">=</span>%t/containers
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>Service<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Environment</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">PODMAN_SYSTEMD_UNIT</span><span style="color:#ff6ac1">=</span>%n
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Restart</span><span style="color:#ff6ac1">=</span>on-failure
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">TimeoutStopSec</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">70</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">ExecStart</span><span style="color:#ff6ac1">=</span>/usr/bin/podman run <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cidfile<span style="color:#ff6ac1">=</span>%t/%n.ctr-id <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cgroups<span style="color:#ff6ac1">=</span>no-conmon <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--rm <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--sdnotify<span style="color:#ff6ac1">=</span>conmon <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	-d <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--replace <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	-it <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--name rootful-cont-port <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	-p 80:8080 ubi9
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">ExecStop</span><span style="color:#ff6ac1">=</span>/usr/bin/podman stop <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--ignore -t <span style="color:#ff9f43">10</span> <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cidfile<span style="color:#ff6ac1">=</span>%t/%n.ctr-id
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">ExecStopPost</span><span style="color:#ff6ac1">=</span>/usr/bin/podman rm <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	-f <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--ignore -t <span style="color:#ff9f43">10</span> <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>	--cidfile<span style="color:#ff6ac1">=</span>%t/%n.ctr-id
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">Type</span><span style="color:#ff6ac1">=</span>notify
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">NotifyAccess</span><span style="color:#ff6ac1">=</span>all
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>Install<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">WantedBy</span><span style="color:#ff6ac1">=</span>default.target</span></span></code></pre></div>
<ul>
<li>Stop and remove the source container rootful-cont-port.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># podman stop rootful-cont-port</span>
</span></span><span style="display:flex;"><span> WARN<span style="color:#ff6ac1">[</span>0010<span style="color:#ff6ac1">]</span> StopSignal SIGTERM failed to stop  container rootful-cont-port in <span style="color:#ff9f43">10</span> seconds, resorting  to SIGKILL 
</span></span><span style="display:flex;"><span> rootful-cont-port
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># podman ps</span>
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                   COMMAND     CREATED         STATUS         PORTS       NAMES
</span></span><span style="display:flex;"><span> fe0d07718dda  registry.access.redhat.com/ubi9:latest  /bin/bash   <span style="color:#ff9f43">16</span> minutes ago  Up <span style="color:#ff9f43">16</span> minutes              rootful-container
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># podman rm rootfil-cont-port</span>
</span></span><span style="display:flex;"><span> Error: no container with ID or name <span style="color:#5af78e">&#34;rootfil-cont- port&#34;</span> found: no such container
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># podman rm rootful-cont-port</span>
</span></span><span style="display:flex;"><span> rootful-cont-port</span></span></code></pre></div>
<ul>
<li>Add the support for the new service to systemd and enable the service to auto-start at system reboots.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl daemon-reload</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl enable --now rootful- cont-port</span>
</span></span><span style="display:flex;"><span> Created symlink  /etc/systemd/system/default.target.wants/rootful- cont-port.service ‚Üí /etc/systemd/system/rootful-cont- port.service.</span></span></code></pre></div>
<ul>
<li>Reboot server10 and confirm a successful start of the container service and the container.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># reboot</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># podman ps</span>
</span></span><span style="display:flex;"><span> CONTAINER ID  IMAGE                                   COMMAND     CREATED             STATUS              PORTS                 NAMES
</span></span><span style="display:flex;"><span> 5c030407a7d6   registry.access.redhat.com/ubi9:latest  /bin/bash    About a minute ago  Up About a minute  0.0.0.0:80- &gt;8080/tcp  rootful-cont-port
</span></span><span style="display:flex;"><span> 9d1e8a429ac6   registry.access.redhat.com/ubi9:latest  /bin/bash    About a minute ago  Up About a minute                        rootful-container
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># </span></span></span></code></pre></div>
<h3 id="lab-22-7-build-custom-image-using-containerfile">Lab 22-7: Build Custom Image Using Containerfile</h3>
<ul>
<li>As conadm on server10, write a containerfile to use the latest version of ubi8 and create a user account called user-in-container in the resultant custom image.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ vim containerfile</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> FROM registry.access.redhat.com/ubi8/ubi:latest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> RUN useradd -ms /bin/bash -u <span style="color:#ff9f43">1001</span> user-in-container
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> USER <span style="color:#ff9f43">1001</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ podman image build -f  containerfile --no-cache -t ubi8-user .
</span></span><span style="display:flex;"><span> STEP 1/3: FROM  registry.access.redhat.com/ubi8/ubi:latest
</span></span><span style="display:flex;"><span> STEP 2/3: RUN useradd -ms /bin/bash -u <span style="color:#ff9f43">1001</span> user-in- container
</span></span><span style="display:flex;"><span> --&gt; b330095e91eb
</span></span><span style="display:flex;"><span> STEP 3/3: USER <span style="color:#ff9f43">1001</span>
</span></span><span style="display:flex;"><span> COMMIT ubi8-user
</span></span><span style="display:flex;"><span> --&gt; e8cde30fc020
</span></span><span style="display:flex;"><span> Successfully tagged localhost/ubi8-user:latest
</span></span><span style="display:flex;"><span> e8cde30fc020051caa2a4e2f58aaaf90f088709462a1314b936fd608facfdb5e</span></span></code></pre></div>
<ul>
<li>Test the image by launching a container in interactive mode and verifying the user.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>conadm@server30 ~<span style="color:#ff6ac1">]</span>$ podman run -ti --name test12  ubi8-user
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>user-in-container@30558ffcb227 /<span style="color:#ff6ac1">]</span>$</span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
          </section>
<article class="default">
  <header class="headline">
  </header>

<h1 id="desktop">Desktop</h1>

<div class="children children-type-card children-sort-"><ul class="card-container">
<li>
  <article class="card card-popout" aria-labelledby="R-card-f975aba755c4c66fa1c76b66d2dcb80c">
    <div class="card-content">
      <div class="card-title" id="R-card-f975aba755c4c66fa1c76b66d2dcb80c">
        <a href="/bash/desktop/my-fedora-setup/">
        My Fedora Setup
        </a>
      </div>
      <div class="card-content-text">
          <p>
My Fedora Setup
      </div>
    </div>
  </article>
</li>
</ul>
</div>

  <footer class="footline">
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Desktop</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="my-fedora-setup">My Fedora Setup</h1>

<p>When you first download Fedora Workstation, it&rsquo;s going to be a little hard to figure out how to make it usable. Especially if you&rsquo;ve never tinkered with Linux before.</p>
<p>This is because Fedora with Gnome desktop is a blank canvas. The point is to let you customize it to your needs. When I first install Fedora, I pull my justfile to install most of the programs I use:</p>
<pre><code>`curl -sL https://raw.githubusercontent.com/linuxreader/dotfiles/main/dot_justfile -o ~/.justfile`
</code></pre>
<h2 id="install-just-and-run-the-justfile">Install just and run the justfile</h2>
<p>To run the just file, I then install the just program and run it on the justfile:</p>
<p><code>dnf install just</code></p>
<p><code>just first-install</code></p>
<p>This is my current .justfile:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>first-install:
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Install flatpacks</span>
</span></span><span style="display:flex;"><span>	flatpak install --noninteractive <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub com.bitwarden.desktop <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub com.brave.Browser <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub org.gimp.GIMP <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub org.gnome.Snapshot <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub org.libreoffice.LibreOffice <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub org.remmina.Remmina <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub com.termius.Termius <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub com.slack.Slack <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub org.keepassxc.KeePassXC <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub md.obsidian.Obsidian <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub com.calibre_ebook.calibre <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub org.mozilla.Thunderbird <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub us.zoom.Zoom <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub org.wireshark.Wireshark <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub com.nextcloud.desktopclient.nextcloud <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub com.google.Chrome <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub io.github.shiftey.Desktop <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub io.github.dvlv.boxbuddyrs <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub com.github.tchx84.Flatseal <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub io.github.flattool.Warehouse <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub io.missioncenter.MissionCenter <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub org.gnome.World.PikaBackup <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub com.github.rafostar.Clapper <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub com.mattjakeman.ExtensionManager <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub com.jgraph.drawio.desktop <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flathub org.adishatz.Screenshot <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flatpak com.github.finefindus.eyedropper <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flatpak com.github.johnfactotum.Foliate <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flatpak com.usebottles.bottles <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flatpak com.obsproject.Studio <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flatpak net.lutris.Lutris <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flatpak com.vivaldi.Vivaldi <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flatpak com.vscodium.codium <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flatpak io.podman_desktop.PodmanDesktop <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      flatpak org.kde.kdenlive
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Install Homebrew</span>
</span></span><span style="display:flex;"><span>    sudo dnf -y groupinstall <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      <span style="color:#5af78e">&#34;Development Tools&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /bin/bash -c <span style="color:#5af78e">&#34;</span><span style="color:#ff6ac1">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span style="color:#ff6ac1">)</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;eval &#34;$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)&#34;&#39;</span> &gt;&gt; ~/.bash_profile
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">eval</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff6ac1">$(</span>/home/linuxbrew/.linuxbrew/bin/brew shellenv<span style="color:#ff6ac1">)</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Configure dnf for faster speeds</span>
</span></span><span style="display:flex;"><span>    sudo bash -c <span style="color:#5af78e">&#39;echo &#34;fastestmirror=True&#34; &gt;&gt; /etc/dnf/dnf.conf&#39;</span>
</span></span><span style="display:flex;"><span>    sudo bash -c <span style="color:#5af78e">&#39;echo &#34;max_parallel_downloads=10&#34; &gt;&gt; /etc/dnf/dnf.conf&#39;</span>
</span></span><span style="display:flex;"><span>    sudo bash -c <span style="color:#5af78e">&#39;echo &#34;defaultyes=True&#34; &gt;&gt; /etc/dnf/dnf.conf&#39;</span>
</span></span><span style="display:flex;"><span>    sudo bash -c <span style="color:#5af78e">&#39;echo &#34;keepcache=True&#34; &gt;&gt; /etc/dnf/dnf.conf&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Other software, updates, etc. </span>
</span></span><span style="display:flex;"><span>    sudo dnf -y update
</span></span><span style="display:flex;"><span>    sudo dnf install -y gnome-screenshot
</span></span><span style="display:flex;"><span>    sudo dnf -y groupupdate core
</span></span><span style="display:flex;"><span>    sudo flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo
</span></span><span style="display:flex;"><span>    sudo dnf install -y wireguard-tools
</span></span><span style="display:flex;"><span>    sudo dnf install gnome-tweaks
</span></span><span style="display:flex;"><span>    sudo dnf -y install https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-<span style="color:#ff6ac1">$(</span>rpm -E %fedora<span style="color:#ff6ac1">)</span>.noarch.rpm <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>    https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-<span style="color:#ff6ac1">$(</span>rpm -E %fedora<span style="color:#ff6ac1">)</span>.noarch.rpm
</span></span><span style="display:flex;"><span>    sudo dnf -y update
</span></span><span style="display:flex;"><span>    sudo dnf install gnome-themes-extra
</span></span><span style="display:flex;"><span>    gsettings <span style="color:#ff5c57">set</span> org.gnome.desktop.interface gtk-theme <span style="color:#5af78e">&#34;Adwaita-dark&#34;</span>
</span></span><span style="display:flex;"><span>    sudo dnf install -y go
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;export PATH=$PATH:/usr/local/go/bin&#39;</span> &gt;&gt; ~/.bashrc
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">source</span> ~/.bashrc
</span></span><span style="display:flex;"><span>    gsettings <span style="color:#ff5c57">set</span> org.gnome.mutter experimental-features <span style="color:#5af78e">&#34;[&#39;scale-monitor-framebuffer&#39;]&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>homebrew:
</span></span><span style="display:flex;"><span>    brew install <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      chezmoi <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      hugo <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>      virt-manager</span></span></code></pre></div>
<h2 id="install-homebrew-stuff">Install Homebrew Stuff:</h2>
<p>then run <code>just homebrew</code> after a reboot to install packages with brew</p>
<h3 id="visudo-config">visudo config</h3>
<p>Add to /etc/sudoers to make Vim default for <code>visudo</code></p>
<p><code>Defaults editor=/usr/bin/vim</code></p>
<h2 id="virt-manager">Virt Manager</h2>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo dnf install @virtualization</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo vi /etc/libvirt/libvirtd.conf</span></span></code></pre></div>
<p>Uncomment the line: <code>unix_sock_group = &quot;libvirt&quot;</code></p>
<p>Adjust the UNIX socket permissions for the R/W socket:
<code>unix_sock_rw_perms = &quot;0770&quot;</code></p>
<p>Start the service:
<code>systemctl enable --now libvirtd</code></p>
<p>Add user to group:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo usermod -a -G libvirt <span style="color:#ff6ac1">$(</span>whoami<span style="color:#ff6ac1">)</span> <span style="color:#ff6ac1">&amp;&amp;</span> sudo usermod -a -G kvm <span style="color:#ff6ac1">$(</span>whoami<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<p>use the Tweaks app to set the appearance of Legacy Applications to &lsquo;adwaita-dark&rsquo;.</p>
<h2 id="configure-howdy">Configure Howdy</h2>
<p>Howdy is a tool for using an IR webcam for authentication:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo dnf copr <span style="color:#ff5c57">enable</span> principis/howdy
</span></span><span style="display:flex;"><span>sudo dnf --refresh install -y howdy</span></span></code></pre></div>
<p><a href="https://copr.fedorainfracloud.org/coprs/principis/howdy/" rel="external" target="_blank">https://copr.fedorainfracloud.org/coprs/principis/howdy/</a>
<a href="https://github.com/boltgolt/howdy" rel="external" target="_blank">https://github.com/boltgolt/howdy</a></p>
<h2 id="seahorse">Seahorse</h2>
<p>I was using this to fix the Login Keyring error that is common with Fedora, but it no longer works.
<code>sudo dnf -y install seahorse &amp;&amp; seahorse</code></p>
<p>Applications &gt; Passwords and Keys &gt; Passwords &gt; Right-click Login &gt; Change Password to blank.</p>
<p><a href="https://itsfoss.com/seahorse/" rel="external" target="_blank">https://itsfoss.com/seahorse/</a></p>
<h2 id="initialize-chezmoi">Initialize Chezmoi</h2>
<p>Chezmoi let&rsquo;s you easy sync your dotfiles with Github and your other computers. Just init Chezmoi and add your Github username. This assumes your dotfiles in Github are saved in the proper format.
`chezmoi init &ndash;apply linuxreader</p>
<h2 id="add-badname-user-if-needed">Add badname user (if needed)</h2>
<p>If you need to use username with the format <code>firstname.lastname</code>, use the <code>badname</code> flag with the <code>adduser</code> command. You will have to create a normal user first, because you can&rsquo;t do this during the initial install:
<code>$ adduser --badname firstname.lastname</code>
<code>$ sudo usermod -aG wheel username</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code># uncomment this line in the visudo file 
$ sudo visudo
%wheel ALL=(ALL) ALL</code></pre></div>
<p>Delete the other user:
<code>$ userdel username</code></p>
<h2 id="additional-dnf-stuff">Additional DNF stuff:</h2>
<p>Clear cache (do this occasionally):
<code>sudo dnf clean dbcache</code>
or <code>sudo dnf clean all</code></p>
<p>Update DNF:
<code>sudo dnf -y update</code></p>
<p>Additional DNF commands:
<a href="https://docs.fedoraproject.org/en-US/fedora/latest/system-administrators-guide/package-management/DNF/" rel="external" target="_blank" title="https://docs.fedoraproject.org/en-US/fedora/latest/system-administrators-guide/package-management/DNF/">https://docs.fedoraproject.org/en-US/fedora/latest/system-administrators-guide/package-management/DNF/</a></p>
<h2 id="set-up-rpm-fusion">Set up RPM Fusion</h2>
<p>RPM Fusion give you more accessibility to various software packages.</p>
<p>Install:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf -y install https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm</code></pre></div>
<p><a href="https://rpmfusion.org/" rel="external" target="_blank" title="https://rpmfusion.org/">https://rpmfusion.org/</a></p>
<h2 id="appstream-metadata">AppStream metadata</h2>
<p>Use AppStream to enable users to install packages using Gnome Software/KDE Discover:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf -y groupupdate core</code></pre></div>
<h2 id="flatpaks">Flatpaks</h2>
<p>To enable Flatpaks (this may no longer be needed:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo</code></pre></div>
<p><a href="https://flatpak.org/setup/Fedora" rel="external" target="_blank">https://flatpak.org/setup/Fedora</a></p>
<h2 id="set-a-hostname">Set a hostname</h2>
<p>Set a hostname for the system. This will show after next reboot:
<code>sudo hostnamectl set-hostname &quot;New_Custom_Name&quot;</code></p>
<h2 id="other-stuff">Other Stuff</h2>
<p>Here is some other stuff I install from the software center.</p>
<h3 id="input-leap">Input Leap</h3>
<p>Input Leap let&rsquo;s you share a mouse and keyboard between two workstations.</p>
<p><a href="#R-image-4127f72d856d011399ecc856ca82de0c" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240905105932.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4127f72d856d011399ecc856ca82de0c"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240905105932.png"></a></p>
<p>I don&rsquo;t know what this is or why it is here:
installing Git and a bunch of other stuff?</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo dnf install git cmake make gcc-c++ xorg-x11-server-devel <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>                 libcurl-devel avahi-compat-libdns_sd-devel <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>                 libXtst-devel qt5-qtbase qt5-qtbase-devel  <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>                 qt5-qttools-devel libICE-devel libSM-devel <span style="color:#5af78e">\
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e"></span>                 openssl-devel libXrandr-devel libXinerama-devel</span></span></code></pre></div>
<h2 id="virtual-machine-manager">Virtual machine Manager</h2>
<p>The best way to manage VMs on desktop.</p>
<p><a href="#R-image-4008379e50e38a725e342da08263a721" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240905110024.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4008379e50e38a725e342da08263a721"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240905110024.png"></a></p>
<h2 id="box-buddy">Box Buddy</h2>
<p>For managing containers.</p>
<p><a href="#R-image-b44f325a90e50ccb4ae9729e38c21e1d" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240905110223.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b44f325a90e50ccb4ae9729e38c21e1d"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240905110223.png"></a></p>
<h2 id="warehouse">Warehouse</h2>
<p>Managing installed applications.</p>
<p><a href="#R-image-9be6daf6e7536429cc57dd75962fb493" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../../images/Pasted%20image%2020240905110143.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9be6daf6e7536429cc57dd75962fb493"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../../images/Pasted%20image%2020240905110143.png"></a></p>
<h2 id="mission-center">Mission Center</h2>
<p>Task Manager like application.</p>
<p><a href="#R-image-c2102a1bf581bf59907e89b8416369d7" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240905110500.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c2102a1bf581bf59907e89b8416369d7"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240905110500.png"></a></p>
<h2 id="pika-backup">Pika Backup</h2>
<p>For backing up your desktop.
<a href="#R-image-b03076b22981bdd407369740b4f8a8b6" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240905110555.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b03076b22981bdd407369740b4f8a8b6"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240905110555.png"></a></p>
<h2 id="clapper">Clapper</h2>
<p>Video player.</p>
<p><a href="#R-image-165493b79d59b122db0cc8a1d878eeab" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240905110319.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-165493b79d59b122db0cc8a1d878eeab"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240905110319.png"></a></p>
<p>And some extensions installed through Extension Manager:
<a href="#R-image-ad3380516bd9720c8657760f10ca9aac" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240905105517.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ad3380516bd9720c8657760f10ca9aac"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240905105517.png"></a></p>
<p>Install Gnome Screenshot tool:</p>
<p>Install the extention:
<a href="https://extensions.gnome.org/extension/1112/screenshot-tool/" rel="external" target="_blank">https://extensions.gnome.org/extension/1112/screenshot-tool/</a></p>
<p>You also need to install from DNF for some reason:
<code>dnf install -y gnome-screenshot</code></p>
<h2 id="airpods-not-pairing-issue">Airpods not pairing Issue</h2>
<p>If you ever have the issue where Airpods won&rsquo;t pair. Remove them from the pairing list, force them in pairing mode, and pair them back. This can be made easy with bluetoothctl:</p>
<p>Just in case, restart the bluetooth service:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl restart bluetooth
</span></span><span style="display:flex;"><span>systemctl status bluetooth </span></span></code></pre></div>
<p>Show devices:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code># bluetoothctl

[bluetooth] $ devices
Device 42:42:42:42:42:42 My AirPods &lt;-- grab the name here
[bluetooth] $ remove 42:42:42:42:42:42 </code></pre></div>
<p>Now, make sure your Airpods are in the charging case, close the lid, wait 15 seconds, then open the lid. Press and hold the setup button on the case for up to 10 seconds. The status light should flash white, which means that your Airpods are ready to connect.</p>
<p>Pair them back:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[bluetooth] $ pair 42:42:42:42:42:42</code></pre></div>
<h2 id="enable-fractional-scaling">Enable Fractional Scaling</h2>
<p>This lets you change display scaling in smaller increments. You&rsquo;ll need to make sure Wayland is turned on.</p>
<p>Turn on the feature then reboot:
<code>gsettings set org.gnome.mutter experimental-features &quot;['scale-monitor-framebuffer']&quot;</code></p>
<p><code>reboot</code></p>
<h2 id="remove-pasted-characters-">Remove pasted characters ^<a href="200~'"></a></h2>
<p>Kept having pasted format characters ^<a href="200~'"></a> mess up my groove. Here&rsquo;s the fix.</p>
<p>Open your inputrc file and add the line below:
<code>vim ~/.inputrc</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#5af78e">&#34;\C-v&#34;</span>: <span style="color:#5af78e">&#34;&#34;</span></span></span></code></pre></div>
<h2 id="install-gimp">Install gimp</h2>
<p><code>sudo dnf install gimp</code>
enable in screenshot tool after install for gimp {f}</p>
<p>Install Arrows
<a href="https://graphicdesign.stackexchange.com/questions/44797/how-do-i-insert-arrows-into-a-picture-in-gimp" rel="external" target="_blank">https://graphicdesign.stackexchange.com/questions/44797/how-do-i-insert-arrows-into-a-picture-in-gimp</a></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>Go to your home folder
Go to .config/GIMP
Go to the folder with a version number (2.10 for me)
Go to scripts
Download the arrow.scm file and place it here. Don&#39;t forget to unzip.
Open GIMP and draw a path</code></pre></div>
<p>From Tools menu, select Arrow</p>
<p>= h.265 main 10 profile media codec error =</p>
<h2 id="distrobox">Distrobox</h2>
<p>See <a href="../../tools%201/distrobox.md">distrobox</a></p>
<h2 id="zsh-for-humans">ZSH For Humans</h2>
<p><a href="https://github.com/romkatv/zsh4humans" rel="external" target="_blank">GitHub - romkatv/zsh4humans: A turnkey configuration for Zsh</a></p>
<h2 id="install-starcraft-on-fedora">Install Starcraft on Fedora</h2>
<p><a href="https://www.youtube.com/watch?v=eefsL9K2w4k" rel="external" target="_blank">https://www.youtube.com/watch?v=eefsL9K2w4k</a></p>
<ol>
<li>Install your latest gpu driver <a href="https://github.com/lutris/docs/blob/master/InstallingDrivers.md" rel="external" target="_blank">https://github.com/lutris/docs/blob/master/InstallingDrivers.md</a></li>
</ol>
<p>I am just running off of built in AMD graphics. So we just need to install support for Vulkan API
<code>sudo dnf install vulkan-loader vulkan-loader.i686</code></p>
<p>Install Wine
<code>$ sudo dnf -y install wine</code></p>
<p>Install Lutris
Install the Flatpak version in software center.</p>
<h2 id="fedora-hotkeys">Fedora Hotkeys</h2>
<h2 id="terminal">Terminal</h2>
<p>Close Terminal
shift + c + q</p>
<p>Previous Tab
c + Page Up</p>
<p>Next Tab
c + Page Down</p>
<p>Move to Specific Tab
Alt + #</p>
<p>Full Screen
F11</p>
<p>New Window
Shift + Ctrl + t</p>
<p>Close Tab
Shift + Ctrl + w</p>
<h2 id="desktop">Desktop</h2>
<p>Run a command
super + F2</p>
<p>Switch Between Applications
Alt + Esc</p>
<p>Move Window to Left Monitor
Shift + Super + &lt;-</p>
<p>Move Window to Right Monitor
Shift + Super + -&gt;</p>
<p>Minimize Current Window
Super + H</p>
<p>Close Current Appllication
Ctrl + Q</p>
<h2 id="browser">Browser</h2>
<h3 id="firefox">Firefox</h3>
<p>Switch Between Tabs
Ctrl + Tab</p>
<p>Switch Between Tabs in Reverse
Ctrl + Shift + Tab</p>
<h4 id="detach-tab-extension">Detach Tab Extension</h4>
<p><a href="https://addons.mozilla.org/en-US/firefox/addon/detach-tab/" rel="external" target="_blank">https://addons.mozilla.org/en-US/firefox/addon/detach-tab/</a></p>
<p>Detach Tab
Ctrl _ Shift _ Space</p>
<p>Reattach Tab
Ctrl + Shift + v</p>
<h2 id="slack">Slack</h2>
<p>Installing via package manager because of screen sharing issue.</p>
<p>Upgrade dnf and download the slack rpm from the website.</p>
<p><strong>Screen Sharing in Slack:</strong></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /usr/share/applications/slack.desktop</span></span></code></pre></div>
<p>Update the exec line to:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">Exec</span><span style="color:#ff6ac1">=</span>/usr/bin/slack --enable-features<span style="color:#ff6ac1">=</span>WebRTCPipeWireCapturer %U</span></span></code></pre></div>
<h2 id="actual-budget">Actual Budget</h2>
<p><a href="https://github.com/actualbudget/actual" rel="external" target="_blank">https://github.com/actualbudget/actual</a></p>
<h3 id="set-vim-to-default-editor-for-visudo">Set Vim to default editor for visudo</h3>
<p>add <code>Defaults editor=/usr/bin/vim</code> to top of visudo file.su</p>

  <footer class="footline">
  </footer>
</article>
          </section>
<article class="default">
  <header class="headline">
  </header>

<h1 id="packages">Packages</h1>

<div class="children children-type-card children-sort-"><ul class="card-container">
<li>
  <article class="card card-popout" aria-labelledby="R-card-744bc81418095f516d78fb088dc53469">
    <div class="card-content">
      <div class="card-title" id="R-card-744bc81418095f516d78fb088dc53469">
        <a href="/bash/packages/advanced-package-management/">
        Advanced Package Management
        </a>
      </div>
      <div class="card-content-text">
          <p>
Managing package groups, application streams, modules, and DNF
      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-49bc1508d75c3760a6ae6762b5f0d98a">
    <div class="card-content">
      <div class="card-title" id="R-card-49bc1508d75c3760a6ae6762b5f0d98a">
        <a href="/bash/packages/basic-package-management/">
        Basic Package Management
        </a>
      </div>
      <div class="card-content-text">
          <p>
RPM and package integrity and credibility
      </div>
    </div>
  </article>
</li>
</ul>
</div>

  <footer class="footline">
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Packages</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="advanced-package-management">Advanced Package Management</h1>

<h2 id="packagegroups">Package¬†Groups</h2>
<h3 id="package-group">package group</h3>
<ul>
<li>Group of packages that serve a common purpose.</li>
<li>Can query, install, and delete as a single unit rather than dealing with packages individually.</li>
<li>Two types of package groups:¬†<em>environment groups</em>¬†and¬†<em>package groups</em>.</li>
</ul>
<p><strong>environment groups</strong> available in RHEL 9:</p>
<ul>
<li>server, server with GUI, minimal install, workstation, virtualization host, and custom operating system.</li>
<li>Listed on the software selection window during RHEL 9 installation.</li>
</ul>
<p><strong>Package groups</strong> include:</p>
<ul>
<li>container management, smart card support, security tools, system tools, network servers,¬†etc.</li>
</ul>
<h2 id="individual-packages-package-groups-and-modules">Individual packages, package groups, and modules:</h2>
<h3 id="individual-package-management">Individual Package Management</h3>
<p>List, install, query, and remove packages.</p>
<h4 id="listing-available-and-installed-packages">Listing Available and Installed Packages</h4>
<ul>
<li>dnf lists available packages as well as installed packages.</li>
</ul>
<h3 id="lab-list-all-packages-available-for-installation-from-all-enabled-repos">Lab: list all packages available for installation from all enabled repos,</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf repoquery</span></span></code></pre></div>
<h3 id="lab-list-of-packages-that-are-available-only-from-a-specific-repo">Lab: list of packages that are available only from a specific repo:</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf repoquery --repo <span style="color:#5af78e">&#34;BaseOS&#34;</span></span></span></code></pre></div>
<h3 id="lab-grep-for-an-expression-to-narrow-down-your-search">Lab: grep for an expression to narrow down your search.</h3>
<p>For example, to find whether the BaseOS repo includes the <em>zsh</em> package.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf repoquery --repo BaseOS | grep zsh</span></span></code></pre></div>
<h3 id="lab-list-all-installed-packages-on-the-system">Lab: list all installed packages on the system:</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf list installed</span></span></code></pre></div>
<p>Three columns:
- package name
- package version
- repo it was installed from.
- @anaconda means the package was installed at the time of RHEL installation.</p>
<p>List all installed packages and all packages available for installation from all enabled repositories:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf list</span></span></code></pre></div>
<ul>
<li>@ sign identifies the package as installed.</li>
</ul>
<p>List all packages available from all enabled repositories that should be able to update:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf list updates</span></span></code></pre></div>
<p>List whether a package (<em>bc</em>, for instance) is installed or available for installation from any enabled repository:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf list bc</span></span></code></pre></div>
<p>List all installed packages whose names begin with the string &ldquo;gnome&rdquo; followed by any number of characters:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf list installed ^gnome*</span></span></code></pre></div>
<p>List recently added packages:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf list recent</span></span></code></pre></div>
<p>Refer to the <em>repoquery</em> and <em>list</em> subsections of the <em>dnf</em> command manual pages for more options and examples.</p>
<h3 id="installing-and-updating-packages">Installing and Updating Packages</h3>
<p>Installing a package:</p>
<ul>
<li>creates the necessary directory structure</li>
<li>installs the required files</li>
<li>runs any post-installation steps.</li>
<li>If already installed, <em>dnf</em> command updates it to the latest available version.</li>
</ul>
<p>Attempt to install a package called <em>ypbind</em>, proceed to update if it detects the presence of an older version:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf install ypbind</span></span></code></pre></div>
<p>Install or update a package called <em>dcraw</em> located locally at /mnt/AppStream/Packages/</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf localinstall /mnt/AppStream/Packages/dcraw*</span></span></code></pre></div>
<p>Update an installed package (<em>autofs</em>, for example) to the latest available version. Dnf will fail if the specified package is not already installed:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf update autofs</span></span></code></pre></div>
<p>Update all installed packages to the latest available versions:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf -y update</span></span></code></pre></div>
<p>Refer to the <em>install</em> and <em>update</em> subsections of the <em>dnf</em> command manual pages for more options and examples.</p>
<h3 id="exhibiting-package-information">Exhibiting Package Information</h3>
<p>Show:</p>
<ul>
<li>release</li>
<li>size</li>
<li>whether it is installed or available for installation</li>
<li>repo name it was installed or is available from</li>
<li>short and long descriptions</li>
<li>license</li>
<li>so on</li>
</ul>
<p>dnf info subcommand</p>
<p>View information about a package called <em>autofs</em>:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf info autofs</span></span></code></pre></div>
<ul>
<li>Determines whether the specified package is installed or
not.</li>
</ul>
<p>Refer to the <em>info</em> subsection of the <em>dnf</em> command manual pages.</p>
<h3 id="removing-packages">Removing Packages</h3>
<p>Removing a package:</p>
<ul>
<li>uninstalls it and removes all associated files and directory structure.</li>
<li>erases any dependencies as part of the deletion process.</li>
</ul>
<p>Remove a package called <em>ypbind</em>:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf remove ypbind</span></span></code></pre></div>
<p>Output</p>
<ul>
<li>Resolved dependencies</li>
<li>List of the packages that it would remove.</li>
<li>Disk space that their removal would free up.</li>
<li>After confirmation, it erased the identified packages and verified their removal.</li>
<li>List of the removed packages</li>
</ul>
<p>Refer to the <em>remove</em> subsection of the <em>dnf</em> command manual pages for more options and examples available for removing packages.</p>
<h3 id="lab-manipulate-individual-packages">Lab: Manipulate Individual Packages</h3>
<p>Perform management operations on a package called <code>cifs-utils</code>. Determine if this package is already installed and if it is available for installation. Display its information before installing it. Install the package and exhibit its information. Erase the package along with
its dependencies and confirm the removal.</p>
<ol>
<li>Check whether the <em>cifs-utils</em> package is already installed:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf list installed | grep cifs-utils</span></span></code></pre></div>
<ol start="2">
<li>Determine if the <em>cifs-utils</em> package is available for installation:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf repoquery cifs-utils</span></span></code></pre></div>
<ol start="3">
<li>Display detailed information about the package:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf info cifs-utils</span></span></code></pre></div>
<ol start="4">
<li>Install the package:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf install -y cifs-utils</span></span></code></pre></div>
<ol start="5">
<li>Display the package information again:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf info cifs-utils</span></span></code></pre></div>
<ol start="6">
<li>Remove the package:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf remove -y cifs-utils</span></span></code></pre></div>
<ol start="7">
<li>Confirm the removal:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf list installed | grep cif</span></span></code></pre></div>
<h3 id="determining-provider-and-searching-package-metadata">Determining Provider and Searching Package Metadata</h3>
<ul>
<li>You can determine what package a specific file belongs to or which package comprises a certain string.</li>
</ul>
<p>Search for packages that contain a specific file such as /etc/passwd/, use the <em>provides</em> or the <em>whatprovides</em> subcommand with dnf:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf provides /etc/passwd</span></span></code></pre></div>
<ul>
<li>
<p>Indicates file is part of a package called <em>setup</em>, installed during RHEL installation.</p>
</li>
<li>
<p>Second instance, setup package is part of the BaseOS repository.</p>
</li>
<li>
<p>Can also use a wildcard character for filename expansion.</p>
</li>
</ul>
<p>List all packages that contain filenames beginning with &ldquo;system-config&rdquo; followed by any number of characters:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf whatprovides /usr/bin/system-config*</span></span></code></pre></div>
<p>To search for all the packages that match the specified string in their
name or summary:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf search system-config</span></span></code></pre></div>
<h3 id="package-group-management">Package Group Management</h3>
<ul>
<li><code>group</code> subcommand</li>
<li>list, install, query, and remove groups of packages.</li>
</ul>
<h3 id="listing-available-and-installed-package-groups">Listing Available and Installed Package Groups</h3>
<p><code>group list</code> subcommand:</p>
<ul>
<li>list the package groups available for installation from either or both repos</li>
<li>list the package groups that are already installed on the system.</li>
</ul>
<p>List all available and installed package groups from all repositories:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf group list</span></span></code></pre></div>
<p>output:</p>
<ul>
<li>two categories of package groups:
<ul>
<li>Environment group</li>
<li>Package groups</li>
</ul>
</li>
</ul>
<p>Environment group:</p>
<ul>
<li>Larger collection of RHEL packages that provides all necessary software to build the operating system foundation for a desired purpose.</li>
</ul>
<p>Package group</p>
<ul>
<li>Small bunch of RHEL packages that serve a common purpose.</li>
<li>Saves time on the deployment of individual and dependent packages.</li>
<li>Output shows installed and available package groups.</li>
</ul>
<p>Display the number of installed and available package groups:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf group summary</span></span></code></pre></div>
<p>List all installed and available package groups including those that
are hidden:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf group list hidden</span></span></code></pre></div>
<p>Try <em>group list</em> with --installed and --available options to narrow
down the output list.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf group list --installed</span></span></code></pre></div>
<p>List all packages that a specific package group such as Base contains:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf group info Base</span></span></code></pre></div>
<p>-v option with the group info subcommand for more
information.</p>
<p>Review group list and group info subsections of the <code>dnf</code> man pages.</p>
<h3 id="installing-and-updating-package-groups">Installing and Updating Package Groups</h3>
<ul>
<li>Creates the necessary directory structure for all the packages included in the group and all dependent packages.</li>
<li>Installs the required files.</li>
<li>Runs any post-installation steps.</li>
<li>Attempts to update all the packages included in the group to the latest available versions.</li>
</ul>
<p>Install a package group called Emacs. Update if it detects an older version.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf -y groupinstall emacs</span></span></code></pre></div>
<p>Update the <em>smart card support</em> package group to the latest version:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf groupupdate <span style="color:#5af78e">&#34;Smart Card Support&#34;</span></span></span></code></pre></div>
<p>Refer to the <em>group install</em> and <em>group update</em> subsections of the <em>dnf</em> command manual pages for more details.</p>
<h3 id="removing-package-groups">Removing Package Groups</h3>
<ul>
<li>Uninstalls all the included packages and deletes all associated files and directory structure.</li>
<li>Erases any dependencies</li>
</ul>
<p>Erase the <em>smart card support</em> package group that was installed:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf -y groupremove <span style="color:#5af78e">&#39;smart card support&#39;</span></span></span></code></pre></div>
<p>Refer to the <em>remove</em> subsection of the <em>dnf</em> command manual pages for
more details.</p>
<h3 id="lab-manipulate-package-groups">Lab: Manipulate Package Groups</h3>
<p>Perform management operations on a package group called <em>system tools</em>. Determine if this group is already installed and if it is available for installation. List the packages it contains and install it. Remove the group along with its dependencies and confirm the removal.</p>
<ol>
<li>Check whether the <em>system tools</em> package group is already installed:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf group list installed</span></span></code></pre></div>
<ol start="2">
<li>Determine if the <em>system tools</em> group is available for installation:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf group list available</span></span></code></pre></div>
<p>The group name is exhibited at the bottom of the list under the
available groups.</p>
<ol start="3">
<li>Display the list of packages this group contains:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf group info <span style="color:#5af78e">&#39;system tools&#39;</span></span></span></code></pre></div>
<ul>
<li>All of the packages will be installed as part of the group installation.</li>
</ul>
<ol start="4">
<li>Install the group:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf group install <span style="color:#5af78e">&#39;system tools&#39;</span></span></span></code></pre></div>
<ol start="5">
<li>Remove the group:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf group remove <span style="color:#5af78e">&#39;system tools&#39;</span> -y</span></span></code></pre></div>
<ol start="6">
<li>Confirm the removal:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf group list installed</span></span></code></pre></div>
<h2 id="application-streams-and-modules">Application Streams and Modules</h2>
<p><strong>Application Streams</strong></p>
<ul>
<li>Introduced in RHEL 8.</li>
<li>Employs a modular approach to organize multiple versions of a software application alongside its dependencies to be available for installation from a single repository.</li>
</ul>
<p><strong>module</strong></p>
<ul>
<li>Logical set of application packages that includes everything required to install it, including the executables, libraries, documentation, tools, and utilities as well as dependent components.</li>
<li>Modularity gives the flexibility to choose the version of software based on need.</li>
</ul>
<ul>
<li>In older RHEL releases, each version of a package would have to come from a separate repository. (This has changed in RHEL 8.)</li>
<li>Now modules of a single application with different versions can be stored and made available for installation from a common repository.</li>
<li>The package management tool has also been enhanced to manipulate modules.</li>
</ul>
<ul>
<li>RHEL 9 is shipped with two core repositories called¬†<em>BaseOS</em>¬†and¬†<em>Application Stream</em>¬†(AppStream).</li>
</ul>
<p><strong>BaseOS</strong> repository</p>
<ul>
<li>Includes the core set of RHEL 9 components</li>
<li>kernel, modules, bootloader, and other foundational software packages.</li>
<li>Lays the foundation to install and run software applications and programs.</li>
<li>Available in the traditional rpm format.</li>
</ul>
<p><strong>AppStream</strong> repository</p>
<ul>
<li>Comes standard with core applications,</li>
<li>Plus several add-on applications</li>
<li>Rpm and modular format</li>
<li>Include web server software, development languages, database software, etc.</li>
</ul>
<h4 id="benefits-of-segregation">Benefits of Segregation</h4>
<p>Why separate BaseOS components from other applications?</p>
<p>(1) Separates application components from the core operating system elements.<br>
(2) Allows publishers to deliver and administrators to apply application updates more frequently.</p>
<p>In previous RHEL versions, an OS update would update all installed components including the kernel, service, and application components to the latest versions by default.</p>
<p>This could result in an unstable system or a misbehaving application due to an unwanted upgrade of one or more packages.</p>
<p>By detaching the base OS components from the applications, either of the two can be updated independent of the other.</p>
<p>This provides enhanced flexibility in tailoring the system components and application workloads without impacting the underlying stability of the system.</p>
<h3 id="module-streams">Module Streams</h3>
<ul>
<li>Collection of packages organized by version</li>
<li>Each module can have multiple streams</li>
<li>Each stream receives updates independent of the other streams</li>
<li>Stream can be enabled or disabled.</li>
</ul>
<p><strong>enabled</strong> stream</p>
<ul>
<li>Allows the packages it contains to be queried or installed</li>
<li>Only one stream of a specific module can be enabled at a time</li>
<li>Each module has a default stream, which provides the latest or the recommended version.</li>
</ul>
<h3 id="module-profiles">Module Profiles</h3>
<ul>
<li>List of recommended packages organized for purpose-built, convenient deployments to support a variety of use cases
such as:</li>
<li>Minimal, development, common, client, server, etc.</li>
<li>A profile may also include packages from the BaseOS repository or the dependencies of the stream</li>
<li>Each module stream can have zero, one, or more profiles associated with it with only one of them marked as the default.</li>
</ul>
<h3 id="module-management">Module Management</h3>
<p><strong>Modules</strong>¬†are special package groups usually representing an application, a language runtime, or a set of tools. They are available in one or¬†<strong>multiple streams</strong>¬†which usually represent a major version of a piece of software, They are available in one or¬†<strong>multiple streams</strong>¬†which give you an option to choose what versions of packages you want to consume.
<a href="https://docs.fedoraproject.org/en-US/modularity/using-modules/" rel="external" target="_blank">https://docs.fedoraproject.org/en-US/modularity/using-modules/</a></p>
<p>Modules are a way to deliver different versions of software (such as programming languages, databases, or web servers) independently of the base operating system&rsquo;s release cycle.</p>
<p>Each module can contain multiple streams, representing different versions or configurations of the software. For example, a module for Python might have streams for Python 2 and Python 3.</p>
<p><code>module</code> dnf subcommand</p>
<ul>
<li>list, enable, install, query, remove, and disable
modules.</li>
</ul>
<h3 id="listing-available-and-installed-modules">Listing Available and Installed Modules</h3>
<p>List all modules along with their stream, profile, and summary
information available from all configured repos:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module list</span></span></code></pre></div>
<p>Limit the output to a list of modules available from a specific
repo such as AppStream by adding --repo AppStream:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module list --repo AppStream</span></span></code></pre></div>
<p>Output:</p>
<ul>
<li>default (d)</li>
<li>enabled (e)</li>
<li>disabled (x)</li>
<li>installed (i)</li>
</ul>
<p>List all the streams for a specific module such as <code>ruby</code> and display their status:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module list ruby</span></span></code></pre></div>
<p>Modify the above and list only the specified stream 3.3 for the module <code>ruby</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module list ruby:3.3</span></span></code></pre></div>
<p>List all enabled module streams:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module list --enabled</span></span></code></pre></div>
<p>Similarly, you can use the --installed and --disabled options with <code>dnf module list</code> to output only the installed or the disabled streams.</p>
<p>Refer to the <em>module list</em> subsection of the <em>dnf</em> command manual pages.</p>
<h3 id="installing-and-updating-modules">Installing and Updating Modules</h3>
<p>Installing a module</p>
<ul>
<li>Creates directory tree for all packages included in the module and all dependent packages.</li>
<li>Installs required files for the selected profile.</li>
<li>Runs any post-installation steps.</li>
<li>If module being loaded or a part of it is already present, the command attempts to update all the packages included in the profile to the latest available versions.</li>
</ul>
<p>Install the <em>perl</em> module using its default stream and default
profile:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf -y module install perl</span></span></code></pre></div>
<p>Update a module called <em>squid</em> to the latest version:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf module update squid -y</span></span></code></pre></div>
<p>Install the profile &ldquo;common&rdquo; with stream &ldquo;rhel9&rdquo; for the <em>container-tools</em> module: (module:stream/profile)</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf module install container-tools:rhel9/common</span></span></code></pre></div>
<h3 id="displaying-module-information">Displaying Module Information</h3>
<ul>
<li>Shows
<ul>
<li>Name, stream, version, list of profiles, default profile, repo name module was installed or is available from</li>
<li>Summary, description, and artifacts.</li>
</ul>
</li>
<li>Can be viewed by supplying module info with dnf.</li>
</ul>
<p>List all profiles available for the module ruby:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module info --profile ruby</span></span></code></pre></div>
<p>Limit the output to a particular stream such as 3.1:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module info --profile ruby:3.1</span></span></code></pre></div>
<p>Refer to the <em>module info</em> subsection of the <em>dnf</em> command manual pages for more details.</p>
<h3 id="removing-modules">Removing Modules</h3>
<p>Removing a module will:</p>
<ul>
<li>Uninstall all the included packages and</li>
<li>Delete all associated files and directory structure.</li>
<li>Erases any dependencies as part of the deletion process.</li>
</ul>
<p>Remove the ruby module with &ldquo;3.1&rdquo; stream:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf module remove ruby:3.1</span></span></code></pre></div>
<p>Refer to the <em>module remove</em> subsection of the <em>dnf</em> command manual pages:</p>
<h3 id="lab-manipulate-modules">Lab: Manipulate Modules</h3>
<ul>
<li>Perform management operations on a module called <em>postgresql</em>.</li>
<li>Determine if this module is already installed and if it is available for installation.</li>
<li>Show its information and install the default profile for stream &ldquo;10&rdquo;.</li>
<li>Remove the module profile along with any dependencies</li>
<li>confirm the removal.</li>
</ul>
<ol>
<li>Check whether the <em>postgresql</em> module is already installed(i):</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module list postgresql</span></span></code></pre></div>
<ol start="2">
<li>Display detailed information about the default stream of the module:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module info postgresql:15</span></span></code></pre></div>
<ol start="3">
<li>Install the module with default profile for stream &ldquo;15&rdquo;:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf -y module install --profile postgresql:15</span></span></code></pre></div>
<ol start="4">
<li>Display the module information again:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module info postgresql:15</span></span></code></pre></div>
<ol start="5">
<li>Erase the module profile for the stream:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module remove -y postgresql:15</span></span></code></pre></div>
<ol start="6">
<li>Confirm the removal (back to (d)):</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module info postgresql:15</span></span></code></pre></div>
<h3 id="switching-module-streams">Switching Module Streams</h3>
<ul>
<li>Typically performed to upgrade or downgrade the version of an installed module.</li>
</ul>
<p>process:</p>
<ul>
<li>
<p>uninstall the existing version provided by a stream alongside any dependencies that it has,</p>
</li>
<li>
<p>switch to the other stream</p>
</li>
<li>
<p>install the desired version.</p>
</li>
<li>
<p>Installing a module from a stream automatically enables the stream if it was previously disabled</p>
</li>
<li>
<p>you can manually enable or disable it with the <em>dnf</em> command.</p>
</li>
<li>
<p>Only one stream of a given module enabled at a time.</p>
</li>
<li>
<p>Attempting to enable another one for the same module automatically
disables the current enabled stream.</p>
</li>
<li>
<p>dnf module list and dnf module info expose the enable/disable status of the module stream.</p>
</li>
</ul>
<h3 id="lab-install-a-module-from-an-alternative-stream">Lab: Install a Module from an Alternative Stream</h3>
<ul>
<li>Downgrade a module to a lower version.</li>
<li>Remove the stream <code>ruby</code> 3.3 and</li>
<li>Confirm its removal.</li>
<li>manually enable the stream <em>perl</em> 5.24 and confirm its new status.</li>
<li>install the new version of the module and display its information.</li>
</ul>
<ol>
<li>Check the current state of all <em>perl</em> streams:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module list perl</span></span></code></pre></div>
<ol start="2">
<li>Remove perl 5.26:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf module remove perl -y</span></span></code></pre></div>
<ol>
<li>Confirm the removal:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module list ruby</span></span></code></pre></div>
<ol start="2">
<li>Reset the module so that neither stream is enabled or disabled. This will remove the enabled (e) indication from ruby 3.3</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf module reset ruby</span></span></code></pre></div>
<ol start="3">
<li>Install the non-default profile &ldquo;minimal&rdquo; for ruby stream 3.1. This will auto-enable the stream.</li>
</ol>
<p>&ndash;allowerasing</p>
<ul>
<li>Will instruct the command to remove installed packages for dependency resolution.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf module install ruby:3.1 --allowerasing</span></span></code></pre></div>
<ol start="4">
<li>Check the status of the module:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module list perl</span></span></code></pre></div>
<h2 id="the-dnf-command">The dnf Command</h2>
<ul>
<li>Introduced in RHEL 8</li>
<li>Can use interchangeably with yum in RHEL
<ul>
<li><code>yum</code> is a soft link to the <em>dnf</em> utility.</li>
</ul>
</li>
<li>Requires the system to have access to either:
<ul>
<li>a local or remote software repository</li>
<li>a local installable package file.</li>
</ul>
</li>
</ul>
<p>Subscription Management* (RHSM) service</p>
<ul>
<li>
<p>Available in the Red Hat Customer Portal</p>
</li>
<li>
<p>Offers access to official Red Hat software repositories.</p>
</li>
<li>
<p>Other web-based repositories that host packages are available</p>
</li>
<li>
<p>You can also set up a local, custom repository on your system and add packages of your choice to it.</p>
</li>
</ul>
<p>Primary benefit of using <code>dnf</code> over <code>rpm</code>:</p>
<ul>
<li>
<p>Resolve dependencies automatically</p>
<ul>
<li>By identifying and installing any additional required packages</li>
</ul>
</li>
<li>
<p>With multiple repositories set up, <code>dnf</code> extracts the software from wherever it finds it.</p>
</li>
<li>
<p>Perform abundant software administration tasks.</p>
</li>
<li>
<p>Invokes the <code>rpm</code> utility in the background</p>
</li>
<li>
<p>Can perform a number of operations on individual packages, package groups, and modules:</p>
<ul>
<li>listing</li>
<li>querying</li>
<li>installing</li>
<li>removing</li>
<li>enabling and disabling specific module streams.</li>
</ul>
</li>
</ul>
<p>Software handling tasks that dnf can perform on packages:</p>
<ul>
<li>Clean and repolist are specific to repositories.</li>
<li>Refer to the manual pages of <em>dnf</em> for additional subcommands, operators, options, examples, and other details.</li>
</ul>
<table>
  <thead>
      <tr>
          <th><strong>Subcommand</strong></th>
          <th><strong>Description</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>check-update</td>
          <td>Checks if updates are available for installed packages</td>
      </tr>
      <tr>
          <td>clean</td>
          <td>Removes cached data</td>
      </tr>
      <tr>
          <td>history</td>
          <td>Display previous dnf activities as recorded in /var/lib/dnf/history/</td>
      </tr>
      <tr>
          <td>info</td>
          <td>Show details for a package</td>
      </tr>
      <tr>
          <td>install</td>
          <td>Install or update a package</td>
      </tr>
      <tr>
          <td>list</td>
          <td>List installed and available packages</td>
      </tr>
      <tr>
          <td>provides</td>
          <td>Search for packages that contain the specified file or feature</td>
      </tr>
      <tr>
          <td>reinstall</td>
          <td>Reinstall the exact version of an installed package</td>
      </tr>
      <tr>
          <td>remove</td>
          <td>Remove a package and its dependencies</td>
      </tr>
      <tr>
          <td>repolist</td>
          <td>List enabled repositories</td>
      </tr>
      <tr>
          <td>repoquery</td>
          <td>Runs queries on available packages</td>
      </tr>
      <tr>
          <td>search</td>
          <td>Searches package metadata for the specified string</td>
      </tr>
      <tr>
          <td>upgrade</td>
          <td>Updates each installed package to the latest version</td>
      </tr>
  </tbody>
</table>
<p>dnf subcommands that are intended for operations on package
groups and modules:</p>
<table>
  <thead>
      <tr>
          <th><strong>Subcommand</strong></th>
          <th><strong>Description</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>group install</td>
          <td>Install or updates a package group</td>
      </tr>
      <tr>
          <td>group info</td>
          <td>Return details for a package group</td>
      </tr>
      <tr>
          <td>group list</td>
          <td>List available package groups</td>
      </tr>
      <tr>
          <td>group remove</td>
          <td>Remove a package group</td>
      </tr>
      <tr>
          <td>module disable</td>
          <td>Disable a module along with all the streams it contains</td>
      </tr>
      <tr>
          <td>module enable</td>
          <td>Enable a module along with all the streams it contains</td>
      </tr>
      <tr>
          <td>module install</td>
          <td>Install a module profile including its packages</td>
      </tr>
      <tr>
          <td>module info</td>
          <td>Show details for a module</td>
      </tr>
      <tr>
          <td>module list</td>
          <td>Lists all available module streams along with their profiles and status</td>
      </tr>
      <tr>
          <td>module remove</td>
          <td>Removes a module profile including its packages</td>
      </tr>
      <tr>
          <td>module reset</td>
          <td>Resets a module so that it is neither in enable nor in disable state</td>
      </tr>
      <tr>
          <td>module update</td>
          <td>Updates packages in a module profile</td>
      </tr>
  </tbody>
</table>
<p>For labs, you&rsquo;ll need to create a definition file and configure access to the two repositories available on the RHEL 8 ISO
image.</p>
<h3 id="lab-configure-access-to-pre-built-repositories">Lab: Configure Access to Pre-Built Repositories</h3>
<p>Set up access to the two dnf repositories that are available on RHEL 9 image. (You should have already configured an automatic mounting of RHEL 9 image on <em>/mnt</em>.) Create a definition file for the repositories and confirm.</p>
<ol>
<li>Verify that the image is currently mounted:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> df -h | grep mnt</span></span></code></pre></div>
<ol start="2">
<li>Create a definition file called local.repo in /etc/yum.repos.d/ using the <em>vim</em> editor and define the following data for both repositories in it:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>BaseOS<span style="color:#ff6ac1">]</span> 
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">name</span><span style="color:#ff6ac1">=</span>BaseOS 
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">baseurl</span><span style="color:#ff6ac1">=</span>file:///mnt/BaseOS 
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">gpgcheck</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>AppStream<span style="color:#ff6ac1">]</span> 
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">name</span><span style="color:#ff6ac1">=</span>AppStream 
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">baseurl</span><span style="color:#ff6ac1">=</span>file:///mnt/AppStream 
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">gpgcheck</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<ol start="3">
<li>Confirm access to the repositories:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> sudo dnf repolist </span></span></code></pre></div>
<ul>
<li>Ignore lines 1-4 in the output that are related to subscription and
system registration.</li>
<li>Lines 5 and 6 show the rate at which the command read the repo data.</li>
<li>Line 7 displays the timestamp of the last metadata check.</li>
<li>last two lines show the repo IDs, repo names, and a count of packages they hold.</li>
<li>AppStream repo consists of 4,672 packages</li>
<li>BaseOS repo contains 1,658 packages.</li>
<li>Both repos are enabled by default and are ready for use.</li>
</ul>
<h3 id="dnf-yum-repository">dnf yum Repository</h3>
<p><strong>dnf repository</strong> (<em>yum repository</em> or a <em>repo</em>)</p>
<ul>
<li>
<p>Digital library for storing software packages</p>
</li>
<li>
<p>Repository is accessed for package retrieval, query, update, and installation</p>
</li>
<li>
<p>The two repositories</p>
<ul>
<li>BaseOS and AppStream
<ul>
<li>come preconfigured with the RHEL 9 ISO image.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Number of other repositories available on the Internet that are maintained by software publishers such as Red Hat and CentOS.</p>
</li>
<li>
<p>Can build private custom repositories for internal IT use for stocking and delivering software.</p>
<ul>
<li>Good practice for an organization with a large Linux server base, as it manages dependencies automatically and aids in maintaining software consistency across the board.</li>
</ul>
</li>
<li>
<p>Can also be used to store in-house developed packages.</p>
</li>
<li>
<p>It is important to obtain software packages from authentic and reliable sources such as Red Hat to prevent potential damage to your system and to circumvent possible software corruption.</p>
</li>
<li>
<p>There is a process to create repositories and to access preconfigured repositories.</p>
</li>
<li>
<p>There are two pre-set repositories available on the RHEL 9 image. You will configure access to them via a definition file to support the exercises and lab environment.</p>
</li>
</ul>
<h3 id="repository-definition-file">Repository Definition File</h3>
<ul>
<li>Repo definition files are located in /etc/yum.repos.d/</li>
<li>Can create local.repo file in this directory to specify local repos</li>
<li>See dnf.conf man page</li>
</ul>
<p>Sample repo definition file and key directives:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>BaseOS_RHEL_9<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">name</span><span style="color:#ff6ac1">=</span> RHEL <span style="color:#ff9f43">9</span> base operating system components
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">baseurl</span><span style="color:#ff6ac1">=</span>file://*mnt*BaseOS
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">enabled</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">gpgcheck</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p><strong>EXAM TIP:</strong></p>
<ul>
<li>Knowing how to configure a dnf/yum repository using a URL plays an important role in completing some of the RHCSA exam tasks successfully.</li>
<li>Use two forward slash characters (//) with the baseurl directive for an FTP, HTTP, or HTTPS source.</li>
</ul>
<p>Five lines from a sample repo file:
Line 1 defines an exclusive ID within the square brackets.
Line 2 is a brief description of the repo with the &ldquo;name&rdquo; directive.
Line 3 is the location of the repodata directory with the &ldquo;baseurl&rdquo; directive.
Line 4 shows whether this repository is active.
Line 5 shows if packages are to be GPGchecked for authenticity.</p>
<ul>
<li>
<p>Each repository definition file must have:</p>
<ul>
<li>Unique ID</li>
<li>Description</li>
<li>Baseurl directive defined</li>
<li>Other directives are set as required.</li>
</ul>
</li>
<li>
<p>The baseurl directive for a local directory path is defined as file:///local_path</p>
<ul>
<li>The first two forward slash characters represent the URL convention, and the third forward slash is for the absolute path to the destination directory)</li>
<li>FTP and
<ul>
<li>\ftp://hostname/network_path</li>
</ul>
</li>
<li>HTTP(S)
<ul>
<li>http(s)://hostname/network_path</li>
</ul>
</li>
<li>network path must include a resolvable hostname or an IP address.</li>
</ul>
</li>
</ul>
<h3 id="software-management-with-dnf">Software Management with dnf</h3>
<ul>
<li>Tools are available to work with individual packages as well as package groups and modules.</li>
<li><code>rpm</code> command is limited to managing one package at a time.</li>
<li><code>dnf</code> has an associated configuration file that can define settings to control its behavior.</li>
</ul>
<h4 id="dnf-configuration-file">dnf Configuration File</h4>
<ul>
<li>Key configuration file: /etc/dnf/dnf.conf</li>
<li>&ldquo;main&rdquo; section
- Sets directives that have a global effect on dnf operations.</li>
<li>Can define separate sections for each custom repository that you plan to set up on the system.</li>
<li>Preferred location to store configuration for each custom repository in their own definition files is in /etc/yum.repos.d
<ul>
<li>default location created for this purpose.</li>
</ul>
</li>
</ul>
<p>Default content of this configuration file:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> cat /etc/dnf/dnf.conf</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>main<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">gpgcheck</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">installonly_limit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">clean_requirements_on_remove</span><span style="color:#ff6ac1">=</span>True
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">best</span><span style="color:#ff6ac1">=</span>True
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">skip_if_unavailable</span><span style="color:#ff6ac1">=</span>False</span></span></code></pre></div>
<p>The above and a few other directives that you may define in the file:</p>
<table>
  <thead>
      <tr>
          <th>Directive</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>best</td>
          <td>Whether to install (or upgrade to) the latest available version.</td>
      </tr>
      <tr>
          <td>clean_requirements_on_remove</td>
          <td>Whether to remove dependencies during a package removal process that are no longer in use.</td>
      </tr>
      <tr>
          <td>debuglevel</td>
          <td>Sets debug from 1 (minimum) and 10 (maximum). Default is 2. A value of 0 disables this feature.</td>
      </tr>
      <tr>
          <td>gpgcheck</td>
          <td>Whether to check the GPG signature for package authenticity. Default is 1 (enabled).</td>
      </tr>
      <tr>
          <td>installonly_limit</td>
          <td>Count of packages that can be installed concurrently. Default is 3.</td>
      </tr>
      <tr>
          <td>keepcache</td>
          <td>Defines whether to store the package and header cache following a successful installation. Default is 0 (disabled).</td>
      </tr>
      <tr>
          <td>logdir</td>
          <td>Sets the directory location to store the log files. Default is /var/log/</td>
      </tr>
      <tr>
          <td>obsoletes</td>
          <td>Checks and removes any obsolete dependent packages during installs and updates. Default is 1 (enabled).</td>
      </tr>
  </tbody>
</table>
<hr>
<p>For other directives: <code>man 5 dnf.conf</code></p>
<h2 id="advanced-package-management-diy-labs">Advanced Package Management DIY Labs</h2>
<ol>
<li>Configure Access to RHEL 8 Repositories (Make sure the RHEL 8 ISO image is attached to the VM and mounted.)  Create a definition file under <em>/etc/yum.repos.d/</em>, and define two blocks (one for BaseOS and another for AppStream).</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>  vim /etc/yum.repos.d/local.repo</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>BaseOS<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">name</span><span style="color:#ff6ac1">=</span>BaseOS 
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">baseurl</span><span style="color:#ff6ac1">=</span>file:///mnt/BaseOS 
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">gpgcheck</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>AppStrean<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">name</span><span style="color:#ff6ac1">=</span>AppStream 
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">baseurl</span><span style="color:#ff6ac1">=</span>file:///mnt/AppStream 
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">gpgcheck</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<ol start="4">
<li>Verify the configuration with dnf repolist. You should see numbers in thousands under the Status column for both repositories.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf repolist -v</span></span></code></pre></div>
<h3 id="lab--install-and-manage-individual-packages">Lab:  Install and Manage Individual Packages</h3>
<ol>
<li>List all installed and available packages separately.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf list --available <span style="color:#ff6ac1">&amp;&amp;</span> dnf list --installed</span></span></code></pre></div>
<ol start="2">
<li>Show which package contains the /etc/group file.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf provides /etc/group</span></span></code></pre></div>
<ol start="3">
<li>Install the package <em>httpd</em>.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf -y install httpd</span></span></code></pre></div>
<ol start="4">
<li>Review /var/log/yum.log/ for confirmation. (/var/lib/dnf/history)</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>  dnf history</span></span></code></pre></div>
<ol start="5">
<li>Perform the following on the httpd package:</li>
<li>Show information</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf info httpd</span></span></code></pre></div>
<ol start="2">
<li>List dependencies</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf repoquery --requires httpd</span></span></code></pre></div>
<ol start="3">
<li>Remove it</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf remove httpd</span></span></code></pre></div>
<h3 id="lab-install-and-manage-package-groups">Lab Install and Manage Package Groups</h3>
<ol>
<li>List all installed and available package groups separately.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf group list available <span style="color:#ff6ac1">&amp;&amp;</span> dnf group list installed</span></span></code></pre></div>
<ol>
<li>Install package groups <em>Security Tools</em> and <em>Scientific Support.</em></li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf group install <span style="color:#5af78e">&#39;Security Tools&#39;</span></span></span></code></pre></div>
<ol start="2">
<li>Review /var/log/yum.log for confirmation.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf history</span></span></code></pre></div>
<ol start="3">
<li>Show the packages included in the Scientific Support package group, and delete this group.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf group info <span style="color:#5af78e">&#39;Scientific Support&#39;</span> <span style="color:#ff6ac1">&amp;&amp;</span> dnf group  remove <span style="color:#5af78e">&#39;Scientific Support&#39;</span></span></span></code></pre></div>
<h3 id="lab-install-and-manage-modules">Lab: Install and Manage Modules</h3>
<ol start="4">
<li>List all modules. Identify which modules, streams and profiles are installed, default, disabled, and enabled from the output.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module list</span></span></code></pre></div>
<ol start="5">
<li>Install the default stream of the development profile for module <em>php</em>, and verify.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module install php <span style="color:#ff6ac1">&amp;&amp;</span> dnf module list</span></span></code></pre></div>
<ol start="6">
<li>Remove the module.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module remove php</span></span></code></pre></div>
<h3 id="lab-switch-module-streams-and-install-software">Lab Switch Module Streams and Install Software</h3>
<ol start="7">
<li>List <em>postgresql</em> module. This will display the streams and profiles, and their status.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module list postgresql</span></span></code></pre></div>
<ol start="8">
<li>Reset both streams</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module reset postgresql</span></span></code></pre></div>
<ol start="9">
<li>enable the stream for the older version, and install its client profile.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> dnf module install postgresql:15</span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="basic-package-management">Basic Package Management</h1>

<h2 id="rpm-redhat-package-manager">RPM (Redhat Package Manager)</h2>
<ul>
<li>Specially formatted File(s) packaged together with the .rpm extension.</li>
<li>Packages included or available for RHEL are in rpm format.</li>
<li>Metadata info gets updated whenever a package is updated.</li>
</ul>
<h3 id="rpm-command">rpm command</h3>
<ul>
<li>Install, Upgrade, remove, query, freshen, or decompress packages.</li>
<li>Validate package authenticity and integrity.</li>
</ul>
<h3 id="packages">Packages</h3>
<ul>
<li>Two types of packages binary (or installable) and source.</li>
</ul>
<p><strong>Binary packages</strong></p>
<ul>
<li>Installation ready</li>
<li>Bundled for distribution.</li>
<li>Have .rpm extension.</li>
<li>Contain:
<ul>
<li>install scripts (pre and post)</li>
<li>Executables</li>
<li>Configuration files</li>
<li>Library files</li>
<li>Dependency information</li>
<li>Where to install files</li>
<li>Documentation
<ul>
<li>How to install/uninstall</li>
<li>Man pages for config files/commands</li>
<li>Other install and usage info</li>
</ul>
</li>
<li>Metadata
<ul>
<li>Stored in central location</li>
<li>Includes:
<ul>
<li>Package version</li>
<li>Install location</li>
<li>Checksum values</li>
<li>List of included files and their attributes</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Package intelligence
<ul>
<li>Used by package administration toolset for successful completion of the package installation process.</li>
<li>May include info on:
<ul>
<li>prerequisites</li>
<li>User account setup</li>
<li>Needed directories/ soft links</li>
</ul>
</li>
<li>Includes reverse process for uninstall</li>
</ul>
</li>
</ul>
<h3 id="package-naming">Package Naming</h3>
<p>5 parts to a package name:
1. Name
2. Version
3. release (revision or build)
4. Linux version 
5. Processor Architecture
- noarch
- platform independant
- src
- Source code packages</p>
<ul>
<li>Always has .rpm extension</li>
<li>.rpm is removed after install
Example:
openssl-1.1.1-8.el8.x86_64.rpm,</li>
</ul>
<h3 id="package-dependency">Package Dependency</h3>
<ul>
<li>Dependency info is in the metadata
<ul>
<li>Read by package handling utilities</li>
</ul>
</li>
</ul>
<h3 id="package-database">Package Database</h3>
<ul>
<li>Metadata for installed packages and package files is stored in /var/lib/rpm/
<ul>
<li>Package database</li>
<li>Referenced by package manipulation utilities to obtain:
<ul>
<li>package name and version data</li>
<li>Info about owerships, permissions, timestamps, and file sizes that are part of the package.</li>
<li>Contain info on dependencies.</li>
<li>Aids management commands in:
<ul>
<li>listing and querying packages</li>
<li>Verifying dependencies and file attributes.</li>
<li>Installing new packages.</li>
<li>Upgrading and uninstalling packages.</li>
</ul>
</li>
<li>Removes and replaces metadata when a package is replaced.</li>
<li>Can maintain multiple version of a single package.</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="package-management-tools">Package Management Tools</h3>
<ul>
<li>rpm (redhat package manager)
<ul>
<li>Does not automatically resolve dependencies.</li>
</ul>
</li>
<li>yum (yellowdog update, modified)
<ul>
<li>Find, get, and install dependencies automatically.</li>
<li>softlink to dnf now.</li>
</ul>
</li>
<li>dnf (dandified yum)</li>
</ul>
<h3 id="package-management-with-rpm">Package management with rpm</h3>
<p>rpm package management tasks:
- query
- install
- upgrade
- freshen
- overwrite
- remove
- extract
- validate
- verify</p>
<ul>
<li>Works with installed and installable packages.</li>
</ul>
<h3 id="rpm-command-1">rpm command</h3>
<h6 id="query-options">Query options</h6>
<p>Query and display packages<br>
<code>-q (--query)</code> <br>
<br>
List all installed packages<br>
<code>-qa (--query --all)</code><br>
<br>
List config files in a package<br>
<code>-qc (--query --config-files)</code><br>
<br>
List documentation files in a package<br>
<code>-qd (--query --docfiles)</code> <br>
<br>
Exhibit what package a file comes from<br>
<code>-qf (--query --file)</code> <br>
<br>
Show installed package info (Version, Size, Installation status, Date, Signature, Description, etc.)
<code>-qi (--query --info)</code></p>
<p>Show installable package info (Version, Size, Installation status, Date, Signature, Description, etc.)
<code>-qip (--query --info --package)</code></p>
<p>List all files in a package.<br>
<code>-ql (--query --list)</code></p>
<p>List files and packages a package depends on. <br>
<code>-qR (--query --requires)</code></p>
<p>List packages that provide the specified package or file.<br>
<code>-q --whatprovides</code></p>
<p>List packages that require the specified package or file.<br>
<code>-q --whatrequires</code></p>
<h6 id="package-installation-options">Package installation options</h6>
<p>Remove a package<br>
<code>-e (--erase)</code></p>
<p>Upgrades installed package. Or loads if not installed.<br>
<code>-U (--upgrade)</code></p>
<p>Display detailed information<br>
<code>-v (--verbose or -vv)</code></p>
<p>Verify integrity of a package or package files<br>
<code>-V (--verify)</code></p>
<h3 id="querying-packages">Querying packages</h3>
<p>Query packages in the package database or at a specified location.</p>
<h3 id="installing-a-package">Installing a package</h3>
<ul>
<li>Creates directory structure needed</li>
<li>Installs files</li>
<li>Runs needed post installation steps</li>
<li>Installing package will fail if missing dependencies.</li>
<li>Error message will show missing dependencies.</li>
</ul>
<h3 id="upgrading-a-package">Upgrading a package</h3>
<ul>
<li>Installs the package if previous version does not exist. (-U)</li>
<li>Makes backup of effected configuration files and adds .rpmsave extension.</li>
</ul>
<h3 id="freshening-a-package">Freshening a package</h3>
<ul>
<li>Older version must exist.</li>
<li>-F option</li>
<li>Will only work if a newer version of a package is available.</li>
</ul>
<h3 id="overwriting-a-package">Overwriting a Package</h3>
<ul>
<li>Replaces existing files of a package with the same version.</li>
<li>&ndash;replacepkgs option.</li>
<li>Useful when you suspect corruption.</li>
</ul>
<h3 id="removing-a-package">Removing a Package</h3>
<ul>
<li>Uninstalls package and associated files/ directories</li>
<li>-e Option</li>
<li>Checks to see if this package is a dependency for another program and fails if it is.</li>
</ul>
<h3 id="extracting-files-from-an-installable-package">Extracting Files from an Installable Package</h3>
<ul>
<li><code>rpm2cpio</code> command</li>
<li>-i (extract)</li>
<li>-d create directory structure.
Useful for:
<ul>
<li>Examining package contents.</li>
<li>Replacing corrupt or lost command.</li>
<li>Replace critical configuration file to it&rsquo;s original state</li>
</ul>
</li>
</ul>
<h2 id="package-integrity-and-credibility">Package Integrity and Credibility</h2>
<ul>
<li>MD5 Checksum for verifying package integrity</li>
<li>GNU Privacy Guard Public Key (GNU Privacy Guard or GPG) for ensuring credibility of publisher.</li>
<li>PGP (Pretty Good Privacy) - commercial version of GPG.</li>
<li><code>--nosignature</code>
<ul>
<li>Don&rsquo;t verify package or header signatures when reading.</li>
</ul>
</li>
<li><code>-K</code>
<ul>
<li>keep package files after installation
<code>rpmkeys</code> command</li>
<li>check credibility, import GPG key, and verify packages</li>
</ul>
</li>
<li>Redhat signs their products and updates with a GPG key.
<ul>
<li>Files in installation media include public keys in the products for verification.</li>
<li>Copied to /etc/pki/rpm-gpg during OS installation.
<strong>RPM-GPG-KEY-redhat-release</strong>
<ul>
<li>Used for packages shipped after November 2009 and their updates.
<strong>RPM-GPG-KEY-redhat-beta</strong></li>
<li>For Beta products shipped after November 2009.</li>
</ul>
</li>
</ul>
</li>
<li>Import the relevant GPG key and the verify the package to check the credibility of a package.</li>
</ul>
<h3 id="viewing-gpg-keys">Viewing GPG Keys</h3>
<ul>
<li>view with rpm command <code>rpm -q gpg-pubkey</code></li>
<li><code>-i</code> option
<ul>
<li>show info about a key.</li>
</ul>
</li>
</ul>
<h3 id="verifying-package-attributes">Verifying Package Attributes</h3>
<ul>
<li>Compare package file attributes with originals stored in package database at the time of installation.</li>
<li><code>-V</code> option
<ul>
<li>compare owner, group, permission mode, size, modification time, digest, type, etc.</li>
<li>Returns to prompt if no changes are detected</li>
<li>-v or vv for verbose</li>
</ul>
</li>
<li><code>-Vf</code>
<ul>
<li>run the check directly on the file</li>
</ul>
</li>
<li>Three columns of output:
<ul>
<li>Column 1
<ul>
<li>9 fields
<ul>
<li>S = Different file size.</li>
<li>M = Mode or permission or file type change.</li>
<li>5 = MD5 Checksum does not match.</li>
<li>D = Device file and its major and minor number have changed.</li>
<li>L = File is a symlink and it&rsquo;s path has been altered.</li>
<li>U = Ownership has changed.</li>
<li>G = Group membership has been modified.</li>
<li>T = Timestamp changed.</li>
<li>P = Capabilities are altered.</li>
<li>. = No modifications detected.</li>
</ul>
</li>
<li></li>
</ul>
</li>
<li>Column 2
<ul>
<li>File type
<ul>
<li>c = Configuration file</li>
<li>d = Documentation File</li>
<li>g = Ghost FIle</li>
<li>l = License file</li>
<li>r = Readme file</li>
</ul>
</li>
</ul>
</li>
<li>Column 3
<ul>
<li>Full path of file</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="basic-package-management-labs">Basic Package Management Labs</h2>
<h3 id="lab-mount-rhel-9-iso-persistently">Lab: Mount RHEL 9 ISO Persistently</h3>
<ol>
<li>
<p>Go to the VirtualBox VM Manager and make sure that the RHEL 8 image is attached to RHEL9-VM1 as depicted below:
<a href="#R-image-4ad6ed3bc3c40168e520b8f3e719ff47" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020240713164339.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4ad6ed3bc3c40168e520b8f3e719ff47"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020240713164339.png"></a></p>
</li>
<li>
<p>Open the /etc/fstab file in the vim editor (or another editor of your choice) and add the following line entry at the end of the file to mount the DVD image (/dev/sr0) in read-only (ro) mode on the /mnt directory.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/dev/sr0 /mnt iso9660 ro 0 0</code></pre></div>
</li>
</ol>
<p>Note: sr0 represents the first instance of the optical device and iso9660 is the standard format for optical file systems.</p>
<ol start="3">
<li>
<p>Mount the file system as per the configuration defined in the /etc/fstab file using the mount command with the -a (all) option:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo mount -a</code></pre></div>
</li>
<li>
<p>Verify the mount using the df command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>df -h | grep mnt</code></pre></div>
</li>
</ol>
<p>Note: The image and the packages therein can now be accessed via the /mnt directory just like any other local directory on the system.</p>
<ol start="5">
<li>
<p>List the two directories‚Äî/mnt/BaseOS/Packages and /mnt/AppStream/Packages‚Äîthat contain all the software packages (directory names are case sensitive):</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ls -l /mnt/BaseOS/Packages | more</code></pre></div>
</li>
</ol>
<h3 id="lab-query-packages-rpm">Lab: Query Packages (RPM)</h3>
<ol>
<li>
<p>query all installed packages:
<code>rpm -qa</code></p>
</li>
<li>
<p>query whether the perl package is installed:
<code>rpm -q perl</code></p>
</li>
<li>
<p>list all files in a package:
<code>rpm -ql iproute</code></p>
</li>
<li>
<p>list only the documentation files in a package:
<code>rpm -qd audit</code></p>
</li>
<li>
<p>list only the configuration files in a package:
<code>rpm -qc cups</code></p>
</li>
<li>
<p>identify which package owns the specified file:
<code>rpm -qf /etc/passwd</code></p>
</li>
<li>
<p>display information about an installed package including version, release, installation status, installation date, size, signatures, description, and so on:
<code>rpm -qi setup</code></p>
</li>
<li>
<p>list all file and package dependencies for a given package:
<code>rpm -qR chrony</code></p>
</li>
<li>
<p>query an installable package for metadata information (version, release, architecture, description, size, signatures, etc.):
<code>rpm -qip /mnt/BaseOS/Packages/zsh-5.5.1-6.el8.x86_64.rpm</code></p>
</li>
<li>
<p>determine what packages require the specified package in order to operate properly:
<code>rpm -q --whatrequires lvm2</code></p>
</li>
</ol>
<h3 id="lab-installing-a-package-rpm">Lab: Installing a Package (RPM)</h3>
<ol>
<li>Install zsh-5.5.1-6.el8.x86_64.rpm
<code>sudo rpm -ivh /mnt/BaseOS/Packages/zsh-5.5.1-6.el8.x86_64.rpm</code></li>
</ol>
<h3 id="lab-upgrading-a-package-rpm">Lab: Upgrading a Package (RPM)</h3>
<ol>
<li>Upgrade sushi with the -U option:
<code>sudo rpm -Uvh /mnt/AppStream/Packages/sushi-3.28.3-1.el8.x86_64.rpm</code></li>
</ol>
<h3 id="lab-freshening-a-package">Lab: Freshening a Package</h3>
<ol>
<li>Freshen the sushi package:
<code>sudo rpm -Fvh /mnt/AppStream/Packages/sushi-3.28.3-1.el8.x86_64.rpm</code></li>
</ol>
<h3 id="lab-overwriting-a-package">Lab: Overwriting a Package</h3>
<ol>
<li>Overwrite zsh-5.5.1-6.el8.x86_64
<code>sudo rpm -ivh --replacepkgs /mnt/BaseOS/Packages/zsh-5.5.1-6.el8.x86_64</code></li>
</ol>
<h3 id="lab-removing-a-package">Lab: Removing a Package</h3>
<ol>
<li>Remove sushi
<code>sudo rpm sushi -ve</code></li>
</ol>
<h3 id="lab-extracting-files-from-an-installable-package">Lab: Extracting Files from an Installable Package</h3>
<ol>
<li>
<p>You have lost /etc/crony.conf. Determine what package this file comes from:
<code>rpm -qf /etc/chrony.conf</code></p>
</li>
<li>
<p>Extract all files from the crony package to /tmp and create the directory structure:</p>
</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 mnt<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cd /tmp</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>sudo rpm2cpio /mnt/BaseOS/Packages/chrony-3.3-3.el8.x86_64.rpm | cpio -imd
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">1066</span> blocks<span style="color:#ff6ac1">](</span>&lt;<span style="color:#ff6ac1">[</span>root@server30 tmp<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm2cpio /mnt/BaseOS/Packages/chrony-4.3-1.el9.x86_64.rpm | cpio -imd</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">1253</span> blocks&gt;<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<ol start="3">
<li>
<p>Use find to locate the crony.conf file:
<code>sudo find . -name chrony.conf</code></p>
</li>
<li>
<p>Copy the file to /etc:</p>
</li>
</ol>
<h3 id="lab-validating-package-integrity-and-credibility">Lab: Validating Package Integrity and Credibility</h3>
<ol>
<li>Check the integrity of zsh-5.5.1-6.el8.x86_64.rpm located in /mnt/BaseOS/Packages:
<code>rpm -K /mnt/BaseOS/Packages/zsh-5.5.1-6.el8.x86_64.rpm --nosignature</code></li>
<li>Import the GPG key from the proper file and verify the signature for the zsh-5.5.1-6.el8.x86_64.rpm package.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo rpmkeys --import /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
sudo rpmkeys -K /mnt/BaseOS/Packages/zsh-5.5.1-6.el8.x86_64.rpm</code></pre></div>
<h3 id="lab-viewing-gpg-keys">Lab: Viewing GPG Keys</h3>
<ol>
<li>List the imported key:
<code>rpm -q gpg-pubkey</code></li>
<li>View details for the first key:
<code>rpm -qi gpg-pubkey-fd431d51-4ae0493b</code></li>
</ol>
<h3 id="lab-verifying-package-attributes">Lab: Verifying Package Attributes</h3>
<ol>
<li>
<p>Run a check on the at program:
<code>sudo rpm -V at</code></p>
</li>
<li>
<p>Change permissions of one of the files and run the check again:</p>
</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l /etc/sysconfig/atd
</span></span><span style="display:flex;"><span>sudo chmod -v <span style="color:#ff9f43">770</span> /etc/sysconfig/atd
</span></span><span style="display:flex;"><span>sudo rpm -V at</span></span></code></pre></div>
<ol start="3">
<li>
<p>Run the check directly on the file:
<code>sudo rpm -Vf /etc/sysconfig/atd</code></p>
</li>
<li>
<p>Reset the value and check the file again:</p>
</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo chmod -v <span style="color:#ff9f43">644</span> /etc/sysconfig/atd
</span></span><span style="display:flex;"><span>sudo rpm -V at</span></span></code></pre></div>
<h3 id="lab-perform-package-management-using-rpm">Lab: Perform Package Management Using rpm</h3>
<ol>
<li>Run the <code>ls</code> command on the /mnt/AppStream/Packages directory to confirm that the rmt package is available:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 tmp<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls -l /mnt/BaseOS/Packages/rmt*</span>
</span></span><span style="display:flex;"><span>-r--r--r--. <span style="color:#ff9f43">1</span> root root <span style="color:#ff9f43">49582</span> Nov <span style="color:#ff9f43">20</span>  <span style="color:#ff9f43">2021</span> /mnt/BaseOS/Packages/rmt-1.6-6.el9.x86_64.rpm</span></span></code></pre></div>
<ol start="2">
<li>Run the rpm command and verify the integrity and credibility of the package:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 tmp<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpmkeys -K /mnt/BaseOS/Packages/rmt-1.6-6.el9.x86_64.rpm</span>
</span></span><span style="display:flex;"><span>/mnt/BaseOS/Packages/rmt-1.6-6.el9.x86_64.rpm: digests signatures OK</span></span></code></pre></div>
<ol start="3">
<li>Install the Package:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 tmp<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpmkeys -K /mnt/BaseOS/Packages/rmt-1.6-6.el9.x86_64.rpm</span>
</span></span><span style="display:flex;"><span>/mnt/BaseOS/Packages/rmt-1.6-6.el9.x86_64.rpm: digests signatures OK
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 tmp<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -ivh /mnt/BaseOS/Packages/rmt-1.6-6.el9.x86_64.rpm</span>
</span></span><span style="display:flex;"><span>Verifying...                         <span style="color:#78787e">################################# [100%])</span>
</span></span><span style="display:flex;"><span>Preparing...                         <span style="color:#78787e">################################# [100%])</span>
</span></span><span style="display:flex;"><span>Updating / installing...
</span></span><span style="display:flex;"><span>   1:rmt-2:1.6-6.el9                 <span style="color:#78787e">################################# [100%])</span></span></span></code></pre></div>
<ol start="4">
<li>Show basic information about the package:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 tmp<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -qi rmt</span>
</span></span><span style="display:flex;"><span>Name        : rmt
</span></span><span style="display:flex;"><span>Epoch       : <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>Version     : 1.6
</span></span><span style="display:flex;"><span>Release     : 6.el9
</span></span><span style="display:flex;"><span>Architecture: x86_64
</span></span><span style="display:flex;"><span>Install Date: Sat <span style="color:#ff9f43">13</span> Jul <span style="color:#ff9f43">2024</span> 09:02:08 PM MST
</span></span><span style="display:flex;"><span>Group       : Unspecified
</span></span><span style="display:flex;"><span>Size        : <span style="color:#ff9f43">88810</span>
</span></span><span style="display:flex;"><span>License     : CDDL
</span></span><span style="display:flex;"><span>Signature   : RSA/SHA256, Sat <span style="color:#ff9f43">20</span> Nov <span style="color:#ff9f43">2021</span> 08:46:44 AM MST, Key ID 199e2f91fd431d51
</span></span><span style="display:flex;"><span>Source RPM  : star-1.6-6.el9.src.rpm
</span></span><span style="display:flex;"><span>Build Date  : Tue <span style="color:#ff9f43">10</span> Aug <span style="color:#ff9f43">2021</span> 03:13:47 PM MST
</span></span><span style="display:flex;"><span>Build Host  : x86-vm-55.build.eng.bos.redhat.com
</span></span><span style="display:flex;"><span>Packager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;
</span></span><span style="display:flex;"><span>Vendor      : Red Hat, Inc.
</span></span><span style="display:flex;"><span>URL         : http://freecode.com/projects/star
</span></span><span style="display:flex;"><span>Summary     : Provides certain programs with access to remote tape devices
</span></span><span style="display:flex;"><span>Description :
</span></span><span style="display:flex;"><span>The rmt utility provides remote access to tape devices <span style="color:#ff6ac1">for</span> programs
</span></span><span style="display:flex;"><span>like dump <span style="color:#ff6ac1">(</span>a filesystem backup program<span style="color:#ff6ac1">)</span>, restore <span style="color:#ff6ac1">(</span>a program <span style="color:#ff6ac1">for</span>
</span></span><span style="display:flex;"><span>restoring files from a backup<span style="color:#ff6ac1">)</span>, and tar <span style="color:#ff6ac1">(</span>an archiving program<span style="color:#ff6ac1">)</span>.</span></span></code></pre></div>
<ol start="5">
<li>Show all the files the package contains:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 tmp<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -ql rmt</span>
</span></span><span style="display:flex;"><span>/etc/default/rmt
</span></span><span style="display:flex;"><span>/etc/rmt
</span></span><span style="display:flex;"><span>/usr/lib/.build-id
</span></span><span style="display:flex;"><span>/usr/lib/.build-id/c2
</span></span><span style="display:flex;"><span>/usr/lib/.build-id/c2/6a51ea96fc4b4367afe7d44d16f1405c3c7ec9
</span></span><span style="display:flex;"><span>/usr/sbin/rmt
</span></span><span style="display:flex;"><span>/usr/share/doc/star
</span></span><span style="display:flex;"><span>/usr/share/doc/star/CDDL.Schily.txt
</span></span><span style="display:flex;"><span>/usr/share/doc/star/COPYING
</span></span><span style="display:flex;"><span>/usr/share/man/man1/rmt.1.gz</span></span></code></pre></div>
<ol start="6">
<li>List the documentation files the package has:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 tmp<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -qd rmt</span>
</span></span><span style="display:flex;"><span>/usr/share/doc/star/CDDL.Schily.txt
</span></span><span style="display:flex;"><span>/usr/share/doc/star/COPYING
</span></span><span style="display:flex;"><span>/usr/share/man/man1/rmt.1.gz</span></span></code></pre></div>
<ol start="7">
<li>Verify the attributes of each file in the package. Use verbose mode.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 tmp<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -vV rmt</span>
</span></span><span style="display:flex;"><span>.........  c /etc/default/rmt
</span></span><span style="display:flex;"><span>.........    /etc/rmt
</span></span><span style="display:flex;"><span>.........  a /usr/lib/.build-id
</span></span><span style="display:flex;"><span>.........  a /usr/lib/.build-id/c2
</span></span><span style="display:flex;"><span>.........  a /usr/lib/.build-id/c2/6a51ea96fc4b4367afe7d44d16f1405c3c7ec9
</span></span><span style="display:flex;"><span>.........    /usr/sbin/rmt
</span></span><span style="display:flex;"><span>.........    /usr/share/doc/star
</span></span><span style="display:flex;"><span>.........  d /usr/share/doc/star/CDDL.Schily.txt
</span></span><span style="display:flex;"><span>.........  d /usr/share/doc/star/COPYING
</span></span><span style="display:flex;"><span>.........  d /usr/share/man/man1/rmt.1.gz</span></span></code></pre></div>
<ol start="8">
<li>Remove the package:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 tmp<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -ve rmt</span>
</span></span><span style="display:flex;"><span>Preparing packages...
</span></span><span style="display:flex;"><span>rmt-2:1.6-6.el9.x86_64</span></span></code></pre></div>
<h2 id="lab-9-1-install-and-verify-packages">Lab 9-1: Install and Verify Packages</h2>
<p>As user1 with sudo on server3,</p>
<ul>
<li>make sure the RHEL 9 ISO image is attached to the VM and mounted.</li>
<li>Use the rpm command and install the zsh package by specifying its full path.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 Packages<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -ivh /mnt/BaseOS/Packages/zsh-5.8-9.el9.x86_64.rpm </span>
</span></span><span style="display:flex;"><span>Verifying...                         <span style="color:#78787e">################################# [100%])</span>
</span></span><span style="display:flex;"><span>Preparing...                         <span style="color:#78787e">################################# [100%])</span>
</span></span><span style="display:flex;"><span>	package zsh-5.8-9.el9.x86_64 is already installed</span></span></code></pre></div>
<ul>
<li>Run the rpm command again and perform the following on the zsh package:</li>
<li>(1) show information</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 Packages<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -qi zsh</span>
</span></span><span style="display:flex;"><span>Name        : zsh
</span></span><span style="display:flex;"><span>Version     : 5.8
</span></span><span style="display:flex;"><span>Release     : 9.el9
</span></span><span style="display:flex;"><span>Architecture: x86_64
</span></span><span style="display:flex;"><span>Install Date: Sat <span style="color:#ff9f43">13</span> Jul <span style="color:#ff9f43">2024</span> 06:49:40 PM MST
</span></span><span style="display:flex;"><span>Group       : Unspecified
</span></span><span style="display:flex;"><span>Size        : <span style="color:#ff9f43">8018363</span>
</span></span><span style="display:flex;"><span>License     : MIT
</span></span><span style="display:flex;"><span>Signature   : RSA/SHA256, Thu <span style="color:#ff9f43">24</span> Feb <span style="color:#ff9f43">2022</span> 08:59:15 AM MST, Key ID 199e2f91fd431d51
</span></span><span style="display:flex;"><span>Source RPM  : zsh-5.8-9.el9.src.rpm
</span></span><span style="display:flex;"><span>Build Date  : Wed <span style="color:#ff9f43">23</span> Feb <span style="color:#ff9f43">2022</span> 07:10:14 AM MST
</span></span><span style="display:flex;"><span>Build Host  : x86-vm-56.build.eng.bos.redhat.com
</span></span><span style="display:flex;"><span>Packager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;
</span></span><span style="display:flex;"><span>Vendor      : Red Hat, Inc.
</span></span><span style="display:flex;"><span>URL         : http://zsh.sourceforge.net/
</span></span><span style="display:flex;"><span>Summary     : Powerful interactive shell
</span></span><span style="display:flex;"><span>Description :
</span></span><span style="display:flex;"><span>The zsh shell is a <span style="color:#ff5c57">command</span> interpreter usable as an interactive login
</span></span><span style="display:flex;"><span>shell and as a shell script <span style="color:#ff5c57">command</span> processor.  Zsh resembles the ksh
</span></span><span style="display:flex;"><span>shell <span style="color:#ff6ac1">(</span>the Korn shell<span style="color:#ff6ac1">)</span>, but includes many enhancements.  Zsh supports
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">command</span> line editing, built-in spelling correction, programmable
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">command</span> completion, shell functions <span style="color:#ff6ac1">(</span>with autoloading<span style="color:#ff6ac1">)</span>, a <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>mechanism, and more.</span></span></code></pre></div>
<ul>
<li>(2) validate integrity</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 Packages<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -K zsh-5.8-9.el9.x86_64.rpm</span>
</span></span><span style="display:flex;"><span>zsh-5.8-9.el9.x86_64.rpm: digests signatures OK</span></span></code></pre></div>
<ul>
<li>(3) display attributes
<code>[root@server30 Packages]# rpm -V zsh</code></li>
</ul>
<h2 id="lab-9-2-query-and-erase-packages">Lab 9-2: Query and Erase Packages</h2>
<p>As user1 with sudo on server3,</p>
<ul>
<li>make sure the RHEL 9 ISO image is attached to the VM and mounted.</li>
<li>Use the rpm command to perform the following:</li>
<li>(1) check whether the setup package is installed</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 Packages<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -q setup</span>
</span></span><span style="display:flex;"><span>setup-2.13.7-10.el9.noarch</span></span></code></pre></div>
<ul>
<li>(2) display the list of configuration files in the setup package</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 Packages<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -qc setup</span>
</span></span><span style="display:flex;"><span>/etc/aliases
</span></span><span style="display:flex;"><span>/etc/bashrc
</span></span><span style="display:flex;"><span>/etc/csh.cshrc
</span></span><span style="display:flex;"><span>/etc/csh.login
</span></span><span style="display:flex;"><span>/etc/environment
</span></span><span style="display:flex;"><span>/etc/ethertypes
</span></span><span style="display:flex;"><span>/etc/exports
</span></span><span style="display:flex;"><span>/etc/filesystems
</span></span><span style="display:flex;"><span>/etc/fstab
</span></span><span style="display:flex;"><span>/etc/group
</span></span><span style="display:flex;"><span>/etc/gshadow
</span></span><span style="display:flex;"><span>/etc/host.conf
</span></span><span style="display:flex;"><span>/etc/hosts
</span></span><span style="display:flex;"><span>/etc/inputrc
</span></span><span style="display:flex;"><span>/etc/motd
</span></span><span style="display:flex;"><span>/etc/networks
</span></span><span style="display:flex;"><span>/etc/passwd
</span></span><span style="display:flex;"><span>/etc/printcap
</span></span><span style="display:flex;"><span>/etc/profile
</span></span><span style="display:flex;"><span>/etc/profile.d/csh.local
</span></span><span style="display:flex;"><span>/etc/profile.d/sh.local
</span></span><span style="display:flex;"><span>/etc/protocols
</span></span><span style="display:flex;"><span>/etc/services
</span></span><span style="display:flex;"><span>/etc/shadow
</span></span><span style="display:flex;"><span>/etc/shells
</span></span><span style="display:flex;"><span>/etc/subgid
</span></span><span style="display:flex;"><span>/etc/subuid
</span></span><span style="display:flex;"><span>/run/motd
</span></span><span style="display:flex;"><span>/usr/lib/motd</span></span></code></pre></div>
<ul>
<li>(3) show information for the zlib-devel package on the ISO image</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 Packages<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -qi ./zlib-devel-1.2.11-40.el9.x86_64.rpm</span>
</span></span><span style="display:flex;"><span>Name        : zlib-devel
</span></span><span style="display:flex;"><span>Version     : 1.2.11
</span></span><span style="display:flex;"><span>Release     : 40.el9
</span></span><span style="display:flex;"><span>Architecture: x86_64
</span></span><span style="display:flex;"><span>Install Date: <span style="color:#ff6ac1">(</span>not installed<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Group       : Unspecified
</span></span><span style="display:flex;"><span>Size        : <span style="color:#ff9f43">141092</span>
</span></span><span style="display:flex;"><span>License     : zlib and Boost
</span></span><span style="display:flex;"><span>Signature   : RSA/SHA256, Tue <span style="color:#ff9f43">09</span> May <span style="color:#ff9f43">2023</span> 05:31:02 AM MST, Key ID 199e2f91fd431d51
</span></span><span style="display:flex;"><span>Source RPM  : zlib-1.2.11-40.el9.src.rpm
</span></span><span style="display:flex;"><span>Build Date  : Tue <span style="color:#ff9f43">09</span> May <span style="color:#ff9f43">2023</span> 03:51:20 AM MST
</span></span><span style="display:flex;"><span>Build Host  : x86-64-03.build.eng.rdu2.redhat.com
</span></span><span style="display:flex;"><span>Packager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;
</span></span><span style="display:flex;"><span>Vendor      : Red Hat, Inc.
</span></span><span style="display:flex;"><span>URL         : https://www.zlib.net/
</span></span><span style="display:flex;"><span>Summary     : Header files and libraries <span style="color:#ff6ac1">for</span> Zlib development
</span></span><span style="display:flex;"><span>Description :
</span></span><span style="display:flex;"><span>The zlib-devel package contains the header files and libraries needed
</span></span><span style="display:flex;"><span>to develop programs that use the zlib compression and decompression
</span></span><span style="display:flex;"><span>library.</span></span></code></pre></div>
<ul>
<li>(4) reinstall the zsh package (&ndash;reinstall -vh),</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 Packages<span style="color:#ff6ac1">]</span><span style="color:#78787e"># rpm -hv --reinstall ./zsh-5.8-9.el9.x86_64.rpm</span>
</span></span><span style="display:flex;"><span>Verifying...                         <span style="color:#78787e">################################# [100%])</span>
</span></span><span style="display:flex;"><span>Preparing...                         <span style="color:#78787e">################################# [100%])</span>
</span></span><span style="display:flex;"><span>Updating / installing...
</span></span><span style="display:flex;"><span>   1:zsh-5.8-9.el9                   <span style="color:#78787e">################################# [ 50%])</span>
</span></span><span style="display:flex;"><span>Cleaning up / removing...
</span></span><span style="display:flex;"><span>   2:zsh-5.8-9.el9                   <span style="color:#78787e">################################# [100%])</span></span></span></code></pre></div>
<ul>
<li>(5) remove the zsh package.
<code>[root@server30 Packages]# rpm -e zsh</code></li>
</ul>

  <footer class="footline">
  </footer>
</article>
          </section>
<article class="default">
  <header class="headline">
  </header>

<h1 id="bash">Bash</h1>

<h2 id="my-name-is-marcel-and-im-partially-a-shell">My name is Marcel and I&rsquo;m partially a shell..</h2>
<p><a href="#R-image-e1e8a382e2bcac1687b0cba5f11bcac7" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020250316051144.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e1e8a382e2bcac1687b0cba5f11bcac7"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020250316051144.png"></a></p>
<p>A shell is a program that takes commands and passes them to the operating system.^1^ This is done via <strong>terminal emulator</strong> with keyboard commands or by using scripts ran on the system. There are many shell programs that you can use on Linux. Almost all Linux distributions come with a shell called <strong>Bash</strong>. Some others include <strong>zsh</strong>, <strong>fsh</strong>, <strong>ksh</strong>, and <strong>Tcsh</strong>. (But not limited to)</p>
<p>Shells have different features such as built in commands, job control, alias definitions, history substitution, PATH searching, command completion, and more. Each shell has it&rsquo;s own syntax, hotkeys, way of doing things. Most of them follow a standard called &ldquo;POSIX&rdquo; that help with script portability between shells.</p>
<p>You can see a list of more shells and a comparison of their features on this <a href="https://en.wikipedia.org/wiki/Comparison_of_command_shells" rel="external" target="_blank">Wikipedia page</a>.</p>
<h2 id="terminator-emulators">Terminator emulators..</h2>
<p><a href="#R-image-516876d6363cf6aff4bcd8c94ad9021d" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/Pasted%20image%2020250316051955.png" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-516876d6363cf6aff4bcd8c94ad9021d"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/Pasted%20image%2020250316051955.png"></a></p>
<p>I meant Terminal Emulators! Silly me..</p>
<p>The <strong>Current shell</strong></p>
<ul>
<li>Where a program is executed.</li>
</ul>
<p><strong>Sub-shell (child shell)</strong></p>
<ul>
<li>created within a shell to run a program.</li>
</ul>
<p>There are two types of variables. <strong>Local variables</strong> are private variables to the shell that creates it. And they are only used by programs started in the shell that created them. <strong>Environment variables</strong> are passed to any sub-shells created by the current shell. As well as any programs ran in the current and sub shells.</p>
<pre><code>- Value stored in an environment variable is accessible to the program, as well as any sub-programs that it spawns during its lifecycle. 
- Any environment variable set in a sub-shell is lost when the sub-shell terminates.
- `env` or the `printenv` command to view predefined environment variables.
- Common predefined environment variables:
	- **DISPLAY** 
		- Stores the hostname or IP address for graphical terminal sessions 
	- **HISTFILE** 
		- Defines the file for storing the history of executed commands 
	- **HISTSIZE** 
		- Defines the maximum size for the HISTFILE 
	- **HOME** 
		- Sets the home directory path LOGNAME Retains the login name 
	- **MAIL** 
		- Contains the path to the user mail directory
	- **PATH** 
		- Directories to be searched when executing a command. Eliminates the need to specify the absolute path of a command to run it. 
	- **PPID** 
		- Holds the identifier number for the parent program 
	- **PS1** 
		- Defines the primary command prompt PS2 Defines the secondary command prompt 
	- **PWD** 
		- Stores the current directory location 
	- **SHELL** 
		- Holds the absolute path to the primary primary shell file
	- **TERM** 
		- Holds the terminal type value 
	- **UID** 
		- Holds the logged-in user‚Äôs UID 
	- **USER** 
		- Retains the name of the logged-in user
</code></pre>
<h3 id="setting-and-unsetting-variables">Setting and unsetting variables</h3>
<ul>
<li><code>export</code>, <code>unset</code>, and <code>echo</code> to define and undefine environment variables</li>
<li>Use uppercase for variables</li>
</ul>
<h3 id="echo-command">echo command</h3>
<ul>
<li>Restricted to showing the value of a specific variable</li>
</ul>
<h3 id="env-command">env command</h3>
<ul>
<li>Displays the environment variables only.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># env</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SHELL</span><span style="color:#ff6ac1">=</span>/bin/bash
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">HISTCONTROL</span><span style="color:#ff6ac1">=</span>ignoredups
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">HISTSIZE</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1000</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">HOSTNAME</span><span style="color:#ff6ac1">=</span>localhost
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">PWD</span><span style="color:#ff6ac1">=</span>/root
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">LOGNAME</span><span style="color:#ff6ac1">=</span>root
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">XDG_SESSION_TYPE</span><span style="color:#ff6ac1">=</span>tty
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">MOTD_SHOWN</span><span style="color:#ff6ac1">=</span>pam
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">HOME</span><span style="color:#ff6ac1">=</span>/root
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">LANG</span><span style="color:#ff6ac1">=</span>en_US.UTF-8
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">LS_COLORS</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">rs</span><span style="color:#ff6ac1">=</span>0:di<span style="color:#ff6ac1">=</span>01;34:ln<span style="color:#ff6ac1">=</span>01;36:mh<span style="color:#ff6ac1">=</span>00:pi<span style="color:#ff6ac1">=</span>40;33:so<span style="color:#ff6ac1">=</span>01;35:do<span style="color:#ff6ac1">=</span>01;35:bd<span style="color:#ff6ac1">=</span>40;33;01:cd<span style="color:#ff6ac1">=</span>40;33;01:or<span style="color:#ff6ac1">=</span>40;31;01:mi<span style="color:#ff6ac1">=</span>01;37;41:su<span style="color:#ff6ac1">=</span>37;41:sg<span style="color:#ff6ac1">=</span>30;43:ca<span style="color:#ff6ac1">=</span>30;41:tw<span style="color:#ff6ac1">=</span>30;42:ow<span style="color:#ff6ac1">=</span>34;42:st<span style="color:#ff6ac1">=</span>37;44:ex<span style="color:#ff6ac1">=</span>01;32:*.tar<span style="color:#ff6ac1">=</span>01;31:*.tgz<span style="color:#ff6ac1">=</span>01;31:*.arc<span style="color:#ff6ac1">=</span>01;31:*.arj<span style="color:#ff6ac1">=</span>01;31:*.taz<span style="color:#ff6ac1">=</span>01;31:*.lha<span style="color:#ff6ac1">=</span>01;31:*.lz4<span style="color:#ff6ac1">=</span>01;31:*.lzh<span style="color:#ff6ac1">=</span>01;31:*.lzma<span style="color:#ff6ac1">=</span>01;31:*.tlz<span style="color:#ff6ac1">=</span>01;31:*.txz<span style="color:#ff6ac1">=</span>01;31:*.tzo<span style="color:#ff6ac1">=</span>01;31:*.t7z<span style="color:#ff6ac1">=</span>01;31:*.zip<span style="color:#ff6ac1">=</span>01;31:*.z<span style="color:#ff6ac1">=</span>01;31:*.dz<span style="color:#ff6ac1">=</span>01;31:*.gz<span style="color:#ff6ac1">=</span>01;31:*.lrz<span style="color:#ff6ac1">=</span>01;31:*.lz<span style="color:#ff6ac1">=</span>01;31:*.lzo<span style="color:#ff6ac1">=</span>01;31:*.xz<span style="color:#ff6ac1">=</span>01;31:*.zst<span style="color:#ff6ac1">=</span>01;31:*.tzst<span style="color:#ff6ac1">=</span>01;31:*.bz2<span style="color:#ff6ac1">=</span>01;31:*.bz<span style="color:#ff6ac1">=</span>01;31:*.tbz<span style="color:#ff6ac1">=</span>01;31:*.tbz2<span style="color:#ff6ac1">=</span>01;31:*.tz<span style="color:#ff6ac1">=</span>01;31:*.deb<span style="color:#ff6ac1">=</span>01;31:*.rpm<span style="color:#ff6ac1">=</span>01;31:*.jar<span style="color:#ff6ac1">=</span>01;31:*.war<span style="color:#ff6ac1">=</span>01;31:*.ear<span style="color:#ff6ac1">=</span>01;31:*.sar<span style="color:#ff6ac1">=</span>01;31:*.rar<span style="color:#ff6ac1">=</span>01;31:*.alz<span style="color:#ff6ac1">=</span>01;31:*.ace<span style="color:#ff6ac1">=</span>01;31:*.zoo<span style="color:#ff6ac1">=</span>01;31:*.cpio<span style="color:#ff6ac1">=</span>01;31:*.7z<span style="color:#ff6ac1">=</span>01;31:*.rz<span style="color:#ff6ac1">=</span>01;31:*.cab<span style="color:#ff6ac1">=</span>01;31:*.wim<span style="color:#ff6ac1">=</span>01;31:*.swm<span style="color:#ff6ac1">=</span>01;31:*.dwm<span style="color:#ff6ac1">=</span>01;31:*.esd<span style="color:#ff6ac1">=</span>01;31:*.jpg<span style="color:#ff6ac1">=</span>01;35:*.jpeg<span style="color:#ff6ac1">=</span>01;35:*.mjpg<span style="color:#ff6ac1">=</span>01;35:*.mjpeg<span style="color:#ff6ac1">=</span>01;35:*.gif<span style="color:#ff6ac1">=</span>01;35:*.bmp<span style="color:#ff6ac1">=</span>01;35:*.pbm<span style="color:#ff6ac1">=</span>01;35:*.pgm<span style="color:#ff6ac1">=</span>01;35:*.ppm<span style="color:#ff6ac1">=</span>01;35:*.tga<span style="color:#ff6ac1">=</span>01;35:*.xbm<span style="color:#ff6ac1">=</span>01;35:*.xpm<span style="color:#ff6ac1">=</span>01;35:*.tif<span style="color:#ff6ac1">=</span>01;35:*.tiff<span style="color:#ff6ac1">=</span>01;35:*.png<span style="color:#ff6ac1">=</span>01;35:*.svg<span style="color:#ff6ac1">=</span>01;35:*.svgz<span style="color:#ff6ac1">=</span>01;35:*.mng<span style="color:#ff6ac1">=</span>01;35:*.pcx<span style="color:#ff6ac1">=</span>01;35:*.mov<span style="color:#ff6ac1">=</span>01;35:*.mpg<span style="color:#ff6ac1">=</span>01;35:*.mpeg<span style="color:#ff6ac1">=</span>01;35:*.m2v<span style="color:#ff6ac1">=</span>01;35:*.mkv<span style="color:#ff6ac1">=</span>01;35:*.webm<span style="color:#ff6ac1">=</span>01;35:*.webp<span style="color:#ff6ac1">=</span>01;35:*.ogm<span style="color:#ff6ac1">=</span>01;35:*.mp4<span style="color:#ff6ac1">=</span>01;35:*.m4v<span style="color:#ff6ac1">=</span>01;35:*.mp4v<span style="color:#ff6ac1">=</span>01;35:*.vob<span style="color:#ff6ac1">=</span>01;35:*.qt<span style="color:#ff6ac1">=</span>01;35:*.nuv<span style="color:#ff6ac1">=</span>01;35:*.wmv<span style="color:#ff6ac1">=</span>01;35:*.asf<span style="color:#ff6ac1">=</span>01;35:*.rm<span style="color:#ff6ac1">=</span>01;35:*.rmvb<span style="color:#ff6ac1">=</span>01;35:*.flc<span style="color:#ff6ac1">=</span>01;35:*.avi<span style="color:#ff6ac1">=</span>01;35:*.fli<span style="color:#ff6ac1">=</span>01;35:*.flv<span style="color:#ff6ac1">=</span>01;35:*.gl<span style="color:#ff6ac1">=</span>01;35:*.dl<span style="color:#ff6ac1">=</span>01;35:*.xcf<span style="color:#ff6ac1">=</span>01;35:*.xwd<span style="color:#ff6ac1">=</span>01;35:*.yuv<span style="color:#ff6ac1">=</span>01;35:*.cgm<span style="color:#ff6ac1">=</span>01;35:*.emf<span style="color:#ff6ac1">=</span>01;35:*.ogv<span style="color:#ff6ac1">=</span>01;35:*.ogx<span style="color:#ff6ac1">=</span>01;35:*.aac<span style="color:#ff6ac1">=</span>01;36:*.au<span style="color:#ff6ac1">=</span>01;36:*.flac<span style="color:#ff6ac1">=</span>01;36:*.m4a<span style="color:#ff6ac1">=</span>01;36:*.mid<span style="color:#ff6ac1">=</span>01;36:*.midi<span style="color:#ff6ac1">=</span>01;36:*.mka<span style="color:#ff6ac1">=</span>01;36:*.mp3<span style="color:#ff6ac1">=</span>01;36:*.mpc<span style="color:#ff6ac1">=</span>01;36:*.ogg<span style="color:#ff6ac1">=</span>01;36:*.ra<span style="color:#ff6ac1">=</span>01;36:*.wav<span style="color:#ff6ac1">=</span>01;36:*.oga<span style="color:#ff6ac1">=</span>01;36:*.opus<span style="color:#ff6ac1">=</span>01;36:*.spx<span style="color:#ff6ac1">=</span>01;36:*.xspf<span style="color:#ff6ac1">=</span>01;36:
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SSH_CONNECTION</span><span style="color:#ff6ac1">=</span>192.168.0.233 <span style="color:#ff9f43">56990</span> 192.168.0.169 <span style="color:#ff9f43">22</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">XDG_SESSION_CLASS</span><span style="color:#ff6ac1">=</span>user
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SELINUX_ROLE_REQUESTED</span><span style="color:#ff6ac1">=</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">TERM</span><span style="color:#ff6ac1">=</span>xterm-256color
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">LESSOPEN</span><span style="color:#ff6ac1">=||</span>/usr/bin/lesspipe.sh %s
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">USER</span><span style="color:#ff6ac1">=</span>root
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SELINUX_USE_CURRENT_RANGE</span><span style="color:#ff6ac1">=</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SHLVL</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">XDG_SESSION_ID</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">XDG_RUNTIME_DIR</span><span style="color:#ff6ac1">=</span>/run/user/0
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SSH_CLIENT</span><span style="color:#ff6ac1">=</span>192.168.0.233 <span style="color:#ff9f43">56990</span> <span style="color:#ff9f43">22</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">which_declare</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">declare</span> -f
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">PATH</span><span style="color:#ff6ac1">=</span>/root/.local/bin:/root/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SELINUX_LEVEL_REQUESTED</span><span style="color:#ff6ac1">=</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">DBUS_SESSION_BUS_ADDRESS</span><span style="color:#ff6ac1">=</span>unix:path<span style="color:#ff6ac1">=</span>/run/user/0/bus
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">MAIL</span><span style="color:#ff6ac1">=</span>/var/spool/mail/root
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SSH_TTY</span><span style="color:#ff6ac1">=</span>/dev/pts/0
</span></span><span style="display:flex;"><span>BASH_FUNC_which%%<span style="color:#ff6ac1">=()</span> <span style="color:#ff6ac1">{</span>  <span style="color:#ff6ac1">(</span> alias;
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">eval</span> <span style="color:#5af78e">${</span><span style="color:#ff5c57">which_declare</span><span style="color:#5af78e">}</span> <span style="color:#ff6ac1">)</span> | /usr/bin/which --tty-only --read-alias --read-functions --show-tilde --show-dot <span style="color:#ff5c57">$@</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">_</span><span style="color:#ff6ac1">=</span>/usr/bin/env
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">OLDPWD</span><span style="color:#ff6ac1">=</span>/dev/vg200</span></span></code></pre></div>
<h3 id="printenv-command">printenv command</h3>
<ul>
<li>Displays the environment variables only.</li>
</ul>
<h3 id="set-command">set command</h3>
<ul>
<li>View both local and environment variables.</li>
</ul>
<h3 id="command-and-variable-substitutions">Command and Variable substitutions</h3>
<ul>
<li>PS1 Environment variable sets what the prompt looks like.</li>
<li>Default value is \u@\h \W\$
<ul>
<li>\u
<ul>
<li>logged-in user name</li>
</ul>
</li>
<li>\h
<ul>
<li>System hostname</li>
</ul>
</li>
<li>\W
<ul>
<li>Working directory</li>
</ul>
</li>
<li>\$
<ul>
<li>End of command prompt</li>
</ul>
</li>
</ul>
</li>
<li>Command whose output you want assigned to a variable must be encapsulated within either backticks <code>hostname</code> or parentheses $(hostname).</li>
</ul>
<h2 id="input-output-and-error-redirections">Input, Output, and Error Redirections</h2>
<ul>
<li>Input, output, and error character streams:
<ul>
<li><strong>standard input (or stdin)</strong>
<ul>
<li>Input redirection</li>
<li>&lt;</li>
</ul>
</li>
<li><strong>standard output (or stdout)</strong>
<ul>
<li>
<blockquote>
</blockquote>
</li>
<li>
<blockquote>
<blockquote>
</blockquote>
</blockquote>
<ul>
<li>Append instead of overwrite</li>
</ul>
</li>
<li>&amp;&gt;
<ul>
<li>Redirect standard error and output</li>
</ul>
</li>
</ul>
</li>
<li><strong>standard error (or stderr)</strong>
<ul>
<li>2&gt;</li>
</ul>
</li>
</ul>
</li>
<li>File descriptors:
<ul>
<li>0, 1, and 2
<ul>
<li>1
<ul>
<li>Represents standard output location</li>
</ul>
</li>
</ul>
</li>
<li>Can use these to represent character streams instead of &lt;, and &gt;</li>
</ul>
</li>
<li><strong>noclobber</strong> feature
<ul>
<li>prevent overwriting of the output file</li>
<li><code>set -o noclobber</code>
<ul>
<li>activates the feature</li>
</ul>
</li>
<li><code>set +o noclobber</code>
<ul>
<li>deactivate the feature</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim test.txt</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># set -o noclobber</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo &#34;Hello&#34; &gt; test.txt</span>
</span></span><span style="display:flex;"><span>-bash: test.txt: cannot overwrite existing file
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># set +o noclobber</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo &#34;Hello&#34; &gt; test.txt</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat test.txt</span>
</span></span><span style="display:flex;"><span>Hello</span></span></code></pre></div>
<h2 id="history-substitution">History Substitution</h2>
<ul>
<li>Command history or history expansion.</li>
<li>Can disable and re-enable if required.</li>
<li>Values may be altered for individual users by editing <em>.bashrc</em> or <em>.bash_profile</em> in the user&rsquo;s home directory.</li>
<li>Three variables
<ul>
<li><strong>HISTFILE</strong>
<ul>
<li>Defines the name and location of the history file to be used to store command history,</li>
<li>Default is .bash_history in the user‚Äôs home directory.</li>
</ul>
</li>
<li><strong>HISTSIZE</strong>
<ul>
<li>Size of the history buffer for the current shell.</li>
</ul>
</li>
<li><strong>HISTFILESIZE</strong>
<ul>
<li>Sets the maximum number of commands allowed for storage in the history file at the beginning of the current session and are written to the HISTFILE from memory at the end of the current terminal session.</li>
<li>Usually, HISTSIZE and HISTFILESIZE are set to a common value.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="history-command"><code>history</code> command</h3>
<ul>
<li>Displays or reruns previously executed commands.</li>
<li>Gets the history data from the system memory as well as from the .bash_history file.</li>
<li>Shows all entries by default.</li>
<li><code>set +o history</code>
<ul>
<li>disable history expansion</li>
</ul>
</li>
<li><code>set -o history</code>
<ul>
<li>re-enable history expansion</li>
</ul>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># set +o history</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># history | tail </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">126</span>  ls
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">127</span>  vim test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">128</span>  <span style="color:#ff5c57">set</span> -o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">129</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">130</span>  <span style="color:#ff5c57">set</span> +o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">131</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">132</span>  cat test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">133</span>  <span style="color:#ff5c57">history</span> | tail 
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">134</span>  <span style="color:#ff5c57">set</span> +0 <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">135</span>  <span style="color:#ff5c57">set</span> +o <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim test2.txt</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># history | tail </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">126</span>  ls
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">127</span>  vim test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">128</span>  <span style="color:#ff5c57">set</span> -o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">129</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">130</span>  <span style="color:#ff5c57">set</span> +o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">131</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">132</span>  cat test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">133</span>  <span style="color:#ff5c57">history</span> | tail 
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">134</span>  <span style="color:#ff5c57">set</span> +0 <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">135</span>  <span style="color:#ff5c57">set</span> +o <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># set -o history</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim test2.txt</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># history | tail </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">128</span>  <span style="color:#ff5c57">set</span> -o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">129</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">130</span>  <span style="color:#ff5c57">set</span> +o noclobber
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">131</span>  <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Hello&#34;</span> &gt; test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">132</span>  cat test.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">133</span>  <span style="color:#ff5c57">history</span> | tail 
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">134</span>  <span style="color:#ff5c57">set</span> +0 <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">135</span>  <span style="color:#ff5c57">set</span> +o <span style="color:#ff5c57">history</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">136</span>  vim test2.txt
</span></span><span style="display:flex;"><span>  <span style="color:#ff9f43">137</span>  <span style="color:#ff5c57">history</span> | tail </span></span></code></pre></div>
<p>Add timestamps to history output system wide:
<code>echo &quot;export HISTTIMEFORMAT='%F %T '&quot; &gt;&gt; /etc/profile &amp;&amp; source /etc/profile</code></p>
<h2 id="editing-at-the-command-line">Editing at the Command line</h2>
<h3 id="common-key-combinations">Common key combinations:</h3>
<ul>
<li><strong>Ctrl+a / Home</strong>
<ul>
<li>Moves the cursor to the beginning of the command line</li>
</ul>
</li>
<li><strong>Ctrl+e / End</strong>
<ul>
<li>Moves the cursor to the end of the command line</li>
</ul>
</li>
<li><strong>Ctrl+u</strong>
<ul>
<li>Erase everything at and before cursor</li>
</ul>
</li>
<li><strong>Ctrl+k</strong>
<ul>
<li>Erase Everything at cursor and after</li>
</ul>
</li>
<li><strong>Alt+f</strong>
<ul>
<li>Moves the cursor to the right one word at a time</li>
</ul>
</li>
<li><strong>Alt+b</strong>
<ul>
<li>Moves the cursor to the left one word at a time</li>
</ul>
</li>
<li><strong>Ctrl+f / Right arrow</strong>
<ul>
<li>Moves the cursor to the right one character at a time</li>
</ul>
</li>
<li><strong>Ctrl+b / Left arrow</strong>
<ul>
<li>Moves the cursor to the left one character at a time</li>
</ul>
</li>
</ul>
<h3 id="tab-completion">Tab completion</h3>
<ul>
<li>Hitting the Tab key twice automatically completes the entire name.</li>
<li>In case of multiple possibilities matching the entered characters, it completes up to the point they have in common and prints the rest of the possibilities on the screen.</li>
</ul>
<h3 id="tilde-substitution-tilde-expansion">Tilde Substitution (tilde expansion)</h3>
<ul>
<li>Performed on words that begin with the tilde character (~).
~
<ul>
<li>refers to user&rsquo;s home directory.</li>
</ul>
</li>
</ul>
<p>~+
- refers to current directory</p>
<p>~-
- Refers to previous working directory.</p>
<p>~USER
- Refers to specific user&rsquo;s home directory.</p>
<h3 id="alias-substitution-command-aliasing-or-alias">Alias Substitution (command aliasing or alias)</h3>
<ul>
<li>Define shortcuts for commands.</li>
<li>Bash shell includes several predefined aliases that are set during user login.</li>
<li>Shell gives precedent to an alias if an alias matches a command or program.
<ul>
<li>can still run the command without using the alias but preceding command with a backslash. \</li>
</ul>
</li>
</ul>
<h3 id="alias-command">alias command</h3>
<ul>
<li>Set an alias.</li>
<li>Internal shell command.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># alias</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">cp</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;cp -i&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">egrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;egrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">fgrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;fgrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">grep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;grep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> l.<span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;ls -d .* --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">ll</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;ls -l --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">ls</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;ls --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">mv</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;mv -i&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">rm</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;rm -i&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">xzegrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;xzegrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">xzfgrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;xzfgrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">xzgrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;xzgrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">zegrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;zegrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">zfgrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;zfgrep --color=auto&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">zgrep</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;zgrep --color=auto&#39;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[root@localhost ~]# alias frog=&#39;pwd&#39;
[root@localhost ~]# frog
/root</code></pre></div>
<h3 id="unalias-command">unalias command</h3>
<ul>
<li>Unset an alias.</li>
<li>Internal shell command.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># unalias frog</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># frog</span>
</span></span><span style="display:flex;"><span>-bash: frog: <span style="color:#ff5c57">command</span> not found</span></span></code></pre></div>
<h2 id="metacharacters-and-wildcard">Metacharacters and Wildcard</h2>
<ul>
<li>Metacharacters
<ul>
<li>Special characters that possess special meaning to the shell.</li>
<li>Used in pattern matching (a.k.a. filename expansion or file globbing) and regular expressions.
<strong>dollar sign ($)</strong></li>
</ul>
</li>
<li>mark the end of a line</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>caret (^)</strong></p>
<ul>
<li>mark the beginning of a line</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>period (.)</strong></p>
<ul>
<li>Match a single position</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>asterisk (*)</strong></p>
<ul>
<li>used in pattern matching</li>
<li>wildcard character</li>
<li>Matches zero to an unlimited number of characters except for the leading period (.) in a hidden filename.</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>question mark (?)</strong></p>
<ul>
<li>Used in pattern matching</li>
<li>Wildcard character</li>
<li>Matches exactly one character except for the leading period in a hidden filename.</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>pipe (|)</strong></p>
<ul>
<li>Send the output of one command as input to the next.</li>
<li>Also used to define alternations in regular expressions.</li>
<li>Can use as many times in a command as you need. (pipeline)	- Can be used as an OR operator (alternation)
<ul>
<li>this|that|other</li>
</ul>
</li>
</ul>
<p><strong>angle brackets (&lt; &gt;)</strong></p>
<ul>
<li>Redirections</li>
</ul>
<p><strong>curly brackets ({})</strong></p>
<ul>
<li>Used in regular expressions</li>
<li>Match an element a specific number of times</li>
</ul>
<p><strong>square brackets ([])</strong></p>
<ul>
<li>Used in pattern matching</li>
<li>Wildcard character</li>
<li>Match either a set of characters or a range of characters for a single character position.</li>
<li>Order in which they are listed has no importance.</li>
<li>Range of characters must be specified in a proper sequence such as [a-z] or [0-9].</li>
<li>Used in regular expressions</li>
</ul>
<p><strong>parentheses (())</strong></p>
<ul>
<li>Create a sub shell</li>
</ul>
<p><strong>plus (+)</strong></p>
<ul>
<li>Match a character one or more time</li>
</ul>
<p><strong>exclamation mark (!)</strong></p>
<ul>
<li>inverse matches</li>
</ul>
<p><strong>semicolon (;)</strong></p>
<ul>
<li>Run a second command after the ;</li>
</ul>
<h3 id="quoting-mechanisms">Quoting Mechanisms</h3>
<ul>
<li>Disable special meaning of metacharacters</li>
</ul>
<p><strong>Backslash (\)</strong></p>
<ul>
<li>Escape character</li>
<li>Cancel out a special character&rsquo;s meaning.</li>
</ul>
<p><strong>single quotation (‚Äò‚Äô)</strong></p>
<ul>
<li>Mask the meaning of all encapsulated special characters.</li>
</ul>
<p><strong>double quotation (‚Äú‚Äù)</strong></p>
<ul>
<li>Mask the meaning of all but the backslash (), dollar sign ($), and single quotes (‚Äò‚Äô).</li>
</ul>
<h3 id="regular-expressions-regexp-or-regex">Regular expressions (regexp or regex)</h3>
<ul>
<li>Text pattern or an expression that is matched against a string of characters in a file or supplied input in a search operation.</li>
<li>Pattern may include a single character, multiple random characters, a range of characters, word, phrase, or an entire sentence.</li>
<li>Any pattern containing one or more white spaces must be surrounded by quotation marks.</li>
</ul>
<h3 id="grep-command"><code>grep</code> command</h3>
<ul>
<li>Searches the contents of one or more text files or input supplied for a match.</li>
</ul>
<p>Flags
-i</p>
<ul>
<li>case insensitive search</li>
</ul>
<p>-n</p>
<ul>
<li>number the lines</li>
</ul>
<p>-v</p>
<ul>
<li>exclude these lines</li>
</ul>
<p>-w</p>
<ul>
<li>find an exact match for a word</li>
</ul>
<p>-E</p>
<ul>
<li>match one or the other</li>
</ul>
<p>-e</p>
<ul>
<li>-Use patterns for matching</li>
</ul>
<h2 id="jobs">Jobs</h2>
<ul>
<li>job
<ul>
<li>Process that is started in the background and controlled by the terminal where it is spawned.</li>
<li>Assigned a PID (process identifier) by the kernel and, additionally, a job ID by the shell.</li>
<li>Does not hold the terminal window where it is initiated.</li>
<li>Can run multiple job simultaneously.</li>
<li>Can be brought to foreground, returned to the background, suspended, or stopped.</li>
</ul>
</li>
<li>job control
<ul>
<li>management of multiple jobs within a shell environment</li>
</ul>
</li>
</ul>
<p>commands and control sequences for administering the jobs.</p>
<ul>
<li><code>jobs</code>
<ul>
<li>Shell built-in command</li>
<li>display jobs.</li>
</ul>
</li>
<li><code>bg </code>
<ul>
<li>Shell built-in command</li>
<li>Move a job to the background or restart a job in the background that was suspended with <code>Ctrl+z</code>.</li>
</ul>
</li>
<li><code>fg </code>
<ul>
<li>Shell built-in command</li>
<li>Move a job to the foreground</li>
</ul>
</li>
<li><code>Ctrl+z </code>
<ul>
<li>Suspends a foreground job and allows the terminal window to be used for other purposes</li>
</ul>
</li>
</ul>
<h3 id="jobs-command">jobs command</h3>
<p>output
plus sign (+)
- indicates the current background job
minus sign (-)
- signifies the previous job.
Stopped
- currently suspended
- can be signaled to continue their execution with bg or fg</p>
<h2 id="shell-startup-files">Shell Startup Files</h2>
<ul>
<li>Sourced by the shell following user authentication at the time of logging in and before the command prompt appears.</li>
<li>Aliases, functions, and scripts can be added to these files as well.</li>
<li>two types of startup files:
<ul>
<li><strong>system-wide</strong>
<ul>
<li>Set the general environment for all users at the time of their login to the system.</li>
<li>Located in the /etc directory</li>
<li>Maintained by the Linux admin.</li>
<li>System-wide startup files for bash shell users:
<ul>
<li><em>/etc/bashrc</em>
<ul>
<li>Defines functions and aliases, sets umask for user accounts with a non-login shell, establishes the command prompt, etc.</li>
<li>May include settings from the shell scripts located in the <em>/etc/profile.d</em> directory.</li>
</ul>
</li>
<li><em>/etc/profile</em>
<ul>
<li>Sets common environment variables such as <strong>PATH</strong>, <strong>USER</strong>, <strong>LOGNAME</strong>, <strong>MAIL</strong>, <strong>HOSTNAME</strong>, <strong>HISTSIZE</strong>, and <strong>HISTCONTROL</strong> for all users, establishes umask for user accounts with a login shell, processes the shell scripts located in the <em>/etc/profile.d</em> directory, and so on.</li>
</ul>
</li>
<li><em>/etc/profile.d</em>
<ul>
<li>Contains scripts for bash shell users that are executed by the <em>/etc/profile</em> file.</li>
<li>Files can be edited and updated.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>per-user</strong>
<ul>
<li>Override or modify system default definitions set by the system-wide startup files.</li>
<li>By default, two files, in addition to the <em>.bash_logout file</em>, are located in the skeleton directory <em>/etc/skel</em> and are copied into user home directories at the time of user creation.</li>
<li><em>.bashrc</em>
<ul>
<li>Defines functions and aliases. This file sources global definitions from the <em>/etc/bashrc</em> file.</li>
</ul>
</li>
<li><em>.bash_profile</em>
<ul>
<li>Sets environment variables and sources the <em>.bashrc</em> file to set functions and aliases.</li>
</ul>
</li>
<li><em>.gnome2/</em>
<ul>
<li>Directory that holds environment settings when GNOME desktop is started. Only available if GNOME is installed.</li>
</ul>
</li>
<li><em>.bash_logout</em>
<ul>
<li>Executed when the user leaves the shell or logs off.</li>
<li>May be customized</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Startup file order:
<ul>
<li><em>/etc/profile</em> &gt; <em>.bash_profile</em> &gt; <em>.bashrc</em> &gt; <em>/etc/bashrc</em></li>
</ul>
</li>
<li>Per user settings must be added to the appropriate file for persistence.</li>
</ul>
<h2 id="bash-labs">Bash Labs</h2>
<h3 id="lab-view-environment-variables">Lab: View environment variables</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>env
printenv</code></pre></div>
<h3 id="lab-viewing-environment-variable-values">Lab: Viewing Environment variable values</h3>
<ol>
<li>View the value for the PATH variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $PATH</code></pre></div>
<ol start="2">
<li>View the value for the HOME variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $HOME</code></pre></div>
<ol start="3">
<li>View the value for the SHELL variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $SHELL</code></pre></div>
<ol start="4">
<li>View the value for the TERM variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $TERM</code></pre></div>
<ol start="5">
<li>View the value for the PPID variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $PPID</code></pre></div>
<ol start="6">
<li>View the value for the PS1 variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $PS1</code></pre></div>
<ol start="7">
<li>View the value for the USER variable</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $USER</code></pre></div>
<h3 id="lab-setting-and-unsetting-variables">Lab: Setting and Unsetting Variables</h3>
<ol>
<li>Define a local variable called VR1:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>VR1=RHEL9</code></pre></div>
<ol start="2">
<li>View the value of VR1:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $VR1</code></pre></div>
<ol start="3">
<li>Type bash at the command prompt to enter a sub-shell and then run echo $VR1 to check whether the variable is visible in the sub-shell.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $VR1</code></pre></div>
<ol start="4">
<li>Exit out of the subshell:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>exit</code></pre></div>
<ol start="5">
<li>Turn VR1 into an environment variable:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>export VR1</code></pre></div>
<ol start="6">
<li>Type bash at the command prompt to enter a sub-shell and then run echo $VR1 to check whether the variable is visible in the sub-shell.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>echo $VR1</code></pre></div>
<ol start="7">
<li>Undefine this variable and erase it from the shell environment:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>unset VR1</code></pre></div>
<ol start="8">
<li>Define a local variable that contains a value with one or more white spaces:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>VR2=&#34;I love RHEL 9&#34;</code></pre></div>
<ol start="9">
<li>Define and make the variable an environment variable at the same time:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>export VR3=&#34;I love RHEL 9&#34;</code></pre></div>
<ol start="10">
<li>View local and environment variables:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>set</code></pre></div>
<h3 id="lab-modify-primary-command-prompt">Lab: Modify Primary Command Prompt</h3>
<ol>
<li>Change the value of the variable PS1 to reflect the desired information:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>export PS1=&#34;&lt; $LOGNAME on $HOSTNAME in \$PWD &gt; &#34; </code></pre></div>
<ol start="2">
<li>Edit the .bash_profile file for user1 and define the value exactly as it was run in Step 1.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>vim .bash_profile</code></pre></div>
<ol start="3">
<li>Test by logging off as user1 and logging back in. The new command prompt will be displayed.</li>
</ol>
<h3 id="lab-redirecting-standard-input">Lab: Redirecting Standard Input</h3>
<ol>
<li>Have the cat command read the <em>/etc/redhat-release</em> file and display its content on the standard output (terminal screen):</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cat &lt; /etc/redhat-release</code></pre></div>
<h3 id="lab-redirecting-standard-output">Lab: Redirecting Standard Output</h3>
<ol>
<li>Direct the ls command output to a file called ls.out:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ls &gt; ls.out</code></pre></div>
<ol start="2">
<li>Do the same thing but using file descriptors:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ls 1&gt; ls.out</code></pre></div>
<ol start="3">
<li>Activate the noclobber feature then try the redirect feature again:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>set -o noclobber
ls &gt; ls.out</code></pre></div>
<ol start="4">
<li>Deactivate noclobber</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">set</span> +o noclobber</span></span></code></pre></div>
<ol start="5">
<li>Direct the ls command to append the output to the ls.out file instead of overwriting it:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls &gt;&gt; ls.out
</span></span><span style="display:flex;"><span>or
</span></span><span style="display:flex;"><span>ls 1&gt;&gt; ls.out</span></span></code></pre></div>
<h3 id="lab-redirecting-standard-error">Lab: Redirecting Standard Error</h3>
<ol>
<li>Direct the find command issued as a normal user to search for all occurrences of files by the name core in the entire directory tree and sends any error messages produced to /dev/null</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>find / -name core -print 2&gt; /dev/null</span></span></code></pre></div>
<ol start="2">
<li>Redirect both standard output and error:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /usr /cdr &amp;&gt; outerr.out
</span></span><span style="display:flex;"><span>or
</span></span><span style="display:flex;"><span>ls /usr /cdr 1&gt; outerr.out 2&gt;&amp;<span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#5af78e">\#</span> means to redirect file descriptor <span style="color:#ff9f43">1</span> to file outerr.out as well as to file descriptor 2.</span></span></code></pre></div>
<ol start="3">
<li>Same as above but append to file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /usr/cdr &amp;&gt;&gt; outerr.out</span></span></code></pre></div>
<h3 id="lab-show-history-variables">Lab: Show History Variables</h3>
<ol>
<li>View HISTFILE Variable:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#ff5c57">$HISTFILE</span></span></span></code></pre></div>
<ol start="2">
<li>View HISTSIZE variable:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#ff5c57">$HISTSIZE</span></span></span></code></pre></div>
<ol start="3">
<li>View HISTFILESIZE variable:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#ff5c57">$HISTFILESIZE</span></span></span></code></pre></div>
<h3 id="lab-history-command">Lab: History command</h3>
<ol>
<li>Rune history without any options:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>history</span></span></code></pre></div>
<ol start="2">
<li>Display 10 entries:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">history</span> <span style="color:#ff9f43">10</span></span></span></code></pre></div>
<ol start="3">
<li>Run the 15th command in history:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>!15</span></span></code></pre></div>
<ol start="4">
<li>re-execute the most recent occurrence of a command that started with a particular letter or series of letters (ch for example):</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>!ch</span></span></code></pre></div>
<ol start="5">
<li>Issue the most recent command that contained ‚Äúgrep‚Äù:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>!?grep?</span></span></code></pre></div>
<ol start="6">
<li>Remove entry 24 from history:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">history</span> -d <span style="color:#ff9f43">24</span></span></span></code></pre></div>
<ol start="7">
<li>Repeat the last command executed:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>!!</span></span></code></pre></div>
<h3 id="lab-tilde-expansion">Lab: Tilde expansion</h3>
<ol>
<li>Display user&rsquo;s home directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> ~</span></span></code></pre></div>
<ol start="2">
<li>Display the current directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> ~+</span></span></code></pre></div>
<ol start="3">
<li>Display the previous working directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> ~-</span></span></code></pre></div>
<ol start="4">
<li>Display user1&rsquo;s home directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> ~user1</span></span></code></pre></div>
<ol start="5">
<li>cd into the home directory of user1 and confirm:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">cd</span> ~user1
</span></span><span style="display:flex;"><span>pwd</span></span></code></pre></div>
<ol start="6">
<li>cd into a subdirectory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">cd</span> ~/Documents/</span></span></code></pre></div>
<ol start="7">
<li>View directory information of the root user&rsquo;s desktop:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -ld ~root/Desktop</span></span></code></pre></div>
<h3 id="lab-command-aliasing">Lab: Command Aliasing</h3>
<ol>
<li>shows all aliases that are currently set for user1:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>su - user1
</span></span><span style="display:flex;"><span>alias</span></span></code></pre></div>
<ol start="2">
<li>Run alias as root:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>alias</span></span></code></pre></div>
<ol start="3">
<li>Create an alias ‚Äúsearch‚Äù to abbreviate the find command with several switches and arguments. Enclose the entire command within single quotation marks (‚Äò‚Äô) to ensure white spaces are taken care of. Do not leave any spaces before and after the equal sign (=).</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">search</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;find / -name core -exec ls -l {} \;&#39;</span></span></span></code></pre></div>
<ol start="4">
<li>Search with the new alias:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>search</span></span></code></pre></div>
<ol start="5">
<li>Create and alias by the same name as rm command but adding the -i flag:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">alias</span> <span style="color:#ff5c57">rm</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;rm -i&#39;</span></span></span></code></pre></div>
<ol start="6">
<li>Run rm without using the alias:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rm file1</span></span></code></pre></div>
<ol start="7">
<li>Remove the two aliases we just created:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">unalias</span> search rm</span></span></code></pre></div>
<h3 id="lab-wildcards-and-metacharacters">Lab: Wildcards and Metacharacters</h3>
<ol>
<li>List all files in the <em>/etc</em> directory that begin with letters ‚Äúma‚Äù and followed by any characters:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /etc/ma*</span></span></code></pre></div>
<ol start="2">
<li>List all hidden files and directories in /home/user1:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -d .*</span></span></code></pre></div>
<ol start="3">
<li>List all files in the <em>/var/log</em> directory that end in ‚Äú.log‚Äù:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /var/log/*.log</span></span></code></pre></div>
<ol start="4">
<li>List all files and directories under <em>/var/log</em> with exactly four characters in their names:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -d /var/log/????</span></span></code></pre></div>
<ol start="5">
<li>Include all files and directories that begin with either of the two characters and followed by any number of characters.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /usr/bin/<span style="color:#ff6ac1">[</span>yw<span style="color:#ff6ac1">]</span>*</span></span></code></pre></div>
<ol start="6">
<li>Match all directory names that begin with any letter between ‚Äúm‚Äù and ‚Äúo‚Äù in the <em>/etc/systemd/system</em> directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -d /etc/systemd/system/<span style="color:#ff6ac1">[</span>m-o<span style="color:#ff6ac1">]</span>*</span></span></code></pre></div>
<ol start="6">
<li>Inverse results of the previous:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -d /etc/systemd/system/<span style="color:#ff6ac1">[</span>!m-o<span style="color:#ff6ac1">]</span>*</span></span></code></pre></div>
<h3 id="lab-piping">Lab: Piping</h3>
<ol>
<li>Pipe the output to the less command in order to view the directory listing one screenful at a time:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l /etc | less</span></span></code></pre></div>
<ol start="2">
<li>Run the last command and pipe the output to nl to number each line:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>last | nl</span></span></code></pre></div>
<ol start="3">
<li>Send the output of ls to grep for the lines that do not contain the pattern ‚Äúroot‚Äù.  Piped again for a case-insensitive selection of all lines that exclude the pattern ‚Äúdec‚Äù. Number the output, and show the last four lines on the display:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l /proc | grep -v root | grep -iv dec | nl | tail -4</span></span></code></pre></div>
<h3 id="lab-quoting-mechanisms">Lab: Quoting Mechanisms</h3>
<ol>
<li>Remove a file called * without deleting everything in the directory:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rm <span style="color:#5af78e">\*</span></span></span></code></pre></div>
<ol start="2">
<li>Display $LOGNAME without expanding the LOGNAME variable:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;$LOGNAME&#39;</span></span></span></code></pre></div>
<ol start="3">
<li>Run the following with double quotes and without:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$SHELL</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;\$PWD&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;&#39;\&#39;&#34;</span></span></span></code></pre></div>
<h3 id="lab-grep-and-regex">Lab: grep and regex</h3>
<ol>
<li>Search for the pattern ‚Äúoperator‚Äù in the <em>/etc/passwd</em> file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep operator /etc/passwd</span></span></code></pre></div>
<ol start="2">
<li>Search for the space-separated pattern ‚Äúaliases and functions‚Äù in the <em>$HOME/.bashrc</em> file:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep <span style="color:#5af78e">&#39;aliases and functions&#39;</span> .bashrc</span></span></code></pre></div>
<ol start="3">
<li>Search for the pattern ‚Äúnologin‚Äù in the passwd file and exclude (-v) the lines in the output that contain this pattern. Add the -n switch to show the line numbers associated with the matched lines.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep -nv nologin /etc/passwd</span></span></code></pre></div>
<ol start="4">
<li>Find any duplicate entries for the root user in the passwd file. Prepend the caret sign (^) to the pattern ‚Äúroot‚Äù to mark the beginning of a line.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep ^root /etc/passwd</span></span></code></pre></div>
<ol start="5">
<li>Identify all users in the passwd file with bash as their primary shell.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep bash$ /etc/passwd</span></span></code></pre></div>
<ol start="6">
<li>Show the entire login.defs file but exclude all the empty lines:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep -v ^$ /etc/login.defs</span></span></code></pre></div>
<ol start="7">
<li>Perform a case-insensitive search (-i) for all the lines in the /etc/bashrc file that match the pattern ‚Äúpath.‚Äù</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep -i path /etc/bashrc</span></span></code></pre></div>
<ol start="8">
<li>Print all the lines from the <em>/etc/lvm/lvm.conf</em> file that contain an exact match for a word (-w) ‚Äúacce‚Äù followed by exactly two characters:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grep -w acce.. /etc/lvm/lvm.conf</span></span></code></pre></div>
<ol start="9">
<li>Print all the lines from the <code>ls</code> command output that include either (-E) the pattern ‚Äúcron‚Äù or ‚Äúly‚Äù.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l /etc | grep -E <span style="color:#5af78e">&#39;cron|ly&#39;</span></span></span></code></pre></div>
<ol start="10">
<li>Show all the lines from the <em>/etc/ssh/sshd_config</em> file but exclude (-v) the empty lines and commented lines. Use the -e flag multiple times instead of | for either or.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo grep -ve ^$ -ve ^# /etc/ssh/sshd_config</span></span></code></pre></div>
<ol start="11">
<li>Learn more about regex:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>man <span style="color:#ff9f43">7</span> regex</span></span></code></pre></div>
<ol start="12">
<li>Consult the grep man pages:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>man grep</span></span></code></pre></div>
<h3 id="lab-managing-jobs">Lab: Managing jobs</h3>
<ol>
<li>Issue the jobs command with the -l switch to view all the jobs running in the background:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">jobs</span> -l</span></span></code></pre></div>
<ol start="2">
<li>bring job ID 1 to the foreground and start running it:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>fg %1</code></pre></div>
<ol start="3">
<li>Suspend job 1 with ctrl+z and then let it run in the background:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>bg %1</code></pre></div>
<ol start="4">
<li>Terminate job ID 1, supply its PID (31726) to the kill command:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>kill 31726</code></pre></div>
<h3 id="lab-shell-startup-files">Lab: Shell Startup Files</h3>
<ol>
<li>View the first 10 lines of /etc/bashrc:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>head /etc/bashrc</span></span></code></pre></div>
<ol start="2">
<li>View the first 10 lines of /etc/profile:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>head /etc/profile</span></span></code></pre></div>
<ol start="3">
<li>View the directory /etc/profile.d</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l /etc/profile.d/</span></span></code></pre></div>
<ol start="4">
<li>View .bashrc</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat ~/.bashrc</span></span></code></pre></div>
<ol start="5">
<li>View .bash_profile</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat ~/.bash_profile</span></span></code></pre></div>
<h3 id="lab--customize-the-command-prompt-user1">Lab:  Customize the Command Prompt (user1)</h3>
<ol>
<li>Permanently customize the primary shell prompt to display ‚Äú&lt;user1@server1 in /etc &gt;:‚Äù when this user switches into the /etc directory. The prompt should always reflect the current directory directory path.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim ~/.bash_profile
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">export</span> <span style="color:#ff5c57">PS1</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#39;$USERNAME $PWD&#39;</span></span></span></code></pre></div>
<h3 id="lab-7-2-redirect-the-standard-input-output-and-error-user1">Lab 7-2: Redirect the Standard Input, Output, and Error (user1)</h3>
<ol>
<li>Run the <code>ls</code> command on <em>/etc</em>, <em>/dvd</em>, and <em>/var</em>. Have the output printed on the screen and the errors forwarded to file <em>/tmp/ioerror</em>.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls /etc /dvd /var 2&gt; /tmp/ioerror</span></span></code></pre></div>
<ol start="2">
<li>Check the file after the command execution and analyze the results:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat /tmp/ioerror</span></span></code></pre></div>
<h2 id="notes">Notes</h2>
<ol>
<li>It is NOT, a hard, protective outer layer usually created by an animal or organism that lives in the sea.</li>
</ol>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="shell-scripting">Shell Scripting</h1>

<h2 id="shell-scripts">Shell Scripts</h2>
<ul>
<li>
<p>A group of Linux commands along with control structures and optional comments stored in a text file.</p>
</li>
<li>
<p>Can be executed directly at the Linux command prompt.</p>
</li>
<li>
<p>Do not need to be compiled as they are interpreted by the shell line by line.</p>
</li>
<li>
<p>Managing packages and users, administering partitions and file systems, monitoring file system utilization, trimming log files, archiving and compressing files, finding and removing unnecessary files, starting and stopping database services and applications, and producing reports.</p>
</li>
<li>
<p>Run by the shell one at a time in the order in which they are listed.</p>
</li>
<li>
<p>Each line is executed as if it is typed and run at the command prompt.</p>
</li>
<li>
<p>Control structures are utilized for creating and managing conditional and looping constructs.</p>
</li>
<li>
<p>Comments are also generally included to add information about the script such as the author name, creation date, previous modification dates, purpose, and usage.</p>
</li>
<li>
<p>If the script encounters an error during execution, the error message is printed on the screen.</p>
</li>
<li>
<p>Can use the <code>nl</code> command to enumerate the lines for troubleshooting.</p>
</li>
<li>
<p>Can store your scripts in the <em>/usr/local/bin</em> directory, which is included in the PATH of all users by default.</p>
</li>
</ul>
<h3 id="script01-displaying-system-information">Script01: Displaying System Information</h3>
<ul>
<li>Create the first script called <em>sys_info.sh</em> in <em>/usr/local/bin/</em></li>
<li>Use the vim editor with sudo to write the script.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Display Basic System Information&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;==================================&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The hostname, hardware, and OS information is:&#34;</span>
</span></span><span style="display:flex;"><span>/usr/bin/hostnamectl
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The Following users are currently logged in:&#34;</span>
</span></span><span style="display:flex;"><span>/usr/bin/who</span></span></code></pre></div>
<ul>
<li>Within vim, press the ESC key and then type :set nu to view line numbers associated with each line entry.</li>
<li>Must add execute bit to run the script</li>
</ul>
<h3 id="executing-a-script">Executing a Script</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod +x /usr/local/bin/sys_info.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ll /usr/local/bin/sys_info.sh
</span></span><span style="display:flex;"><span>-rwxr-xr-x. <span style="color:#ff9f43">1</span> root root <span style="color:#ff9f43">244</span> Jul <span style="color:#ff9f43">30</span> 09:47 /usr/local/bin/sys_info.sh&gt;<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<ul>
<li>Any user on the system can now run this script using either its name or the full path.</li>
</ul>
<p>Let&rsquo;s run the script and see what the output will look like:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ sys_info.sh
</span></span><span style="display:flex;"><span>Display Basic System <span style="color:#ff5c57">Information</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">==================================</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The hostname, hardware, and OS information is:
</span></span><span style="display:flex;"><span> Static hostname: server30
</span></span><span style="display:flex;"><span>       Icon name: computer-vm
</span></span><span style="display:flex;"><span>         Chassis: vm üñ¥
</span></span><span style="display:flex;"><span>      Machine ID: eaa6174e108d4a27bd619754‚Ä¶
</span></span><span style="display:flex;"><span>         Boot ID: 13d8b3c167b24757b3678e4f‚Ä¶
</span></span><span style="display:flex;"><span>  Virtualization: oracle
</span></span><span style="display:flex;"><span>Operating System: Red Hat Enterprise Linux‚Ä¶
</span></span><span style="display:flex;"><span>     CPE OS Name: cpe:/o:redhat:enterprise‚Ä¶
</span></span><span style="display:flex;"><span>          Kernel: Linux 5.14.0-362.24.1.el‚Ä¶
</span></span><span style="display:flex;"><span>    Architecture: x86-64
</span></span><span style="display:flex;"><span> Hardware Vendor: innotek GmbH
</span></span><span style="display:flex;"><span>  Hardware Model: VirtualBox
</span></span><span style="display:flex;"><span>Firmware Version: VirtualBox
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The Following users are currently logged in:
</span></span><span style="display:flex;"><span>root     pts/0        2024-07-30 07:22 <span style="color:#ff6ac1">(</span>172.16.7.95<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<h3 id="debugging-a-script">Debugging a Script</h3>
<p>Can either append the <code>-x</code> option to the &ldquo;<code>#!/bin/bash</code>&rdquo; at the beginning of the script to look like &ldquo;<code>#!/bin/bash -x</code>&rdquo;, or execute the script as follows:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># bash -x sys_info.sh</span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;Display Basic System Information&#39;</span>
</span></span><span style="display:flex;"><span>Display Basic System Information
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#ff6ac1">==================================</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">==================================</span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;The hostname, hardware, and OS information is:&#39;</span>
</span></span><span style="display:flex;"><span>The hostname, hardware, and OS information is:
</span></span><span style="display:flex;"><span>+ /usr/bin/hostnamectl
</span></span><span style="display:flex;"><span> Static hostname: server30
</span></span><span style="display:flex;"><span>       Icon name: computer-vm
</span></span><span style="display:flex;"><span>         Chassis: vm üñ¥
</span></span><span style="display:flex;"><span>      Machine ID: eaa6174e108d4a27bd6197548ce77270
</span></span><span style="display:flex;"><span>         Boot ID: 13d8b3c167b24757b3678e4fd3fe19ee
</span></span><span style="display:flex;"><span>  Virtualization: oracle
</span></span><span style="display:flex;"><span>Operating System: Red Hat Enterprise Linux 9.3 <span style="color:#ff6ac1">(</span>Plow<span style="color:#ff6ac1">)</span>     
</span></span><span style="display:flex;"><span>     CPE OS Name: cpe:/o:redhat:enterprise_linux:9::baseos
</span></span><span style="display:flex;"><span>          Kernel: Linux 5.14.0-362.24.1.el9_3.x86_64
</span></span><span style="display:flex;"><span>    Architecture: x86-64
</span></span><span style="display:flex;"><span> Hardware Vendor: innotek GmbH
</span></span><span style="display:flex;"><span>  Hardware Model: VirtualBox
</span></span><span style="display:flex;"><span>Firmware Version: VirtualBox
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;The Following users are currently logged in:&#39;</span>
</span></span><span style="display:flex;"><span>The Following users are currently logged in:
</span></span><span style="display:flex;"><span>+ /usr/bin/who
</span></span><span style="display:flex;"><span>root     pts/0        2024-07-30 07:22 <span style="color:#ff6ac1">(</span>172.16.7.95<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<ul>
<li>Actual lines from the script prefixed by the + sign and followed by the command execution result.</li>
<li>Shows the line number of the problem line in the output if there is any.</li>
<li>This way you can identify any issues pertaining to the path, command name, use of special characters, etc., and address it quickly.</li>
</ul>
<p>Change one of the echo commands in the script to &ldquo;iecho&rdquo; and re-run the script in the debug mode to see the error:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># bash -x sys_info.sh</span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;Display Basic System Information&#39;</span>
</span></span><span style="display:flex;"><span>Display Basic System Information
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#ff6ac1">==================================</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">==================================</span>
</span></span><span style="display:flex;"><span>+ iecho
</span></span><span style="display:flex;"><span>/usr/local/bin/sys_info.sh: line 4: iecho: <span style="color:#ff5c57">command</span> not found
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;The hostname, hardware, and OS information is:&#39;</span>
</span></span><span style="display:flex;"><span>The hostname, hardware, and OS information is:
</span></span><span style="display:flex;"><span>+ /usr/bin/hostnamectl
</span></span><span style="display:flex;"><span> Static hostname: server30
</span></span><span style="display:flex;"><span>       Icon name: computer-vm
</span></span><span style="display:flex;"><span>         Chassis: vm üñ¥
</span></span><span style="display:flex;"><span>      Machine ID: eaa6174e108d4a27bd6197548ce77270
</span></span><span style="display:flex;"><span>         Boot ID: 13d8b3c167b24757b3678e4fd3fe19ee
</span></span><span style="display:flex;"><span>  Virtualization: oracle
</span></span><span style="display:flex;"><span>Operating System: Red Hat Enterprise Linux 9.3 <span style="color:#ff6ac1">(</span>Plow<span style="color:#ff6ac1">)</span>     
</span></span><span style="display:flex;"><span>     CPE OS Name: cpe:/o:redhat:enterprise_linux:9::baseos
</span></span><span style="display:flex;"><span>          Kernel: Linux 5.14.0-362.24.1.el9_3.x86_64
</span></span><span style="display:flex;"><span>    Architecture: x86-64
</span></span><span style="display:flex;"><span> Hardware Vendor: innotek GmbH
</span></span><span style="display:flex;"><span>  Hardware Model: VirtualBox
</span></span><span style="display:flex;"><span>Firmware Version: VirtualBox
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+ <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#39;The Following users are currently logged in:&#39;</span>
</span></span><span style="display:flex;"><span>The Following users are currently logged in:
</span></span><span style="display:flex;"><span>+ /usr/bin/who
</span></span><span style="display:flex;"><span>root     pts/0        2024-07-30 07:22 <span style="color:#ff6ac1">(</span>172.16.7.95<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<h3 id="script02-using-local-variables">Script02: Using Local Variables</h3>
<ul>
<li>Create a script called <em>use_var.sh</em></li>
<li>Define a local variable and display its value on the screen.</li>
<li>Re-check the value of the variable after the script execution has completed.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/use_var.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Setting a Local Variable&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;========================&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">SYSNAME</span><span style="color:#ff6ac1">=</span>server30.example.com
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The hostname of this system is </span><span style="color:#ff5c57">$SYSNAME</span><span style="color:#5af78e">&#34;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/use_var.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># use_var.sh</span>
</span></span><span style="display:flex;"><span>Setting a Local <span style="color:#ff5c57">Variable</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">========================</span>
</span></span><span style="display:flex;"><span>The hostname of this system is server30.example.com</span></span></code></pre></div>
<p>If you run the echo command to see what is stored in the SYSNAME
variable, you will get nothing:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $SYSNAME</span></span></span></code></pre></div>
<h3 id="script03-using-pre-defined-environment-variables">Script03: Using Pre-Defined Environment Variables</h3>
<p>The following script called pre_env.sh will display the values of SHELL and LOGNAME environment variables:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/pre_env.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The location of my shell command is:&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#ff5c57">$SHELL</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;I am logged in as </span><span style="color:#ff5c57">$LOGNAME</span><span style="color:#5af78e">&#34;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/pre_env.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pre_env.sh</span>
</span></span><span style="display:flex;"><span>The location of my shell <span style="color:#ff5c57">command</span> is:
</span></span><span style="display:flex;"><span>/bin/bash
</span></span><span style="display:flex;"><span>I am logged in as root</span></span></code></pre></div>
<h3 id="script04-using-command-substitution">Script04: Using Command Substitution</h3>
<ul>
<li>
<p>Can use the command substitution feature of the bash shell and store the output generated by the command into a variable.</p>
</li>
<li>
<p>Two different ways to use command substitution: Backtics or subshell</p>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff5c57">SYSNAME</span><span style="color:#ff6ac1">=</span><span style="color:#ff6ac1">$(</span>hostname<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">KERNVER</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">`</span>uname -r<span style="color:#5af78e">`</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The hostname is </span><span style="color:#ff5c57">$SYSNAME</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The kernel version is </span><span style="color:#ff5c57">$KERNVER</span><span style="color:#5af78e">&#34;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/cmd_out.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/cmd_out.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cmd_out.sh</span>
</span></span><span style="display:flex;"><span>The hostname is server30
</span></span><span style="display:flex;"><span>The kernel version is 5.14.0-362.24.1.el9_3.x86_64</span></span></code></pre></div>
<h1 id="shell-parameters">Shell Parameters</h1>
<ul>
<li>An entity that holds a value such as a name, special character, or number.</li>
<li>The parameter that holds a <strong>name</strong> is referred to as a <strong>variable</strong></li>
<li>A parameter that holds a <strong>special character</strong> is referred to as a <strong>special parameter</strong>
<ul>
<li>Represents the command or script itself ($0), count of supplied arguments ($* or $@), all arguments ($#), and PID of the process ($$)</li>
</ul>
</li>
<li>One or more digits, except for 0 is referred to as a <strong>positional parameter</strong> (a command line argument).
<ul>
<li>($1, $2, $3 . . .) is an argument supplied to a script at the time of its invocation</li>
<li>Position is determined by the shell based on its location with respect to the calling script.</li>
<li>Positional parameters beyond 9 are to be enclosed in curly brackets.</li>
</ul>
</li>
</ul>
<p><a href="#R-image-6f3ce9b82f7059fc925f5d3e57eaa776" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../images/image-G1VF6C4I%201.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6f3ce9b82f7059fc925f5d3e57eaa776"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../images/image-G1VF6C4I%201.jpg"></a></p>
<ul>
<li>Just like the variable and command substitutions, the shell uses the dollar ($) sign for special and positional parameter expansions as well.</li>
</ul>
<h3 id="script05-using-special-and-positional-parameters">Script05: Using Special and Positional Parameters</h3>
<p>Create <em>com_line_arg.sh</em> to show the supplied arguments, total count, value of the first argument, and PID of the script:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;There are </span><span style="color:#ff5c57">$#</span><span style="color:#5af78e"> arguments specified at the command line&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The arguments supplied are: </span><span style="color:#ff5c57">$*</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The first argument is: </span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The Process ID of the script is: </span><span style="color:#ff5c57">$$</span><span style="color:#5af78e">&#34;</span>                                          </span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ff9f43">0</span> arguments specified at the <span style="color:#ff5c57">command</span> line
</span></span><span style="display:flex;"><span>The arguments supplied are: 
</span></span><span style="display:flex;"><span>The first argument is: 
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ff9f43">1935</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># com_line_arg.sh the dog jumped over the frog</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ff9f43">6</span> arguments specified at the <span style="color:#ff5c57">command</span> line
</span></span><span style="display:flex;"><span>The arguments supplied are: the dog jumped over the frog
</span></span><span style="display:flex;"><span>The first argument is: the
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ff9f43">1936</span></span></span></code></pre></div>
<h3 id="script06-shifting-command-line-arguments">Script06: Shifting Command Line Arguments</h3>
<p><code>shift</code> command</p>
<ul>
<li>Used to move arguments one position to the left.</li>
<li>During this move, the value of the first argument is lost.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;There are </span><span style="color:#ff5c57">$#</span><span style="color:#5af78e"> arguments specified at the command line&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The arguments supplied are: </span><span style="color:#ff5c57">$*</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The first argument is: </span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The Process ID of the script is: </span><span style="color:#ff5c57">$$</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">shift</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The new first argument after the first shift is: </span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">shift</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;The new first argument after the second shift is: </span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ff9f43">0</span> arguments specified at the <span style="color:#ff5c57">command</span> line
</span></span><span style="display:flex;"><span>The arguments supplied are: 
</span></span><span style="display:flex;"><span>The first argument is: 
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ff9f43">1941</span>
</span></span><span style="display:flex;"><span>The new first argument after the first <span style="color:#ff5c57">shift</span> is: 
</span></span><span style="display:flex;"><span>The new first argument after the second <span style="color:#ff5c57">shift</span> is: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># com_line_arg_shift.sh the dog jumped over the frog</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ff9f43">6</span> arguments specified at the <span style="color:#ff5c57">command</span> line
</span></span><span style="display:flex;"><span>The arguments supplied are: the dog jumped over the frog
</span></span><span style="display:flex;"><span>The first argument is: the
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ff9f43">1942</span>
</span></span><span style="display:flex;"><span>The new first argument after the first <span style="color:#ff5c57">shift</span> is: dog
</span></span><span style="display:flex;"><span>The new first argument after the second <span style="color:#ff5c57">shift</span> is: jumped</span></span></code></pre></div>
<ul>
<li>Multiple shifts in a single attempt may be performed by furnishing a count of desired shifts to the shift command as an argument. For example, &ldquo;shift 2&rdquo; will carry out two shifts, &ldquo;shift 3&rdquo; will make three shifts, and so on.</li>
</ul>
<h2 id="logical-constructs">Logical Constructs</h2>
<ul>
<li>Use test conditions, which decides what to do next based on the true or false status of the condition.</li>
</ul>
<p>The shell offers two logical constructs:
<strong>if-then-fi</strong>
<strong>case</strong></p>
<p><strong>Exit Codes</strong> (exit values)</p>
<ul>
<li>Refer to the value returned by a command when it finishes execution.
<ul>
<li>Value is based on the outcome of the command.</li>
</ul>
</li>
<li>If the command runs successfully, you typically get a zero exit code(return code), otherwise you get a non-zero value.</li>
<li>Return code is stored in a special shell parameter called ? (question mark).</li>
</ul>
<p>Let&rsquo;s look at the following two examples to understand their usage:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pwd</span>
</span></span><span style="display:flex;"><span>/root
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># man</span>
</span></span><span style="display:flex;"><span>What manual page <span style="color:#ff6ac1">do</span> you want?
</span></span><span style="display:flex;"><span>For example, try <span style="color:#5af78e">&#39;man man&#39;</span>.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">1</span></span></span></code></pre></div>
<ul>
<li>Exit code was returned and stored in the ?.</li>
<li>Non-zero exit code was stored in ? with an error.</li>
<li>Can define exit codes within a script at different locations to help debug the script by knowing where exactly it terminated.</li>
</ul>
<p><strong>Test Conditions</strong></p>
<ul>
<li>Used in logical constructs to decide what to do next.</li>
<li>Can be set on integer values, string values, or files using the <code>test</code> command or by enclosing them within the square brackets [].</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>man test</span></span></code></pre></div>
<p><strong>Operation on Integer Value</strong></p>
<p><code>integer1 -eq (-ne) integer2</code></p>
<ul>
<li>Integer1 is equal (not equal) to integer2</li>
</ul>
<p><code>integer1 -lt (-gt) integer2 </code></p>
<ul>
<li>Integer1 is less (greater) than integer2</li>
</ul>
<p><code>integer1 -le (-ge) integer2</code></p>
<ul>
<li>Integer1 is less (greater) than or equal to integer2</li>
</ul>
<p><strong>Operation on String Value</strong></p>
<p><code>string1=(!=)string2</code></p>
<ul>
<li>Tests whether the two strings are identical (not identical)</li>
</ul>
<p><code>-l string or -z string</code></p>
<ul>
<li>Tests whether the string length is zero</li>
</ul>
<p><code>string or -n string</code></p>
<ul>
<li>Tests whether the string length is non-zero</li>
</ul>
<p><strong>Operation on File</strong></p>
<p><code>-b (-c) file</code></p>
<ul>
<li>Tests whether the file is a block (character) device file</li>
</ul>
<p><code>-d (-f) file</code></p>
<ul>
<li>Tests whether the file is a directory (normal file)</li>
</ul>
<p><code>-e (-s) file</code></p>
<ul>
<li>Tests whether the file exists (non-empty)</li>
</ul>
<p><code>-L file</code></p>
<ul>
<li>Tests whether the file is a symlink</li>
</ul>
<p><code>-r (-w) (-x) file</code></p>
<ul>
<li>Tests whether the file is readable (writable) (executable)</li>
</ul>
<p><code>-u (-g) (-k) file</code></p>
<ul>
<li>Tests whether the file has the setuid (setgid) (sticky) bit</li>
</ul>
<p><code>file1 -nt (-ot) file2</code></p>
<ul>
<li>Tests whether file1 is newer (older) than file2</li>
</ul>
<p><strong>Logical Operators</strong></p>
<p><code>!</code></p>
<ul>
<li>The logical NOT operator</li>
</ul>
<p><code>-a</code> or <code>&amp;&amp;</code> (two ampersand characters)</p>
<ul>
<li>The logical AND operator. Both operands must be true for the condition to be true. Syntax: <code>[ -b file1 &amp;&amp; -r file1 ]</code></li>
</ul>
<p><code>-o </code> or <code> ||</code> (two pipe characters)</p>
<ul>
<li>The logical OR operator. Either of the two or both operands must be true for the condition to be true. Syntax: <code>[ (x == 1 -o y == 2) ]</code></li>
</ul>
<h3 id="if-then-fi-construct">if-then-fi Construct</h3>
<ul>
<li>Evaluates the condition for true or false.</li>
<li>Executes the specified action if the condition is true.</li>
<li>Otherwise, it exits the construct.</li>
<li>Begins with an <code>if</code> and ends with a <code>fi</code></li>
<li>Can execute an action only if the specified condition is true. It quits the statement if the condition is untrue.</li>
</ul>
<p><a href="#R-image-87fc923c1e4b900bc818f7c1f2aad0ff" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../images/image-7FX8FVMW%201.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-87fc923c1e4b900bc818f7c1f2aad0ff"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../images/image-7FX8FVMW%201.jpg"></a></p>
<p>The general syntax of this statement is as follows:</p>
<p>if condition &gt; then &gt; action &gt; fi</p>
<h3 id="script07-the-if-then-fi-construct">Script07: The if-then-fi Construct</h3>
<p>Create <em>if_then_fi.sh</em> to determine the number of arguments and print an error message if there are none provided:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/if_then_fi.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash </span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">if</span> <span style="color:#ff6ac1">[</span> <span style="color:#ff5c57">$#</span> -ne <span style="color:#ff9f43">2</span> <span style="color:#ff6ac1">]</span> <span style="color:#78787e"># Ensure there is a space after [ and before ] </span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Error: Invalid number of arguments supplied&#34;</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Usage: </span><span style="color:#ff5c57">$0</span><span style="color:#5af78e"> source_file destination_file&#34;</span> 
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span> <span style="color:#ff9f43">2</span> 
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">fi</span> 
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Script terminated&#34;</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/if_then_fi.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_fi.sh</span>
</span></span><span style="display:flex;"><span>Error: Invalid number of arguments supplied
</span></span><span style="display:flex;"><span>Usage: /usr/local/bin/if_then_fi.sh source_file destination_file</span></span></code></pre></div>
<p>This script will display the following messages on the screen if it is
executed without exactly two arguments specified at the command line:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_fi.sh</span>
</span></span><span style="display:flex;"><span>Error: Invalid number of arguments supplied
</span></span><span style="display:flex;"><span>Usage: /usr/local/bin/if_then_fi.sh source_file destination_file</span></span></code></pre></div>
<p>Return code value reflects the exit code in the script .</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">2</span></span></span></code></pre></div>
<p>Return code will be 0 if you supply a pair of arguments:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_fi.sh a b</span>
</span></span><span style="display:flex;"><span>Script terminated
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<h3 id="if-then-else-fi-construct">if-then-else-fi Construct</h3>
<ul>
<li>Can execute an action if the condition is true and another action if the condition is false.</li>
</ul>
<p><a href="#R-image-92e89e1463ce2bc05afd412fabb20959" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../images/image-CMLV644G%201.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-92e89e1463ce2bc05afd412fabb20959"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../images/image-CMLV644G%201.jpg"></a></p>
<p>The general syntax of this statement is as follows:</p>
<p>if condition &gt; then &gt; action1 &gt; else &gt; action2 &gt; fi</p>
<h3 id="script08-the-if-then-else-fi-construct">Script08: The if-then-else-fi Construct</h3>
<p>Create a script called <em>if_then_else_fi.sh</em> that will accept an integer value as an argument and tell if the value is positive or negative:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /usr/local/bin/if_then_else_fi.sh</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>#!/bin/bash
if [ $1 -gt 0 ]
then
        echo &#34;$1 is a positive integer value&#34;
else
        echo &#34;$1 is a negative integer value&#34;
fi</code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/if_then_else_fi.sh</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_else_fi.sh</span>
</span></span><span style="display:flex;"><span>/usr/local/bin/if_then_else_fi.sh: line 2: <span style="color:#ff6ac1">[</span>: -gt: unary operator expected
</span></span><span style="display:flex;"><span> is a negative integer value
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_else_fi.sh 3</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">3</span> is a positive integer value
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_else_fi.sh -3</span>
</span></span><span style="display:flex;"><span>-3 is a negative integer value</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_else_fi.sh a</span>
</span></span><span style="display:flex;"><span>/usr/local/bin/if_then_else_fi.sh: line 2: <span style="color:#ff6ac1">[</span>: a: integer expression expected
</span></span><span style="display:flex;"><span>a is a negative integer value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<h3 id="the-if-then-elif-fi-construct">The if-then-elif-fi Construct</h3>
<ul>
<li>Can define multiple conditions and associate an action with each one of them.</li>
<li>The action corresponding to the true condition is performed.</li>
</ul>
<p><a href="#R-image-29d8dd559481c4dff86bd38d1f0bcea6" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../images/image-TNYN7SP2%201.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-29d8dd559481c4dff86bd38d1f0bcea6"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../images/image-TNYN7SP2%201.jpg"></a></p>
<p>The general syntax of this statement is as follows:</p>
<p>if  condition1 &gt; then action1 &gt; elif condition2 &gt; then action2 &gt; elif  condition3 &gt; then action3 &gt; else &gt; action(n) &gt; fi</p>
<h3 id="script09-the-if-then-elif-fi-construct-example-1">Script09: The if-then-elif-fi Construct (Example 1)</h3>
<p>Create <em>if_then_elif_fi.sh</em> script to accept an integer value as an argument and tell if the integer is positive, negative, or zero. If a non-integer value or no argument is supplied, the script will complain. Employ the exit command after each action to help you identify where it exited.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/if_then_elif_fi.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff6ac1">if</span> <span style="color:#ff6ac1">[</span> <span style="color:#ff5c57">$1</span> -gt <span style="color:#ff9f43">0</span> <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e"> is a positive integer value&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span> <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">elif</span> <span style="color:#ff6ac1">[</span> <span style="color:#ff5c57">$1</span> -eq <span style="color:#ff9f43">0</span> <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e"> is a zero integer value&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span> <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">elif</span> <span style="color:#ff6ac1">[</span> <span style="color:#ff5c57">$1</span> -lt <span style="color:#ff9f43">0</span> <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e"> is a negative integer value&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span> <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e"> is not an integer value. Please supply an i
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">nteger.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span> <span style="color:#ff9f43">4</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">fi</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_elif_fi.sh -0</span>
</span></span><span style="display:flex;"><span>-0 is a zero integer value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_elif_fi.sh -1</span>
</span></span><span style="display:flex;"><span>-1 is a negative integer value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_elif_fi.sh 10</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">10</span> is a positive integer value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># if_then_elif_fi.sh abd</span>
</span></span><span style="display:flex;"><span>/usr/local/bin/if_then_elif_fi.sh: line 2: <span style="color:#ff6ac1">[</span>: abd: integer expression expected
</span></span><span style="display:flex;"><span>/usr/local/bin/if_then_elif_fi.sh: line 6: <span style="color:#ff6ac1">[</span>: abd: integer expression expected
</span></span><span style="display:flex;"><span>/usr/local/bin/if_then_elif_fi.sh: line 10: <span style="color:#ff6ac1">[</span>: abd: integer expression expected
</span></span><span style="display:flex;"><span>abd is not an integer value. Please supply an i
</span></span><span style="display:flex;"><span>nteger.&gt;<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo $?</span>
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">4</span></span></span></code></pre></div>
<h3 id="script10-the-if-then-elif-fi-construct-example-2">Script10: The if-then-elif-fi Construct (Example 2)</h3>
<p>Create <em>ex200_ex294.sh</em> to display the name of the Red Hat exam RHCSA or RHCE in the output based on the input argument (ex200 or ex294). If a random or no argument is provided, it will print &ldquo;Usage: Acceptable values are ex200 and ex294&rdquo;. Add white spaces in the conditions.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/ex200_ex294.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff6ac1">if</span> <span style="color:#ff6ac1">[</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span> <span style="color:#ff6ac1">=</span> ex200 <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;RHCSA&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">elif</span> <span style="color:#ff6ac1">[</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$1</span><span style="color:#5af78e">&#34;</span> <span style="color:#ff6ac1">=</span> ex294 <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;RHCE&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Usage: Acceptable values are ex200 and ex294&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">fi</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/ex200_ex294.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ex200_ex294.sh ex200</span>
</span></span><span style="display:flex;"><span>RHCSA
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ex200_ex294.sh ex294</span>
</span></span><span style="display:flex;"><span>RHCE
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ex200_ex294.sh frog</span>
</span></span><span style="display:flex;"><span>Usage: Acceptable values are ex200 and ex294</span></span></code></pre></div>
<h3 id="looping-constructs">Looping Constructs</h3>
<ul>
<li>Perform certain task on a number of given elements.</li>
<li>Or repeatedly until a specified condition becomes true or false.</li>
<li>Examples:
<ul>
<li>if plenty of disks need to be initialized for use in LVM, you can either run the <code>pvcreate</code> command on each disk one at a time manually or employ a loop to do it for you.</li>
<li>Based on a condition, you may want a program to continue to run until that condition becomes true or false.</li>
</ul>
</li>
</ul>
<p>Three looping constructs:
<strong>for-do-done</strong></p>
<ul>
<li><strong>for loop</strong> is also referred to as the <strong>foreach</strong> loop.</li>
<li>iterates on a list of given values until the list is exhausted.
<strong>while-do-done</strong></li>
<li>while loop runs repeatedly until the specified condition becomes false.
<strong>until-do-done</strong></li>
<li>until loop does just the opposite of the while loop</li>
<li>Performs an operation repeatedly until the specified condition becomes true.</li>
</ul>
<h3 id="test-conditions">Test Conditions</h3>
<p><code>let</code> command</p>
<ul>
<li>Used in looping constructs to evaluate a condition at each iteration.</li>
<li>Compares the value stored in a variable against a pre-defined value</li>
<li>Each time the loop does an iteration, the variable value is altered.</li>
<li>Can enclose the condition for arithmetic evaluation within a pair of parentheses (( )) or quotation marks (&quot; &ldquo;) instead of using the let command explicitly.</li>
</ul>
<p>Operators used in test conditions</p>
<p><strong>!</strong></p>
<ul>
<li>Negation</li>
</ul>
<p><strong>+ / &ndash; / * / /</strong></p>
<ul>
<li>Addition / subtraction /multiplication / division</li>
</ul>
<p><strong>%</strong></p>
<ul>
<li>Remainder</li>
</ul>
<p><strong>&lt; / &lt;=</strong></p>
<ul>
<li>Less than / less than or equal to</li>
</ul>
<p><strong>&gt; / &gt;=</strong></p>
<ul>
<li>Greater than / greater than or equal to</li>
</ul>
<p><strong>=</strong></p>
<ul>
<li>Assignment</li>
</ul>
<p><strong>== / !=</strong></p>
<ul>
<li>Comparison for equality /non-equality</li>
</ul>
<h3 id="the-for-loop">The for Loop</h3>
<ul>
<li>Executed on an array of elements until all the elements in the array are consumed.</li>
<li>Each element is assigned to a variable one after the other for processing.</li>
</ul>
<p><a href="#R-image-e7f219a547cbd599b27037982b4cc97e" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="../../images/image-BPQ7RWER%201.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e7f219a547cbd599b27037982b4cc97e"><img class="lazy lightbox lightbox-image" loading="lazy" src="../../images/image-BPQ7RWER%201.jpg"></a></p>
<p>The general syntax of this construct is as follows:</p>
<p>for VAR in list &gt; do &gt; action &gt; done</p>
<h3 id="script11-print-alphabets-using-for-loop">Script11: Print Alphabets Using for Loop</h3>
<p>Create script <em>for_do_done.sh</em> script that initializes the variable COUNT to 0. The for loop will read each letter sequentially from the range placed within curly brackets (no spaces before the letter A and after the letter Z), assign it to another variable LETTER, and display the value on the screen. The <code>expr</code> command is an arithmetic processor, and it is used here to increment the COUNT by 1 at each loop iteration.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/for_do_done.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff5c57">COUNT</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">for</span> LETTER in <span style="color:#ff6ac1">{</span>A..Z<span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">do</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">COUNT</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">`</span>/usr/bin/expr <span style="color:#ff5c57">$COUNT</span> + 1<span style="color:#5af78e">`</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Letter </span><span style="color:#ff5c57">$COUNT</span><span style="color:#5af78e"> is [</span><span style="color:#ff5c57">$LETTER</span><span style="color:#5af78e">]&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">done</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/for_do_done.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># for_do_done.sh</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">1</span> is <span style="color:#ff6ac1">[</span>A<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">2</span> is <span style="color:#ff6ac1">[</span>B<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">3</span> is <span style="color:#ff6ac1">[</span>C<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">4</span> is <span style="color:#ff6ac1">[</span>D<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">5</span> is <span style="color:#ff6ac1">[</span>E<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">6</span> is <span style="color:#ff6ac1">[</span>F<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">7</span> is <span style="color:#ff6ac1">[</span>G<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">8</span> is <span style="color:#ff6ac1">[</span>H<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">9</span> is <span style="color:#ff6ac1">[</span>I<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">10</span> is <span style="color:#ff6ac1">[</span>J<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">11</span> is <span style="color:#ff6ac1">[</span>K<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">12</span> is <span style="color:#ff6ac1">[</span>L<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">13</span> is <span style="color:#ff6ac1">[</span>M<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">14</span> is <span style="color:#ff6ac1">[</span>N<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">15</span> is <span style="color:#ff6ac1">[</span>O<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">16</span> is <span style="color:#ff6ac1">[</span>P<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">17</span> is <span style="color:#ff6ac1">[</span>Q<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">18</span> is <span style="color:#ff6ac1">[</span>R<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">19</span> is <span style="color:#ff6ac1">[</span>S<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">20</span> is <span style="color:#ff6ac1">[</span>T<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">21</span> is <span style="color:#ff6ac1">[</span>U<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">22</span> is <span style="color:#ff6ac1">[</span>V<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">23</span> is <span style="color:#ff6ac1">[</span>W<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">24</span> is <span style="color:#ff6ac1">[</span>X<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">25</span> is <span style="color:#ff6ac1">[</span>Y<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>Letter <span style="color:#ff9f43">26</span> is <span style="color:#ff6ac1">[</span>Z<span style="color:#ff6ac1">]</span></span></span></code></pre></div>
<h3 id="script12-create-users-using-for-loop">Script12: Create Users Using for Loop</h3>
<p>Create script <em>create_user.sh</em> script to create several Linux user accounts. As each account is created, the value of the variable ? is checked. If the value is 0, a message saying the account is created successfully will be displayed, otherwise the script will terminate. In case of a successful
account creation, the <code>passwd</code> command will be invoked to assign the user the same password as their username.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/create_user.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#78787e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">for</span> USER in user<span style="color:#ff6ac1">{</span>10..12<span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">do</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Create account for user </span><span style="color:#ff5c57">$USER</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span>        /usr/sbin/useradd <span style="color:#ff5c57">$USER</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">if</span> <span style="color:#ff6ac1">[</span> <span style="color:#ff5c57">$?</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">0</span> <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#ff5c57">$USER</span> | /usr/bin/passwd --stdin <span style="color:#ff5c57">$USER</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$USER</span><span style="color:#5af78e"> is created successfully&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Failed to create account </span><span style="color:#ff5c57">$USER</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">exit</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">done</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/create_user.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># create_user.sh</span>
</span></span><span style="display:flex;"><span>Create account <span style="color:#ff6ac1">for</span> user user10
</span></span><span style="display:flex;"><span>Changing password <span style="color:#ff6ac1">for</span> user user10.
</span></span><span style="display:flex;"><span>passwd: all authentication tokens updated successfully.
</span></span><span style="display:flex;"><span>user10 is created successfully
</span></span><span style="display:flex;"><span>Create account <span style="color:#ff6ac1">for</span> user user11
</span></span><span style="display:flex;"><span>Changing password <span style="color:#ff6ac1">for</span> user user11.
</span></span><span style="display:flex;"><span>passwd: all authentication tokens updated successfully.
</span></span><span style="display:flex;"><span>user11 is created successfully
</span></span><span style="display:flex;"><span>Create account <span style="color:#ff6ac1">for</span> user user12
</span></span><span style="display:flex;"><span>Changing password <span style="color:#ff6ac1">for</span> user user12.
</span></span><span style="display:flex;"><span>passwd: all authentication tokens updated successfully.
</span></span><span style="display:flex;"><span>user12 is created successfully</span></span></code></pre></div>
<p>Script fails if ran again:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server10 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># create_user.sh</span>
</span></span><span style="display:flex;"><span>Create account <span style="color:#ff6ac1">for</span> user user10
</span></span><span style="display:flex;"><span>useradd: user <span style="color:#5af78e">&#39;user10&#39;</span> already exists
</span></span><span style="display:flex;"><span>Failed to create account user10</span></span></code></pre></div>
<h2 id="shell-scripting-diy-labs">Shell Scripting DIY Labs</h2>
<h3 id="lab-write-script-to-create-logical-volumes">Lab: Write Script to Create Logical Volumes</h3>
<ul>
<li>Present 2x1GB virtual disks to server40 in VirtualBox Manager.</li>
<li>As user1 with sudo on server40, write a single bash script to create 2x400MB partitions on each disk using parted and then bring both partitions into LVM control with the <code>pvcreate</code> command.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> vim /usr/local/bin/lvscript.sh</span></span></code></pre></div>
<ul>
<li>Create a volume group called <code>vgscript</code> and add both physical volumes to it.</li>
<li>Create three logical volumes each of size 200MB and name them lvscript1, lvscript2, and lvscript3.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">for</span> DEVICE in <span style="color:#5af78e">&#34;/dev/sd&#34;</span><span style="color:#ff6ac1">{</span>b..c<span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">do</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating partition 1 with the size of 400MB on </span><span style="color:#ff5c57">$DEVICE</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span>        parted <span style="color:#ff5c57">$DEVICE</span> mklabel msdos
</span></span><span style="display:flex;"><span>        parted <span style="color:#ff5c57">$DEVICE</span> mkpart primary <span style="color:#ff9f43">1</span> <span style="color:#ff9f43">401</span>
</span></span><span style="display:flex;"><span>        pvcreate <span style="color:#ff5c57">$DEVICE</span><span style="color:#ff6ac1">[</span>1<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating partition 2 with the size of 400MB on </span><span style="color:#ff5c57">$DEVICE</span><span style="color:#5af78e">&#34;</span>
</span></span><span style="display:flex;"><span>        parted <span style="color:#ff5c57">$DEVICE</span> mkpart primary <span style="color:#ff9f43">402</span> <span style="color:#ff9f43">802</span>
</span></span><span style="display:flex;"><span>        pvcreate <span style="color:#ff5c57">$DEVICE</span><span style="color:#ff6ac1">[</span>2<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>        vgcreate vgscript <span style="color:#ff5c57">$DEVICE</span><span style="color:#ff6ac1">[</span>1<span style="color:#ff6ac1">]</span> <span style="color:#ff5c57">$DEVICE</span><span style="color:#ff6ac1">[</span>2<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">for</span> LV in <span style="color:#5af78e">&#34;lvscript&#34;</span><span style="color:#ff6ac1">{</span>1..3<span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">do</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating logical volume </span><span style="color:#ff5c57">$LV</span><span style="color:#5af78e"> in volume group vgscript with the size of 200MB&#34;</span>
</span></span><span style="display:flex;"><span>        lvcreate vgscript -L 200MB -n <span style="color:#ff5c57">$LV</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">done</span></span></span></code></pre></div>
<h3 id="lab-write-script-to-create-file-systems">Lab: Write Script to Create File Systems</h3>
<ul>
<li>Write another bash script to create xfs, ext4, and vfat file system structures in the logical volumes, respectively.</li>
<li>Create mount points /mnt/xfs, /mnt/ext4, and /mnt/vfat, and mount the file systems.</li>
<li>Include the df command with -h in the script to list the mounted file systems.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> vim /usr/local/bin/fsscript.sh</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/fsscript.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">for</span> DEVICE in lvscript<span style="color:#ff6ac1">{</span>1..3<span style="color:#ff6ac1">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">do</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">if</span> <span style="color:#ff6ac1">[</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$DEVICE</span><span style="color:#5af78e">&#34;</span> <span style="color:#ff6ac1">=</span> lvscript1 <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating xfs filesystem on logical volume lvscript1&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>        mkfs.xfs /dev/vgscript/lvscript1
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating /mnt/xfs&#34;</span>
</span></span><span style="display:flex;"><span>        mkdir /mnt/xfs
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Mounting filesystem&#34;</span>
</span></span><span style="display:flex;"><span>        mount /dev/vgscript/lvscript1 /mnt/xfs
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">elif</span> <span style="color:#ff6ac1">[</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$DEVICE</span><span style="color:#5af78e">&#34;</span> <span style="color:#ff6ac1">=</span> lvscript2 <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">then</span>    
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating ext4 filesystem on logical volume lvscript2&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>        mkfs.ext4 /dev/vgscript/lvscript2
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating /mnt/ext4&#34;</span>
</span></span><span style="display:flex;"><span>        mkdir /mnt/ext4
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Mounting filesystem&#34;</span>
</span></span><span style="display:flex;"><span>        mount /dev/vgscript/lvscript2 /mnt/ext4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">elif</span> <span style="color:#ff6ac1">[</span> <span style="color:#5af78e">&#34;</span><span style="color:#ff5c57">$DEVICE</span><span style="color:#5af78e">&#34;</span> <span style="color:#ff6ac1">=</span> lvscript3 <span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">then</span>    
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating vfat filesystem on logical volume lvscript3&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>        mkfs.vfat /dev/vgscript/lvscript3
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Creating /mnt/vfat&#34;</span>
</span></span><span style="display:flex;"><span>        mkdir /mnt/vfat
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Mounting filesystem&#34;</span>
</span></span><span style="display:flex;"><span>        mount /dev/vgscript/lvscript3 /mnt/vfat
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;Done!&#34;</span>
</span></span><span style="display:flex;"><span>                df -h
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff5c57">echo</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">fi</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">done</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># fsscript.sh</span>
</span></span><span style="display:flex;"><span> Creating xfs filesystem on logical volume lvscript1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Filesystem should be larger than 300MB.
</span></span><span style="display:flex;"><span> Log size should be at least 64MB.
</span></span><span style="display:flex;"><span> Support <span style="color:#ff6ac1">for</span> filesystems like this one is deprecated and they will not be supported in future releases.
</span></span><span style="display:flex;"><span> meta-data<span style="color:#ff6ac1">=</span>/dev/vgscript/lvscript1 <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4,  <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">12800</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1,  <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>  <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>51200, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>1368, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks, lazy- <span style="color:#ff5c57">count</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span> Creating /mnt/xfs
</span></span><span style="display:flex;"><span> Mounting filesystem
</span></span><span style="display:flex;"><span> Creating ext4 filesystem on logical volume lvscript2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> mke2fs 1.46.5 <span style="color:#ff6ac1">(</span>30-Dec-2021<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Creating filesystem with <span style="color:#ff9f43">204800</span> 1k blocks and <span style="color:#ff9f43">51200</span> inodes
</span></span><span style="display:flex;"><span> Filesystem UUID: b16383bf-7b65-4a00-bb6d-c297733f60b3
</span></span><span style="display:flex;"><span> Superblock backups stored on blocks: 
</span></span><span style="display:flex;"><span>	8193, 24577, 40961, 57345, <span style="color:#ff9f43">73729</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Allocating group tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span> Writing inode tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span> Creating journal <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4096</span> blocks<span style="color:#ff6ac1">)</span>: <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span> Writing superblocks and filesystem accounting information: <span style="color:#ff6ac1">done</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Creating /mnt/ext4
</span></span><span style="display:flex;"><span> Mounting filesystem
</span></span><span style="display:flex;"><span> Creating vfat filesystem on logical volume lvscript3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> mkfs.fat 4.2 <span style="color:#ff6ac1">(</span>2021-01-31<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span> Creating /mnt/vfat
</span></span><span style="display:flex;"><span> Mounting filesystem
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Done!</span></span></code></pre></div>
<h3 id="lab-21-3-write-script-to-configure-new-network-connection-profile">Lab 21-3: Write Script to Configure New Network Connection Profile</h3>
<ul>
<li>Present a new network interface to server40 in VirtualBox Manager.</li>
<li>As user1 with sudo on server40, write a single bash script to run the nmcli command to configure custom IP assignments (choose your own settings) on the new network device.</li>
<li>Make a copy of the /etc/hosts file as part of this script.</li>
<li>Choose a hostname of your choice and add a mapping to the /etc/hosts file without overwriting existing file content.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /usr/local/bin/network.sh</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#78787e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span> cp /etc/hosts /etc/hosts.bak <span style="color:#ff6ac1">&amp;&amp;</span>
</span></span><span style="display:flex;"><span> nmcli c a <span style="color:#ff5c57">type</span> Ethernet con-name enp0s9 ifname enp0s9 ip4  10.32.32.2/24 gw4 10.32.32.1
</span></span><span style="display:flex;"><span> <span style="color:#ff5c57">echo</span> <span style="color:#5af78e">&#34;10.32.33.14 frog.example.com frog&#34;</span> &gt;&gt; /etc/hosts</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod +x /usr/local/bin/network.sh</span>
</span></span><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># network.sh</span>
</span></span><span style="display:flex;"><span> Connection <span style="color:#5af78e">&#39;enp0s9&#39;</span> <span style="color:#ff6ac1">(</span>5a342243-e77b-452e-88e2-8838d3ecea6d<span style="color:#ff6ac1">)</span>  successfully added.</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /etc/hosts</span>
</span></span><span style="display:flex;"><span> 127.0.0.1   localhost localhost.localdomain localhost4  localhost4.localdomain4
</span></span><span style="display:flex;"><span> ::1         localhost localhost.localdomain localhost6  localhost6.localdomain6
</span></span><span style="display:flex;"><span> 10.32.33.14 frog.example.com frog</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ip a</span>
</span></span><span style="display:flex;"><span> enp0s9: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style="color:#ff9f43">1500</span> qdisc fq_codel  state UP group default qlen <span style="color:#ff9f43">1000</span>
</span></span><span style="display:flex;"><span>    link/ether 08:00:27:1d:f4:c1 brd ff:ff:ff:ff:ff:ff
</span></span><span style="display:flex;"><span>    inet 10.32.32.2/24 brd 10.32.32.255 scope global noprefixroute enp0s9
</span></span><span style="display:flex;"><span>       valid_lft forever preferred_lft forever
</span></span><span style="display:flex;"><span>    inet6 fe80::2c5d:31cc:1d79:6b43/64 scope link noprefixroute 
</span></span><span style="display:flex;"><span>       valid_lft forever preferred_lft forever</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># nmcli d s</span>
</span></span><span style="display:flex;"><span> DEVICE  TYPE      STATE                   CONNECTION 
</span></span><span style="display:flex;"><span> enp0s3  ethernet  connected               enp0s3     
</span></span><span style="display:flex;"><span> enp0s8  ethernet  connected               enp0s8     
</span></span><span style="display:flex;"><span> enp0s9  ethernet  connected               enp0s9     
</span></span><span style="display:flex;"><span> lo      loopback  connected <span style="color:#ff6ac1">(</span>externally<span style="color:#ff6ac1">)</span>  lo  </span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
          </section>
        </div>
      </main>
    </div>
    <script>
      window.MathJax = Object.assign( window.MathJax || {}, {
        tex: {
          inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
          displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        },
        options: {
          enableMenu: false 
        }
      }, JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/js-yaml/js-yaml.min.js?1763752405" defer></script>
    <script src="/js/d3/d3-color.min.js?1763752405" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1763752405" defer></script>
    <script src="/js/d3/d3-drag.min.js?1763752405" defer></script>
    <script src="/js/d3/d3-ease.min.js?1763752405" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1763752405" defer></script>
    <script src="/js/d3/d3-selection.min.js?1763752405" defer></script>
    <script src="/js/d3/d3-timer.min.js?1763752405" defer></script>
    <script src="/js/d3/d3-transition.min.js?1763752405" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1763752405" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.relearn.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/clipboard/clipboard.min.js?1763752405" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1763752405" defer></script>
    <script src="/js/theme.min.js?1763752405" defer></script>
  </body>
</html>
