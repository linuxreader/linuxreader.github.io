<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title></title>
    <link>http://linuxreader.com/ansible/storage/proxmox-storage-role/</link>
    <description>storage-dir1.yaml&#xA;--- - block: - name: Detect secondary disk name ignore_errors: yes set_fact: disk2name: vda when: ansible_facts[&#39;devices&#39;][&#39;vda&#39;] is defined - name: Search for second disk, continue only if it is found assert: that: - disk2name is defined fail_msg: second hard disk not found - name: Debug detected disk debug: msg: &#34;{{ disk2name }} was found. Moving forward.&#34; - name: Create LVM and partitions block: - name: Create LVM Partition on second disk parted: name: &#34;{{ storage_dir1 | regex_replace(&#39;^/&#39;, &#39;&#39;) | regex_replace(&#39;/&#39;, &#39;_&#39;) }}&#34; label: gpt device: /dev/{{ disk2name }} number: 1 state: present flags: [ lvm ] - name: Create an LVM volume group lvg: vg: vg{{ storage_dir1 | regex_replace(&#39;^/&#39;, &#39;&#39;) | regex_replace(&#39;/&#39;, &#39;_&#39;) }} pvs: /dev/{{ disk2name }}1 - name: Create lv lvol: lv: lv{{ storage_dir1 | regex_replace(&#39;^/&#39;, &#39;&#39;) | regex_replace(&#39;/&#39;, &#39;_&#39;) }} size: 100%FREE vg: vg{{ storage_dir1 | regex_replace(&#39;^/&#39;, &#39;&#39;) | regex_replace(&#39;/&#39;, &#39;_&#39;) }} - name: create filesystem filesystem: dev: /dev/vg{{ storage_dir1 | regex_replace(&#39;^/&#39;, &#39;&#39;) | regex_replace(&#39;/&#39;, &#39;_&#39;) }}/lv{{ storage_dir1 | regex_replace(&#39;^/&#39;, &#39;&#39;) | regex_replace(&#39;/&#39;, &#39;_&#39;) }} fstype: xfs when: ansible_facts[&#39;devices&#39;][&#39;vda&#39;][&#39;partitions&#39;] is not defined - name: Create data directory file: dest: &#34;{{ storage_dir1 }}&#34; mode: 777 state: directory - name: Mount the filesystem mount: src: /dev/vg{{ storage_dir1 | regex_replace(&#39;^/&#39;, &#39;&#39;) | regex_replace(&#39;/&#39;, &#39;_&#39;) }}/lv{{ storage_dir1 | regex_replace(&#39;^/&#39;, &#39;&#39;) | regex_replace(&#39;/&#39;, &#39;_&#39;) }} fstype: xfs state: present path: &#34;{{ storage_dir1 }}&#34; - name: Reset permissions on mounted filesystem file: path: &#34;{{ storage_dir1 }}&#34; state: directory mode: &#39;0777&#39; when: storage_dir1 is defined Variables:</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <atom:link href="http://linuxreader.com/ansible/storage/proxmox-storage-role/index.xml" rel="self" type="application/rss+xml" />
  </channel>
</rss>