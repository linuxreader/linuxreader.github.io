<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.152.2">
    <meta name="generator" content="Relearn 8.0.0+9803d5122ebb3276acea823f476e9eb44f607862">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="Chapter 7 - Inventories Earlier in the book, a basic inventory file example was given (see Chapter 1â€™s basic inventory file example). For the simplest of purposes, an inventory file at the default location (/etc/ansible/hosts) will suffice to describe to Ansible how to reach the servers you want to manage.
Later, a slightly more involved inventory file was introduced (see Chapter 3â€™s inventory file for multiple servers), which allowed us to tell Ansible about multiple servers, and even group them into role-related groups, so we could run certain playbooks against certain groups.">
    <meta name="author" content="David Thomas">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="Chapter 7 - Inventories Earlier in the book, a basic inventory file example was given (see Chapter 1â€™s basic inventory file example). For the simplest of purposes, an inventory file at the default location (/etc/ansible/hosts) will suffice to describe to Ansible how to reach the servers you want to manage.
Later, a slightly more involved inventory file was introduced (see Chapter 3â€™s inventory file for multiple servers), which allowed us to tell Ansible about multiple servers, and even group them into role-related groups, so we could run certain playbooks against certain groups.">
    <meta property="og:url" content="http://linuxreader.com/ansible/ansible4devops/chapter-7---inventories/">
    <meta property="og:site_name" content="Linux Reader">
    <meta property="og:description" content="Chapter 7 - Inventories Earlier in the book, a basic inventory file example was given (see Chapter 1â€™s basic inventory file example). For the simplest of purposes, an inventory file at the default location (/etc/ansible/hosts) will suffice to describe to Ansible how to reach the servers you want to manage.
Later, a slightly more involved inventory file was introduced (see Chapter 3â€™s inventory file for multiple servers), which allowed us to tell Ansible about multiple servers, and even group them into role-related groups, so we could run certain playbooks against certain groups.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Ansible">
    <meta itemprop="description" content="Chapter 7 - Inventories Earlier in the book, a basic inventory file example was given (see Chapter 1â€™s basic inventory file example). For the simplest of purposes, an inventory file at the default location (/etc/ansible/hosts) will suffice to describe to Ansible how to reach the servers you want to manage.
Later, a slightly more involved inventory file was introduced (see Chapter 3â€™s inventory file for multiple servers), which allowed us to tell Ansible about multiple servers, and even group them into role-related groups, so we could run certain playbooks against certain groups.">
    <meta itemprop="wordCount" content="4416">
    <title></title>
    <link href="/ansible/ansible4devops/chapter-7---inventories/index.xml" rel="alternate" type="application/rss+xml" title="">
    <link href="/ansible/ansible4devops/chapter-7---inventories/index.print.html" rel="alternate" type="text/html" title="">
    <link href="/images/favicon.svg?1762442645" rel="icon" type="image/svg+xml">
    <link href="/css/auto-complete/auto-complete.min.css?1762442645" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1762442645" defer></script>
    <script src="/js/search-lunr.min.js?1762442645" defer></script>
    <script src="/js/search.min.js?1762442645" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1762442645";
    </script>
    <script src="/js/lunr/lunr.min.js?1762442645" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1762442645" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1762442645" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1762442645" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1762442645" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1762442645" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1762442645" rel="stylesheet">
    <link href="/css/theme.min.css?1762442645" rel="stylesheet">
    <link href="/css/format-html.min.css?1762442645" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/ansible\/ansible4devops\/chapter-7---inventories\/';
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='http:\/\/linuxreader.com';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'oled' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script><style>
:root {
    --MENU-WIDTH-S: 14.375rem;
    --MENU-WIDTH-M: 14.375rem;
    --MENU-WIDTH-L: 18.75rem;
    --MAIN-WIDTH-MAX: 80rem;
    font-size: 1.2rem;
}
</style>

  </head>
  <body class="mobile-support html" data-url="/ansible/ansible4devops/chapter-7---inventories/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/ansible/ad-hoc-commands-and-scripting/" title="Ad Hoc Commands and Scripting (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#chapter-7---inventories">Chapter 7 - Inventories</a>
      <ul>
        <li><a href="#chap09.xhtml_leanpub-auto-a-real-world-web-application-server-inventory">A real-world web application server inventory</a></li>
        <li><a href="#chap09.xhtml_leanpub-auto-inventory-variables">Inventory variables</a></li>
        <li><a href="#chap09.xhtml_leanpub-auto-ephemeral-infrastructure-dynamic-inventory">Ephemeral infrastructure: Dynamic inventory</a></li>
        <li><a href="#chap09.xhtml_leanpub-auto-summary-6">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/ansible/ansible4devops/chapter-7---inventories/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/ansible/troubleshooting/ansible-documentation/" title="Ansible Documentation (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>







          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable ansible" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id=""></h1>

<h2 id="chapter-7---inventories">Chapter 7 - Inventories</h2>
<p>Earlier in the book, a basic inventory file example was given (see
Chapter 1&rsquo;s <a href="/ansible/ansible4devops/chapter-7---inventories/#chap03.xhtml_basic-inventory">basic inventory file
example</a>). For the simplest of purposes,
an inventory file at the default location (<code>/etc/ansible/hosts</code>) will
suffice to describe to Ansible how to reach the servers you want to
manage.</p>
<p>Later, a slightly more involved inventory file was introduced (see
Chapter 3&rsquo;s <a href="/ansible/ansible4devops/chapter-7---inventories/#chap05.xhtml_multiple-server-inventory">inventory file for multiple
servers</a>), which allowed us to
tell Ansible about multiple servers, and even group them into
role-related groups, so we could run certain playbooks against certain
groups.</p>
<p>Let&rsquo;s jump back to a basic inventory file example and build from there:</p>
<!-- raw HTML omitted -->
<p>If you want to run an ansible playbook on all the <code>myapp</code> servers in
this inventory (so far, just one, <code>www.myapp.com</code>), you can set up the
playbook like so:</p>
<!-- raw HTML omitted -->
<p>tasks:
[&hellip;]<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p>If you want to run an ad-hoc command against all the <code>myapp</code> servers in
the inventory, you can run a command like so:</p>
<!-- raw HTML omitted -->
<h3 id="chap09.xhtml_leanpub-auto-a-real-world-web-application-server-inventory">A real-world web application server inventory</h3>
<p>The example above might be adequate for single-server services and tiny
apps or websites, but most real-world applications require many more
servers, and usually separate servers per application concern (database,
caching, application, queuing, etc.). Let&rsquo;s take a look at a real-world
inventory file for a small web application that monitors server uptime,
<a href="https://servercheck.in/" rel="external" target="_blank">Server Check.in</a>.</p>
<!-- raw HTML omitted -->
<p>This inventory may look a little overwhelming at first, but if you break
it apart into simple groupings (web app servers, database servers,
logging server, and node.js app servers), it describes a straightforward
architecture.</p>
<!-- raw HTML omitted -->
<p>Lines 1-29 describe a few groups of servers (some with only one server),
so playbooks and <code>ansible</code> commands can refer to the group by name.
Lines 6-7 and 27-29 set variables that will apply only to the servers in
the group (e.g. variables below <code>[servercheck-nodejs:vars]</code> will only
apply to the servers in the <code>servercheck-nodejs</code> group).</p>
<p>Lines 31-39 describe groups of groups (using <code>groupname:children</code> to
describe &lsquo;child&rsquo; groups) that allow for some helpful abstractions.</p>
<p>Describing infrastructure in such a way affords a lot of flexibility
when using Ansible. Consider the task of patching a vulnerability on all
your CentOS servers; instead of having to log into each of the servers,
or even having to run an <code>ansible</code> command against all the groups, using
the above structure allows you to easily run an ansible command or
playbook against all <code>centos</code> servers.</p>
<p>As an example, when the
<a href="https://en.wikipedia.org/wiki/Shellshock_(software_bug)" rel="external" target="_blank">Shellshock</a>
vulnerability was disclosed in 2014, patched bash packages were released
for all the major distributions within hours. To update all the Server
Check.in servers, all that was needed was:</p>
<!-- raw HTML omitted -->
<p>You could even go further and create a small playbook that would patch
the vulnerability, then run tests to make sure the vulnerability was no
longer present, as illustrated in <a href="https://raymii.org/s/articles/Patch_CVE-2014-6271_Shellshock_with_Ansible.html" rel="external" target="_blank">this
playbook</a>.
This would also allow you to run the playbook in check mode or run it
through a continuous integration system to verify the fix works in a
non-prod environment.</p>
<p>This infrastructure inventory is also nice in that you could create a
top-level playbook that runs certain roles or tasks against all your
infrastructure, others against all servers of a certain Linux flavor,
and another against all servers in your entire infrastructure.</p>
<p>Consider, for example, this example master playbook to completely
configure all the servers:</p>
<!-- raw HTML omitted -->
<p>There are a number of different ways you can structure your
infrastructure-management playbooks and roles, and we&rsquo;ll explore some in
later chapters, but for a simple infrastructure, something like this is
adequate and maintainable.</p>
<h4 id="chap09.xhtml_leanpub-auto-non-prod-environments-separate-inventory-files">Non-prod environments, separate inventory files</h4>
<p>Using the above playbook and the globally-configured Ansible inventory
file is great for your production infrastructure, but what happens when
you want to configure a separate but similar infrastructure for, say a
development or user certification environment?</p>
<p>In this case, it&rsquo;s easiest to use individual inventory files, rather
than the central Ansible inventory file. For typical team-managed
infrastructure, I would recommend including an inventory file for each
environment in the same version-controlled repository as your Ansible
playbooks, perhaps within an &lsquo;inventories&rsquo; directory.</p>
<p>For example, I could take the entire contents of <code>/etc/ansible/hosts</code>
above, and stash that inside an inventory file named <code>inventory-prod</code>,
then duplicate it, changing server names where appropriate (e.g. the
<code>[servercheck-web]</code> group would only have <code>www-dev1.servercheck.in</code> for
the development environment), and naming the files for the environments:</p>
<!-- raw HTML omitted -->
<p>Now, when running <code>playbook.yml</code> to configure the development
infrastructure, I would pass in the path to the dev inventory (assuming
my current working directory is <code>servercheck/</code>):</p>
<!-- raw HTML omitted -->
<p>Using inventory variables (which will be explored further), and
well-constructed roles and/or tasks that use the variables effectively,
you could architect your entire infrastructure, with
environment-specific configurations, by changing some things in your
inventory files.</p>
<h3 id="chap09.xhtml_leanpub-auto-inventory-variables">Inventory variables</h3>
<p>Chapter 5 introduced basic methods of managing variables for individual
hosts or groups of hosts through your inventory in the <a href="/ansible/ansible4devops/chapter-7---inventories/#chap07.xhtml_inventory-variables">inventory
variables</a> section, but it&rsquo;s worth
exploring the different ways of defining and overriding variables
through inventory here.</p>
<p>For extremely simple use cases&mdash;usually when you need to define one or
two connection-related variables (like <code>ansible_ssh_user</code> or
<code>ansible_ssh_port</code>)&mdash;you can place variables directly inside an
inventory file.</p>
<p>Assuming we have a standalone inventory file for a basic web
application, here are some examples of variable definition inside the
file:</p>
<!-- raw HTML omitted -->
<p>It&rsquo;s usually better to avoid throwing too many variables inside static
inventory files, because not only are these variables typically less
visible, they are also mixed in with your architecture definition.
Especially for host-specific vars (which appear on one long line per
host), this is an unmaintainable, low-visibility approach to host and
group-specific variables.</p>
<p>Fortunately, Ansible provides a more flexible way of declaring host and
group variables.</p>
<h4 id="chap09.xhtml_leanpub-auto-hostvars"><code>host_vars</code></h4>
<p>For <a href="https://hostedapachesolr.com/" rel="external" target="_blank">Hosted Apache Solr</a>, different
servers in a <code>solr</code> group have different memory requirements. The
simplest way to tell Ansible to override a default variable in our
Ansible playbook (in this case, the <code>tomcat_xmx</code> variable) is to use a
<code>host_vars</code> directory (which can be placed either in the same location
as your inventory file, or in a playbook&rsquo;s root directory), and place a
YAML file named after the host which needs the overridden variable.</p>
<p>As an illustration of the use of <code>host_vars</code>, we&rsquo;ll assume we have the
following directory layout:</p>
<!-- raw HTML omitted -->
<p>The <code>inventory/hosts</code> file contains a simple definition of all the
servers by group:</p>
<!-- raw HTML omitted -->
<p>Ansible will search for a file at either
<code>hostedapachesolr/host_vars/nyc1.hostedapachesolr.com</code> or
<code>hostedapachesolr/inventory/host_vars/nyc1.hostedapachesolr.com</code>, and if
there are any variables defined in the file (in YAML format), those
variables will override all other playbook and role variables and
gathered facts, <em>only for the single host</em>.</p>
<p>The <code>nyc1.hostedapachesolr.com</code> host_vars file looks like:</p>
<!-- raw HTML omitted -->
<p>The default for <code>tomcat_xmx</code> may normally be <code>640m</code>, but when Ansible
runs a playbook against nyc1.hostedapachesolr.com, the value of
<code>tomcat_xmx</code> will be <code>1024m</code> instead.</p>
<p>Overriding host variables with <code>host_vars</code> is much more maintainable
than doing so directly in static inventory files, and also provides
greater visibility into what hosts are getting what overrides.</p>
<h4 id="chap09.xhtml_leanpub-auto-groupvars"><code>group_vars</code></h4>
<p>Much like <code>host_vars</code>, Ansible will automatically load any files named
after inventory groups in a <code>group_vars</code> directory placed inside the
playbook or inventory file&rsquo;s location.</p>
<p>Using the same example as above, we&rsquo;ll override one particular variable
for an entire group of servers. First, we add a <code>group_vars</code> directory
with a file named after the group needing the overridden variable:</p>
<!-- raw HTML omitted -->
<p>Then, inside <code>group_vars/solr</code>, use YAML to define a list of variables
that will be applied to servers in the <code>solr</code> group:</p>
<!-- raw HTML omitted -->
<p>Typically, if your playbook is only being run on one group of hosts,
it&rsquo;s easier to define the variables in the playbook via an included vars
file. However, in many cases you will be running a playbook or applying
a set of roles to multiple inventory groups. In these situations, you
may need to use <code>group_vars</code> to override specific variables for one or
more groups of servers.</p>
<h3 id="chap09.xhtml_leanpub-auto-ephemeral-infrastructure-dynamic-inventory">Ephemeral infrastructure: Dynamic inventory</h3>
<p>In many circumstances, static inventories are adequate for describing
your infrastructure. When working on small applications, low-traffic web
applications, and individual workstations, it&rsquo;s simple enough to manage
an inventory file by hand.</p>
<p>However, in the age of cloud computing and highly scalable application
architecture, it&rsquo;s often necessary to add dozens or hundreds of servers
to an infrastructure in a short period of time&mdash;or to add and remove
servers continuously, to scale as traffic grows and subsides. In this
circumstance, it would be tedious (if not impossible) to manage a single
inventory file by hand, especially if you&rsquo;re using auto-scaling
infrastructure new instances are provisioned and need to be configured
in minutes or seconds.</p>
<p>Even in the case of container-based infrastructure, new instances need
to be configured correctly, with the proper port mappings, application
settings, and filesystem configuration.</p>
<p>For these situations, Ansible allows you to define inventory
<em>dynamically</em>. If you&rsquo;re using one of the larger cloud-based hosting
providers, chances are there is already a dynamic inventory script
(which Ansible uses to build an inventory) for you to use. Ansible core
already includes scripts for Amazon Web Services, Cobbler, DigitalOcean,
Linode, OpenStack, and other large providers, and later we&rsquo;ll explore
creating our own dynamic inventory script (if you aren&rsquo;t using one of
the major hosting providers or cloud management platforms).</p>
<h4 id="chap09.xhtml_leanpub-auto-dynamic-inventory-with-digitalocean">Dynamic inventory with DigitalOcean</h4>
<p>Digital Ocean is one of the world&rsquo;s top five hosting companies, and has
grown rapidly since it&rsquo;s founding in 2011. One of the reasons for the
extremely rapid growth is the ease of provisioning new &lsquo;droplets&rsquo; (cloud
VPS servers), and the value provided; as of this writing, you could get
a fairly speedy VPS with 512MB of RAM and a generous portion of fast SSD
storage for $5 USD per month.</p>
<p>Digital Ocean&rsquo;s API and simple developer-friendly philosophy has made it
easy for Ansible to interact with Digital Ocean droplets; you can
create, manage, and delete droplets with Ansible, as well as use
droplets with your playbooks using dynamic inventory.</p>
<h5 id="chap09.xhtml_leanpub-auto-digitalocean-account-prerequisites">DigitalOcean account prerequisites</h5>
<p>Before you can follow the rest of the examples in this section, you will
need:</p>
<ol>
<li>A DigitalOcean account (sign up at <a href="https://www.digitalocean.com" rel="external" target="_blank">www.digitalocean.com</a>).</li>
<li><code>dopy</code>, a Python wrapper for Digital Ocean API interaction (you can
install it with pip: <code>sudo pip install dopy</code>).</li>
<li>Your DigitalOcean account API key and client ID (Ansible currently
supports the v1 API, so you need to go to the &lsquo;Apps &amp; API&rsquo; page in
your profile, then click the &lsquo;API v1.0 Page&rsquo; link to get a key and
client ID).</li>
<li>An SSH key pair, which will be used to connect to your DigitalOcean
servers. Follow <a href="https://www.digitalocean.com/community/tutorials/how-to-use-ssh-keys-with-digitalocean-droplets" rel="external" target="_blank">this
guide</a>
to create a key pair and add the public key to your DigitalOcean
account.</li>
</ol>
<p>Once you have these four things set up and ready to go, you should be
able to communicate with your DigitalOcean account through Ansible.</p>
<h5 id="chap09.xhtml_leanpub-auto-connecting-to-your-digitalocean-account">Connecting to your DigitalOcean account</h5>
<p>There are a few different ways you can specify your DigitalOcean client
ID and API key (including command line arguments <code>--client-id</code> and
<code>--api-key</code>, as values inside a <code>digital_ocean.ini</code> file, or as
environment variables). For our example, we&rsquo;ll use environment variables
(since these are easy to configure, and work both with Ansible&rsquo;s
<code>digital_ocean</code> module and the dynamic inventory script). Open up a
terminal session, and enter the following commands:</p>
<!-- raw HTML omitted -->
<p>Before we can use a dynamic inventory script to discover our
DigitalOcean droplets, let&rsquo;s use Ansible to quickly provision a new
droplet.</p>
<!-- raw HTML omitted -->
<p>Creating cloud instances (&lsquo;Droplets&rsquo;, in DigitalOcean parlance) will
incur minimal charges for the time you use them (currently less than
$0.01/hour for the size in this example). For the purposes of this
tutorial (and in general, for any testing), make sure you shut down and
destroy your instances when you&rsquo;re finished using them, or you will be
charged through the next billing cycle! Even so, using low-priced
instances (like a $5/month DigitalOcean droplet with hourly billing)
means that, even in the worst case, you won&rsquo;t have to pay much. If you
create and destroy an instance in a few hours, you&rsquo;ll be charged a few
pennies.</p>
<!-- raw HTML omitted -->
<h5 id="chap09.xhtml_leanpub-auto-creating-a-droplet-with-ansible">Creating a droplet with Ansible</h5>
<p>Create a new playbook named <code>provision.yml</code>, with the following
contents:</p>
<!-- raw HTML omitted -->
<p>The <code>digital_ocean</code> module lets you create, manage, and delete droplets
with ease. You can read the documentation for all the options, but the
above is an overview of the main options. <code>name</code> sets the hostname for
the droplet, <code>state</code> can also be set to <code>deleted</code> if you want the
droplet to be destroyed, and other options tell DigitalOcean where to
set up the droplet, and with what OS and configuration.</p>
<!-- raw HTML omitted -->
<p>You can use DigitalOcean&rsquo;s API, along with your client_id and api_key,
to get the IDs for <code>size_id</code> (the size of the Droplet), <code>image_id</code> (the
system or distro image to use), <code>region_id</code> (the data center in which
your droplet will be created), and <code>ssh_key_ids</code> (a comma separate list
of SSH keys to be included in the root account&rsquo;s <code>authorized_keys</code>
file).</p>
<p>As an example, to get all the available images, use
<code>curl &quot;https://api.digitalocean.com/images/?client_id=CLIENT_ID&amp;api_key=API_KEY&amp;filter=global&quot; | python -m json.tool</code>,
substituting your own <code>CLIENT_ID</code> and <code>API_KEY</code>, and you&rsquo;ll receive a
JSON listing of all available values. Browse the <a href="https://developers.digitalocean.com/" rel="external" target="_blank">DigitalOcean
API</a> for information on how to
query SSH key information, size information, etc.</p>
<!-- raw HTML omitted -->
<p>We used <code>register</code> as part of the <code>digital_ocean</code> task so we could
immediately start using and configuring the new host if needed. Running
the above playbook returns the following output (using <code>debug: var=do</code>
in an additional task to dump the contents of our registered variable,
<code>do</code>):</p>
<!-- raw HTML omitted -->
<p>PLAY [localhost] ***********************************************************</p>
<p>TASK: [Create new Droplet.] ************************************************
changed: [localhost]</p>
<p>TASK: [debug var=do] *******************************************************
ok: [localhost] =&gt; {
&quot;do&quot;: {
&quot;changed&quot;: true,
&quot;droplet&quot;: {
&quot;backups&quot;: [],
&quot;backups_active&quot;: false,
&quot;created_at&quot;: &quot;2014-10-22T02:09:20Z&quot;,
&quot;event_id&quot;: 34915980,
&quot;id&quot;: 2940194,
&quot;image_id&quot;: 6918990,
&quot;ip_address&quot;: &quot;162.243.20.29&quot;,
&quot;locked&quot;: false,
&quot;name&quot;: &quot;ansible-test&quot;,
&quot;private_ip_address&quot;: null,
&quot;region_id&quot;: 4,
&quot;size_id&quot;: 66,
&quot;snapshots&quot;: [],
&quot;status&quot;: &quot;active&quot;
},
&quot;invocation&quot;: {
&quot;module_args&quot;: &quot;&quot;,
&quot;module_name&quot;: &quot;digital_ocean&quot;
}
}
}</p>
<p>PLAY RECAP *****************************************************************
localhost                  : ok=2    changed=1    unreachable=0    failed=0<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p>Since <code>do</code> contains the new droplet&rsquo;s IP address (alongside other
relevant information), you can place your freshly-created droplet in an
existing inventory group using Ansible&rsquo;s <code>add_host</code> module. Adding to
the playbook we started above, you could set up your playbook to
provision an instance and immediately configure it (after waiting for
port 22 to become available) with something like:</p>
<!-- raw HTML omitted -->
<p>At this point, if you run the playbook
(<code>$ ansible-playbook provision.yml</code>), it should create a new droplet (if
it has not already been created), then add that droplet to the <code>do</code>
inventory group, and finally, run a new play on all the <code>do</code> hosts
(including the new droplet). Here are the results:</p>
<!-- raw HTML omitted -->
<p>PLAY [localhost] ***********************************************************</p>
<p>TASK: [Create new Droplet.] ************************************************
changed: [localhost]</p>
<p>TASK: [Add new host to our inventory.] *************************************
ok: [localhost]</p>
<p>PLAY [do] ******************************************************************</p>
<p>TASK: [Install tcpdump.] ***************************************************
changed: [162.243.20.29]</p>
<p>PLAY RECAP *****************************************************************
162.243.20.29              : ok=2    changed=1    unreachable=0    failed=0
localhost                  : ok=2    changed=1    unreachable=0    failed=0<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p>If you run the same playbook again, it should report no changes&mdash;the
entire playbook is idempotent! You might be starting to see just how
powerful it is to have a tool as flexible as Ansible at your disposal;
not only can you configure servers, you can create them (singly, or
dozens at a time), and configure them at once. And even if a ham-fisted
sysadmin jumps in and deletes an entire server, you can run the playbook
again, and rest assured your server will be recreated and reconfigured
exactly as it was when it was first set up.</p>
<!-- raw HTML omitted -->
<p>Note that you might need to disable strict host key checking to get
provisioning and instant configuration to work correctly, otherwise you
may run into an error stating that Ansible can&rsquo;t connect to the new
droplet during the second play. To do this, add the line
<code>host_key_checking=False</code> under the <code>[defaults]</code> section in your
<code>ansible.cfg</code> file (located in <code>/etc/ansible</code> by default).</p>
<p>You should normally leave <code>host_key_checking</code> enabled, but when rapidly
building and destroying VMs for testing purposes, it is simplest to
disable it temporarily.</p>
<!-- raw HTML omitted -->
<h5 id="chap09.xhtml_leanpub-auto-digitalocean-dynamic-inventory-with-digitaloceanpy">DigitalOcean dynamic inventory with <code>digital_ocean.py</code></h5>
<p>Once you have some DigitalOcean droplets, you need a way for Ansible to
dynamically build an inventory of your servers so you can build
playbooks and use the servers in logical groupings (or run playbooks and
<code>ansible</code> commands directly on all droplets).</p>
<p>There are a few steps to getting DigitalOcean&rsquo;s official dynamic
inventory script working:</p>
<ol>
<li>Install <code>dopy</code> via pip (the DigitalOcean Python library):
<code>$ pip install dopy</code>.</li>
<li>Download the <a href="https://raw.githubusercontent.com/ansible/ansible/devel/plugins/inventory/digital_ocean.py" rel="external" target="_blank">DigitalOcean dynamic inventory
script</a>
from Ansible on GitHub:
<code>$ curl -O https://raw.githubusercontent.com/ansible/ansible/devel/plugins/inventory/digital_ocean.py</code>.</li>
<li>Make the inventory script executable: <code>$ chmod +x digital_ocean.py</code>.</li>
<li>Make sure you have the credentials configured in <code>digital_ocean.ini</code>
(as explained earlier in this chapter). Alternatively, you can set
<code>DO_CLIENT_ID</code> and <code>DO_API_KEY</code> in your environment, or pass the
command line options <code>--client-id</code> and <code>--api-key</code>.</li>
<li>Make sure the script is working by running the script directly:
<code>$ ./digital_ocean.py --pretty</code>. After a second or two, you should
see all your droplets (likely just the one you created earlier)
listed by IP address and dynamic group as JSON.</li>
<li>Ping all your DigitalOcean droplets:
<code>$ ansible all -m ping -i digital_ocean.py -u root</code>.</li>
</ol>
<p>Now that you have all your hosts being loaded through the dynamic
inventory script, you can use <code>add_hosts</code> to build groups of the
Droplets for use in your playbooks. Alternatively, if you want to fork
the <code>digital_ocean.py</code> inventory script, you can modify it to suit your
needs; exclude certain servers, build groups based on certain criteria,
etc.</p>
<!-- raw HTML omitted -->
<p>Ansible currently supports DigitalOcean&rsquo;s v1 API, which makes working
with DigitalOcean slightly more difficult. The v2 API allows you to use
region names (e.g. &ldquo;nyc2&rdquo;) instead of numeric IDs, allows you to <a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-droplet-metadata" rel="external" target="_blank">add
metadata to your
droplets</a>,
and much more. Ansible should soon support the v2 API. If you&rsquo;re
interested in the current status of this effort, or would like to help
in migrating to the v2 API, visit <a href="https://github.com/ansible/ansible-modules-core/issues/209" rel="external" target="_blank">the v2 API support issue on
GitHub</a>.</p>
<!-- raw HTML omitted -->
<h4 id="chap09.xhtml_leanpub-auto-dynamic-inventory-with-aws">Dynamic inventory with AWS</h4>
<p>Many of this book&rsquo;s readers are familiar with Amazon Web Services
(especially EC2, S3, ElastiCache, and Route53), and likely have managed
or currently manage an infrastructure within Amazon&rsquo;s cloud. Ansible has
very strong support for managing AWS-based infrastructure, and includes
a <a href="https://raw.githubusercontent.com/ansible/ansible/devel/plugins/inventory/ec2.py" rel="external" target="_blank">dynamic inventory
script</a>
to help you run playbooks on your hosts in a variety of ways.</p>
<p>There are a few excellent guides to using Ansible with AWS, for example:</p>
<ul>
<li><a href="http://docs.ansible.com/guide_aws.html" rel="external" target="_blank">Ansible - Amazon Web Services
Guide</a></li>
<li><a href="https://leanpub.com/ansible-for-aws" rel="external" target="_blank">Ansible for AWS</a></li>
</ul>
<p>I won&rsquo;t be covering dynamic inventory in this chapter, but will mention
that the <code>ec2.py</code> dynamic inventory script, along with Ansible&rsquo;s
extensive support for AWS infrastructure through <code>ec2_*</code> modules, makes
Ansible the best and most simple tool for managing a broad AWS
infrastructure.</p>
<p>In the next chapter, one of the examples will include a guide for
provisioning infrastructure on AWS, along with a quick overview of
dynamic inventory on AWS.</p>
<h4 id="chap09.xhtml_leanpub-auto-inventory-on-the-fly-addhost-and-groupby">Inventory on-the-fly: <code>add_host</code> and <code>group_by</code></h4>
<p>Sometimes, especially when provisioning new servers, you will need to
modify the in-memory inventory during the course of a playbook run.
Ansible offers the <code>add_host</code> and <code>group_by</code> modules to help you manage
inventory for these scenarios.</p>
<p>In the DigitalOcean example above, <code>add_host</code> was used to add the new
droplet to the <code>do</code> group:</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>hosts: do
remote_user: root</p>
<p>tasks:
[&hellip;]<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
</li>
</ul>
<!-- raw HTML omitted -->
<p>You could add multiple groups with add_host, and you can also add other
variables for the host inline with <code>add_host</code>. As an example, let&rsquo;s say
you created a VM using an image that exposes SSH on port 2288 and
requires an application-specific memory limit specific to this VM:</p>
<!-- raw HTML omitted -->
<p>The custom port will be used when Ansible connects to this host, and the
<code>myapp_memory_maximum</code> will be passed into the playbooks just as any
other inventory variable.</p>
<p>The <code>group_by</code> module is even simpler, and allows you to create dynamic
groups during the course of a playbook run. Usage is extremely simple:</p>
<!-- raw HTML omitted -->
<pre><code>- debug: var=groups&lt;/code&gt;&lt;/pre&gt;
</code></pre>
<!-- raw HTML omitted -->
<p>After running the above playbook, you&rsquo;d see all your normal inventory
groups, plus groups for <code>architecture-x86_64</code>, <code>i386</code>, etc. (depending
on what kind of server architectures you use).</p>
<h4 id="chap09.xhtml_leanpub-auto-multiple-inventory-sources---mixing-static-and-dynamic-inventories">Multiple inventory sources - mixing static and dynamic inventories</h4>
<p>If you need to combine static and dynamic inventory, or even if you wish
to use multiple dynamic inventories (for example, if you are managing
servers hosted by two different cloud providers), you can pass a
directory to <code>ansible</code> or <code>ansible-playbook</code>, and Ansible will combine
the output of all the inventories (both static and dynamic) inside the
directory:</p>
<!-- raw HTML omitted -->
<p>One caveat: Ansible ignores <code>.ini</code> and backup files in the directory,
but will attempt to parse every text file and execute every executable
file in the directory&mdash;don&rsquo;t leave random files in mixed inventory
folders!</p>
<h4 id="chap09.xhtml_leanpub-auto-creating-custom-dynamic-inventories">Creating custom dynamic inventories</h4>
<p>Most infrastructure can be managed with a custom inventory file or an
off-the-shelf cloud inventory script, but there are many situations
where more control is needed. Ansible will accept any kind of executable
file as an inventory file, so you can build your own dynamic inventory
however you like, as long as you can pass it to Ansible as JSON.</p>
<p>You could create an executable binary, a script, or anything else that
can be run and will output JSON to stdout, and Ansible will call it with
the argument <code>--list</code> when you run, as an example,
<code>ansible all -i my-inventory-script -m ping</code>.</p>
<p>Let&rsquo;s start working our own custom dynamic inventory script by outlining
the basic JSON format Ansible expects:</p>
<!-- raw HTML omitted -->
<p>Ansible expects a dictionary of groups (with each group having a list of
<code>hosts</code>, and group variables in the group&rsquo;s <code>vars</code> dictionary), and a
<code>_meta</code> dictionary that stores host variables for all hosts individually
inside a <code>hostvars</code> dictionary.</p>
<!-- raw HTML omitted -->
<p>When you return a <code>_meta</code> dictionary in your inventory script, Ansible
stores that data in its cache and doesn&rsquo;t call your inventory script <em>N</em>
times for all the hosts in the inventory. You can leave out the <code>_meta</code>
variables if you&rsquo;d rather structure your inventory file to return host
variables one host at a time (Ansible will call your script with the
arguments <code>--host [hostname]</code> for each host), but it&rsquo;s often faster and
easier to simply return all variables in the first call. In this book,
all the examples will use the <code>_meta</code> dictionary.</p>
<!-- raw HTML omitted -->
<p>The dynamic inventory script can do anything to get the data (call an
external API, pull information from a database or file, etc.), and
Ansible will use it as an inventory source, so long as it returns a JSON
structure like the one above when the script is called with the
<code>--list</code>.</p>
<h5 id="chap09.xhtml_leanpub-auto-building-a-custom-dynamic-inventory-in-python">Building a Custom Dynamic Inventory in Python</h5>
<p>To create a test dynamic inventory script for demonstration purposes,
let&rsquo;s set up a quick set of two VMs using Vagrant. Create the following
<code>Vagrantfile</code> in a new directory:</p>
<!-- raw HTML omitted -->
<p>Run <code>vagrant up</code> to boot two VMs running Ubuntu 14.04, with the IP
addresses <code>192.168.28.71</code>, and <code>192.168.28.72</code>. A simple inventory file
could be used to control the VMs with Ansible:</p>
<!-- raw HTML omitted -->
<p>However, let&rsquo;s assume the VMs were provisioned by another system, and
you need to get the information through a dynamic inventory script.
Here&rsquo;s a simple implementation of a dynamic inventory script in Python:</p>
<!-- raw HTML omitted -->
<p>Save the above as <code>inventory.py</code> in the same folder as the <code>Vagrantfile</code>
you created earlier (make sure you booted the two VMs with
<code>vagrant up</code>), and make the file executable <code>chmod +x inventory.py</code>.</p>
<p>Run the inventory script manually to verify it returns the proper JSON
response when run with <code>--list</code>:</p>
<!-- raw HTML omitted -->
<p>Test Ansible&rsquo;s ability to use the inventory script to contact the two
VMs:</p>
<!-- raw HTML omitted -->
<p>192.168.28.72 | success &gt;&gt; {
&quot;changed&quot;: false,
&quot;ping&quot;: &quot;pong&quot;
}<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p>Since Ansible can connect, verify the configured host variables (<code>foo</code>
and <code>bar</code>) are set correctly on their respective hosts:</p>
<!-- raw HTML omitted -->
<p>192.168.28.72 | success &gt;&gt; {
&quot;var&quot;: {
&quot;host_specific_var&quot;: &quot;bar&quot;
}
}<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p>The only alteration for real-world usage you&rsquo;d need to make to the above
<code>inventory.py</code> script would be changing the <code>example_inventory()</code> method
to something that incorporates the business logic you would need for
your own inventory, whether it would be calling an external API with all
the server data or pulling in the information from a database or other
data store.</p>
<h5 id="chap09.xhtml_leanpub-auto-building-a-custom-dynamic-inventory-in-php">Building a Custom Dynamic Inventory in PHP</h5>
<p>You can build an inventory script in whatever language you&rsquo;d like. For
example, the Python script from above can be ported to functional PHP as
follows:</p>
<!-- raw HTML omitted -->
<p>If you were to save the code above into the file <code>inventory.php</code>, mark
it executable (<code>chmod +x inventory.php</code>), and run the same Ansible
command as earlier (referencing <code>inventory.php</code> instead of
<code>inventory.py</code>), the command should succeed, just as with the previous
Python example.</p>
<!-- raw HTML omitted -->
<p>All the files mentioned in these dynamic inventory examples are
available in the <a href="https://github.com/geerlingguy/ansible-for-devops" rel="external" target="_blank">Ansible for DevOps GitHub
repository</a>, in the
<code>dynamic-inventory</code> folder.</p>
<!-- raw HTML omitted -->
<h5 id="chap09.xhtml_leanpub-auto-managing-a-paas-with-a-custom-dynamic-inventory">Managing a PaaS with a Custom Dynamic Inventory</h5>
<p><a href="https://hostedapachesolr.com/" rel="external" target="_blank">Hosted Apache Solr</a>&rsquo;s infrastructure is
built using a custom dynamic inventory to allow for centrally-controlled
server provisioning and configuration. Here&rsquo;s how the server
provisioning process works on Hosted Apache Solr:</p>
<ol>
<li>A Drupal website holds a &lsquo;Server&rsquo; content type that stores metadata
about each server (e.g. chosen hostname, data center location,
choice of OS image, and memory settings).</li>
<li>When a new server is added, a remote Jenkins job is triggered,
which: 1. Builds a new cloud server on DigitalOcean using an Ansible
playbook. 2. Runs a provisioning playbook on the server to
initialize the configuration. 3. Adds a new DNS entry for the
server. 4. Posts additional server metadata (like the IP address)
back to the Drupal website via a private API.</li>
<li>When a server is updated, or there is new configuration to be
deployed to the server(s), a different Jenkins job is triggered,
which: 1. Runs the same provisioning playbook on all the
DigitalOcean servers. This playbook uses an inventory script which
calls back to an inventory API endpoint that returns all the server
information as JSON (the inventory script on the Jenkins server
passes the JSON through to stdout). 2. Reports back success or
failure of the ansible playbook to the REST API.</li>
</ol>
<p>The above process transformed the management of the entire Hosted Apache
Solr platform. Instead of taking twenty to thirty minutes to build a new
server (even when using an Ansible playbook with a few manual steps),
the process can be completed in just a few minutes, with no manual
intervention.</p>
<!-- raw HTML omitted -->
<p>The security of your server inventory and infrastructure management
should be a top priority; Hosted Apache Solr uses HTTPS everywhere, and
has a hardened private API for inventory access and server metadata. If
you have any automated processes that run over a network, you should
take extra care to audit these processes and all the involved systems
thoroughly!</p>
<!-- raw HTML omitted -->
<h3 id="chap09.xhtml_leanpub-auto-summary-6">Summary</h3>
<p>From the most basic infrastructure consisting of one server to a
multi-tenant, dynamic infrastructure with thousands of them, Ansible
offers many options for describing your servers and overriding playbook
and role variables for specific hosts or groups. With Ansible&rsquo;s flexible
inventory system, you should be able to describe all your servers,
however they&rsquo;re managed and wherever they&rsquo;re hosted.</p>
<!-- raw HTML omitted -->
<p>[]{#chap10.xhtml}</p>
<p>::: {}</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<a href="https://linuxreader.com">
  <img src="/images/linuxreader.svg" alt="Linux Reader" >
</a>

        </div>
        <search><form action="/search/" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="parent " data-nav-id="/ansible/"><a class="padding" href="/ansible/"><i class="fa-fw fas fa-file-lines"></i> Ansible</a><ul id="R-subsections-e5b911977d99c31c82b120cc3d2f2606" class="collapsible-menu">
            <li class="" data-nav-id="/ansible/ad-hoc-commands-and-scripting/"><a class="padding" href="/ansible/ad-hoc-commands-and-scripting/"><i class="fa-fw fas fa-file-lines"></i> Ad Hoc Commands and Scripting</a></li>
            <li class="active hidden " data-nav-id="/ansible/ansible4devops/chapter-7---inventories/"><a class="padding" href="/ansible/ansible4devops/chapter-7---inventories/"></a></li>
            <li class="" data-nav-id="/ansible/troubleshooting/ansible-documentation/"><a class="padding" href="/ansible/troubleshooting/ansible-documentation/">Ansible Documentation</a></li>
            <li class="" data-nav-id="/ansible/inventory/ansible-inventory/"><a class="padding" href="/ansible/inventory/ansible-inventory/">Ansible Inventory and Ansible.cfg</a></li>
            <li class="" data-nav-id="/ansible/playbooks/ansible-playbooks/"><a class="padding" href="/ansible/playbooks/ansible-playbooks/">Ansible Playbooks</a></li>
            <li class="" data-nav-id="/ansible/roles/using-ansible-roles/"><a class="padding" href="/ansible/roles/using-ansible-roles/">Ansible Roles</a></li>
            <li class="" data-nav-id="/ansible/deploying-systems/building-an-ansible-lab-with-ansible/"><a class="padding" href="/ansible/deploying-systems/building-an-ansible-lab-with-ansible/">Building an Ansible lab with Ansible</a></li>
            <li class="" data-nav-id="/ansible/modules/common-modules-with-examples/"><a class="padding" href="/ansible/modules/common-modules-with-examples/">Common modules with examples</a></li>
            <li class="" data-nav-id="/ansible/deploying-files/deploying-files/"><a class="padding" href="/ansible/deploying-files/deploying-files/">Deploying files</a></li>
            <li class="" data-nav-id="/ansible/networking/networking-with-ansible/"><a class="padding" href="/ansible/networking/networking-with-ansible/">Networking with Ansible</a></li>
            <li class="" data-nav-id="/ansible/control-node/setting-up-an-ansible-lab/"><a class="padding" href="/ansible/control-node/setting-up-an-ansible-lab/">Setting up an Ansible Lab</a></li>
            <li class="" data-nav-id="/ansible/variables-and-facts/variables/"><a class="padding" href="/ansible/variables-and-facts/variables/">Variables</a></li></ul></li>
            <li class="" data-nav-id="/bash-scripting/"><a class="padding" href="/bash-scripting/"><i class="fa-fw fas fa-code"></i> Bash Scripting</a><ul id="R-subsections-fc95944d927ad1a52feaf7ff2addc71b" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/containers/"><a class="padding" href="/containers/"><i class="fa-fw fas fa-box-open"></i> Containers</a><ul id="R-subsections-98e55644e7defe4a283b28e510b18cf5" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/desktop/"><a class="padding" href="/desktop/"><i class="fa-fw fas fa-computer"></i> Desktop</a><ul id="R-subsections-e1fc414efb00462ad25041a21e45e696" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/keyboard/"><a class="padding" href="/keyboard/"><i class="fa-fw fas fa-keyboard"></i> Keyboard</a><ul id="R-subsections-9c70f15c7e0cd80e425ec652ecbd7e70" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/networking/"><a class="padding" href="/networking/"><i class="fa-fw fas fa-network-wired"></i> Networking</a><ul id="R-subsections-d7c3359b808d40df139a3bb9f9073483" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/redhat/"><a class="padding" href="/redhat/"><i class="fa-brands fab fa-redhat"></i> RedHat</a><ul id="R-subsections-22ddd467d467af44ac41abd22ed6268b" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/tools/"><a class="padding" href="/tools/">Tools</a><ul id="R-subsections-bf1399820dde3dd110e03ace4147ff86" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/bash/"><a class="padding" href="/bash/">Bashes</a><ul id="R-subsections-4b42c24c987a75657a389c72aa61a56d" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/boot/"><a class="padding" href="/boot/">Boots</a><ul id="R-subsections-a53bfb333437907a8d5bdc636d15c75d" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/cyber-security/"><a class="padding" href="/cyber-security/">Cyber Securities</a><ul id="R-subsections-f95cf8cea1c115dd046e46a833f33dfa" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/files/"><a class="padding" href="/files/">Files</a><ul id="R-subsections-31e56884d732922d4a0e407592968056" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/packages/"><a class="padding" href="/packages/">Packages</a><ul id="R-subsections-bdf1e8ce92aa8ff6883c617f10480430" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/storage/"><a class="padding" href="/storage/">Storages</a><ul id="R-subsections-28a53f7a259bc0e6bfd5bf73591250a9" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/system/"><a class="padding" href="/system/">Systems</a><ul id="R-subsections-0ea554b019cc5a3e6337c45b68b3a647" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/users-and-groups/"><a class="padding" href="/users-and-groups/">Users and Groups</a><ul id="R-subsections-ea23e0c86f0adbd857ee01a4f4dd70e4" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/virtualization/"><a class="padding" href="/virtualization/">Virtualizations</a><ul id="R-subsections-da8ee4406de37987b502b79e5b0a9d1c" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <div class="nav-title padding">More</div>
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/about/"><a class="padding" href="/about/"><i class='fas fa-solid fa-circle-info'></i> About</a></li>
            <li class="" data-nav-id="/now/"><a class="padding" href="/now/"><i class='fas fa-fw fa-play'></i> Now</a></li>
            <li class="" data-nav-id="/contact/"><a class="padding" href="/contact/"><i class='fas fa-fw fa-envelope'></i> Contact</a></li>
            <li class="" data-nav-id="/booknotes/"><a class="padding" href="/booknotes/"><i class='fas fa-fw fa-file'></i> Book Notes</a></li>
            <li class="" data-nav-id="https://github.com/linuxreader"><a class="padding" href="https://github.com/linuxreader" rel="external" target="_blank"><i class='fab fa-fw fa-github'></i> GitHub</a></li>
            <li class="" data-nav-id="https://linkedin.com/in/linuxreader/"><a class="padding" href="https://linkedin.com/in/linuxreader/" rel="external" target="_blank"><i class='fab fa-fw fa-linkedin'></i> LinkedIn</a></li>
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script>
      window.MathJax = Object.assign( window.MathJax || {}, {
        tex: {
          inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
          displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        },
        options: {
          enableMenu: false 
        }
      }, JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/js-yaml/js-yaml.min.js?1762442645" defer></script>
    <script src="/js/d3/d3-color.min.js?1762442645" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1762442645" defer></script>
    <script src="/js/d3/d3-drag.min.js?1762442645" defer></script>
    <script src="/js/d3/d3-ease.min.js?1762442645" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1762442645" defer></script>
    <script src="/js/d3/d3-selection.min.js?1762442645" defer></script>
    <script src="/js/d3/d3-timer.min.js?1762442645" defer></script>
    <script src="/js/d3/d3-transition.min.js?1762442645" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1762442645" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.relearn.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/clipboard/clipboard.min.js?1762442645" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1762442645" defer></script>
    <script src="/js/theme.min.js?1762442645" defer></script>
  </body>
</html>
