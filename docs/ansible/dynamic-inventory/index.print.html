<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.152.2">
    <meta name="generator" content="Relearn 8.2.0+d150cc8909ed7836ff5d545e76544f6923ffacf5">
    <meta name="description" content="Using Dynamic Ansible Inventories">
    <meta name="author" content="David Thomas">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Dynamic Inventory :: Linux Reader">
    <meta name="twitter:description" content="Using Dynamic Ansible Inventories">
    <meta property="og:url" content="http://linuxreader.com/ansible/dynamic-inventory/">
    <meta property="og:site_name" content="Linux Reader">
    <meta property="og:title" content="Dynamic Inventory :: Linux Reader">
    <meta property="og:description" content="Using Dynamic Ansible Inventories">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Ansible">
    <meta itemprop="name" content="Dynamic Inventory :: Linux Reader">
    <meta itemprop="description" content="Using Dynamic Ansible Inventories">
    <meta itemprop="wordCount" content="700">
    <title>Dynamic Inventory :: Linux Reader</title>
    <link href="http://linuxreader.com/ansible/dynamic-inventory/" rel="canonical" type="text/html" title="Dynamic Inventory :: Linux Reader">
    <link href="/ansible/dynamic-inventory/index.xml" rel="alternate" type="application/rss+xml" title="Dynamic Inventory :: Linux Reader">
    <link href="/images/favicon.svg?1764111909" rel="icon" type="image/svg+xml">
    <link href="/css/auto-complete/auto-complete.min.css?1764111909" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1764111909" defer></script>
    <script src="/js/search-lunr.min.js?1764111909" defer></script>
    <script src="/js/search.min.js?1764111909" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1764111909";
    </script>
    <script src="/js/lunr/lunr.min.js?1764111909" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1764111909" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1764111909" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1764111909" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1764111909" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1764111909" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1764111909" rel="stylesheet">
    <link href="/css/theme.min.css?1764111909" rel="stylesheet">
    <link href="/css/format-print.min.css?1764111909" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/ansible\/dynamic-inventory\/';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='http:\/\/linuxreader.com';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'oled' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script><style>
:root {
    --MENU-WIDTH-S: 14.375rem;
    --MENU-WIDTH-M: 14.375rem;
    --MENU-WIDTH-L: 18.75rem;
    --MAIN-WIDTH-MAX: 80rem;
    font-size: 1.2rem;
}
</style>

  </head>
  <body class="mobile-support print" data-url="/ansible/dynamic-inventory/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/ansible/discovering-storage-related-facts/" title="Discovering storage related facts (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#dynamic-inventory-scripts">Dynamic inventory scripts</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            Dynamic Inventory
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/ansible/dynamic-inventory/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/ansible/encrypted-passwords/" title="Encrypted passwords (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>







          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable ansible" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="dynamic-inventory">Dynamic Inventory</h1>

<h3 id="dynamic-inventory-scripts">Dynamic inventory scripts</h3>
<p>A script is used to detect inventory hosts so that you do not have to manually enter them. This is good for larger environments. You can find community provided dynamic inventory scripts that come with an .ini file that provides information on how to connect to a resource.</p>
<p>Inventory scripts must include &ndash;list and &ndash;host options and output must be JSON formatted. Here is an example from <a href="https://github.com/sandervanvugt/rhce8-book/blob/master/listing33.py" rel="external" target="_blank">sandervanvught</a> that generates an inventory script using /etc/hosts:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>[ansible<span style="color:#ff9f43">@control</span> base]<span style="color:#ff5c57">$</span> cat inventory<span style="color:#ff6ac1">-</span>helper<span style="color:#ff6ac1">.</span>py
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#!/usr/bin/python</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">from</span> subprocess <span style="color:#ff6ac1">import</span> Popen,PIPE
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> sys
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">try</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#ff6ac1">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">except</span> ImportError:
</span></span><span style="display:flex;"><span>     <span style="color:#ff6ac1">import</span> simplejson <span style="color:#ff6ac1">as</span> json
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>result <span style="color:#ff6ac1">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>result[<span style="color:#5af78e">&#39;all&#39;</span>] <span style="color:#ff6ac1">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pipe <span style="color:#ff6ac1">=</span> Popen([<span style="color:#5af78e">&#39;getent&#39;</span>, <span style="color:#5af78e">&#39;hosts&#39;</span>], stdout<span style="color:#ff6ac1">=</span>PIPE, universal_newlines<span style="color:#ff6ac1">=</span><span style="color:#ff6ac1">True</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>result[<span style="color:#5af78e">&#39;all&#39;</span>][<span style="color:#5af78e">&#39;hosts&#39;</span>] <span style="color:#ff6ac1">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">for</span> line <span style="color:#ff6ac1">in</span> pipe<span style="color:#ff6ac1">.</span>stdout<span style="color:#ff6ac1">.</span>readlines():
</span></span><span style="display:flex;"><span>    s <span style="color:#ff6ac1">=</span> line<span style="color:#ff6ac1">.</span>split()
</span></span><span style="display:flex;"><span>    result[<span style="color:#5af78e">&#39;all&#39;</span>][<span style="color:#5af78e">&#39;hosts&#39;</span>]<span style="color:#ff6ac1">=</span>result[<span style="color:#5af78e">&#39;all&#39;</span>][<span style="color:#5af78e">&#39;hosts&#39;</span>]<span style="color:#ff6ac1">+</span>s
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>result[<span style="color:#5af78e">&#39;all&#39;</span>][<span style="color:#5af78e">&#39;vars&#39;</span>] <span style="color:#ff6ac1">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">if</span> <span style="color:#ff5c57">len</span>(sys<span style="color:#ff6ac1">.</span>argv) <span style="color:#ff6ac1">==</span> <span style="color:#ff9f43">2</span> <span style="color:#ff6ac1">and</span> sys<span style="color:#ff6ac1">.</span>argv[<span style="color:#ff9f43">1</span>] <span style="color:#ff6ac1">==</span> <span style="color:#5af78e">&#39;--list&#39;</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">print</span>(json<span style="color:#ff6ac1">.</span>dumps(result))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">elif</span> <span style="color:#ff5c57">len</span>(sys<span style="color:#ff6ac1">.</span>argv) <span style="color:#ff6ac1">==</span> <span style="color:#ff9f43">3</span> <span style="color:#ff6ac1">and</span> sys<span style="color:#ff6ac1">.</span>argv[<span style="color:#ff9f43">1</span>] <span style="color:#ff6ac1">==</span> <span style="color:#5af78e">&#39;--host&#39;</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">print</span>(json<span style="color:#ff6ac1">.</span>dumps({}))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">else</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">print</span>(<span style="color:#5af78e">&#34;Requires an argument, please use --list or --host &lt;host&gt;&#34;</span>)</span></span></code></pre></div>
<p>When ran on our sample lab:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>ansible@control base<span style="color:#ff6ac1">]</span><span style="color:#ff5c57">$sudo</span> python3 ./inventory-helper.py
</span></span><span style="display:flex;"><span>Requires an argument, please use --list or --host &lt;host&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>ansible@control base<span style="color:#ff6ac1">]</span>$ sudo python3 ./inventory-helper.py --list
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">{</span><span style="color:#5af78e">&#34;all&#34;</span>: <span style="color:#ff6ac1">{</span><span style="color:#5af78e">&#34;hosts&#34;</span>: <span style="color:#ff6ac1">[</span><span style="color:#5af78e">&#34;127.0.0.1&#34;</span>, <span style="color:#5af78e">&#34;localhost&#34;</span>, <span style="color:#5af78e">&#34;localhost.localdomain&#34;</span>, <span style="color:#5af78e">&#34;localhost4&#34;</span>, <span style="color:#5af78e">&#34;localhost4.localdomain4&#34;</span>, <span style="color:#5af78e">&#34;127.0.0.1&#34;</span>, <span style="color:#5af78e">&#34;localhost&#34;</span>, <span style="color:#5af78e">&#34;localhost.localdomain&#34;</span>, <span style="color:#5af78e">&#34;localhost6&#34;</span>, <span style="color:#5af78e">&#34;localhost6.localdomain6&#34;</span>, <span style="color:#5af78e">&#34;192.168.124.201&#34;</span>, <span style="color:#5af78e">&#34;ansible1&#34;</span>, <span style="color:#5af78e">&#34;192.168.124.202&#34;</span>, <span style="color:#5af78e">&#34;ansible2&#34;</span><span style="color:#ff6ac1">]</span>, <span style="color:#5af78e">&#34;vars&#34;</span>: <span style="color:#ff6ac1">{}}}</span></span></span></code></pre></div>
<p>To use a dynamic inventory script:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>ansible@control base<span style="color:#ff6ac1">]</span>$ chmod u+x inventory-helper.py 
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>ansible@control base<span style="color:#ff6ac1">]</span>$ sudo ansible -i inventory-helper.py all --list-hosts
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>WARNING<span style="color:#ff6ac1">]</span>: A duplicate localhost-like entry was found <span style="color:#ff6ac1">(</span>localhost<span style="color:#ff6ac1">)</span>. First found localhost was 127.0.0.1
</span></span><span style="display:flex;"><span>  hosts <span style="color:#ff6ac1">(</span>11<span style="color:#ff6ac1">)</span>:
</span></span><span style="display:flex;"><span>    127.0.0.1
</span></span><span style="display:flex;"><span>    localhost
</span></span><span style="display:flex;"><span>    localhost.localdomain
</span></span><span style="display:flex;"><span>    localhost4
</span></span><span style="display:flex;"><span>    localhost4.localdomain4
</span></span><span style="display:flex;"><span>    localhost6
</span></span><span style="display:flex;"><span>    localhost6.localdomain6
</span></span><span style="display:flex;"><span>    192.168.124.201
</span></span><span style="display:flex;"><span>    ansible1
</span></span><span style="display:flex;"><span>    192.168.124.202
</span></span><span style="display:flex;"><span>    ansible2</span></span></code></pre></div>
<h4 id="configuring-dynamic-inventory">Configuring Dynamic Inventory</h4>
<p>dynamic inventory</p>
<ul>
<li>
<p>script that can be used to detect whether new hosts have been added to the managed environment.</p>
</li>
<li>
<p>Dynamic inventory scripts are provided by the community and exist for many different environments.</p>
</li>
<li>
<p>easy to write your own dynamic inventory script.</p>
</li>
<li>
<p>The main requirement is that the dynamic inventory script works with a <strong>--list</strong> and a <strong>--host &lt;hostname&gt;</strong> option and produces its output in JSON format.</p>
</li>
<li>
<p>Script must have the Linux execute permission set.</p>
</li>
<li>
<p>Many dynamic inventory scripts are written in Python, but this is not a requirement.</p>
</li>
<li>
<p>Writing dynamic inventory scripts is not an exam requirement</p>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#78787e">#!/usr/bin/python</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">from</span> subprocess <span style="color:#ff6ac1">import</span> Popen,PIPE
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> sys
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">try</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#ff6ac1">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">except</span> ImportError:
</span></span><span style="display:flex;"><span>     <span style="color:#ff6ac1">import</span> simplejson <span style="color:#ff6ac1">as</span> json
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>result <span style="color:#ff6ac1">=</span> {}
</span></span><span style="display:flex;"><span>result[<span style="color:#5af78e">&#39;all&#39;</span>] <span style="color:#ff6ac1">=</span> {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>pipe <span style="color:#ff6ac1">=</span> Popen([<span style="color:#5af78e">&#39;getent&#39;</span>, <span style="color:#5af78e">&#39;hosts&#39;</span>], stdout<span style="color:#ff6ac1">=</span>PIPE, universal_newlines<span style="color:#ff6ac1">=</span><span style="color:#ff6ac1">True</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>result[<span style="color:#5af78e">&#39;all&#39;</span>][<span style="color:#5af78e">&#39;hosts&#39;</span>] <span style="color:#ff6ac1">=</span> []
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">for</span> line <span style="color:#ff6ac1">in</span> pipe<span style="color:#ff6ac1">.</span>stdout<span style="color:#ff6ac1">.</span>readlines():
</span></span><span style="display:flex;"><span>    s <span style="color:#ff6ac1">=</span> line<span style="color:#ff6ac1">.</span>split()
</span></span><span style="display:flex;"><span>    result[<span style="color:#5af78e">&#39;all&#39;</span>][<span style="color:#5af78e">&#39;hosts&#39;</span>]<span style="color:#ff6ac1">=</span>result[<span style="color:#5af78e">&#39;all&#39;</span>][<span style="color:#5af78e">&#39;hosts&#39;</span>]<span style="color:#ff6ac1">+</span>s
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>result[<span style="color:#5af78e">&#39;all&#39;</span>][<span style="color:#5af78e">&#39;vars&#39;</span>] <span style="color:#ff6ac1">=</span> {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">if</span> <span style="color:#ff5c57">len</span>(sys<span style="color:#ff6ac1">.</span>argv) <span style="color:#ff6ac1">==</span> <span style="color:#ff9f43">2</span> <span style="color:#ff6ac1">and</span> sys<span style="color:#ff6ac1">.</span>argv[<span style="color:#ff9f43">1</span>] <span style="color:#ff6ac1">==</span> <span style="color:#5af78e">&#39;--list&#39;</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">print</span>(json<span style="color:#ff6ac1">.</span>dumps(result))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">elif</span> <span style="color:#ff5c57">len</span>(sys<span style="color:#ff6ac1">.</span>argv) <span style="color:#ff6ac1">==</span> <span style="color:#ff9f43">3</span> <span style="color:#ff6ac1">and</span> sys<span style="color:#ff6ac1">.</span>argv[<span style="color:#ff9f43">1</span>] <span style="color:#ff6ac1">==</span> <span style="color:#5af78e">&#39;--host&#39;</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">print</span>(json<span style="color:#ff6ac1">.</span>dumps({}))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">else</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">print</span>(<span style="color:#5af78e">&#34;Requires an argument, please use --list or --host &lt;host&gt;&#34;</span>)</span></span></code></pre></div>
<p><code>pipe = Popen(\['getent', 'hosts'\], stdout=PIPE, universal_newline=True)</code></p>
<ul>
<li>gets a list of hosts using the <code>getent</code> function.</li>
<li>This queries all hosts in /etc/hosts and other mechanisms where host name resolving is enabled.</li>
<li>To show the resulting host list, you can use the <code>\--list</code> command</li>
<li>To show details for a specific host, you can use the option <code>\--host hostname</code>.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>    <span style="color:#ff6ac1">[</span>ansible@control rhce8-book<span style="color:#ff6ac1">]</span>$ ./listing101.py --list
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">{</span><span style="color:#5af78e">&#34;all&#34;</span>: <span style="color:#ff6ac1">{</span><span style="color:#5af78e">&#34;hosts&#34;</span>: <span style="color:#ff6ac1">[</span><span style="color:#5af78e">&#34;127.0.0.1&#34;</span>, <span style="color:#5af78e">&#34;localhost&#34;</span>, <span style="color:#5af78e">&#34;localhost.localdomain&#34;</span>, <span style="color:#5af78e">&#34;localhost4&#34;</span>, <span style="color:#5af78e">&#34;localhost4.localdomain4&#34;</span>, <span style="color:#5af78e">&#34;127.0.0.1&#34;</span>, <span style="color:#5af78e">&#34;localhost&#34;</span>, <span style="color:#5af78e">&#34;localhost.localdomain&#34;</span>, <span style="color:#5af78e">&#34;localhost6&#34;</span>, <span style="color:#5af78e">&#34;localhost6.localdomain6&#34;</span>, <span style="color:#5af78e">&#34;192.168.4.200&#34;</span>, <span style="color:#5af78e">&#34;control.example.com&#34;</span>, <span style="color:#5af78e">&#34;control&#34;</span>, <span style="color:#5af78e">&#34;192.168.4.201&#34;</span>, <span style="color:#5af78e">&#34;ansible1.example.com&#34;</span>, <span style="color:#5af78e">&#34;ansible1&#34;</span>, <span style="color:#5af78e">&#34;192.168.4.202&#34;</span>, <span style="color:#5af78e">&#34;ansible2.example.com&#34;</span>, <span style="color:#5af78e">&#34;ansible2&#34;</span><span style="color:#ff6ac1">]</span>, <span style="color:#5af78e">&#34;vars&#34;</span>: <span style="color:#ff6ac1">{}}}</span></span></span></code></pre></div>
<ul>
<li>Dynamic inventory scripts are activated in the same way as regular inventory scripts: you use the <code>-i</code> option to either the <code>ansible</code> or the <code>ansible-playbook</code> command to pass the name of the inventory script as an argument.</li>
</ul>
<p>External directory service can be based on a wide range of solutions:</p>
<ul>
<li>
<p>FreeIPA</p>
</li>
<li>
<p>Active Directory</p>
</li>
<li>
<p>Red Hat Satellite</p>
</li>
<li>
<p>etc.</p>
</li>
<li>
<p>Also are available for virtual machine-based infrastructures such as VMware of Red Hat Enterprise Virtualization, where virtual machines can be discovered dynamically.</p>
</li>
<li>
<p>Can be found in cloud environments, where scripts are available for many solutions, including AWS, GCE, Azure, and OpenStack.</p>
</li>
</ul>
<p>When you are working with dynamic inventory, additional parameters are normally required:</p>
<ul>
<li>To get an inventory from an EC2 cloud environment, you need to enter your web keys.</li>
<li>To pass these parameters, many inventory scripts come with an additional configuration file that is formatted in .ini style.</li>
<li>The community-provided ec2.py script, for instance, comes with an ec2.ini parameter file.</li>
</ul>
<p>Another feature that is seen in many inventory scripts is cache management:</p>
<ul>
<li>Can use a cache to store names and parameters of recently discovered hosts.</li>
<li>If a cache is provided, options exist to manage the cache, allowing you, for instance, to make sure that the inventory information really is recently discovered.</li>
</ul>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <script>
      window.MathJax = Object.assign( window.MathJax || {}, {
        tex: {
          inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
          displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        },
        options: {
          enableMenu: false 
        }
      }, JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/js-yaml/js-yaml.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-color.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-drag.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-ease.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-selection.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-timer.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-transition.min.js?1764111909" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1764111909" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.relearn.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/clipboard/clipboard.min.js?1764111909" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1764111909" defer></script>
    <script src="/js/theme.min.js?1764111909" defer></script>
  </body>
</html>
