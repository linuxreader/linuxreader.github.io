<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.149.0">
    <meta name="generator" content="Relearn 8.0.0+9803d5122ebb3276acea823f476e9eb44f607862">
    <meta name="description" content="Managing NFS and AutoFS">
    <meta name="author" content="David Thomas">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Network File System (NFS) :: Linux Reader">
    <meta name="twitter:description" content="Managing NFS and AutoFS">
    <meta property="og:url" content="http://linuxreader.com/redhat/network-file-system-nfs/">
    <meta property="og:site_name" content="Linux Reader">
    <meta property="og:title" content="Network File System (NFS) :: Linux Reader">
    <meta property="og:description" content="Managing NFS and AutoFS">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="RedHat">
    <meta itemprop="name" content="Network File System (NFS) :: Linux Reader">
    <meta itemprop="description" content="Managing NFS and AutoFS">
    <meta itemprop="wordCount" content="2563">
    <title>Network File System (NFS) :: Linux Reader</title>
    <link href="/redhat/network-file-system-nfs/index.xml" rel="alternate" type="application/rss+xml" title="Network File System (NFS) :: Linux Reader">
    <link href="/redhat/network-file-system-nfs/index.print.html" rel="alternate" type="text/html" title="Network File System (NFS) :: Linux Reader">
    <link href="/images/favicon.svg?1756998522" rel="icon" type="image/svg+xml">
    <link href="/css/auto-complete/auto-complete.min.css?1756998522" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1756998522" defer></script>
    <script src="/js/search-lunr.min.js?1756998522" defer></script>
    <script src="/js/search.min.js?1756998522" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1756998522";
    </script>
    <script src="/js/lunr/lunr.min.js?1756998522" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1756998522" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1756998522" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1756998522" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1756998522" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1756998522" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1756998522" rel="stylesheet">
    <link href="/css/theme.min.css?1756998522" rel="stylesheet">
    <link href="/css/format-html.min.css?1756998522" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/redhat\/network-file-system-nfs\/';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='http:\/\/linuxreader.com';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'oled' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script><style>
:root {
    --MENU-WIDTH-S: 14.375rem;
    --MENU-WIDTH-M: 14.375rem;
    --MENU-WIDTH-L: 18.75rem;
    --MAIN-WIDTH-MAX: 80rem;
    font-size: 1.2rem;
}
</style>

  </head>
  <body class="mobile-support html" data-url="/redhat/network-file-system-nfs/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/redhat/local-file-systems-and-swap/" title="Local File Systems and Swap (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#nfs-basics-and-configuration">NFS Basics and Configuration</a>
      <ul>
        <li><a href="#nfs-supported-versions">NFS Supported versions</a></li>
        <li><a href="#network-file-system-service">Network File System service</a></li>
        <li><a href="#nfs-server-and-client-configuration">NFS Server and Client Configuration</a></li>
        <li><a href="#how-to-export-a-share">How to export a share</a></li>
        <li><a href="#mount-a-share-from-the-client-side">Mount a share from the client side</a></li>
        <li><a href="#lab-export-share-on-nfs-server">Lab: Export Share on NFS Server</a></li>
        <li><a href="#lab-mount-share-on-nfs-client">LAB: Mount share on NFS client</a></li>
      </ul>
    </li>
    <li><a href="#autofs">AutoFS</a>
      <ul>
        <li></li>
        <li><a href="#autofs-maps">AutoFS Maps</a></li>
        <li><a href="#direct-map">Direct Map</a></li>
        <li><a href="#indirect-map">Indirect Map</a></li>
        <li><a href="#lab-access-nfs-share-using-direct-map-server10">Lab: Access NFS Share Using Direct Map (server10)</a></li>
        <li><a href="#exercise-16-4-access-nfs-share-using-indirect-map">Exercise 16-4: Access NFS Share Using Indirect Map</a></li>
        <li><a href="#automounting-user-home-directories-">Automounting User Home Directories \</a></li>
        <li><a href="#exercise-16-5-automount-user-home-directories-using-indirect-map">Exercise 16-5: Automount User Home Directories Using Indirect Map</a></li>
      </ul>
    </li>
    <li><a href="#nfs-diy-labs">NFS DIY Labs</a>
      <ul>
        <li><a href="#lab-configure-nfs-share-and-automount-with-direct-map">Lab: Configure NFS Share and Automount with Direct Map</a></li>
        <li><a href="#lab-automount-nfs-share-with-indirect-map">Lab: Automount NFS Share with Indirect Map</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            Network File System (NFS)
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/redhat/network-file-system-nfs/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/redhat/process-and-task-scheduling/" title="Process and Task Scheduling (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>







          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable redhat" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="network-file-system-nfs">Network File System (NFS)</h1>

<h2 id="nfs-basics-and-configuration">NFS Basics and Configuration</h2>
<p>Same tools for mounting and unmounting a filesystem.</p>
<ul>
<li>Mounted and accessed the same way as local filesystems.</li>
<li>Network protocol that allows file sharing over the network.</li>
<li>Multi-platform</li>
<li>Multiple clients can access a single share at the same time.</li>
<li>Reduced overhead and storage cost.</li>
<li>Give users access to uniform data.</li>
<li>Consolidate scattered user home directories.</li>
<li>May cause client to hang if share is not accessible.</li>
<li>Share stays mounted until manually unmounted or the client shuts down.</li>
<li>Does not support wildcard characters or environment variables.</li>
</ul>
<h3 id="nfs-supported-versions">NFS Supported versions</h3>
<ul>
<li>RHEL 9 Supports versions 3,4.0,4.1, and 4.2 (default)</li>
<li>NFSv3 supports:
<ul>
<li>TCP and UDP.</li>
<li>asynchronous writes.</li>
<li>64-bit files sizes.</li>
<li>Access files larger than 2GB.</li>
</ul>
</li>
<li>NFSv4.x supports:
<ul>
<li>All features of NFSv3.</li>
<li>Transit firewalls and work on internet.</li>
<li>Enhanced security and support for encrypted transfers and ACLs.</li>
<li>Better scalability</li>
<li>Better cross-platform</li>
<li>Better system crash handling</li>
<li>Use usernames and group names rather than UID and GID.</li>
<li>Uses TCP by default.</li>
<li>Can use UDP for backwards compatibility.</li>
<li>Version 4.2 only supports TCP</li>
</ul>
</li>
</ul>
<h3 id="network-file-system-service">Network File System service</h3>
<ul>
<li>Export shares to mount on remote clients</li>
<li>Exporting
<ul>
<li>When the NFS server makes shares available.</li>
</ul>
</li>
<li>Mounting
<ul>
<li>When a client mounts an exported share locally.</li>
<li>Mount point should be empty before trying to mount a share on it.</li>
</ul>
</li>
<li>System can be both client and server.</li>
<li>Entire directory tree of the share is shared.</li>
<li>Cannot re-share a subdirectory of a share.</li>
<li>A mounted share cannot be exported from the client.</li>
<li>A single exported share is mounted on a directory mount point.</li>
<li>Make sure to update the fstab file on the client.</li>
</ul>
<h3 id="nfs-server-and-client-configuration">NFS Server and Client Configuration</h3>
<h3 id="how-to-export-a-share">How to export a share</h3>
<ul>
<li>Add entry of the share to <em>/etc/exports</em> using <code>exportfs</code> command</li>
<li>Add firewall rule to allow access</li>
</ul>
<h3 id="mount-a-share-from-the-client-side">Mount a share from the client side</h3>
<ul>
<li>Use <code>mount</code> and add the filesystem to the fstab file.</li>
</ul>
<h3 id="lab-export-share-on-nfs-server">Lab: Export Share on NFS Server</h3>
<ol>
<li>Install nfs-utils</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> sudo dnf -y install nfs-utils</code></pre></div>
<ol>
<li>Create /common</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> sudo mkdir /common</code></pre></div>
<ol>
<li>Add full permissions</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> sudo chmod 777 /common</code></pre></div>
<ol>
<li>Add NFS service persistently to the firewalld configuration to allow NFS traffic and load the new rule:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo firewall-cmd --permanent --add-service nfs
sudo firewall-cmd --reload</code></pre></div>
<ol>
<li>Start the NFS service and enable it to autostart at system reboots:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo systemctl --now enable nfs-server</code></pre></div>
<ol>
<li>Verify Operational Status of the NFS services:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo systemctl status nfs-server</code></pre></div>
<ol>
<li>Open <em>/etc/exports</em> and add entry for <em>/common</em> to export it to server10 with read/write:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/common server10(rw)</code></pre></div>
<ol>
<li>Export the entry defined in <em>/etc/exports</em>/. -a option exports all entries in the file. -v is verbose.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo exportfs -av</code></pre></div>
<ol>
<li>Unexport the share (-u):</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo exportfs -u server10:/common</code></pre></div>
<ol>
<li>Re-export the share:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo exportfs -av</code></pre></div>
<h3 id="lab-mount-share-on-nfs-client">LAB: Mount share on NFS client</h3>
<ol>
<li>Install nfs-utils</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf -y install nfs-utils</code></pre></div>
<ol>
<li>Create /local mount point</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo mkdir /local</code></pre></div>
<ol>
<li>Mount the share manually:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo mount server20:/common /local</code></pre></div>
<ol>
<li>Confirm using mount: (shows nfs version)</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>mount | grep local</code></pre></div>
<ol>
<li>Confirm using df:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>df -h | grep local</code></pre></div>
<ol>
<li>Add to /fstab for persistence:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>server20:/common /local nfs _netdev 0 0</code></pre></div>
<p>Note:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>_netdev option makes system wait for networking to come up before trying to mount the share. </code></pre></div>
<ol>
<li>Unmount share manually using umount then remount to validate accuracy of the entry in /fstab:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo umount /local
sudo mount -a</code></pre></div>
<ol>
<li>Verify:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>df -h</code></pre></div>
<ol>
<li>Create a file in /local/ and verify:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>touch /local/nfsfile
ls -l /local</code></pre></div>
<ol>
<li>Confirm the sync on server 2</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ls -l /common/</code></pre></div>
<ol start="5">
<li>Update fstab</li>
</ol>
<h2 id="autofs">AutoFS</h2>
<ul>
<li>Automatically mount and unmount on clients during runtime and system reboots.</li>
<li>Triggers mount or unmount action based on mount point activity.</li>
<li>Client-side service</li>
<li>Mount an NFS share on demand</li>
<li>Entry placed in AutoFS config files.</li>
<li>Automatically mounts share upon detecting activity in it&rsquo;s mount point. (touch, ls, cd)</li>
<li>unmounts share if the share hasn&rsquo;t been accessed for a predefined period of time.</li>
<li>Mounts managed with autofs should not be mounted manually via /etc/fstab to avoid inconsistencies.</li>
<li>Saves Kernel from having to maintain unused NFS shares. (Improved performance!)</li>
<li>NFS shares are defined in config files called maps (<em>/etc/</em> or <em>/etc/auto.master.d/</em>)</li>
<li>Does not use /etc/fstab.</li>
<li>Does not require root to mount a share (fstab does).</li>
<li>Prevents client from hanging if share is down.</li>
<li>Share is unmounted if not accessed for 5 minutes (default)</li>
<li>Supports wildcard characters or environment variables.</li>
<li>Automount daemon
<ul>
<li>in the userland mounts configured shares automatically upon access.</li>
<li>invoked at system boot.</li>
<li>Reads AutoFS master map and create initial mount point entries. (not mounting yet)</li>
<li>Does not mount shares until user activity is detected.</li>
<li>Unmounts after set timeframe of inactivity.</li>
</ul>
</li>
<li>Use the mount command on a share to verify the path of the AutoFS map, file system type, and options used during mount.</li>
</ul>
<p><em>/etc/autofs.conf/</em> preset Directives:
master_map_name=auto.master
timeout = 300
negative_timeout = 60
mount_nfs_default_protocol = 4
logging = none</p>
<h4 id="additional-directives">Additional directives:</h4>
<p><strong>master_map_name</strong></p>
<ul>
<li>
<p>Name of the master map. Default is <em>/etc/auto.master</em>
<strong>timeout</strong></p>
</li>
<li>
<p>Time in second to unmount a share.
<strong>negative_timeout</strong></p>
</li>
<li>
<p>Timeout (in seconds) value for failed mount attempts. (1 minute default)
<strong>mount_nfs_default_protocol</strong></p>
</li>
<li>
<p>Sets the NFS version used to mount shares.
<strong>logging</strong></p>
</li>
<li>
<p>Logging level (none, verbose, debug)</p>
</li>
<li>
<p>Default is none (disabled)</p>
</li>
<li>
<p>Normally left to their default values.</p>
</li>
</ul>
<h3 id="autofs-maps">AutoFS Maps</h3>
<ul>
<li>Where AutoFS finds the shares to mount and their locations.</li>
<li>Also tells Autofs what options to use.</li>
</ul>
<p><strong>Map Types</strong>:</p>
<ul>
<li>master</li>
<li>direct</li>
<li>indirect</li>
</ul>
<p><strong>Master Map</strong></p>
<p>Define entries for indirect and direct maps.</p>
<ul>
<li><em>/etc/auto.master</em> is default</li>
<li>Default is defined in <em>/etc/autofs.conf</em> with <strong>master_map_name</strong> directive.</li>
<li>May be used to define entries for indirect and direct maps.
<ul>
<li>But it is recommended to store user-defined maps in <em>/etc/auto.master.d/</em>
<ul>
<li>AutoFS service parses this at startup.</li>
</ul>
</li>
</ul>
</li>
<li>You can append an option to auto.master but it will apply globally to all subentries in the specified map file.</li>
</ul>
<p>Map entry format examples:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>  /-                      /etc/auto.master.d/auto.direct   <span style="color:#5af78e">\#</span> Line <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  /misc                   /etc/auto.misc                   <span style="color:#5af78e">\#</span> Line <span style="color:#ff9f43">2</span></span></span></code></pre></div>
<h3 id="direct-map">Direct Map</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/- /etc/auto.master.d/auto.direct &lt;-- defines direct map and points to auto.direct for details</code></pre></div>
<p>Mount shares on unrelated mount points</p>
<ul>
<li>Always visible to users</li>
<li>Can exist with an indirect share under one parent directory</li>
<li>Accessing a directory containing many direct mount points mounts all shares.</li>
<li>Each direct map entry places a separate share entry to <em>/etc/mtab</em>
<ul>
<li><em>/etc/mtab</em> maintains a list of all mounted file systems whether they are local or remote.</li>
<li>Updated whenever a local file system, removable file system, or a network share is mounted or unmounted.</li>
</ul>
</li>
</ul>
<h3 id="indirect-map">Indirect Map</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/misc /etc/auto.misc &lt;-- indirect map and points to auto.misc for details</code></pre></div>
<p>Automount removable filesystems</p>
<ul>
<li>Mount point <em>/misc</em> precedes mount point entries in <em>/etc/auto.miscq</em></li>
<li>Used to automount removable file systems (CD, DVD, USB disks, etc.)</li>
<li>Custom indirect map files should be located in <em>/etc/auto.master.d/</em></li>
<li>Preferred over direct mount for mounting all shares under one common parent directory.</li>
<li>Become visible only after they have been accessed.</li>
<li>Local and indirect mounted shares cannot coexist under the same parent directory.</li>
<li>One entry in <em>/etc/mtab</em> gets added for each indirect map.</li>
<li>Usually better to use indirect map for automounting NFS shares.</li>
</ul>
<h3 id="lab-access-nfs-share-using-direct-map-server10">Lab: Access NFS Share Using Direct Map (server10)</h3>
<ol>
<li>Install Autofs</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf install -y autofs</code></pre></div>
<ol>
<li>Create mount point /autodir using mkdir</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo mkdir /autodir</code></pre></div>
<ol>
<li>Add an entry to <em>/etc/auto.master</em> to point the AutoFS service to the auto.dir file for more information:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/- /etc/auto.master.d/auto.dir</code></pre></div>
<ol>
<li>Create <em>/etc/auto.master.d/auto.dir</em> and add the mount point, NFS server, and share info:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/autodir server20:/common</code></pre></div>
<ol>
<li>Start AutoFS service and enable it at startup:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo systemctl enable --now autofs</code></pre></div>
<ol>
<li>Make sure AUtoFS service is running. Use -l and &ndash;no-pager options to show full details without piping the output to a pager program (pg)</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo systemctl status autofs -l --no-pager</code></pre></div>
<ol>
<li>Run ls on the mount point then verify the share is automounted and accessible with mount.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ls /autodir
mount | grep autodir</code></pre></div>
<ol>
<li>Wait 5 minutes and run the mount command again to see it has disappeared.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>mount | grep autodir</code></pre></div>
<h3 id="exercise-16-4-access-nfs-share-using-indirect-map">Exercise 16-4: Access NFS Share Using Indirect Map</h3>
<ul>
<li>configure an indirect map to automount the NFS share /common that is available from server20.</li>
<li>install the relevant software and set up AutoFS maps to support the automatic mounting.</li>
<li>Observe that the specified mount point &ldquo;autoindir&rdquo; is created automatically under /misc.</li>
</ul>
<p>Note that /common is already mounted on the /local mount point via the fstab file and it is also configured via a direct map for automounting on /autodir. There should occur no conflict in configuration or functionality among the three.</p>
<p>1. Install the autofs software package if it is not already there:</p>
<p>2. Confirm the entry for the indirect map <em>/misc</em> in the <em>/etc/auto.master</em>
file exists:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 common<span style="color:#ff6ac1">]</span><span style="color:#78787e"># grep ^/misc /etc/auto.master</span>
</span></span><span style="display:flex;"><span>/misc	/etc/auto.misc</span></span></code></pre></div>
<p>3. Edit the <em>/etc/auto.misc</em> file and add the mount point, NFS server, and share information to it:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>autoindir server30:/common</span></span></code></pre></div>
<p>4. Start the AutoFS service now and set it to autostart at system reboots:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl enable --now autofs</span></span></span></code></pre></div>
<p>5. Verify the operational status of the AutoFS service. Use the -l and --no-pager options to show full details without piping the output to a pager program (the pg command in this case):</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl status autofs -l --no-pager</span></span></span></code></pre></div>
<p><br>
6. Run the ls command on the mount point /misc/autoindir and then grep for both auto.misc and autoindir on the mount command output to verify that the share is automounted and accessible:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls /misc/autoindir</span>
</span></span><span style="display:flex;"><span>test.text</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount | egrep &#39;auto.misc|autoindir&#39;</span>
</span></span><span style="display:flex;"><span>/etc/auto.misc on /misc <span style="color:#ff5c57">type</span> autofs <span style="color:#ff6ac1">(</span>rw,relatime,fd<span style="color:#ff6ac1">=</span>7,pgrp<span style="color:#ff6ac1">=</span>3321,timeout<span style="color:#ff6ac1">=</span>300,minproto<span style="color:#ff6ac1">=</span>5,maxproto<span style="color:#ff6ac1">=</span>5,indirect,pipe_ino<span style="color:#ff6ac1">=</span>31779<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>server30:/common on /misc/autoindir <span style="color:#ff5c57">type</span> nfs4 <span style="color:#ff6ac1">(</span>rw,relatime,vers<span style="color:#ff6ac1">=</span>4.2,rsize<span style="color:#ff6ac1">=</span>262144,wsize<span style="color:#ff6ac1">=</span>262144,namlen<span style="color:#ff6ac1">=</span>255,hard,proto<span style="color:#ff6ac1">=</span>tcp,timeo<span style="color:#ff6ac1">=</span>600,retrans<span style="color:#ff6ac1">=</span>2,sec<span style="color:#ff6ac1">=</span>sys,clientaddr<span style="color:#ff6ac1">=</span>192.168.0.40,local_lock<span style="color:#ff6ac1">=</span>none,addr<span style="color:#ff6ac1">=</span>192.168.0.30<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<ul>
<li><em>/misc/autoindir</em> has been auto generated.</li>
<li>You can use the umbrella mount point /misc to mount additional auto-generated mount points.</li>
</ul>
<h3 id="automounting-user-home-directories-">Automounting User Home Directories \</h3>
<p>AutoFS allows us to automount user home directories by exploiting two special characters in indirect maps.</p>
<p><strong>asterisk (*)</strong></p>
<ul>
<li>Replaces the references to specific mount points</li>
</ul>
<p><strong>ampersand (&amp;)</strong></p>
<ul>
<li>
<p>Substitutes the references to NFS servers and shared subdirectories.</p>
</li>
<li>
<p>With user home directories located under /home, on one or more NFS servers, the AutoFS service will connect with all of them simultaneously when a user attempts to log on to a client.</p>
</li>
<li>
<p>The service will mount only that specific user&rsquo;s home directory rather than the entire /home.</p>
</li>
<li>
<p>The indirect map entry for this type of substitution is defined in an indirect map, such as <em>/etc/auto.master.d/auto.home</em>.</p>
</li>
</ul>
<p><code>* -rw &amp;:/home/&amp;</code></p>
<ul>
<li>
<p>With this entry in place, there is no need to update any AutoFS configuration files if additional NFS servers with /home shared are added or removed.</p>
</li>
<li>
<p>If user home directories are added or deleted, there will be no impact on the functionality of AutoFS.</p>
</li>
<li>
<p>If there is only one NFS server sharing the home directories, you can simply specify its name in lieu of the first &amp; symbol in the above entry.</p>
</li>
</ul>
<h3 id="exercise-16-5-automount-user-home-directories-using-indirect-map">Exercise 16-5: Automount User Home Directories Using Indirect Map</h3>
<p>There are two portions for this exercise. The first portion should be done on server20 (NFS server) and the second portion on server10 (NFS client) as user1 with sudo where required.</p>
<p>first portion</p>
<ul>
<li>create a user account called user30 with UID 3000.</li>
<li>add the /home directory to the list of NFS shares so that it becomes available for remote mount.</li>
</ul>
<p>second portion</p>
<ul>
<li>create a user account called user30 with UID 3000, base directory /nfshome, and no home directory.</li>
<li>create an umbrella mount point called /nfshome for mounting the user home directory from the NFS server.</li>
<li>install the relevant software and establish an indirect map to automount the remote home directory of user30 under /nfshome.</li>
<li>observe that the home directory is automounted under /nfshome when you sign in as user30.</li>
</ul>
<p>On NFS server server20:</p>
<p>1. Create a user account called user30 with UID 3000 (-u) and assign
password &ldquo;password1&rdquo;:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 common<span style="color:#ff6ac1">]</span><span style="color:#78787e"># useradd -u 3000 user30</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 common<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo password1 | sudo passwd --stdin user30</span>
</span></span><span style="display:flex;"><span>Changing password <span style="color:#ff6ac1">for</span> user user30.
</span></span><span style="display:flex;"><span>passwd: all authentication tokens updated successfully.</span></span></code></pre></div>
<p>2. Edit the /etc/exports file and add an entry for /home (do not modify or remove the previous entry):
<code>/home server40(rw)</code></p>
<p>3. Export all the shares listed in the /etc/exports file:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 common<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo exportfs -avr</span>
</span></span><span style="display:flex;"><span>exporting server40.example.com:/home
</span></span><span style="display:flex;"><span>exporting server40.example.com:/common</span></span></code></pre></div>
<p>On NFS client server10:</p>
<p>1. Install the autofs software package if it is not already there:
<code>dnf install autofs</code></p>
<p>2. Create a user account called user30 with UID 3000 (-u), base home directory location /nfshome (-b), no home directory (-M), and password &ldquo;password1&rdquo;:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 misc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo useradd -u 3000 -b /nfshome -M user30</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 misc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo password1 | sudo passwd --stdin user30</span></span></span></code></pre></div>
<p>This is to ensure that the UID for the user is consistent on the server and the client to avoid access issues.</p>
<p>3. Create the umbrella mount point /nfshome to automount the user&rsquo;s home directory:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mkdir /nfshome</span></span></code></pre></div>
<p>4. Edit the <em>/etc/auto.master</em> file and add the mount point and indirect map location to it:
<code>/nfshome /etc/auto.master.d/auto.home</code></p>
<p>5. Create the /etc/auto.master.d/auto.home file and add the following information to it:
<code>* -rw server30:/home/&amp;</code></p>
<p>For multiple user setup, you can replace &ldquo;user30&rdquo; with the &amp; character, but ensure that those users exist on both the server and the client with consistent UIDs.</p>
<p>6. Start the AutoFS service now and set it to autostart at system reboots. This step is not required if AutoFS is already running and enabled.
<code>systemctl enable --now autofs</code></p>
<p>7. Verify the operational status of the AutoFS service. Use the -l and --no-pager options to show full details without piping the output to a pager program (the pg command):
<code>systemctl status autofs -l --no-pager</code></p>
<p>8. Log in as user30 and run the pwd, ls, and df commands for verification:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 nfshome<span style="color:#ff6ac1">]</span><span style="color:#78787e"># su - user30</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>user30@server40 ~<span style="color:#ff6ac1">]</span>$ ls
</span></span><span style="display:flex;"><span>user30.txt
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>user30@server40 ~<span style="color:#ff6ac1">]</span>$ <span style="color:#ff5c57">pwd</span>
</span></span><span style="display:flex;"><span>/nfshome/user30
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>user30@server40 ~<span style="color:#ff6ac1">]</span>$ df -h
</span></span><span style="display:flex;"><span>Filesystem             Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>devtmpfs               4.0M     <span style="color:#ff9f43">0</span>  4.0M   0% /dev
</span></span><span style="display:flex;"><span>tmpfs                  888M     <span style="color:#ff9f43">0</span>  888M   0% /dev/shm
</span></span><span style="display:flex;"><span>tmpfs                  356M  5.1M  351M   2% /run
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-root   17G  2.2G   15G  13% /
</span></span><span style="display:flex;"><span>/dev/sda1              960M  344M  617M  36% /boot
</span></span><span style="display:flex;"><span>tmpfs                  178M     <span style="color:#ff9f43">0</span>  178M   0% /run/user/0
</span></span><span style="display:flex;"><span>server30:/common        17G  2.2G   15G  13% /local
</span></span><span style="display:flex;"><span>server30:/home/user30   17G  2.2G   15G  13% /nfshome/user30</span></span></code></pre></div>
<p>EXAM TIP: You may need to configure AutoFS for mounting a remote user
home directory.</p>
<h2 id="nfs-diy-labs">NFS DIY Labs</h2>
<h3 id="lab-configure-nfs-share-and-automount-with-direct-map">Lab: Configure NFS Share and Automount with Direct Map</h3>
<ul>
<li>As user1 with sudo on server30, share directory /sharenfs (create it) in read/write mode using NFS.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkdir /sharenfs</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod 777 /sharenfs</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/exports</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Add -&gt; /sharenfs server40(rw)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># dnf -y install nfs-utils</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># firewall-cmd --permanent --add-service nfs</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># firewall-cmd --reload</span>
</span></span><span style="display:flex;"><span>success
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl --now enable nfs-server</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># exportfs -av</span>
</span></span><span style="display:flex;"><span>exporting server40.example.com:/sharenfs</span></span></code></pre></div>
<ul>
<li>On server40 as user1 with sudo, install the AutoFS software and start the service.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 nfshome<span style="color:#ff6ac1">]</span><span style="color:#78787e"># dnf -y install autofs</span></span></span></code></pre></div>
<ul>
<li>Configure the master and a direct map to automount the share on /mntauto (create it).</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/auto.master</span>
</span></span><span style="display:flex;"><span>/- /etc/auto.master.d/auto.dir
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/auto.master.d/auto.dir</span>
</span></span><span style="display:flex;"><span>/mntauto server30:/sharenfs
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkdir /mntauto</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl enable --now autofs</span></span></span></code></pre></div>
<ul>
<li>Run ls on /mntauto to trigger the mount.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount | grep mntauto</span>
</span></span><span style="display:flex;"><span>/etc/auto.master.d/auto.dir on /mntauto <span style="color:#ff5c57">type</span> autofs <span style="color:#ff6ac1">(</span>rw,relatime,fd<span style="color:#ff6ac1">=</span>10,pgrp<span style="color:#ff6ac1">=</span>6211,timeout<span style="color:#ff6ac1">=</span>300,minproto<span style="color:#ff6ac1">=</span>5,maxproto<span style="color:#ff6ac1">=</span>5,direct,pipe_ino<span style="color:#ff6ac1">=</span>40247<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>server30:/sharenfs on /mntauto <span style="color:#ff5c57">type</span> nfs4 <span style="color:#ff6ac1">(</span>rw,relatime,vers<span style="color:#ff6ac1">=</span>4.2,rsize<span style="color:#ff6ac1">=</span>262144,wsize<span style="color:#ff6ac1">=</span>262144,namlen<span style="color:#ff6ac1">=</span>255,hard,proto<span style="color:#ff6ac1">=</span>tcp,timeo<span style="color:#ff6ac1">=</span>600,retrans<span style="color:#ff6ac1">=</span>2,sec<span style="color:#ff6ac1">=</span>sys,clientaddr<span style="color:#ff6ac1">=</span>192.168.0.40,local_lock<span style="color:#ff6ac1">=</span>none,addr<span style="color:#ff6ac1">=</span>192.168.0.30<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<ul>
<li>Use <code>df -h</code> to confirm.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[root@server40 /]# df -h | grep mntauto
server30:/sharenfs      17G  2.2G   15G  13% /mntauto</code></pre></div>
<h3 id="lab-automount-nfs-share-with-indirect-map">Lab: Automount NFS Share with Indirect Map</h3>
<ul>
<li>As user1 with sudo on server40, configure the master and an indirect map to automount the share under /autoindir (create it).</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkdir /autoindir</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 etc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/auto.master</span>
</span></span><span style="display:flex;"><span>/autoindir /etc/auto.misc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 etc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/auto.misc</span>
</span></span><span style="display:flex;"><span>sharenfs server30:/common
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 etc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl restart autofs</span></span></span></code></pre></div>
<ul>
<li>Run ls on /autoindir/sharenfs to trigger the mount.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 etc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls /autoindir/sharenfs</span>
</span></span><span style="display:flex;"><span>test.text</span></span></code></pre></div>
<ul>
<li>Use <code>df -h</code> to confirm.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 etc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -h</span>
</span></span><span style="display:flex;"><span>Filesystem             Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>devtmpfs               4.0M     <span style="color:#ff9f43">0</span>  4.0M   0% /dev
</span></span><span style="display:flex;"><span>tmpfs                  888M     <span style="color:#ff9f43">0</span>  888M   0% /dev/shm
</span></span><span style="display:flex;"><span>tmpfs                  356M  5.1M  351M   2% /run
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-root   17G  2.2G   15G  13% /
</span></span><span style="display:flex;"><span>/dev/sda1              960M  344M  617M  36% /boot
</span></span><span style="display:flex;"><span>tmpfs                  178M     <span style="color:#ff9f43">0</span>  178M   0% /run/user/0
</span></span><span style="display:flex;"><span>server30:/common        17G  2.2G   15G  13% /autoindir/sharenfs</span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<a href="https://linuxreader.com">
  <img src="/images/linuxreader.svg" alt="Linux Reader" >
</a>

        </div>
        <search><form action="/search/" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/ansible/"><a class="padding" href="/ansible/"><i class="fa-fw fas fa-file-lines"></i> Ansible</a><ul id="R-subsections-e5b911977d99c31c82b120cc3d2f2606" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/bash-scripting/"><a class="padding" href="/bash-scripting/"><i class="fa-fw fas fa-code"></i> Bash Scripting</a><ul id="R-subsections-fc95944d927ad1a52feaf7ff2addc71b" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/containers/"><a class="padding" href="/containers/"><i class="fa-fw fas fa-box-open"></i> Containers</a><ul id="R-subsections-98e55644e7defe4a283b28e510b18cf5" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/cyber-security/"><a class="padding" href="/cyber-security/"><i class="fa-fw fas fa-ghost"></i> Cyber Security</a><ul id="R-subsections-f95cf8cea1c115dd046e46a833f33dfa" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/desktop/"><a class="padding" href="/desktop/"><i class="fa-fw fas fa-computer"></i> Desktop</a><ul id="R-subsections-e1fc414efb00462ad25041a21e45e696" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/keyboard/"><a class="padding" href="/keyboard/"><i class="fa-fw fas fa-keyboard"></i> Keyboard</a><ul id="R-subsections-9c70f15c7e0cd80e425ec652ecbd7e70" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/networking/"><a class="padding" href="/networking/"><i class="fa-fw fas fa-network-wired"></i> Networking</a><ul id="R-subsections-d7c3359b808d40df139a3bb9f9073483" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-id="/redhat/"><a class="padding" href="/redhat/"><i class="fa-brands fab fa-redhat"></i> RedHat</a><ul id="R-subsections-22ddd467d467af44ac41abd22ed6268b" class="collapsible-menu">
            <li class="" data-nav-id="/redhat/advanced-file-management/"><a class="padding" href="/redhat/advanced-file-management/">Advanced File Management</a></li>
            <li class="" data-nav-id="/redhat/advanced-package-management/"><a class="padding" href="/redhat/advanced-package-management/">Advanced Package Management</a></li>
            <li class="" data-nav-id="/redhat/advanced-user-management/"><a class="padding" href="/redhat/advanced-user-management/">Advanced User Management</a></li>
            <li class="" data-nav-id="/redhat/file-management/"><a class="padding" href="/redhat/file-management/">Basic File Managment</a></li>
            <li class="" data-nav-id="/redhat/basic-package-management/"><a class="padding" href="/redhat/basic-package-management/">Basic Package Management</a></li>
            <li class="" data-nav-id="/redhat/basic-user-management/"><a class="padding" href="/redhat/basic-user-management/">Basic User Management</a></li>
            <li class="" data-nav-id="/redhat/boot-process-grub2-and-kernel/"><a class="padding" href="/redhat/boot-process-grub2-and-kernel/">Boot Process, Grub2, and Kernel</a></li>
            <li class="" data-nav-id="/redhat/installation/"><a class="padding" href="/redhat/installation/">Installation</a></li>
            <li class="" data-nav-id="/redhat/interaction/"><a class="padding" href="/redhat/interaction/">Interaction</a></li>
            <li class="" data-nav-id="/redhat/local-file-systems-and-swap/"><a class="padding" href="/redhat/local-file-systems-and-swap/">Local File Systems and Swap</a></li>
            <li class="active " data-nav-id="/redhat/network-file-system-nfs/"><a class="padding" href="/redhat/network-file-system-nfs/">Network File System (NFS)</a></li>
            <li class="" data-nav-id="/redhat/process-and-task-scheduling/"><a class="padding" href="/redhat/process-and-task-scheduling/">Process and Task Scheduling</a></li>
            <li class="" data-nav-id="/redhat/rhcsa-exam-environment/"><a class="padding" href="/redhat/rhcsa-exam-environment/">RHCSA Exam Environment Guide</a></li>
            <li class="" data-nav-id="/redhat/rhcsa-notes/"><a class="padding" href="/redhat/rhcsa-notes/">RHCSA Notes</a></li>
            <li class="" data-nav-id="/redhat/rhcsa-study-tracker/"><a class="padding" href="/redhat/rhcsa-study-tracker/">RHCSA Study Tracker</a></li>
            <li class="" data-nav-id="/redhat/rhcsa-vagrant-lab-setup/"><a class="padding" href="/redhat/rhcsa-vagrant-lab-setup/">RHCSA Vagrant Lab Setup</a></li>
            <li class="" data-nav-id="/redhat/sample-exams/"><a class="padding" href="/redhat/sample-exams/">Sample Exams</a></li>
            <li class="" data-nav-id="/redhat/system-initialization-message-logging-and-system-tuning/"><a class="padding" href="/redhat/system-initialization-message-logging-and-system-tuning/">System Initialization, Message Logging, and System Tuning</a></li>
            <li class="" data-nav-id="/redhat/the-secure-shell-service/"><a class="padding" href="/redhat/the-secure-shell-service/">The Secure Shell Service</a></li></ul></li>
            <li class="" data-nav-id="/storage/"><a class="padding" href="/storage/"><i class="fa-fw fas fa-hard-drive"></i> Storage</a><ul id="R-subsections-28a53f7a259bc0e6bfd5bf73591250a9" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/tools/"><a class="padding" href="/tools/"><i class="fa-fw fas fa-screwdriver-wrench"></i> Tools</a><ul id="R-subsections-bf1399820dde3dd110e03ace4147ff86" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/virtualization/"><a class="padding" href="/virtualization/"><i class="fa-fw fas fa-server"></i> Virtualization</a><ul id="R-subsections-da8ee4406de37987b502b79e5b0a9d1c" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <div class="nav-title padding">More</div>
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/about/"><a class="padding" href="/about/"><i class='fas fa-solid fa-circle-info'></i> About</a></li>
            <li class="" data-nav-id="/now/"><a class="padding" href="/now/"><i class='fas fa-fw fa-play'></i> Now</a></li>
            <li class="" data-nav-id="/contact/"><a class="padding" href="/contact/"><i class='fas fa-fw fa-envelope'></i> Contact</a></li>
            <li class="" data-nav-id="/booknotes/"><a class="padding" href="/booknotes/"><i class='fas fa-fw fa-file'></i> Book Notes</a></li>
            <li class="" data-nav-id="https://github.com/linuxreader"><a class="padding" href="https://github.com/linuxreader" rel="external" target="_blank"><i class='fab fa-fw fa-github'></i> GitHub</a></li>
            <li class="" data-nav-id="https://linkedin.com/in/linuxreader/"><a class="padding" href="https://linkedin.com/in/linuxreader/" rel="external" target="_blank"><i class='fab fa-fw fa-linkedin'></i> LinkedIn</a></li>
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script>
      window.MathJax = Object.assign( window.MathJax || {}, {
        tex: {
          inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
          displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        },
        options: {
          enableMenu: false 
        }
      }, JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/js-yaml/js-yaml.min.js?1756998522" defer></script>
    <script src="/js/d3/d3-color.min.js?1756998522" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1756998522" defer></script>
    <script src="/js/d3/d3-drag.min.js?1756998522" defer></script>
    <script src="/js/d3/d3-ease.min.js?1756998522" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1756998522" defer></script>
    <script src="/js/d3/d3-selection.min.js?1756998522" defer></script>
    <script src="/js/d3/d3-timer.min.js?1756998522" defer></script>
    <script src="/js/d3/d3-transition.min.js?1756998522" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1756998522" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.relearn.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/clipboard/clipboard.min.js?1756998522" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1756998522" defer></script>
    <script src="/js/theme.min.js?1756998522" defer></script>
  </body>
</html>
