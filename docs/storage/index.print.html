<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.152.2">
    <meta name="generator" content="Relearn 8.2.0+d150cc8909ed7836ff5d545e76544f6923ffacf5">
    <meta name="description" content="AutoFSManaging AutoFSLocal File Systems and SwapLocal file systems and swapNetwork File System (NFS)Managing NFS and AutoFSPartitioning, MBR, and GPTPartitions and their management.Remove a filesystem from a partitionRemove a filesystem from a partition.Thin Provisioning and LVMThin provisioning and LVMVirtual Data Optimizer (VDO)VDO">
    <meta name="author" content="David Thomas">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Storage :: Linux Reader">
    <meta name="twitter:description" content="AutoFSManaging AutoFSLocal File Systems and SwapLocal file systems and swapNetwork File System (NFS)Managing NFS and AutoFSPartitioning, MBR, and GPTPartitions and their management.Remove a filesystem from a partitionRemove a filesystem from a partition.Thin Provisioning and LVMThin provisioning and LVMVirtual Data Optimizer (VDO)VDO">
    <meta property="og:url" content="http://linuxreader.com/storage/">
    <meta property="og:site_name" content="Linux Reader">
    <meta property="og:title" content="Storage :: Linux Reader">
    <meta property="og:description" content="AutoFSManaging AutoFSLocal File Systems and SwapLocal file systems and swapNetwork File System (NFS)Managing NFS and AutoFSPartitioning, MBR, and GPTPartitions and their management.Remove a filesystem from a partitionRemove a filesystem from a partition.Thin Provisioning and LVMThin provisioning and LVMVirtual Data Optimizer (VDO)VDO">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="Storage :: Linux Reader">
    <meta itemprop="description" content="AutoFSManaging AutoFSLocal File Systems and SwapLocal file systems and swapNetwork File System (NFS)Managing NFS and AutoFSPartitioning, MBR, and GPTPartitions and their management.Remove a filesystem from a partitionRemove a filesystem from a partition.Thin Provisioning and LVMThin provisioning and LVMVirtual Data Optimizer (VDO)VDO">
    <meta itemprop="wordCount" content="54">
    <title>Storage :: Linux Reader</title>
    <link href="http://linuxreader.com/storage/" rel="canonical" type="text/html" title="Storage :: Linux Reader">
    <link href="/storage/index.xml" rel="alternate" type="application/rss+xml" title="Storage :: Linux Reader">
    <link href="/images/favicon.svg?1764156123" rel="icon" type="image/svg+xml">
    <link href="/css/auto-complete/auto-complete.min.css?1764156123" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1764156123" defer></script>
    <script src="/js/search-lunr.min.js?1764156123" defer></script>
    <script src="/js/search.min.js?1764156123" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1764156123";
    </script>
    <script src="/js/lunr/lunr.min.js?1764156123" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1764156123" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1764156123" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1764156123" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1764156123" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1764156123" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1764156123" rel="stylesheet">
    <link href="/css/theme.min.css?1764156123" rel="stylesheet">
    <link href="/css/format-print.min.css?1764156123" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/storage\/';
      window.relearn.relBasePath='..';
      window.relearn.relBaseUri='..';
      window.relearn.absBaseUri='http:\/\/linuxreader.com';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'oled' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script><style>
:root {
    --MENU-WIDTH-S: 14.375rem;
    --MENU-WIDTH-M: 14.375rem;
    --MENU-WIDTH-L: 18.75rem;
    --MAIN-WIDTH-MAX: 80rem;
    font-size: 1.2rem;
}
</style>

  </head>
  <body class="mobile-support print" data-url="/storage/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/packages/basic-package-management/" title="Basic Package Management (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>

            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"> 
                </div>
              </div>
            </div>


          </div>
          <span class="topbar-breadcrumbs highlightable">
            Storage
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/storage/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></span>
            </div>

            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle link noborder notitle interactive"><a href="/storage/autofs/" title="AutoFS (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>







          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable storage" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="storage">Storage</h1>

<div class="children children-type-card children-sort-"><ul class="card-container">
<li>
  <article class="card card-popout" aria-labelledby="R-card-c3c99055e694aa1d894c2522dcd5c4d0">
    <div class="card-content">
      <div class="card-title" id="R-card-c3c99055e694aa1d894c2522dcd5c4d0">
        <a href="/storage/autofs/">
        AutoFS
        </a>
      </div>
      <div class="card-content-text">
          <p>
Managing AutoFS
      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-76628bf6f9b29329d6db28844c566c75">
    <div class="card-content">
      <div class="card-title" id="R-card-76628bf6f9b29329d6db28844c566c75">
        <a href="/storage/local-file-systems-and-swap/">
        Local File Systems and Swap
        </a>
      </div>
      <div class="card-content-text">
          <p>
Local file systems and swap
      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-22ffcef1c6d09db09b0c28ad3f6f97af">
    <div class="card-content">
      <div class="card-title" id="R-card-22ffcef1c6d09db09b0c28ad3f6f97af">
        <a href="/storage/network-file-system-nfs/">
        Network File System (NFS)
        </a>
      </div>
      <div class="card-content-text">
          <p>
Managing NFS and AutoFS
      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-6327b0a2b00e010b9cd52dd8d675ad40">
    <div class="card-content">
      <div class="card-title" id="R-card-6327b0a2b00e010b9cd52dd8d675ad40">
        <a href="/storage/partitioning-mbr-and-gpt/">
        Partitioning, MBR, and GPT
        </a>
      </div>
      <div class="card-content-text">
          <p>
Partitions and their management.
      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-ea57d1811bc1555f29cb8e4643a4d141">
    <div class="card-content">
      <div class="card-title" id="R-card-ea57d1811bc1555f29cb8e4643a4d141">
        <a href="/storage/remove-a-filesystem-from-a-partition/">
        Remove a filesystem from a partition
        </a>
      </div>
      <div class="card-content-text">
          <p>
Remove a filesystem from a partition.
      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-49e3040aa6bfc7d756593ae7ce4463a4">
    <div class="card-content">
      <div class="card-title" id="R-card-49e3040aa6bfc7d756593ae7ce4463a4">
        <a href="/storage/thin-provisioning/">
        Thin Provisioning and LVM
        </a>
      </div>
      <div class="card-content-text">
          <p>
Thin provisioning and LVM
      </div>
    </div>
  </article>
</li>
<li>
  <article class="card card-popout" aria-labelledby="R-card-d9790c3a36933ba23dc7207cb62a5dee">
    <div class="card-content">
      <div class="card-title" id="R-card-d9790c3a36933ba23dc7207cb62a5dee">
        <a href="/storage/virtual-data-optimizer-vdo/">
        Virtual Data Optimizer (VDO)
        </a>
      </div>
      <div class="card-content-text">
          <p>
VDO
      </div>
    </div>
  </article>
</li>
</ul>
</div>

  <footer class="footline">
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Storage</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="autofs">AutoFS</h1>

<h2 id="autofs">AutoFS</h2>
<ul>
<li>Automatically mount and unmount on clients during runtime and system reboots.</li>
<li>Triggers mount or unmount action based on mount point activity.</li>
<li>Client-side service</li>
<li>Mount an NFS share on demand</li>
<li>Entry placed in AutoFS config files.</li>
<li>Automatically mounts share upon detecting activity in it&rsquo;s mount point. (touch, ls, cd)</li>
<li>unmounts share if the share hasn&rsquo;t been accessed for a predefined period of time.</li>
<li>Mounts managed with autofs should not be mounted manually via /etc/fstab to avoid inconsistencies.</li>
<li>Saves Kernel from having to maintain unused NFS shares. (Improved performance!)</li>
<li>NFS shares are defined in config files called maps (<em>/etc/</em> or <em>/etc/auto.master.d/</em>)</li>
<li>Does not use /etc/fstab.</li>
<li>Does not require root to mount a share (fstab does).</li>
<li>Prevents client from hanging if share is down.</li>
<li>Share is unmounted if not accessed for 5 minutes (default)</li>
<li>Supports wildcard characters or environment variables.</li>
<li>Automount daemon
<ul>
<li>in the userland mounts configured shares automatically upon access.</li>
<li>invoked at system boot.</li>
<li>Reads AutoFS master map and create initial mount point entries. (not mounting yet)</li>
<li>Does not mount shares until user activity is detected.</li>
<li>Unmounts after set timeframe of inactivity.</li>
</ul>
</li>
<li>Use the mount command on a share to verify the path of the AutoFS map, file system type, and options used during mount.</li>
</ul>
<p><em>/etc/autofs.conf/</em> preset Directives:
master_map_name=auto.master
timeout = 300
negative_timeout = 60
mount_nfs_default_protocol = 4
logging = none</p>
<h4 id="additional-directives">Additional directives:</h4>
<p><strong>master_map_name</strong></p>
<ul>
<li>
<p>Name of the master map. Default is <em>/etc/auto.master</em>
<strong>timeout</strong></p>
</li>
<li>
<p>Time in second to unmount a share.
<strong>negative_timeout</strong></p>
</li>
<li>
<p>Timeout (in seconds) value for failed mount attempts. (1 minute default)
<strong>mount_nfs_default_protocol</strong></p>
</li>
<li>
<p>Sets the NFS version used to mount shares.
<strong>logging</strong></p>
</li>
<li>
<p>Logging level (none, verbose, debug)</p>
</li>
<li>
<p>Default is none (disabled)</p>
</li>
<li>
<p>Normally left to their default values.</p>
</li>
</ul>
<h3 id="autofs-maps">AutoFS Maps</h3>
<ul>
<li>Where AutoFS finds the shares to mount and their locations.</li>
<li>Also tells Autofs what options to use.</li>
</ul>
<p><strong>Map Types</strong>:</p>
<ul>
<li>master</li>
<li>direct</li>
<li>indirect</li>
</ul>
<p><strong>Master Map</strong></p>
<p>Define entries for indirect and direct maps.</p>
<ul>
<li><em>/etc/auto.master</em> is default</li>
<li>Default is defined in <em>/etc/autofs.conf</em> with <strong>master_map_name</strong> directive.</li>
<li>May be used to define entries for indirect and direct maps.
<ul>
<li>But it is recommended to store user-defined maps in <em>/etc/auto.master.d/</em>
<ul>
<li>AutoFS service parses this at startup.</li>
</ul>
</li>
</ul>
</li>
<li>You can append an option to auto.master but it will apply globally to all subentries in the specified map file.</li>
</ul>
<p>Map entry format examples:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>  /-                      /etc/auto.master.d/auto.direct   <span style="color:#5af78e">\#</span> Line <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  /misc                   /etc/auto.misc                   <span style="color:#5af78e">\#</span> Line <span style="color:#ff9f43">2</span></span></span></code></pre></div>
<h3 id="direct-map">Direct Map</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/- /etc/auto.master.d/auto.direct &lt;-- defines direct map and points to auto.direct for details</code></pre></div>
<p>Mount shares on unrelated mount points</p>
<ul>
<li>Always visible to users</li>
<li>Can exist with an indirect share under one parent directory</li>
<li>Accessing a directory containing many direct mount points mounts all shares.</li>
<li>Each direct map entry places a separate share entry to <em>/etc/mtab</em>
<ul>
<li><em>/etc/mtab</em> maintains a list of all mounted file systems whether they are local or remote.</li>
<li>Updated whenever a local file system, removable file system, or a network share is mounted or unmounted.</li>
</ul>
</li>
</ul>
<h3 id="indirect-map">Indirect Map</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/misc /etc/auto.misc &lt;-- indirect map and points to auto.misc for details</code></pre></div>
<p>Automount removable filesystems</p>
<ul>
<li>Mount point <em>/misc</em> precedes mount point entries in <em>/etc/auto.miscq</em></li>
<li>Used to automount removable file systems (CD, DVD, USB disks, etc.)</li>
<li>Custom indirect map files should be located in <em>/etc/auto.master.d/</em></li>
<li>Preferred over direct mount for mounting all shares under one common parent directory.</li>
<li>Become visible only after they have been accessed.</li>
<li>Local and indirect mounted shares cannot coexist under the same parent directory.</li>
<li>One entry in <em>/etc/mtab</em> gets added for each indirect map.</li>
<li>Usually better to use indirect map for automounting NFS shares.</li>
</ul>
<h3 id="lab-access-nfs-share-using-direct-map-server10">Lab: Access NFS Share Using Direct Map (server10)</h3>
<ol>
<li>Install Autofs</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf install -y autofs</code></pre></div>
<ol>
<li>Create mount point /autodir using mkdir</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo mkdir /autodir</code></pre></div>
<ol>
<li>Add an entry to <em>/etc/auto.master</em> to point the AutoFS service to the auto.dir file for more information:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/- /etc/auto.master.d/auto.dir</code></pre></div>
<ol>
<li>Create <em>/etc/auto.master.d/auto.dir</em> and add the mount point, NFS server, and share info:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/autodir server20:/common</code></pre></div>
<ol>
<li>Start AutoFS service and enable it at startup:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo systemctl enable --now autofs</code></pre></div>
<ol>
<li>Make sure AUtoFS service is running. Use -l and &ndash;no-pager options to show full details without piping the output to a pager program (pg)</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo systemctl status autofs -l --no-pager</code></pre></div>
<ol>
<li>Run ls on the mount point then verify the share is automounted and accessible with mount.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ls /autodir
mount | grep autodir</code></pre></div>
<ol>
<li>Wait 5 minutes and run the mount command again to see it has disappeared.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>mount | grep autodir</code></pre></div>
<h3 id="exercise-16-4-access-nfs-share-using-indirect-map">Exercise 16-4: Access NFS Share Using Indirect Map</h3>
<ul>
<li>configure an indirect map to automount the NFS share /common that is available from server20.</li>
<li>install the relevant software and set up AutoFS maps to support the automatic mounting.</li>
<li>Observe that the specified mount point &ldquo;autoindir&rdquo; is created automatically under /misc.</li>
</ul>
<p>Note that /common is already mounted on the /local mount point via the fstab file and it is also configured via a direct map for automounting on /autodir. There should occur no conflict in configuration or functionality among the three.</p>
<p>1. Install the autofs software package if it is not already there:</p>
<p>2. Confirm the entry for the indirect map <em>/misc</em> in the <em>/etc/auto.master</em>
file exists:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 common<span style="color:#ff6ac1">]</span><span style="color:#78787e"># grep ^/misc /etc/auto.master</span>
</span></span><span style="display:flex;"><span>/misc	/etc/auto.misc</span></span></code></pre></div>
<p>3. Edit the <em>/etc/auto.misc</em> file and add the mount point, NFS server, and share information to it:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>autoindir server30:/common</span></span></code></pre></div>
<p>4. Start the AutoFS service now and set it to autostart at system reboots:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl enable --now autofs</span></span></span></code></pre></div>
<p>5. Verify the operational status of the AutoFS service. Use the -l and --no-pager options to show full details without piping the output to a pager program (the pg command in this case):</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl status autofs -l --no-pager</span></span></span></code></pre></div>
<p><br>
6. Run the ls command on the mount point /misc/autoindir and then grep for both auto.misc and autoindir on the mount command output to verify that the share is automounted and accessible:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls /misc/autoindir</span>
</span></span><span style="display:flex;"><span>test.text</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount | egrep &#39;auto.misc|autoindir&#39;</span>
</span></span><span style="display:flex;"><span>/etc/auto.misc on /misc <span style="color:#ff5c57">type</span> autofs <span style="color:#ff6ac1">(</span>rw,relatime,fd<span style="color:#ff6ac1">=</span>7,pgrp<span style="color:#ff6ac1">=</span>3321,timeout<span style="color:#ff6ac1">=</span>300,minproto<span style="color:#ff6ac1">=</span>5,maxproto<span style="color:#ff6ac1">=</span>5,indirect,pipe_ino<span style="color:#ff6ac1">=</span>31779<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>server30:/common on /misc/autoindir <span style="color:#ff5c57">type</span> nfs4 <span style="color:#ff6ac1">(</span>rw,relatime,vers<span style="color:#ff6ac1">=</span>4.2,rsize<span style="color:#ff6ac1">=</span>262144,wsize<span style="color:#ff6ac1">=</span>262144,namlen<span style="color:#ff6ac1">=</span>255,hard,proto<span style="color:#ff6ac1">=</span>tcp,timeo<span style="color:#ff6ac1">=</span>600,retrans<span style="color:#ff6ac1">=</span>2,sec<span style="color:#ff6ac1">=</span>sys,clientaddr<span style="color:#ff6ac1">=</span>192.168.0.40,local_lock<span style="color:#ff6ac1">=</span>none,addr<span style="color:#ff6ac1">=</span>192.168.0.30<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<ul>
<li><em>/misc/autoindir</em> has been auto generated.</li>
<li>You can use the umbrella mount point /misc to mount additional auto-generated mount points.</li>
</ul>
<h3 id="automounting-user-home-directories-">Automounting User Home Directories \</h3>
<p>AutoFS allows us to automount user home directories by exploiting two special characters in indirect maps.</p>
<p><strong>asterisk (*)</strong></p>
<ul>
<li>Replaces the references to specific mount points</li>
</ul>
<p><strong>ampersand (&amp;)</strong></p>
<ul>
<li>
<p>Substitutes the references to NFS servers and shared subdirectories.</p>
</li>
<li>
<p>With user home directories located under /home, on one or more NFS servers, the AutoFS service will connect with all of them simultaneously when a user attempts to log on to a client.</p>
</li>
<li>
<p>The service will mount only that specific user&rsquo;s home directory rather than the entire /home.</p>
</li>
<li>
<p>The indirect map entry for this type of substitution is defined in an indirect map, such as <em>/etc/auto.master.d/auto.home</em>.</p>
</li>
</ul>
<p><code>* -rw &amp;:/home/&amp;</code></p>
<ul>
<li>
<p>With this entry in place, there is no need to update any AutoFS configuration files if additional NFS servers with /home shared are added or removed.</p>
</li>
<li>
<p>If user home directories are added or deleted, there will be no impact on the functionality of AutoFS.</p>
</li>
<li>
<p>If there is only one NFS server sharing the home directories, you can simply specify its name in lieu of the first &amp; symbol in the above entry.</p>
</li>
</ul>
<h3 id="exercise-16-5-automount-user-home-directories-using-indirect-map">Exercise 16-5: Automount User Home Directories Using Indirect Map</h3>
<p>There are two portions for this exercise. The first portion should be done on server20 (NFS server) and the second portion on server10 (NFS client) as user1 with sudo where required.</p>
<p>first portion</p>
<ul>
<li>create a user account called user30 with UID 3000.</li>
<li>add the /home directory to the list of NFS shares so that it becomes available for remote mount.</li>
</ul>
<p>second portion</p>
<ul>
<li>create a user account called user30 with UID 3000, base directory /nfshome, and no home directory.</li>
<li>create an umbrella mount point called /nfshome for mounting the user home directory from the NFS server.</li>
<li>install the relevant software and establish an indirect map to automount the remote home directory of user30 under /nfshome.</li>
<li>observe that the home directory is automounted under /nfshome when you sign in as user30.</li>
</ul>
<p>On NFS server server20:</p>
<p>1. Create a user account called user30 with UID 3000 (-u) and assign
password &ldquo;password1&rdquo;:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 common<span style="color:#ff6ac1">]</span><span style="color:#78787e"># useradd -u 3000 user30</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 common<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo password1 | sudo passwd --stdin user30</span>
</span></span><span style="display:flex;"><span>Changing password <span style="color:#ff6ac1">for</span> user user30.
</span></span><span style="display:flex;"><span>passwd: all authentication tokens updated successfully.</span></span></code></pre></div>
<p>2. Edit the /etc/exports file and add an entry for /home (do not modify or remove the previous entry):
<code>/home server40(rw)</code></p>
<p>3. Export all the shares listed in the /etc/exports file:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 common<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo exportfs -avr</span>
</span></span><span style="display:flex;"><span>exporting server40.example.com:/home
</span></span><span style="display:flex;"><span>exporting server40.example.com:/common</span></span></code></pre></div>
<p>On NFS client server10:</p>
<p>1. Install the autofs software package if it is not already there:
<code>dnf install autofs</code></p>
<p>2. Create a user account called user30 with UID 3000 (-u), base home directory location /nfshome (-b), no home directory (-M), and password &ldquo;password1&rdquo;:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 misc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo useradd -u 3000 -b /nfshome -M user30</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 misc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># echo password1 | sudo passwd --stdin user30</span></span></span></code></pre></div>
<p>This is to ensure that the UID for the user is consistent on the server and the client to avoid access issues.</p>
<p>3. Create the umbrella mount point /nfshome to automount the user&rsquo;s home directory:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mkdir /nfshome</span></span></code></pre></div>
<p>4. Edit the <em>/etc/auto.master</em> file and add the mount point and indirect map location to it:
<code>/nfshome /etc/auto.master.d/auto.home</code></p>
<p>5. Create the /etc/auto.master.d/auto.home file and add the following information to it:
<code>* -rw server30:/home/&amp;</code></p>
<p>For multiple user setup, you can replace &ldquo;user30&rdquo; with the &amp; character, but ensure that those users exist on both the server and the client with consistent UIDs.</p>
<p>6. Start the AutoFS service now and set it to autostart at system reboots. This step is not required if AutoFS is already running and enabled.
<code>systemctl enable --now autofs</code></p>
<p>7. Verify the operational status of the AutoFS service. Use the -l and --no-pager options to show full details without piping the output to a pager program (the pg command):
<code>systemctl status autofs -l --no-pager</code></p>
<p>8. Log in as user30 and run the pwd, ls, and df commands for verification:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 nfshome<span style="color:#ff6ac1">]</span><span style="color:#78787e"># su - user30</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>user30@server40 ~<span style="color:#ff6ac1">]</span>$ ls
</span></span><span style="display:flex;"><span>user30.txt
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>user30@server40 ~<span style="color:#ff6ac1">]</span>$ <span style="color:#ff5c57">pwd</span>
</span></span><span style="display:flex;"><span>/nfshome/user30
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>user30@server40 ~<span style="color:#ff6ac1">]</span>$ df -h
</span></span><span style="display:flex;"><span>Filesystem             Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>devtmpfs               4.0M     <span style="color:#ff9f43">0</span>  4.0M   0% /dev
</span></span><span style="display:flex;"><span>tmpfs                  888M     <span style="color:#ff9f43">0</span>  888M   0% /dev/shm
</span></span><span style="display:flex;"><span>tmpfs                  356M  5.1M  351M   2% /run
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-root   17G  2.2G   15G  13% /
</span></span><span style="display:flex;"><span>/dev/sda1              960M  344M  617M  36% /boot
</span></span><span style="display:flex;"><span>tmpfs                  178M     <span style="color:#ff9f43">0</span>  178M   0% /run/user/0
</span></span><span style="display:flex;"><span>server30:/common        17G  2.2G   15G  13% /local
</span></span><span style="display:flex;"><span>server30:/home/user30   17G  2.2G   15G  13% /nfshome/user30</span></span></code></pre></div>
<p>EXAM TIP: You may need to configure AutoFS for mounting a remote user
home directory.</p>
<h2 id="nfs-diy-labs">NFS DIY Labs</h2>
<h3 id="lab-configure-nfs-share-and-automount-with-direct-map">Lab: Configure NFS Share and Automount with Direct Map</h3>
<ul>
<li>As user1 with sudo on server30, share directory /sharenfs (create it) in read/write mode using NFS.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkdir /sharenfs</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># chmod 777 /sharenfs</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/exports</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Add -&gt; /sharenfs server40(rw)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># dnf -y install nfs-utils</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># firewall-cmd --permanent --add-service nfs</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># firewall-cmd --reload</span>
</span></span><span style="display:flex;"><span>success
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl --now enable nfs-server</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># exportfs -av</span>
</span></span><span style="display:flex;"><span>exporting server40.example.com:/sharenfs</span></span></code></pre></div>
<ul>
<li>On server40 as user1 with sudo, install the AutoFS software and start the service.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 nfshome<span style="color:#ff6ac1">]</span><span style="color:#78787e"># dnf -y install autofs</span></span></span></code></pre></div>
<ul>
<li>Configure the master and a direct map to automount the share on /mntauto (create it).</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/auto.master</span>
</span></span><span style="display:flex;"><span>/- /etc/auto.master.d/auto.dir
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/auto.master.d/auto.dir</span>
</span></span><span style="display:flex;"><span>/mntauto server30:/sharenfs
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkdir /mntauto</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl enable --now autofs</span></span></span></code></pre></div>
<ul>
<li>Run ls on /mntauto to trigger the mount.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount | grep mntauto</span>
</span></span><span style="display:flex;"><span>/etc/auto.master.d/auto.dir on /mntauto <span style="color:#ff5c57">type</span> autofs <span style="color:#ff6ac1">(</span>rw,relatime,fd<span style="color:#ff6ac1">=</span>10,pgrp<span style="color:#ff6ac1">=</span>6211,timeout<span style="color:#ff6ac1">=</span>300,minproto<span style="color:#ff6ac1">=</span>5,maxproto<span style="color:#ff6ac1">=</span>5,direct,pipe_ino<span style="color:#ff6ac1">=</span>40247<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>server30:/sharenfs on /mntauto <span style="color:#ff5c57">type</span> nfs4 <span style="color:#ff6ac1">(</span>rw,relatime,vers<span style="color:#ff6ac1">=</span>4.2,rsize<span style="color:#ff6ac1">=</span>262144,wsize<span style="color:#ff6ac1">=</span>262144,namlen<span style="color:#ff6ac1">=</span>255,hard,proto<span style="color:#ff6ac1">=</span>tcp,timeo<span style="color:#ff6ac1">=</span>600,retrans<span style="color:#ff6ac1">=</span>2,sec<span style="color:#ff6ac1">=</span>sys,clientaddr<span style="color:#ff6ac1">=</span>192.168.0.40,local_lock<span style="color:#ff6ac1">=</span>none,addr<span style="color:#ff6ac1">=</span>192.168.0.30<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<ul>
<li>Use <code>df -h</code> to confirm.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[root@server40 /]# df -h | grep mntauto
server30:/sharenfs      17G  2.2G   15G  13% /mntauto</code></pre></div>
<h3 id="lab-automount-nfs-share-with-indirect-map">Lab: Automount NFS Share with Indirect Map</h3>
<ul>
<li>As user1 with sudo on server40, configure the master and an indirect map to automount the share under /autoindir (create it).</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 /<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkdir /autoindir</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 etc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/auto.master</span>
</span></span><span style="display:flex;"><span>/autoindir /etc/auto.misc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 etc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/auto.misc</span>
</span></span><span style="display:flex;"><span>sharenfs server30:/common
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 etc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># systemctl restart autofs</span></span></span></code></pre></div>
<ul>
<li>Run ls on /autoindir/sharenfs to trigger the mount.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 etc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># ls /autoindir/sharenfs</span>
</span></span><span style="display:flex;"><span>test.text</span></span></code></pre></div>
<ul>
<li>Use <code>df -h</code> to confirm.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server40 etc<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -h</span>
</span></span><span style="display:flex;"><span>Filesystem             Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>devtmpfs               4.0M     <span style="color:#ff9f43">0</span>  4.0M   0% /dev
</span></span><span style="display:flex;"><span>tmpfs                  888M     <span style="color:#ff9f43">0</span>  888M   0% /dev/shm
</span></span><span style="display:flex;"><span>tmpfs                  356M  5.1M  351M   2% /run
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-root   17G  2.2G   15G  13% /
</span></span><span style="display:flex;"><span>/dev/sda1              960M  344M  617M  36% /boot
</span></span><span style="display:flex;"><span>tmpfs                  178M     <span style="color:#ff9f43">0</span>  178M   0% /run/user/0
</span></span><span style="display:flex;"><span>server30:/common        17G  2.2G   15G  13% /autoindir/sharenfs</span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="local-file-systems-and-swap">Local File Systems and Swap</h1>

<h2 id="file-systems-and-file-system-types">File Systems and File System Types</h2>
<p><strong>File systems</strong></p>
<ul>
<li>Can be optimized, resized, mounted, and unmounted independently.</li>
<li>Must be connected to the directory hierarchy in order to be accessed by users and applications.</li>
<li>Mounting may be accomplished automatically at system boot or manually as required.</li>
<li>Can be mounted or unmounted using their unique identifiers, labels, or device files.</li>
<li>Each file system is created in a discrete partition, VDO volume, or logical volume.</li>
<li>A typical production RHEL system usually has numerous file systems.</li>
<li>During OS installation, only two file systems&mdash; / and /boot &mdash;are created in the default disk layout, but you can design a custom disk layout and construct separate containers to store dissimilar information.</li>
<li>Typical additional file systems that may be created during an installation are /home, /opt, /tmp, /usr, and /var.</li>
<li>/ and /boot&mdash;are required for installation and booting.</li>
</ul>
<p>Storing disparate data in distinct file systems versus storing all data in a single file system offers the following advantages:</p>
<ul>
<li>Make any file system accessible (mount) or inaccessible (unmount) to users independent of other file systems. This hides or reveals information contained in that file system.</li>
<li>Perform file system repair activities on individual file systems</li>
<li>Keep dissimilar data in separate file systems</li>
<li>Optimize or tune each file system independently</li>
<li>Grow or shrink a file system independent of other file systems</li>
</ul>
<p>3 types of file systems:</p>
<ul>
<li>disk-based, network-based, and memory-based.</li>
</ul>
<p><strong>Disk-based</strong></p>
<ul>
<li>Typically created on physical drives using SATA, USB, Fibre Channel, and other technologies.</li>
<li>store information persistently</li>
</ul>
<p><strong>Network-based</strong></p>
<ul>
<li>Essentially disk-based file systems shared over the network for remote access.</li>
<li>store information persistently</li>
</ul>
<p><strong>Memory-based</strong></p>
<ul>
<li>Virtual</li>
<li>Created at system startup and destroyed when the system goes down.</li>
<li>data saved in virtual file systems does not survive across system reboots.</li>
</ul>
<p>Ext3</p>
<ul>
<li>Disk based</li>
<li>The third generation of the extended filesystem.</li>
<li>Metadata journaling for faster recovery</li>
<li>Superior reliability</li>
<li>Creation of up to 32,000 subdirectories</li>
<li>supports larger file systems and bigger files than its predecessor</li>
</ul>
<p>Ext4</p>
<ul>
<li>Disk based</li>
<li>Successor to Ext3.
<ul>
<li>Supports all features of Ext3 in addition to:
<ul>
<li>Larger file system size</li>
<li>Bigger file size</li>
<li>Unlimited number of subdirectories</li>
<li>Metadata and quota journaling</li>
<li>Extended user attributes</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>XFS</p>
<ul>
<li>Disk based</li>
<li>Highly scalable and high-performing 64-bit file system.</li>
<li>Supports:
<ul>
<li>Metadata journaling for faster crash recovery</li>
<li>Online defragmentation, expansion, quota journaling, and extended user attributes</li>
</ul>
</li>
<li>default file system type in RHEL 9.</li>
</ul>
<p>VFAT</p>
<ul>
<li>Disk based</li>
<li>Used for post-Windows 95 file system formats on hard disks, USB drives, and floppy disks.</li>
</ul>
<p>ISO9660</p>
<ul>
<li>Disk based</li>
<li>Used for optical file systems such as CD and DVD.</li>
</ul>
<p>NFS - (Network File System.)</p>
<ul>
<li>Network based</li>
<li>Shared directory or file system for remote access by other Linux systems.</li>
</ul>
<p>AutoFS  (Auto File System)</p>
<ul>
<li>Network based</li>
<li>NFS file system set to mount and unmount automatically on remote client systems.</li>
</ul>
<h3 id="extended-file-systems">Extended File Systems</h3>
<ul>
<li>First generation is obsolete and is no longer supported</li>
<li>Second, third, and fourth generations are currently available and supported.</li>
<li>Fourth generation is the latest in the series and is superior in features and enhancements to its predecessors.</li>
<li>Structure is built on a partition or logical volume at the time of file system creation.</li>
<li>Structure is divided into two sets:
<ul>
<li><strong>first set</strong> holds the file system&rsquo;s <strong>metadata</strong> and it is very tiny.
<ul>
<li>Superblock
<ul>
<li>keeps vital file system structural information:
<ul>
<li>type</li>
<li>size</li>
<li>status of the file system</li>
<li>number of data blocks it contains</li>
<li>automatically replicated and maintained at various known locations throughout the file system.</li>
<li>primary superblock
<ul>
<li>superblock at the beginning of the file system</li>
</ul>
</li>
<li>backup superblocks.
<ul>
<li>I used to supplant the corrupted or lost primary superblock to bring the file system back to its normal state.</li>
<li>Copy of the primary</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Inode table
<ul>
<li>maintains a list of index node (inode) numbers.</li>
<li>Each file is assigned an <strong>inode number</strong> at the time of its creation, and the inode number
<ul>
<li>holds the file&rsquo;s attributes such as:
<ul>
<li>type</li>
<li>permissions</li>
<li>ownership</li>
<li>owning group</li>
<li>size</li>
<li>last access/modification time</li>
<li>holds and keeps track of the pointers to the actual data blocks where the file contents are located.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>second set</strong> stores the actual data, and it occupies almost the entire partition or the logical volume (VDO and LVM) space.\</li>
</ul>
</li>
</ul>
<p><strong>journaling</strong></p>
<ul>
<li>
<p>Supported by Ext3 and Ext4</p>
</li>
<li>
<p>Recover swiftly after a system crash.</p>
</li>
<li>
<p>keep track of recent changes in their metadata in a journal (or log).</p>
</li>
<li>
<p>Each metadata update is written in its entirety to the journal after completion.</p>
</li>
<li>
<p>The system peruses the journal of each extended file system following the reboot after a crash to determine if there are any errors</p>
</li>
<li>
<p>Lets the system recover the file system rapidly using the latest metadata information stored in its journal.</p>
</li>
<li>
<p>Ext3 that supports file systems up to 16TiB and files up to 2TiB,</p>
</li>
<li>
<p>Ext4 supports very large file systems up to 1EiB (ExbiByte) and files up to 16TiB (TebiByte).</p>
<ul>
<li>Uses a series of contiguous physical blocks on the hard disk called extents, resulting in improved read and write performance with reduced fragmentation.</li>
<li>Supports extended user attributes, metadata and quota journaling, etc.</li>
</ul>
</li>
</ul>
<h3 id="xfs-file-system">XFS File System</h3>
<ul>
<li>High-performing 64-bit extent-based journaling file system type.</li>
<li>Allows the creation of file systems and files up to 8EiB (ExbiByte).</li>
<li>Does not run file system checks at system boot</li>
<li>Relies on you to use the <code>xfs_repair</code> utility to manually fix any issues.</li>
<li>Sets the extended user attributes and certain mount options by default on new file systems.</li>
<li>Enables defragmentation on mounted and active file systems to keep as much data in contiguous blocks as possible for faster access.</li>
<li>Inability to shrink.</li>
<li>Uses journaling for metadata operations, guaranteeing the consistency of the file system against abnormal or forced unmounting.</li>
<li>Journal information is read and any pending metadata transactions are replayed when the XFS file system is remounted.</li>
<li>Speedy input/output performance.</li>
<li>Can be snapshot in a mounted, active state.</li>
</ul>
<h3 id="vfat-file-system">VFAT File System</h3>
<ul>
<li>Extension to the legacy FAT file system (FAT16)</li>
<li>Supports 255 characters in filenames including spaces and periods</li>
<li>Does not differentiate between lowercase and uppercase letters.</li>
<li>Primarily used on removable media, such as floppy and USB flash drives, for exchanging data between Linux and Windows.</li>
</ul>
<h3 id="iso9660-file-system">ISO9660 File System</h3>
<ul>
<li>For removable optical disc media such as CD/DVD drives</li>
</ul>
<h1 id="file-system-management">File System Management</h1>
<h4 id="file-system-administration-commands">File System Administration Commands</h4>
<ul>
<li>Some are limited to their operations on the Extended, XFS, or VFAT file system type.</li>
<li>Others are general and applicable to all file system types.</li>
</ul>
<h4 id="extended-file-system-management-commands">Extended File System Management Commands</h4>
<p><code>e2label</code></p>
<ul>
<li>Modifies the label of a file system</li>
</ul>
<p><code>tune2fs</code></p>
<ul>
<li>Tunes or displays file system attributes</li>
</ul>
<h4 id="xfs-management-commands">XFS Management Commands</h4>
<p><code>xfs_admin  </code></p>
<ul>
<li>Tunes file system attributes</li>
</ul>
<p><code>xfs_growfs </code></p>
<ul>
<li>Extends the size of a file system</li>
</ul>
<p><code>xfs_info  </code></p>
<ul>
<li>Exhibits information about a file system</li>
</ul>
<h4 id="general-file-system-commands">General File System Commands</h4>
<p><code>blkid  </code></p>
<ul>
<li>Displays block device attributes including their UUIDs and labels</li>
</ul>
<p><code>df </code></p>
<ul>
<li>Reports file system utilization</li>
</ul>
<p><code>du   </code></p>
<ul>
<li>Calculates disk usage of directories and file systems</li>
</ul>
<p><code>fsadm   </code></p>
<ul>
<li>Resizes a file system. This command is automatically invoked when the <code>lvresize</code> command is run with the <code>-r</code> switch.</li>
</ul>
<p><code>lsblk  </code></p>
<ul>
<li>Lists block devices and file systems and their attributes including their UUIDs and labels</li>
</ul>
<p><code>mkfs  </code></p>
<ul>
<li>Creates a file system. Use the <code>-t</code> option and specify ext3, ext4, vfat, or xfs file system type.</li>
</ul>
<p><code>mount    </code></p>
<ul>
<li>Mount a file system for user access.</li>
<li>Display currently mounted file systems.</li>
</ul>
<p><code>umount   </code></p>
<ul>
<li>Unmount a file system.</li>
</ul>
<h3 id="mounting-and-unmounting-file-systems">Mounting and Unmounting File Systems</h3>
<ul>
<li>File system must be connected to the directory structure at a desired attachment point, (mount point)</li>
<li>A mount point in essence is any empty directory that is created and used for this purpose.</li>
</ul>
<p>Use the mount command to view information about xfs mounted file systems:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount -t xfs</span>
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-root on / <span style="color:#ff5c57">type</span> xfs <span style="color:#ff6ac1">(</span>rw,relatime,seclabel,attr2,inode64,logbufs<span style="color:#ff6ac1">=</span>8,logbsize<span style="color:#ff6ac1">=</span>32k,noquota<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>/dev/sda1 on /boot <span style="color:#ff5c57">type</span> xfs <span style="color:#ff6ac1">(</span>rw,relatime,seclabel,attr2,inode64,logbufs<span style="color:#ff6ac1">=</span>8,logbsize<span style="color:#ff6ac1">=</span>32k,noquota<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<h4 id="mount-command">Mount command</h4>
<ul>
<li><code>-t</code> option
<ul>
<li>type.</li>
</ul>
</li>
<li>Mount a file system to a mount point.</li>
<li>Performed with the root user privileges.</li>
<li>Requires the absolute pathnames of the file system block device and the mount point name.</li>
<li>Accepts the UUID or label of the file system in lieu of the block device name.</li>
<li>Mount all or a specific type of file system.</li>
<li>Upon successful mount, the kernel places an entry for the file system in the <em>/proc/self/mounts</em> file.</li>
<li>A mount point should be empty when an attempt is made to mount a file system on it, otherwise the content of the mount point will hide.</li>
<li>The mount point must not be in use or the mount attempt will fail.</li>
</ul>
<p><strong>auto (noauto)</strong></p>
<ul>
<li>Mounts (does not mount) the file system when the <code>-a</code> option is specified</li>
</ul>
<p><strong>defaults</strong></p>
<ul>
<li>Mounts a file system with all the default values (async, auto, rw, etc.)</li>
</ul>
<p><strong>_netdev</strong></p>
<ul>
<li>Used for a file system that requires network connectivity in place before it can be mounted. NFS is an example.</li>
</ul>
<p><strong>remount</strong></p>
<ul>
<li>Remounts an already mounted file system to enable or disable an option</li>
</ul>
<p><strong>ro (rw)</strong></p>
<ul>
<li>Mounts a file system read-only read/write)</li>
</ul>
<h4 id="umount-command">umount Command</h4>
<ul>
<li>Detach a file system from the directory hierarchy and make it inaccessible to users and applications.</li>
<li>Expects the absolute pathname to the block device containing the file system or its mount point name in order to detach it.</li>
<li>Unmount all or a specific type of file system.</li>
<li>Kernel removes the corresponding file system entry from the <em>/proc/self/mounts</em> file after it has been successfully disconnected.</li>
</ul>
<h3 id="determining-the-uuid-of-a-file-system">Determining the UUID of a File System</h3>
<ul>
<li>
<p>Extended and XFS file systems have a 128-bit (32 hexadecimal characters) UUID (Universally Unique IDentifier) assigned to it at the time of its creation.</p>
</li>
<li>
<p>UUIDs assigned to vfat file systems are 32-bit (8 hexadecimal characters) in length.</p>
</li>
<li>
<p>Assigning a UUID makes the file system unique among many other file systems that potentially exist on the system.</p>
</li>
<li>
<p>Persistent across system reboots.</p>
</li>
<li>
<p>Used by default in RHEL 9 in the <em>/etc/fstab</em> file for any file system that is created by the system in a standard partition.</p>
</li>
<li>
<p>RHEL attempts to mount all file systems listed in the <em>/etc/fstab</em> file at reboots.</p>
</li>
<li>
<p>Each file system has an associated device file and UUID, but may or may not have a corresponding label.</p>
</li>
<li>
<p>The system checks for the presence of each file system&rsquo;s device file, UUID, or label, and then attempts to mount it.</p>
</li>
</ul>
<p>Determine the UUID of /boot</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk | grep boot</span>
</span></span><span style="display:flex;"><span>â”œâ”€sda1          8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part /boot</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo xfs_admin -u /dev/sda1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">UUID</span> <span style="color:#ff6ac1">=</span> 630568e1-608f-4603-9b97-e27f82c7d4b4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo blkid /dev/sda1</span>
</span></span><span style="display:flex;"><span>/dev/sda1: <span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;630568e1-608f-4603-9b97-e27f82c7d4b4&#34;</span> <span style="color:#ff5c57">TYPE</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;xfs&#34;</span> <span style="color:#ff5c57">PARTUUID</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;7dcb43e4-01&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lsblk -f /dev/sda1</span>
</span></span><span style="display:flex;"><span>NAME FSTYPE FSVER LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda1 xfs                630568e1-608f-4603-9b97-e27f82c7d4b4  616.1M    36% /boot</span></span></code></pre></div>
<p>For extended file systems, you can use the <code>tune2fs</code>, <code>blkid</code>, or <code>lsblk</code> commands to determine the UUID.</p>
<p>A UUID is also assigned to a file system that is created in a VDO or LVM volume; however, it need not be used in the fstab file, as the device
files associated with the logical volumes are always unique and persistent.</p>
<h3 id="labeling-a-file-system">Labeling a File System</h3>
<ul>
<li>A unique label may be used instead of a UUID to keep the file system association with its device file exclusive and persistent across system reboots.</li>
<li>A label is limited to a maximum of 12 characters on the XFS file system</li>
<li>16 characters on the Extended file system.</li>
<li>By default, no labels are assigned to a file system at the time of its creation.</li>
</ul>
<p>The <em>/boot</em> file system is located in the <em>/dev/sda1</em> partition and its type is XFS. You can use the <code>xfs_admin</code> or the <code>lsblk</code> command as follows to
determine its label:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo xfs_admin -l /dev/sda1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">label</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lsblk -f /dev/sda1</span>
</span></span><span style="display:flex;"><span>NAME FSTYPE FSVER LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda1 xfs                630568e1-608f-4603-9b97-e27f82c7d4b4  616.1M    36% /boot</span></span></code></pre></div>
<ul>
<li>Not needed on a file system if you intend to use its UUID or if it is created in a logical volume</li>
<li>You can still apply one using the <code>xfs_admin</code> command with the <code>-L</code> option.</li>
<li>Labeling an XFS file system requires that the target file system be unmounted.</li>
</ul>
<p>unmount /boot, set the label &ldquo;bootfs&rdquo; on its device file, and remount it:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo umount /boot</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo xfs_admin -L bootfs /dev/sda1</span>
</span></span><span style="display:flex;"><span>writing all SBs
</span></span><span style="display:flex;"><span>new <span style="color:#ff5c57">label</span> <span style="color:#ff6ac1">=</span> <span style="color:#5af78e">&#34;bootfs&#34;</span></span></span></code></pre></div>
<p>Confirm the new label by executing <code>sudo xfs_admin -l /dev/sda1</code> or <code>sudo lsblk -f /dev/sda1</code>.</p>
<p>For extended file systems, you can use the <code>e2label</code> command to apply a label and the <code>tune2fs</code>, <code>blkid</code>, and <code>lsblk</code> commands to view and verify.</p>
<p>Now you can replace the <code>UUID=\&quot;22d05484-6ae1-4ef8-a37d-abab674a5e35</code>&quot; for /boot in the fstab file with <code>LABEL=bootfs</code>, and unmount and remount /boot as demonstrated above for confirmation.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount /boot</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.</span></span></code></pre></div>
<p>A label may also be applied to a file system created in a logical volume; however, it is not recommended for use in the fstab file, as the
device files for logical volumes are always unique and remain persistent across system reboots.</p>
<h3 id="automatically-mounting-a-file-system-at-reboots">Automatically Mounting a File System at Reboots</h3>
<h4 id="etcfstab"><em>/etc/fstab</em></h4>
<ul>
<li>File systems defined in the <em>/etc/fstab</em> file are mounted automatically at reboots.</li>
<li>Must contain proper and complete information for each listed file system.</li>
<li>An incomplete or inaccurate entry might leave the system in an undesirable or unbootable state.</li>
<li>Only need to specify one of the four attributes
<ul>
<li>Block device name</li>
<li>UUID</li>
<li>label</li>
<li>mount point</li>
</ul>
</li>
<li>The <code>mount</code> command obtains the rest of the information from this file.</li>
<li>Only need to specify one of these attributes with the <code>umount</code> command to detach it from the directory hierarchy.</li>
<li>Contains entries for file systems that are created at the time of installation.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /etc/fstab</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># /etc/fstab</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Created by anaconda on Sun Feb 25 12:11:47 2024</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># Accessible filesystems, by reference, are maintained under &#39;/dev/disk/&#39;.</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># After editing this file, run &#39;systemctl daemon-reload&#39; to update systemd</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e"># units generated from this file.</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#</span>
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-root   /                       xfs     defaults        <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">LABEL</span><span style="color:#ff6ac1">=</span>bootfs /boot                   xfs     defaults        <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-swap   none                    swap    defaults        <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>EXAM TIP: Any missing or invalid entry in this file may render the system unbootable. You will have to boot the system in emergency mode to fix this file. Ensure that you understand each field in the file for both file system and swap entries.</p>
<p>The format of this file is such that each row is broken out into six columns to identify the required attributes for each file system to be successfully mounted. Here is what the columns contain:</p>
<p>Column 1:</p>
<ul>
<li>physical or virtual device path where the file system is resident, or its associated UUID or label.</li>
<li>can be entries for network file systems here as well.</li>
</ul>
<p>Column 2:</p>
<ul>
<li>Identifies the mount point for the file system.</li>
<li>swap partitions, use either &ldquo;none&rdquo; or &ldquo;swap&rdquo;.</li>
</ul>
<p>Column 3:</p>
<ul>
<li>Type of file system such as Ext3, Ext4, XFS, VFAT, or ISO9660.</li>
<li>For swap, the type &ldquo;swap&rdquo; is used.</li>
<li>may use &ldquo;auto&rdquo; instead to leave it up to the mount command to determine the type of the file system.</li>
</ul>
<p>Column 4:</p>
<ul>
<li>Identifies one or more comma-separated options to be used when mounting the file system.</li>
<li>Consult the manual pages of the <code>mount</code> command or the fstab file for additional options and details.</li>
</ul>
<p>Column 5:</p>
<ul>
<li>Used by the dump utility to ascertain the file systems that need to be dumped.</li>
<li>Value of 0 (or the absence of this column) disables this check.</li>
<li>This field is applicable only on Extended file systems;</li>
<li>XFS does not use it.</li>
</ul>
<p>Column 6:</p>
<ul>
<li>
<p>Sequence number in which to run the <code>e2fsck</code> (file system check and repair utility for Extended file system types) utility on the file system at system boot.</p>
</li>
<li>
<p>By default, 0 is used for memory-based, remote, and removable file systems, 1 for /, and 2 for /boot and other physical file systems. 0 can also be used for /, /boot, and other physical file systems you don&rsquo;t want to be checked or repaired.</p>
</li>
<li>
<p>Applicable only on Extended file systems;</p>
</li>
<li>
<p>XFS does not use it.</p>
</li>
<li>
<p>0 in columns 5 and 6 for XFS, virtual, remote, and removable file system types has no meaning. You do not need to add them for these file system types.</p>
</li>
</ul>
<h2 id="lab-create-and-mount-ext4-vfat-and-xfs-file-systems-in-partitions-server2">Lab: Create and Mount Ext4, VFAT, and XFS File Systems in Partitions (server2)</h2>
<ul>
<li>Create 2 x 100MB partitions on the /dev/sdb disk,</li>
<li>initialize them separately with the Ext4 and VFAT file system types,</li>
<li>define them for persistence using their UUIDs,</li>
<li>create mount points called /ext4fs1 and /vfatfs1,</li>
<li>attach them to the directorystructure</li>
<li>verify their availability and usage</li>
<li>you will use the disk /dev/sdc and repeat the above procedure to establish an XFS file system in it and mount it on /xfsfs1.</li>
</ul>
<p>1. Apply the label &ldquo;msdos&rdquo; to the sdb disk using the parted command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mklabel msdos</span>
</span></span><span style="display:flex;"><span>Warning: The existing disk label on /dev/sdb will be destroyed and all data on this disk will be
</span></span><span style="display:flex;"><span>lost. Do you want to <span style="color:#ff6ac1">continue</span>?
</span></span><span style="display:flex;"><span>Yes/No? y                                                                 
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<p>2. Create 2 x 100MB primary partitions on sdb with the parted command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mkpart primary 1 101m</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mkpart primary 102 201m</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<p>3. Initialize the first partition (sdb1) with Ext4 file system type using the mkfs command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs -t ext4 /dev/sdb1</span>
</span></span><span style="display:flex;"><span>mke2fs 1.46.5 <span style="color:#ff6ac1">(</span>30-Dec-2021<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>/dev/sdb1 contains a LVM2_member file system
</span></span><span style="display:flex;"><span>Proceed anyway? <span style="color:#ff6ac1">(</span>y,N<span style="color:#ff6ac1">)</span> y
</span></span><span style="display:flex;"><span>Creating filesystem with <span style="color:#ff9f43">97280</span> 1k blocks and <span style="color:#ff9f43">24288</span> inodes
</span></span><span style="display:flex;"><span>Filesystem UUID: 73db0582-7183-42aa-951d-2f48b7712597
</span></span><span style="display:flex;"><span>Superblock backups stored on blocks: 
</span></span><span style="display:flex;"><span>	8193, 24577, 40961, 57345, <span style="color:#ff9f43">73729</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Allocating group tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Writing inode tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Creating journal <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4096</span> blocks<span style="color:#ff6ac1">)</span>: <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span>Writing superblocks and filesystem accounting information: <span style="color:#ff6ac1">done</span> </span></span></code></pre></div>
<p>4. Initialize the second partition (sdb2) with VFAT file system type using the mkfs command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs -t vfat /dev/sdb2</span>
</span></span><span style="display:flex;"><span>mkfs.fat 4.2 <span style="color:#ff6ac1">(</span>2021-01-31<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<p>5. Initialize the whole disk (sdc) with the XFS file system type using the mkfs.xfs command. Add the -f flag to force the removal of any old partitioning or labeling information from the disk.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs.xfs /dev/sdc -f </span>
</span></span><span style="display:flex;"><span>Filesystem should be larger than 300MB.
</span></span><span style="display:flex;"><span>Log size should be at least 64MB.
</span></span><span style="display:flex;"><span>Support <span style="color:#ff6ac1">for</span> filesystems like this one is deprecated and they will not be supported in future releases.
</span></span><span style="display:flex;"><span>meta-data<span style="color:#ff6ac1">=</span>/dev/sdc               <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4, <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">16000</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>64000, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>1368, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks, lazy-count<span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>6. Determine the UUIDs for all three file systems using the lsblk command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk -f /dev/sdb /dev/sdc</span>
</span></span><span style="display:flex;"><span>NAME   FSTYPE FSVER LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdb                                                                           
</span></span><span style="display:flex;"><span>â”œâ”€sdb1 ext4   1.0         0bdd22d0-db53-40bb-8cc7-36efc9184196                
</span></span><span style="display:flex;"><span>â””â”€sdb2 vfat   FAT16       FB3A-6572                                           
</span></span><span style="display:flex;"><span>sdc    xfs                91884326-9686-4569-96fa-9adb02c1f6f4&gt;<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<p>7. Open the /etc/fstab file, go to the end of the file, and append entries for the file systems for persistence using their UUIDs:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span>0bdd22d0-db53-40bb-8cc7-36efc9184196 /ext4fs1 ext4 defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>                
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span>FB3A-6572 /vfatfs1 vfat defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>                                          
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span>91884326-9686-4569-96fa-9adb02c1f6f4 /xfsfs1 xfs defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>8. Create mount points /ext4fs1, /vfatfs1, and /xfsfs1 for the three
file systems using the mkdir command:
<code>[root@server2 ~]# sudo mkdir /ext4fs1 /vfatfs1 /xfsfs1</code></p>
<p>9. Mount the new file systems using the mount command. This command will fail if there are any invalid or missing information in the file.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mount -a</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.</span></span></code></pre></div>
<p>10. View the mount and availability status as well as the types of all three file systems using the df command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -hT</span>
</span></span><span style="display:flex;"><span>Filesystem            Type      Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>devtmpfs              devtmpfs  4.0M     <span style="color:#ff9f43">0</span>  4.0M   0% /dev
</span></span><span style="display:flex;"><span>tmpfs                 tmpfs     888M     <span style="color:#ff9f43">0</span>  888M   0% /dev/shm
</span></span><span style="display:flex;"><span>tmpfs                 tmpfs     356M  5.1M  351M   2% /run
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-root xfs        17G  2.0G   15G  12% /
</span></span><span style="display:flex;"><span>/dev/sda1             xfs       960M  344M  617M  36% /boot
</span></span><span style="display:flex;"><span>tmpfs                 tmpfs     178M     <span style="color:#ff9f43">0</span>  178M   0% /run/user/0
</span></span><span style="display:flex;"><span>/dev/sdb1             ext4       84M   14K   77M   1% /ext4fs1
</span></span><span style="display:flex;"><span>/dev/sdb2             vfat       95M     <span style="color:#ff9f43">0</span>   95M   0% /vfatfs1
</span></span><span style="display:flex;"><span>/dev/sdc              xfs       245M   15M  231M   6% /xfsfs1</span></span></code></pre></div>
<h2 id="lab-create-and-mount-ext4-and-xfs-file-systems-in-lvm-logical-volumes-server2">Lab: Create and Mount Ext4 and XFS File Systems in LVM Logical Volumes (server2)</h2>
<ul>
<li>Create a volume group called <em>vgfs</em> comprised of a 172MB physical volume created in a partition on the <em>/dev/sdd</em> disk.</li>
<li>The PE size for the volume group should be set at 16MB.</li>
<li>Create two logical volumes called <em>ext4vol</em> and <em>xfsvol</em> of sizes 80MB each and initialize them with the Ext4 and XFS file system types.</li>
<li>Ensure that both file systems are persistently defined using their logical volume device filenames.</li>
<li>Create mount points called /ext4fs2 and /xfsfs2,</li>
<li>Mount the file systems.</li>
<li>Verify their availability and usage.</li>
</ul>
<p>1. Create a 172MB partition on the sdd disk using the parted command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd mkpart pri 1 172m</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<p>2. Initialize the sdd1 partition for use in LVM using the pvcreate command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdd1</span>
</span></span><span style="display:flex;"><span>  Device /dev/sdb2 has updated name <span style="color:#ff6ac1">(</span>devices file /dev/sdd2<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>  Device /dev/sdb1 has no PVID <span style="color:#ff6ac1">(</span>devices file brKVLFEG3AoBzhWoso0Sa1gLYHgNZ4vL<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> successfully created.</span></span></code></pre></div>
<p>3. Create the volume group vgfs with a PE size of 16MB using the physical volume sdd1:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgcreate -s 16 vgfs /dev/sdd1</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgfs&#34;</span> successfully created</span></span></code></pre></div>
<p>The PE size is not easy to alter after a volume group creation, so ensure it is defined as required at creation.</p>
<p>4. Create two logical volumes ext4vol and xfsvol of size 80MB each in vgfs using the <code>lvcreate</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -n ext4vol -L 80 vgfs</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;ext4vol&#34;</span> created.
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate  -n xfsvol -L 80 vgfs</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;xfsvol&#34;</span> created.</span></span></code></pre></div>
<p>5. Format the ext4vol logical volume with the Ext4 file system type using the mkfs.ext4 command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs.ext4 /dev/vgfs/ext4vol</span>
</span></span><span style="display:flex;"><span>mke2fs 1.46.5 <span style="color:#ff6ac1">(</span>30-Dec-2021<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Creating filesystem with <span style="color:#ff9f43">81920</span> 1k blocks and <span style="color:#ff9f43">20480</span> inodes
</span></span><span style="display:flex;"><span>Filesystem UUID: 4ed1fef7-2164-485b-8035-7f627cd59419
</span></span><span style="display:flex;"><span>Superblock backups stored on blocks: 
</span></span><span style="display:flex;"><span>	8193, 24577, 40961, 57345, <span style="color:#ff9f43">73729</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Allocating group tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Writing inode tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Creating journal <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4096</span> blocks<span style="color:#ff6ac1">)</span>: <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span>Writing superblocks and filesystem accounting information: <span style="color:#ff6ac1">done</span></span></span></code></pre></div>
<p>You can also use <code>sudo mkfs -t ext4 /dev/vgfs/ext4vol</code>.</p>
<p>6. Format the xfsvol logical volume with the XFS file system type using the mkfs.xfs command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs.xfs /dev/vgfs/xfsvol</span>
</span></span><span style="display:flex;"><span>Filesystem should be larger than 300MB.
</span></span><span style="display:flex;"><span>Log size should be at least 64MB.
</span></span><span style="display:flex;"><span>Support <span style="color:#ff6ac1">for</span> filesystems like this one is deprecated and they will not be supported in future releases.
</span></span><span style="display:flex;"><span>meta-data<span style="color:#ff6ac1">=</span>/dev/vgfs/xfsvol       <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4, <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">5120</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>20480, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>1368, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks, lazy-count<span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>You may also use <code>sudo mkfs -t xfs /dev/vgfs/xfsvol</code> instead.</p>
<p>7. Open the /etc/fstab file, go to the end of the file, and append entries for the file systems for persistence using their device files:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/dev/vgfs/ext4vol /ext4fs2 ext4 defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>/dev/vgfs/xfsvol /xfsfs2 xfs defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>8. Create mount points /ext4fs2 and /xfsfs2 using the mkdir command:
<code>[root@server2 ~]# sudo mkdir /ext4fs2 /xfsfs2</code></p>
<p>9. Mount the new file systems using the mount command. This command will fail if there is any invalid or missing information in the file.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mount -a</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.</span></span></code></pre></div>
<p>10. View the mount and availability status as well as the types of the
new LVM file systems using the lsblk and df commands:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdd</span>
</span></span><span style="display:flex;"><span>NAME             MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdd                8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€sdd1             8:49   <span style="color:#ff9f43">0</span>  163M  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€vgfs-ext4vol 253:2    <span style="color:#ff9f43">0</span>   80M  <span style="color:#ff9f43">0</span> lvm  /ext4fs2
</span></span><span style="display:flex;"><span>  â””â”€vgfs-xfsvol  253:3    <span style="color:#ff9f43">0</span>   80M  <span style="color:#ff9f43">0</span> lvm  /xfsfs2
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -hT | grep fs2</span>
</span></span><span style="display:flex;"><span>/dev/mapper/vgfs-ext4vol ext4       70M   14K   64M   1% /ext4fs2
</span></span><span style="display:flex;"><span>/dev/mapper/vgfs-xfsvol  xfs        75M  4.8M   70M   7% /xfsfs2</span></span></code></pre></div>
<h3 id="lab-resize-ext4-and-xfs-file-systems-in-lvm-logical-volumes-server-2">Lab: Resize Ext4 and XFS File Systems in LVM Logical Volumes (server 2)</h3>
<ul>
<li>Grow the size of the <em>vgfs</em> volume group that was created in the last lab by adding the whole <em>sde</em> disk to it.</li>
<li>Extend the <em>ext4vol</em> logical volume along with the file system it contains by 40MB using two separate commands.</li>
<li>Extend the <em>xfsvol</em> logical volume along with the file system it contains by 40MB using a single command.</li>
<li>Verify the new extensions.</li>
</ul>
<p>1. Initialize the sde disk and add it to the vgfs volume group:</p>
<p>sde had a gpt partition table with no partitions ran the following to reset it:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># dd if=/dev/zero of=/dev/sde bs=1M count=2 conv=fsync</span>
</span></span><span style="display:flex;"><span>2+0 records in
</span></span><span style="display:flex;"><span>2+0 records out
</span></span><span style="display:flex;"><span><span style="color:#ff9f43">2097152</span> bytes <span style="color:#ff6ac1">(</span>2.1 MB, 2.0 MiB<span style="color:#ff6ac1">)</span> copied, 0.0102036 s, <span style="color:#ff9f43">206</span> MB/s
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo partprobe /dev/sde</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sde</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sde&#34;</span> successfully created.</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sde</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sde&#34;</span> successfully created.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgextend vgfs /dev/sde</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgfs&#34;</span> successfully extended</span></span></code></pre></div>
<p>2. Confirm the new size of vgfs using the <code>vgs</code> and <code>vgdisplay</code> commands:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs</span>
</span></span><span style="display:flex;"><span>  VG   <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree  </span>
</span></span><span style="display:flex;"><span>  rhel   <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g      <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vgfs   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- 400.00m 240.00m</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgdisplay vgfs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgfs
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">4</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  VG Size               400.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">25</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">10</span> / 160.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">15</span> / 240.00 MiB
</span></span><span style="display:flex;"><span>  VG UUID               amDADJ-I4dH-jQUF-RFcE-58iL-jItl-5ti6LS</span></span></code></pre></div>
<p>There are now two physical volumes in the volume group and the total size increased to 400MiB.</p>
<p>3. Grow the logical volume ext4vol and the file system it holds by 40MB using the <code>lvextend</code> and <code>fsadm</code> command pair. Make sure to use an uppercase L to specify the size. The default unit is MiB. The plus sign (+) signifies an addition to the current size.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvextend -L +40 /dev/vgfs/ext4vol</span>
</span></span><span style="display:flex;"><span>  Rounding size to boundary between physical extents: 48.00 MiB.
</span></span><span style="display:flex;"><span>  Size of logical volume vgfs/ext4vol changed from 80.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">5</span> extents<span style="color:#ff6ac1">)</span> to 128.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">8</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vgfs/ext4vol successfully resized.
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo fsadm resize /dev/vgfs/ext4vol</span>
</span></span><span style="display:flex;"><span>resize2fs 1.46.5 <span style="color:#ff6ac1">(</span>30-Dec-2021<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Filesystem at /dev/mapper/vgfs-ext4vol is mounted on /ext4fs2; on-line resizing required
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">old_desc_blocks</span> <span style="color:#ff6ac1">=</span> 1, <span style="color:#ff5c57">new_desc_blocks</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>The filesystem on /dev/mapper/vgfs-ext4vol is now <span style="color:#ff9f43">131072</span> <span style="color:#ff6ac1">(</span>1k<span style="color:#ff6ac1">)</span> blocks long.</span></span></code></pre></div>
<p>The resize subcommand instructs the <code>fsadm</code> command to grow the file system to the full length of the specified logical volume.</p>
<p>4. Grow the logical volume xfsvol and the file system (-r) it holds by (+) 40MB using the lvresize command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvresize -r -L +40 /dev/vgfs/xfsvol</span>
</span></span><span style="display:flex;"><span>  Rounding size to boundary between physical extents: 48.00 MiB.
</span></span><span style="display:flex;"><span>  Size of logical volume vgfs/xfsvol changed from 80.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">5</span> extents<span style="color:#ff6ac1">)</span> to 128.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">8</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  File system xfs found on vgfs/xfsvol mounted at /xfsfs2.
</span></span><span style="display:flex;"><span>  Extending file system xfs to 128.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">134217728</span> bytes<span style="color:#ff6ac1">)</span> on vgfs/xfsvol...
</span></span><span style="display:flex;"><span>xfs_growfs /dev/vgfs/xfsvol
</span></span><span style="display:flex;"><span>meta-data<span style="color:#ff6ac1">=</span>/dev/mapper/vgfs-xfsvol <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4, <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">5120</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>20480, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>1368, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks, lazy-count<span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>data blocks changed from <span style="color:#ff9f43">20480</span> to <span style="color:#ff9f43">32768</span>
</span></span><span style="display:flex;"><span>xfs_growfs <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span>  Extended file system xfs on vgfs/xfsvol.
</span></span><span style="display:flex;"><span>  Logical volume vgfs/xfsvol successfully resized.</span></span></code></pre></div>
<p>5. Verify the new extensions to both logical volumes using the <code>lvs</code> command. You may also issue the <code>lvdisplay</code> or <code>vgdisplay</code> command instead.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs | grep vol</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  ext4vol vgfs -wi-ao---- 128.00m                                                    
</span></span><span style="display:flex;"><span>  xfsvol  vgfs -wi-ao---- 128.00m   </span></span></code></pre></div>
<p>6. Check the new sizes and the current mount status for both file systems using the <code>df</code> and <code>lsblk</code> commands:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -hT | grep -E &#39;ext4vol|xfsvol&#39;</span>
</span></span><span style="display:flex;"><span>/dev/mapper/vgfs-xfsvol  xfs       123M  5.4M  118M   5% /xfsfs2
</span></span><span style="display:flex;"><span>/dev/mapper/vgfs-ext4vol ext4      115M   14K  107M   1% /ext4fs2</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdd /dev/sde</span>
</span></span><span style="display:flex;"><span>NAME             MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdd                8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€sdd1             8:49   <span style="color:#ff9f43">0</span>  163M  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€vgfs-ext4vol 253:2    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  /ext4fs2
</span></span><span style="display:flex;"><span>  â””â”€vgfs-xfsvol  253:3    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  /xfsfs2
</span></span><span style="display:flex;"><span>sde                8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€vgfs-ext4vol   253:2    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  /ext4fs2
</span></span><span style="display:flex;"><span>â””â”€vgfs-xfsvol    253:3    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  /xfsfs2</span></span></code></pre></div>
<h2 id="lab-create-and-mount-xfs-file-system-in-lvm-vdo-volume">Lab: Create and Mount XFS File System in LVM VDO Volume</h2>
<ul>
<li>Create an LVM VDO volume called <em>lvvdo</em> of virtual size 20GB on the 5GB sdf disk in a volume group called <em>vgvdo1</em>.</li>
<li>Initialize the volume with the XFS file system type.</li>
<li>Define it for persistence using its device files.</li>
<li>Create a mount point called <em>/xfsvdo1</em>, attach it to the directory structure.</li>
<li>verify its availability and usage.\</li>
</ul>
<p>1. Initialize the sdf disk using the <code>pvcreate</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdf</span>
</span></span><span style="display:flex;"><span>  WARNING: adding device /dev/sdf with idname t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 which is already used <span style="color:#ff6ac1">for</span> missing device.
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdf&#34;</span> successfully created.</span></span></code></pre></div>
<p>2. Create vgvdo1 volume group using the <code>vgcreate</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgcreate vgvdo1 /dev/sdf</span>
</span></span><span style="display:flex;"><span>  WARNING: adding device /dev/sdf with idname t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 which is already used <span style="color:#ff6ac1">for</span> missing device.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgvdo1&#34;</span> successfully created</span></span></code></pre></div>
<p>3. Display basic information about the volume group:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay vgvdo1</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgvdo1
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">1279</span> / &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  VG UUID               b9u8Ng-m3BF-Jz2b-sBu8-gEG1-bBGQ-sBgrt0</span></span></code></pre></div>
<p>4. Create a VDO volume called lvvdo1 using the <code>lvcreate</code> command. Use the <code>-l</code> option to specify the number of logical extents (1279) to be allocated and the <code>-V</code> option for the amount of virtual space (20GB).</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -n lvvdo -l 1279 -V 20G --type vdo vgvdo1</span>
</span></span><span style="display:flex;"><span>WARNING: vdo signature detected on /dev/vgvdo1/vpool0 at offset 0. Wipe it? <span style="color:#ff6ac1">[</span>y/n<span style="color:#ff6ac1">]</span>: y
</span></span><span style="display:flex;"><span>  Wiping vdo signature on /dev/vgvdo1/vpool0.
</span></span><span style="display:flex;"><span>    The VDO volume can address <span style="color:#ff9f43">2</span> GB in <span style="color:#ff9f43">1</span> data slab.
</span></span><span style="display:flex;"><span>    It can grow to address at most <span style="color:#ff9f43">16</span> TB of physical storage in <span style="color:#ff9f43">8192</span> slabs.
</span></span><span style="display:flex;"><span>    If a larger maximum size might be needed, use bigger slabs.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvvdo&#34;</span> created.</span></span></code></pre></div>
<p>5. Display detailed information about the volume group including the logical volume and the physical volume:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay -v vgvdo1</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgvdo1
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">1279</span> / &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               b9u8Ng-m3BF-Jz2b-sBu8-gEG1-bBGQ-sBgrt0
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgvdo1/vpool0
</span></span><span style="display:flex;"><span>  LV Name                vpool0
</span></span><span style="display:flex;"><span>  VG Name                vgvdo1
</span></span><span style="display:flex;"><span>  LV UUID                nTPKtv-3yTW-J7Cy-HVP1-Aujs-cXZ6-gdS2fI
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-07-01 12:57:56 -0700
</span></span><span style="display:flex;"><span>  LV VDO Pool data       vpool0_vdata
</span></span><span style="display:flex;"><span>  LV VDO Pool usage      60.00%
</span></span><span style="display:flex;"><span>  LV VDO Pool saving     100.00%
</span></span><span style="display:flex;"><span>  LV VDO Operating mode  normal
</span></span><span style="display:flex;"><span>  LV VDO Index state     online
</span></span><span style="display:flex;"><span>  LV VDO Compression st  online
</span></span><span style="display:flex;"><span>  LV VDO Used size       &lt;3.00 GiB
</span></span><span style="display:flex;"><span>  LV Status              NOT available
</span></span><span style="display:flex;"><span>  LV Size                &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgvdo1/lvvdo
</span></span><span style="display:flex;"><span>  LV Name                lvvdo
</span></span><span style="display:flex;"><span>  VG Name                vgvdo1
</span></span><span style="display:flex;"><span>  LV UUID                Z09BdK-ETJk-Gi53-m8Cg-mnTd-RYug-Z9nV0L
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-07-01 12:58:02 -0700
</span></span><span style="display:flex;"><span>  LV VDO Pool name       vpool0
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                20.00 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">5120</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:6
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Physical volumes ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdf     
</span></span><span style="display:flex;"><span>  PV UUID               WKc956-Xp66-L8v9-VA6S-KWM5-5e3X-kx1v0V
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">1279</span> / <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>6. Display the new VDO volume creation using the lsblk command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lsblk /dev/sdf</span>
</span></span><span style="display:flex;"><span>NAME                    MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdf                       8:80   <span style="color:#ff9f43">0</span>   5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€vgvdo1-vpool0_vdata   253:4    <span style="color:#ff9f43">0</span>   5G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>  â””â”€vgvdo1-vpool0-vpool 253:5    <span style="color:#ff9f43">0</span>  20G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>    â””â”€vgvdo1-lvvdo      253:6    <span style="color:#ff9f43">0</span>  20G  <span style="color:#ff9f43">0</span> lvm  </span></span></code></pre></div>
<p>The output shows the virtual volume size (20GB) and the underlying disk size (5GB).</p>
<p>7. Initialize the VDO volume with the XFS file system type using the <code>mkfs.xfs</code> command. The VDO volume device file is
/dev/mapper/vgvdo1-lvvdo as indicated in the above output. Add the <code>-f</code> flag to force the removal of any old partitioning or labeling information from the disk.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs.xfs /dev/mapper/vgvdo1-lvvdo</span>
</span></span><span style="display:flex;"><span>meta-data<span style="color:#ff6ac1">=</span>/dev/mapper/vgvdo1-lvvdo <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4, <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1310720</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>  <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>5242880, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>16384, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>  <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> blks, lazy-count<span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>Discarding blocks...Done.</span></span></code></pre></div>
<p>(lab said vgvdo1-lvvdo1 but it didn&rsquo;t exist for me.)</p>
<p>8. Open the /etc/fstab file, go to the end of the file, and append the following entry for the file system for persistent mounts using its device file:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/dev/mapper/vgvdo1-lvvdo /xfsvdo1 xfs defaults <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span> </span></span></code></pre></div>
<p>9. Create the mount point /xfsvdo1 using the mkdir command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkdir /xfsvdo1</span></span></span></code></pre></div>
<p>10. Mount the new file system using the mount command. This command will fail if there are any invalid or missing information in the file.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mount -a</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.</span></span></code></pre></div>
<p>The mount command with the <code>-a</code> flag is a validation test for the fstab file. It should always be executed after updating this file and before rebooting the server to avoid landing the system in an unbootable state.</p>
<p>11. View the mount and availability status as well as the type of the VDO file system using the <code>lsblk</code> and <code>df</code> commands:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdf</span>
</span></span><span style="display:flex;"><span>NAME                    MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdf                       8:80   <span style="color:#ff9f43">0</span>   5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€vgvdo1-vpool0_vdata   253:4    <span style="color:#ff9f43">0</span>   5G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>  â””â”€vgvdo1-vpool0-vpool 253:5    <span style="color:#ff9f43">0</span>  20G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>    â””â”€vgvdo1-lvvdo      253:6    <span style="color:#ff9f43">0</span>  20G  <span style="color:#ff9f43">0</span> lvm  /xfsvdo1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -hT /xfsvdo1</span>
</span></span><span style="display:flex;"><span>Filesystem               Type  Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>/dev/mapper/vgvdo1-lvvdo xfs    20G  175M   20G   1% /xfsvdo1</span></span></code></pre></div>
<h2 id="monitoring-file-system-usage">Monitoring File System Usage</h2>
<h3 id="df-disk-free-command">df (disk free) command</h3>
<ul>
<li>reports usage details for mounted file systems.</li>
<li>reports the numbers in KBs unless the -m or -h option is specified to view the sizes in MBs or human-readable format.</li>
</ul>
<p>Let&rsquo;s run this command with the -h option on server2:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># df -h</span>
</span></span><span style="display:flex;"><span>Filesystem             Size  Used Avail Use% Mounted on
</span></span><span style="display:flex;"><span>devtmpfs               4.0M     <span style="color:#ff9f43">0</span>  4.0M   0% /dev
</span></span><span style="display:flex;"><span>tmpfs                  888M     <span style="color:#ff9f43">0</span>  888M   0% /dev/shm
</span></span><span style="display:flex;"><span>tmpfs                  356M  5.1M  351M   2% /run
</span></span><span style="display:flex;"><span>/dev/mapper/rhel-root   17G  2.0G   15G  12% /
</span></span><span style="display:flex;"><span>tmpfs                  178M     <span style="color:#ff9f43">0</span>  178M   0% /run/user/0
</span></span><span style="display:flex;"><span>/dev/sda1              960M  344M  617M  36% /boot</span></span></code></pre></div>
<p>Column 1:</p>
<ul>
<li>file system device file or type</li>
</ul>
<p>Columns 2, 3, 4, 5, 6</p>
<ul>
<li>total, used, and available spaces in and the usage percentage and mount point</li>
</ul>
<p>Useful flags</p>
<p><code>-T </code></p>
<ul>
<li>Add the file system type to the output (example: df -hT)</li>
</ul>
<p><code>-x</code></p>
<ul>
<li>Exclude the specified file system type from the output (example: df -hx tmpfs)</li>
</ul>
<p><code>-t </code></p>
<ul>
<li>Limit the output to a specific file system type (example: df -t xfs)</li>
</ul>
<p><code>-i</code></p>
<ul>
<li>show inode information (example: df -hi)</li>
</ul>
<h3 id="calculating-disk-usage">Calculating Disk Usage</h3>
<h3 id="du-command">du command</h3>
<ul>
<li>reports the amount of space a file or directory occupies.</li>
<li>-m or -h option to view the output in MBs or human-readable format. In addition, you can</li>
<li>view a usage summary with the -s switch and a grand total with -c.</li>
</ul>
<p>Run this command on the /usr/bin directory to view the usage summary:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># du -sh /usr/bin</span>
</span></span><span style="display:flex;"><span>151M	/usr/bin</span></span></code></pre></div>
<p>Add a &ldquo;total&rdquo; row to the output and with numbers displayed in KBs:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># du -sc /usr/bin</span>
</span></span><span style="display:flex;"><span>154444	/usr/bin
</span></span><span style="display:flex;"><span>154444	total</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># du -sch /usr/bin</span>
</span></span><span style="display:flex;"><span>151M	/usr/bin
</span></span><span style="display:flex;"><span>151M	total</span></span></code></pre></div>
<p>Try this command with different options on the /usr/sbin/lvm file and observe the results.</p>
<h2 id="swap-and-its-management">Swap and its Management</h2>
<ul>
<li>
<p>Move pages of idle data between physical memory and swap.</p>
</li>
<li>
<p>Swap areas act as extensions to the physical memory.</p>
</li>
<li>
<p>May be activated or deactivated independent of swap spaces located in other partitions and volumes.</p>
</li>
<li>
<p>The system splits the physical memory into small logical chunks called pages and maps their physical locations to virtual locations on the swap to facilitate access by system processors.</p>
</li>
<li>
<p>This physical-to-virtual mapping of pages is stored in a data structure called page table, and it is maintained by the kernel.</p>
</li>
<li>
<p>When a program or process is spawned, it requires space in the physical memory to run and be processed.</p>
</li>
<li>
<p>Although many programs can run concurrently, the physical memory cannot hold all of them at once.</p>
</li>
<li>
<p>The kernel monitors the memory usage.</p>
</li>
<li>
<p>As long as the free memory remains above a high threshold, nothing happens.</p>
</li>
<li>
<p>When the free memory falls below that threshold, the system starts moving selected idle pages of data from physical memory to the swap space to make room to accommodate other programs.</p>
</li>
<li>
<p>This piece in the process is referred to as <strong>page out</strong>.</p>
</li>
<li>
<p>Since the system CPU performs the process execution in around-robin fashion, when the system needs this paged-out data for execution, the CPU looks for that data in the physical memory and a <strong>pagefault</strong> occurs, resulting in moving the pages back to the physical memory from the swap.</p>
</li>
<li>
<p>This return of data to the physical memory is referred to as <strong>page in</strong>.</p>
</li>
<li>
<p>The entire process of paging data out and in is known as <strong>demand paging</strong>.</p>
</li>
<li>
<p>RHEL systems with less physical memory but high memory requirements can become over busy with paging out and in.</p>
</li>
<li>
<p>When this happens, they do not have enough cycles to carry out other useful tasks, resulting in degraded system performance.</p>
</li>
<li>
<p>The excessive amount of paging that affects the system performance is called <strong>thrashing</strong>.</p>
</li>
<li>
<p>When thrashing begins, or when the free physical memory falls below a low threshold, the system deactivates idle processes and prevents new processes from being launched.</p>
</li>
<li>
<p>The idle processes are only reactivated, and new processes are only allowed to be started when the system discovers that the available physical memory has climbed above the threshold level and thrashing has ceased.</p>
</li>
</ul>
<h3 id="determining-current-swap-usage">Determining Current Swap Usage</h3>
<ul>
<li>Size of a swap area should not be less than the amount of physical memory.</li>
<li>Depending on workload requirements, it may be twice the size or larger.</li>
<li>It is also not uncommon to see systems with less swap than the actual amount of physical memory.</li>
<li>This is especially witnessed on systems with a huge physical memory size.</li>
</ul>
<h3 id="free-command"><code>free</code> command</h3>
<ul>
<li>View memory and swap space utilization.</li>
<li>view how much physical memory is installed (total), used (used), available (free), used by shared library routines (shared), holding data before it is written to disk (buffers), and used to store frequently accessed data (cached) on the system. The</li>
<li><code>-h</code>
<ul>
<li>list the values in human-readable format,</li>
</ul>
</li>
<li><code>-k</code>
<ul>
<li>for KB,</li>
</ul>
</li>
<li><code>-m</code>
<ul>
<li>for MB,</li>
</ul>
</li>
<li><code>-g</code>
<ul>
<li>for GB,</li>
</ul>
</li>
<li><code>-t</code>
<ul>
<li>display a line with the &ldquo;total&rdquo; at the bottom of the output.</li>
</ul>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># free -ht</span>
</span></span><span style="display:flex;"><span>               total        used        free      shared  buff/cache   available
</span></span><span style="display:flex;"><span>Mem:           1.7Gi       783Mi       714Mi       5.0Mi       440Mi       991Mi
</span></span><span style="display:flex;"><span>Swap:          2.0Gi          0B       2.0Gi
</span></span><span style="display:flex;"><span>Total:         3.7Gi       783Mi       2.7Gi</span></span></code></pre></div>
<p>Try <code>free -hts 3</code> and <code>free -htc 2</code> to refresh the output every three seconds (-s) and to display the output twice (-c).</p>
<ul>
<li>Reads memory and swap information from the <em>/proc/meminfo</em> file to produce the report. The values are shown in KBs by
default, and they are slightly off from what is shown above with <code>free</code>. Here are the relevant fields from this file:</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /proc/meminfo | grep -E &#39;Mem|Swap&#39;</span>
</span></span><span style="display:flex;"><span>MemTotal:        <span style="color:#ff9f43">1818080</span> kB
</span></span><span style="display:flex;"><span>MemFree:          <span style="color:#ff9f43">731724</span> kB
</span></span><span style="display:flex;"><span>MemAvailable:    <span style="color:#ff9f43">1015336</span> kB
</span></span><span style="display:flex;"><span>SwapCached:            <span style="color:#ff9f43">0</span> kB
</span></span><span style="display:flex;"><span>SwapTotal:       <span style="color:#ff9f43">2097148</span> kB
</span></span><span style="display:flex;"><span>SwapFree:        <span style="color:#ff9f43">2097148</span> kB</span></span></code></pre></div>
<h3 id="prioritizing-swap-spaces">Prioritizing Swap Spaces</h3>
<ul>
<li>You may find multiple swap areas configured and activated to meet the workload demand.</li>
<li>The default behavior of RHEL is to use the first activated swap area and move on to the next when the first one is exhausted.</li>
<li>The system allows us to prioritize one area over the other by adding the option &ldquo;pri&rdquo; to the swap entries in the fstab file.</li>
<li>This flag supports a value between -2 and 32767 with -2 being the default.</li>
<li>A higher value of &ldquo;pri&rdquo; sets a higher priority for the corresponding swap region.</li>
<li>For swap areas with an identical priority, the system alternates between them.</li>
</ul>
<h3 id="swap-administration-commands">Swap Administration Commands</h3>
<ul>
<li>In order to create and manage swap spaces on the system, the <code>mkswap</code>, <code>swapon</code>, and <code>swapoff</code> commands are available.</li>
<li>Use <code>mkswap</code> to initialize a partition for use as a swap space.</li>
<li>Once the swap area is ready, you can activate or deactivate it from the command line with the help of the other two commands,</li>
<li>Can also set it up for automatic activation by placing an entry in the fstab file.</li>
<li>The fstab file accepts the swap area&rsquo;s device file, UUID, or label.</li>
</ul>
<h3 id="lab-create-and-activate-swap-in-partition-and-logical-volume-server-2">Lab: Create and Activate Swap in Partition and Logical Volume (server 2)</h3>
<ul>
<li>Create one swap area in a new 40MB partition called <em>sdb3</em> using the <code>mkswap</code> command.</li>
<li>Create another swap area in a 140MB logical volume called swapvol in vgfs.</li>
<li>Add their entries to the /etc/fstab file for persistence.</li>
<li>Use the UUID and priority 1 for the partition swap and the device file and priority 2 for the logical volume swap.</li>
<li>Activate them and use appropriate tools to validate the activation.</li>
</ul>
<p>EXAM TIP: Use the <code>lsblk</code> command to determine available disk space.</p>
<p>1. Use <code>parted print</code> on the sdb disk and the <code>vgs</code> command on the vgfs volume group to determine available space for a new 40MB partition and a 144MB logical volume:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb print</span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End    Size    Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  101MB  99.6MB  primary  ext4
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">2</span>      102MB   201MB  99.6MB  primary  fat16
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs vgfs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  VG   <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree  </span>
</span></span><span style="display:flex;"><span>  vgfs   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- 400.00m 144.00m</span></span></code></pre></div>
<p>The outputs show 49MB (250MB minus 201MB) free space on the sdb disk and 144MB free space in the volume group.</p>
<p>2. Create a partition called sdb3 of size 40MB using the parted command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mkpart primary 202 242</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<p>3. Create logical volume swapvol of size 144MB in vgs using the <code>lvcreate</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -L 144 -n swapvol vgfs               </span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;swapvol&#34;</span> created.</span></span></code></pre></div>
<p>4. Construct swap structures in sdb3 and swapvol using the mkswap command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkswap /dev/sdb3</span>
</span></span><span style="display:flex;"><span>Setting up swapspace version 1, <span style="color:#ff5c57">size</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">38</span> MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">39841792</span> bytes<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>no label, <span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span>a796e0df-b1c3-4c30-bdde-dd522bba4fff
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkswap /dev/vgfs/swapvol</span>
</span></span><span style="display:flex;"><span>Setting up swapspace version 1, <span style="color:#ff5c57">size</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">144</span> MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">150990848</span> bytes<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>no label, <span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span>88196e73-feaf-4137-8743-f9340296aeec</span></span></code></pre></div>
<p>5. Edit the fstab file and add entries for both swap areas for auto-activation on reboots. Obtain the UUID for partition swap with
<code>lsblk -f /dev/sdb3</code> and use the device file for logical volume. Specify their priorities.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span>a796e0df-b1c3-4c30-bdde-dd522bba4fff swap swap <span style="color:#ff5c57">pri</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>/dev/vgfs/swapvol swap swap <span style="color:#ff5c57">pri</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">2</span> <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span>   </span></span></code></pre></div>
<p>EXAM TIP: You will not be given any credit for this work if you forget to add entries to the fstab file.</p>
<p>6. Determine the current amount of swap space on the system using the swapon command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo swapon</span>
</span></span><span style="display:flex;"><span>NAME      TYPE      SIZE USED PRIO
</span></span><span style="display:flex;"><span>/dev/dm-1 partition   2G   0B   -2</span></span></code></pre></div>
<p>There is one 2GB swap area on the system and it is configured at the default priority of -2.</p>
<p>7. Activate the new swap regions using the swapon command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo swapon -a</span></span></span></code></pre></div>
<p>8. Confirm the activation using the swapon command or by viewing the /proc/swaps file:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo swapon</span>
</span></span><span style="display:flex;"><span>NAME      TYPE      SIZE USED PRIO
</span></span><span style="display:flex;"><span>/dev/dm-1 partition   2G   0B   -2
</span></span><span style="display:flex;"><span>/dev/sdb3 partition  38M   0B    <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>/dev/dm-7 partition 144M   0B    <span style="color:#ff9f43">2</span></span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /proc/swaps</span>
</span></span><span style="display:flex;"><span>Filename				Type		Size		Used		Priority
</span></span><span style="display:flex;"><span>/dev/dm-1                               partition	2097148		0		-2
</span></span><span style="display:flex;"><span>/dev/sdb3                               partition	38908		0		<span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>/dev/dm-7                               partition	147452		0		<span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">#dm is device mapper</span></span></span></code></pre></div>
<p>9. Issue the free command to view the reflection of swap numbers on the Swap and Total lines:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># free -ht</span>
</span></span><span style="display:flex;"><span>               total        used        free      shared  buff/cache   available
</span></span><span style="display:flex;"><span>Mem:           1.7Gi       793Mi       706Mi       5.0Mi       438Mi       981Mi
</span></span><span style="display:flex;"><span>Swap:          2.2Gi          0B       2.2Gi
</span></span><span style="display:flex;"><span>Total:         3.9Gi       793Mi       2.9Gi</span></span></code></pre></div>
<h2 id="local-filesystems-and-swap-diy-labs">Local Filesystems and Swap DIY Labs</h2>
<h3 id="lab-create-vfat-ext4-and-xfs-file-systems-in-partitions-and-mount-persistently">Lab: Create VFAT, Ext4, and XFS File Systems in Partitions and Mount Persistently</h3>
<ul>
<li>Create three 70MB primary partitions on one of the available 250MB disks (lsblk) by invoking the parted utility directly at the command prompt.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdc mklabel msdos</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdc mkpart primary 1 70m</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdb print</span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End     Size    Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  70.3MB  69.2MB  primary</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>parted<span style="color:#ff6ac1">)</span> mkpart primary 71MB 140MB                                    
</span></span><span style="display:flex;"><span>Warning: The resulting partition is not properly aligned <span style="color:#ff6ac1">for</span> best performance: 138671s % 2048s !<span style="color:#ff6ac1">=</span> 0s
</span></span><span style="display:flex;"><span>Ignore/Cancel?                                                            
</span></span><span style="display:flex;"><span>Ignore/Cancel? ignore                                                     
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">(</span>parted<span style="color:#ff6ac1">)</span> mkpart primary 140MB 210MB
</span></span><span style="display:flex;"><span>Warning: The resulting partition is not properly aligned <span style="color:#ff6ac1">for</span> best performance: 273438s % 2048s !<span style="color:#ff6ac1">=</span> 0s
</span></span><span style="display:flex;"><span>Ignore/Cancel? ignore                                                     
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">(</span>parted<span style="color:#ff6ac1">)</span> print                                                            
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End     Size    Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  70.3MB  69.2MB  primary
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">2</span>      71.0MB  140MB   69.0MB  primary
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">3</span>      140MB   210MB   70.0MB  primary</span></span></code></pre></div>
<ul>
<li>Apply label &ldquo;msdos&rdquo; if the disk is new.</li>
<li>Initialize partition 1 with VFAT, partition 2 with Ext4, and partition 3 with XFS file system types.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs -t vfat /dev/sdc1</span>
</span></span><span style="display:flex;"><span>mkfs.fat 4.2 <span style="color:#ff6ac1">(</span>2021-01-31<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs -t ext4 /dev/sdc2</span>
</span></span><span style="display:flex;"><span>mke2fs 1.46.5 <span style="color:#ff6ac1">(</span>30-Dec-2021<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Creating filesystem with <span style="color:#ff9f43">67380</span> 1k blocks and <span style="color:#ff9f43">16848</span> inodes
</span></span><span style="display:flex;"><span>Filesystem UUID: 43b590ff-3330-4b88-aef9-c3a97d8cf51e
</span></span><span style="display:flex;"><span>Superblock backups stored on blocks: 
</span></span><span style="display:flex;"><span>	8193, 24577, 40961, <span style="color:#ff9f43">57345</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Allocating group tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Writing inode tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Creating journal <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4096</span> blocks<span style="color:#ff6ac1">)</span>: <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span>Writing superblocks and filesystem accounting information: <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs -t xfs /dev/sdc3</span>
</span></span><span style="display:flex;"><span>Filesystem should be larger than 300MB.
</span></span><span style="display:flex;"><span>Log size should be at least 64MB.
</span></span><span style="display:flex;"><span>Support <span style="color:#ff6ac1">for</span> filesystems like this one is deprecated and they will not be supported in future releases.
</span></span><span style="display:flex;"><span>meta-data<span style="color:#ff6ac1">=</span>/dev/sdb3              <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4, <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4273</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>17089, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>1368, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks, lazy-count<span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<ul>
<li>Create mount points /vfatfs5, /ext4fs5, and /xfsfs5, and mount all three manually.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkdir /vfatfs5 /ext4fs5 /xfsfs5</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount /dev/sdc1 /vfatfs5</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount /dev/sdc2 /ext4fs5</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount /dev/sdc3 /xfsfs5</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount</span>
</span></span><span style="display:flex;"><span>/dev/sdb1 on /vfatfs5 <span style="color:#ff5c57">type</span> vfat <span style="color:#ff6ac1">(</span>rw,relatime,fmask<span style="color:#ff6ac1">=</span>0022,dmask<span style="color:#ff6ac1">=</span>0022,codepage<span style="color:#ff6ac1">=</span>437,iocharset<span style="color:#ff6ac1">=</span>ascii,shortname<span style="color:#ff6ac1">=</span>mixed,errors<span style="color:#ff6ac1">=</span>remount-ro<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>/dev/sdb2 on /ext4fs5 <span style="color:#ff5c57">type</span> ext4 <span style="color:#ff6ac1">(</span>rw,relatime,seclabel<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>/dev/sdb3 on /xfsfs5 <span style="color:#ff5c57">type</span> xfs <span style="color:#ff6ac1">(</span>rw,relatime,seclabel,attr2,inode64,logbufs<span style="color:#ff6ac1">=</span>8,logbsize<span style="color:#ff6ac1">=</span>32k,noquota<span style="color:#ff6ac1">)</span></span></span></code></pre></div>
<ul>
<li>Determine the UUIDs for the three file systems, and add them to the fstab file.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># blkid /dev/sdc1 /dev/sdc2 /dev/sdc3 &gt;&gt; /etc/fstab</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/fstab</span></span></span></code></pre></div>
<ul>
<li>Unmount all three file systems manually, and execute <code>mount -a</code> to mount them all.
<code>umount /dev/sdb1 /dev/sdb2 /dev/sdb3</code></li>
<li>Run <code>df -h</code> for verification.</li>
</ul>
<h3 id="lab-create-xfs-file-system-in-lvm-vdo-volume-and-mount-persistently">Lab: Create XFS File System in LVM VDO Volume and Mount Persistently</h3>
<ul>
<li>
<p>Ensure that VDO software is installed.
<code>sudo dnf install kmod-kvdo</code></p>
</li>
<li>
<p>Create a volume vdo5 with a logical size 20GB on a 5GB disk (lsblk) using the <code>lvcreate command</code>.</p>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -n vdo5 -l 1279 -V 20G --type vdo vgvdo1</span>
</span></span><span style="display:flex;"><span>WARNING: vdo signature detected on /dev/vgvdo1/vpool0 at offset 0. Wipe it? <span style="color:#ff6ac1">[</span>y/n<span style="color:#ff6ac1">]</span>: y
</span></span><span style="display:flex;"><span>  Wiping vdo signature on /dev/vgvdo1/vpool0.
</span></span><span style="display:flex;"><span>    The VDO volume can address <span style="color:#ff9f43">2</span> GB in <span style="color:#ff9f43">1</span> data slab.
</span></span><span style="display:flex;"><span>    It can grow to address at most <span style="color:#ff9f43">16</span> TB of physical storage in <span style="color:#ff9f43">8192</span> slabs.
</span></span><span style="display:flex;"><span>    If a larger maximum size might be needed, use bigger slabs.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;vdo5&#34;</span> created.</span></span></code></pre></div>
<ul>
<li>Initialize the volume with XFS file system type.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkfs.xfs /dev/mapper/vgvdo1-vdo5</span>
</span></span><span style="display:flex;"><span>meta-data<span style="color:#ff6ac1">=</span>/dev/mapper/vgvdo1-vdo5 <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4, <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1310720</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>  <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>5242880, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>16384, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>  <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> blks, lazy-count<span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>Discarding blocks...Done.</span></span></code></pre></div>
<ul>
<li>Create mount point /vdofs5, and mount it manually.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkdir /vdofs5</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e">#mount /dev/mapper/vgvdo1-vdo5 /vdofs5)/etc/fstab</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># umount /dev/mapper/vgvdo1-vdo5</span></span></span></code></pre></div>
<ul>
<li>Unmount the file system manually and execute <code>mount -a</code> to mount it back.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># blkid /dev/mapper/vgvdo1-vdo5 &gt;&gt; /etc/fstab</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/fstab</span></span></span></code></pre></div>
<ul>
<li>Run <code>df -h</code> to confirm.</li>
</ul>
<h3 id="lab-create-ext4-and-xfs-file-systems-in-lvm-volumes-and-mount-persistently">Lab: Create Ext4 and XFS File Systems in LVM Volumes and Mount Persistently</h3>
<ul>
<li>Initialize an available 250MB disk for use in LVM (lsblk).</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdc mklabel msdos</span>
</span></span><span style="display:flex;"><span>Warning: The existing disk label on /dev/sdc will be destroyed and all data on
</span></span><span style="display:flex;"><span>this disk will be lost. Do you want to <span style="color:#ff6ac1">continue</span>?
</span></span><span style="display:flex;"><span>Yes/No? y                                                                 
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdc mkpart primary 1 100%</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<ul>
<li>Create volume group vg with PE size 8MB and add the physical volume.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdc1</span>
</span></span><span style="display:flex;"><span>  Devices file /dev/sdc is excluded: device is partitioned.
</span></span><span style="display:flex;"><span>  WARNING: adding device /dev/sdc1 with idname t10.ATA_VBOX_HARDDISK_VB6894bac4-590d5546 which is already used <span style="color:#ff6ac1">for</span> /dev/sdc.
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdc1&#34;</span> successfully created.
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgcreate -s 8 vg /dev/sdc1</span>
</span></span><span style="display:flex;"><span>  Devices file /dev/sdc is excluded: device is partitioned.
</span></span><span style="display:flex;"><span>  WARNING: adding device /dev/sdc1 with idname t10.ATA_VBOX_HARDDISK_VB6894bac4-590d5546 which is already used <span style="color:#ff6ac1">for</span> /dev/sdc.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vg&#34;</span> successfully created</span></span></code></pre></div>
<ul>
<li>Create two logical volumes lv200 and lv300 of sizes 120MB and 100MB.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvcreate -n lv200 -L 120 vg</span>
</span></span><span style="display:flex;"><span>  Devices file /dev/sdc is excluded: device is partitioned.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lv200&#34;</span> created.
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvcreate -n lv300 -L 100 vg</span>
</span></span><span style="display:flex;"><span>  Rounding up size to full physical extent 104.00 MiB
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lv300&#34;</span> created.</span></span></code></pre></div>
<ul>
<li>Use the <code>vgs</code>, <code>pvs</code>, <code>lvs</code>, and <code>vgdisplay</code> commands for verification.</li>
<li>Initialize the volumes with Ext4 and XFS file system types.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkfs.ext4 /dev/vg/lv200</span>
</span></span><span style="display:flex;"><span>mke2fs 1.46.5 <span style="color:#ff6ac1">(</span>30-Dec-2021<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Creating filesystem with <span style="color:#ff9f43">122880</span> 1k blocks and <span style="color:#ff9f43">30720</span> inodes
</span></span><span style="display:flex;"><span>Filesystem UUID: 52eac2ee-b5bd-4025-9e40-356b38d21996
</span></span><span style="display:flex;"><span>Superblock backups stored on blocks: 
</span></span><span style="display:flex;"><span>	8193, 24577, 40961, 57345, <span style="color:#ff9f43">73729</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Allocating group tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Writing inode tables: <span style="color:#ff6ac1">done</span>                            
</span></span><span style="display:flex;"><span>Creating journal <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4096</span> blocks<span style="color:#ff6ac1">)</span>: <span style="color:#ff6ac1">done</span>
</span></span><span style="display:flex;"><span>Writing superblocks and filesystem accounting information: <span style="color:#ff6ac1">done</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkfs.xfs /dev/vg/lv300</span>
</span></span><span style="display:flex;"><span>Filesystem should be larger than 300MB.
</span></span><span style="display:flex;"><span>Log size should be at least 64MB.
</span></span><span style="display:flex;"><span>Support <span style="color:#ff6ac1">for</span> filesystems like this one is deprecated and they will not be supported in future releases.
</span></span><span style="display:flex;"><span>meta-data<span style="color:#ff6ac1">=</span>/dev/vg/lv300          <span style="color:#ff5c57">isize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>    <span style="color:#ff5c57">agcount</span><span style="color:#ff6ac1">=</span>4, <span style="color:#ff5c57">agsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">6656</span> <span style="color:#ff5c57">blks</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">attr</span><span style="color:#ff6ac1">=</span>2, <span style="color:#ff5c57">projid32bit</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">1</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">crc</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>        <span style="color:#ff5c57">finobt</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">sparse</span><span style="color:#ff6ac1">=</span>1, <span style="color:#ff5c57">rmapbt</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">0</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">reflink</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>    <span style="color:#ff5c57">bigtime</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">inobtcount</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff5c57">nrext64</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">data</span>     <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>26624, <span style="color:#ff5c57">imaxpct</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">25</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span>      <span style="color:#ff5c57">swidth</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">naming</span>   <span style="color:#ff6ac1">=</span>version <span style="color:#ff9f43">2</span>              <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   ascii-ci<span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">ftype</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">log</span>      <span style="color:#ff6ac1">=</span>internal log           <span style="color:#ff5c57">bsize</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>1368, <span style="color:#ff5c57">version</span><span style="color:#ff6ac1">=</span><span style="color:#ff5c57">2</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ff6ac1">=</span>                       <span style="color:#ff5c57">sectsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">512</span>   <span style="color:#ff5c57">sunit</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span> blks, lazy-count<span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">realtime</span> <span style="color:#ff6ac1">=</span>none                   <span style="color:#ff5c57">extsz</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">4096</span>   <span style="color:#ff5c57">blocks</span><span style="color:#ff6ac1">=</span>0, <span style="color:#ff5c57">rtextents</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">0</span></span></span></code></pre></div>
<ul>
<li>Create mount points /lvmfs5 and /lvmfs6, and mount them manually.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkdir /lvmfs5 /lvmfs6</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount /dev/vg/lv200 /lvmfs5</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount /dev/vg/lv300 /lvmfs6</span>
</span></span><span style="display:flex;"><span>mount: <span style="color:#ff6ac1">(</span>hint<span style="color:#ff6ac1">)</span> your fstab has been modified, but systemd still uses
</span></span><span style="display:flex;"><span>       the old version; use <span style="color:#5af78e">&#39;systemctl daemon-reload&#39;</span> to reload.</span></span></code></pre></div>
<ul>
<li>Add the file system information to the fstab file using their device files.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># blkid /dev/vg/lv200 &gt;&gt; /etc/fstab</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># blkid /dev/vg/lv300 &gt;&gt; /etc/fstab</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/fstab</span></span></span></code></pre></div>
<ul>
<li>Unmount the file systems manually, and execute mount -a to mount them back. Run <code>df -h</code> to confirm.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># umount /dev/vg/lv200 /dev/vg/lv300</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mount -a</span></span></span></code></pre></div>
<h3 id="lab-14-4-extend-ext4-and-xfs-file-systems-in-lvm-volumes">Lab 14-4: Extend Ext4 and XFS File Systems in LVM Volumes</h3>
<ul>
<li>initialize an available 250MB disk for use in LVM (lsblk).</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvcreate /dev/sdb</span>
</span></span><span style="display:flex;"><span>  Devices file /dev/sdc is excluded: device is partitioned.
</span></span><span style="display:flex;"><span>WARNING: dos signature detected on /dev/sdb at offset 510. Wipe it? <span style="color:#ff6ac1">[</span>y/n<span style="color:#ff6ac1">]</span>: y
</span></span><span style="display:flex;"><span>  Wiping dos signature on /dev/sdb.
</span></span><span style="display:flex;"><span>  WARNING: adding device /dev/sdb with idname t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f which is already used <span style="color:#ff6ac1">for</span> missing device.
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdb&#34;</span> successfully created.</span></span></code></pre></div>
<ul>
<li>Add the new physical volume to volume group vg200.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgextend vg /dev/sdb</span>
</span></span><span style="display:flex;"><span>  Devices file /dev/sdc is excluded: device is partitioned.
</span></span><span style="display:flex;"><span>  WARNING: adding device /dev/sdb with idname t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f which is already used <span style="color:#ff6ac1">for</span> missing device.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vg&#34;</span> successfully extended</span></span></code></pre></div>
<ul>
<li>Expand logical volumes lv200 and lv300 along with the underlying file systems to 200MB and 250MB.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvextend -L 200m /dev/vg/lv200</span>
</span></span><span style="display:flex;"><span>  Size of logical volume vg/lv200 changed from 120.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">15</span> extents<span style="color:#ff6ac1">)</span> to 200.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">25</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vg/lv200 successfully resized.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvextend -L 250m /dev/vg/lv200</span>
</span></span><span style="display:flex;"><span>  Rounding size to boundary between physical extents: 256.00 MiB.
</span></span><span style="display:flex;"><span>  Size of logical volume vg/lv200 changed from 200.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">25</span> extents<span style="color:#ff6ac1">)</span> to 256.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">32</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vg/lv200 successfully resized.</span></span></code></pre></div>
<ul>
<li>Use the <code>vgs</code>, <code>pvs</code>, <code>lvs</code>, <code>vgdisplay</code>, and <code>df</code> commands for verification.</li>
</ul>
<h3 id="lab-14-5-create-swap-in-partition-and-lvm-volume-and-activate-persistently">Lab 14-5: Create Swap in Partition and LVM Volume and Activate Persistently</h3>
<ul>
<li>Create two 100MB partitions on an available 250MB disk (lsblk) by invoking the parted utility directly at the command prompt.</li>
<li>Apply label &ldquo;msdos&rdquo; if the disk is new.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdd mklabel msdos</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdd mkpart primary 1 100MB</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdd mkpart primary 101 201</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<ul>
<li>Initialize one of the partitions with swap structures.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo mkswap /dev/sdd1</span>
</span></span><span style="display:flex;"><span>Setting up swapspace version 1, <span style="color:#ff5c57">size</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">94</span> MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">98562048</span> bytes<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>no label, <span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span>40eea6c2-b80c-4b25-ad76-611071db52d5</span></span></code></pre></div>
<ul>
<li>Apply label swappart to the swap partition, and add it to the fstab file.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># swaplabel -L swappart /dev/sdd1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># blkid /dev/sdd1 &gt;&gt; /etc/fstab</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/fstab</span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span><span style="color:#5af78e">&#34;40eea6c2-b80c-4b25-ad76-611071db52d5&#34;</span> swap swap <span style="color:#ff5c57">pri</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">1</span> <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<ul>
<li>
<p>Execute <code>swapon -a</code> to activate it.</p>
</li>
<li>
<p>Run <code>swapon -s</code> to confirm activation.</p>
</li>
<li>
<p>Initialize the other partition for use in LVM.</p>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvcreate /dev/sdd2</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdd2&#34;</span> successfully created.</span></span></code></pre></div>
<ul>
<li>Expand volume group vg (Lab 14-3) by adding this physical volume to it.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgextend vg /dev/sdd2</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vg200&#34;</span> successfully extended</span></span></code></pre></div>
<ul>
<li>Create logical volume swapvol of size 180MB.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvcreate -L 180 -n swapvol vg</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;swapvol&#34;</span> created.</span></span></code></pre></div>
<ul>
<li>Use the <code>vgs</code>, <code>pvs</code>, <code>lvs</code>, and <code>vgdisplay</code> commands for verification.</li>
<li>Initialize the logical volume for swap.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost vg200<span style="color:#ff6ac1">]</span><span style="color:#78787e"># mkswap /dev/vg/swapvol</span>
</span></span><span style="display:flex;"><span>Setting up swapspace version 1, <span style="color:#ff5c57">size</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">180</span> MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">188739584</span> bytes<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>no label, <span style="color:#ff5c57">UUID</span><span style="color:#ff6ac1">=</span>a4b939d0-4b53-4e73-bee5-4c402aff6f9b</span></span></code></pre></div>
<ul>
<li>Add an entry to the fstab file for the new swap area using its device file.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@localhost vg200<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vim /etc/fstab</span>
</span></span><span style="display:flex;"><span>/dev/vg200/swapvol swap swap <span style="color:#ff5c57">pri</span><span style="color:#ff6ac1">=</span><span style="color:#ff9f43">2</span> <span style="color:#ff9f43">0</span> <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<ul>
<li>Execute <code>swapon -a</code> to activate it.</li>
<li>Run <code>swapon -s</code> to confirm activation.</li>
</ul>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="network-file-system-nfs">Network File System (NFS)</h1>

<h2 id="nfs-basics-and-configuration">NFS Basics and Configuration</h2>
<p>Same tools for mounting and unmounting a filesystem.</p>
<ul>
<li>Mounted and accessed the same way as local filesystems.</li>
<li>Network protocol that allows file sharing over the network.</li>
<li>Multi-platform</li>
<li>Multiple clients can access a single share at the same time.</li>
<li>Reduced overhead and storage cost.</li>
<li>Give users access to uniform data.</li>
<li>Consolidate scattered user home directories.</li>
<li>May cause client to hang if share is not accessible.</li>
<li>Share stays mounted until manually unmounted or the client shuts down.</li>
<li>Does not support wildcard characters or environment variables.</li>
</ul>
<h3 id="nfs-supported-versions">NFS Supported versions</h3>
<ul>
<li>RHEL 9 Supports versions 3,4.0,4.1, and 4.2 (default)</li>
<li>NFSv3 supports:
<ul>
<li>TCP and UDP.</li>
<li>asynchronous writes.</li>
<li>64-bit files sizes.</li>
<li>Access files larger than 2GB.</li>
</ul>
</li>
<li>NFSv4.x supports:
<ul>
<li>All features of NFSv3.</li>
<li>Transit firewalls and work on internet.</li>
<li>Enhanced security and support for encrypted transfers and ACLs.</li>
<li>Better scalability</li>
<li>Better cross-platform</li>
<li>Better system crash handling</li>
<li>Use usernames and group names rather than UID and GID.</li>
<li>Uses TCP by default.</li>
<li>Can use UDP for backwards compatibility.</li>
<li>Version 4.2 only supports TCP</li>
</ul>
</li>
</ul>
<h3 id="network-file-system-service">Network File System service</h3>
<ul>
<li>Export shares to mount on remote clients</li>
<li>Exporting
<ul>
<li>When the NFS server makes shares available.</li>
</ul>
</li>
<li>Mounting
<ul>
<li>When a client mounts an exported share locally.</li>
<li>Mount point should be empty before trying to mount a share on it.</li>
</ul>
</li>
<li>System can be both client and server.</li>
<li>Entire directory tree of the share is shared.</li>
<li>Cannot re-share a subdirectory of a share.</li>
<li>A mounted share cannot be exported from the client.</li>
<li>A single exported share is mounted on a directory mount point.</li>
<li>Make sure to update the fstab file on the client.</li>
</ul>
<h3 id="nfs-server-and-client-configuration">NFS Server and Client Configuration</h3>
<h3 id="how-to-export-a-share">How to export a share</h3>
<ul>
<li>Add entry of the share to <em>/etc/exports</em> using <code>exportfs</code> command</li>
<li>Add firewall rule to allow access</li>
</ul>
<h3 id="mount-a-share-from-the-client-side">Mount a share from the client side</h3>
<ul>
<li>Use <code>mount</code> and add the filesystem to the fstab file.</li>
</ul>
<h3 id="lab-export-share-on-nfs-server">Lab: Export Share on NFS Server</h3>
<ol>
<li>Install nfs-utils</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> sudo dnf -y install nfs-utils</code></pre></div>
<ol>
<li>Create /common</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> sudo mkdir /common</code></pre></div>
<ol>
<li>Add full permissions</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code> sudo chmod 777 /common</code></pre></div>
<ol>
<li>Add NFS service persistently to the firewalld configuration to allow NFS traffic and load the new rule:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo firewall-cmd --permanent --add-service nfs
sudo firewall-cmd --reload</code></pre></div>
<ol>
<li>Start the NFS service and enable it to autostart at system reboots:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo systemctl --now enable nfs-server</code></pre></div>
<ol>
<li>Verify Operational Status of the NFS services:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo systemctl status nfs-server</code></pre></div>
<ol>
<li>Open <em>/etc/exports</em> and add entry for <em>/common</em> to export it to server10 with read/write:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/common server10(rw)</code></pre></div>
<ol>
<li>Export the entry defined in <em>/etc/exports</em>/. -a option exports all entries in the file. -v is verbose.</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo exportfs -av</code></pre></div>
<ol>
<li>Unexport the share (-u):</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo exportfs -u server10:/common</code></pre></div>
<ol>
<li>Re-export the share:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo exportfs -av</code></pre></div>
<h3 id="lab-mount-share-on-nfs-client">LAB: Mount share on NFS client</h3>
<ol>
<li>Install nfs-utils</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo dnf -y install nfs-utils</code></pre></div>
<ol>
<li>Create /local mount point</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo mkdir /local</code></pre></div>
<ol>
<li>Mount the share manually:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo mount server20:/common /local</code></pre></div>
<ol>
<li>Confirm using mount: (shows nfs version)</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>mount | grep local</code></pre></div>
<ol>
<li>Confirm using df:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>df -h | grep local</code></pre></div>
<ol>
<li>Add to /fstab for persistence:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>server20:/common /local nfs _netdev 0 0</code></pre></div>
<p>Note:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>_netdev option makes system wait for networking to come up before trying to mount the share. </code></pre></div>
<ol>
<li>Unmount share manually using umount then remount to validate accuracy of the entry in /fstab:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sudo umount /local
sudo mount -a</code></pre></div>
<ol>
<li>Verify:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>df -h</code></pre></div>
<ol>
<li>Create a file in /local/ and verify:</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>touch /local/nfsfile
ls -l /local</code></pre></div>
<ol>
<li>Confirm the sync on server 2</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ls -l /common/</code></pre></div>
<ol start="5">
<li>Update fstab</li>
</ol>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="partitioning-mbr-and-gpt">Partitioning, MBR, and GPT</h1>

<h2 id="partition-information-mbr-and-gpt">Partition Information (MBR and GPT)</h2>
<ul>
<li>Partition information is stored on the disk in a small region.</li>
<li>Read by the operating system at boot time.</li>
<li>Master Boot Record (MBR) on the BIOS-based systems</li>
<li>GUID Partition Table (GPT) on the UEFI-based systems.</li>
<li>At system boot, the BIOS/UEFI:
<ul>
<li>scans all storage devices,</li>
<li>detects the presence of MBR/GPT areas,</li>
<li>identifies the boot disks,</li>
<li>loads the bootloader program in memory from the default boot disk,</li>
<li>executes the boot code to read the partition table and identify the /boot partition,</li>
<li>loads the kernel in memory, and passes control over to it.</li>
</ul>
</li>
<li>MBR and GPT store disk partition information and the boot code.</li>
</ul>
<h3 id="master-boot-record-mbr">Master Boot Record (MBR)</h3>
<ul>
<li>
<p>Resides on the first sector of the boot disk.</p>
</li>
<li>
<p>was the preferred choice for saving partition table information on x86-based computers.</p>
</li>
<li>
<p>with the arrival of bigger and larger hard drives, a new firmware specification (UEFI) was introduced.</p>
</li>
<li>
<p>still widely used, but its use is diminishing in favor of UEFI.</p>
</li>
<li>
<p>allows the creation of three types of partition on a single disk.</p>
</li>
<li>
<p><strong>primary</strong>, <strong>extended</strong>, and <strong>logica</strong>l</p>
</li>
<li>
<p>only <strong>primary</strong> and <strong>logical</strong> can be used for data storage</p>
</li>
<li>
<p><strong>extended</strong> is a mere enclosure for holding the logical partitions and it is not meant for data storage.</p>
</li>
<li>
<p>supports the creation of up to four <strong>primary</strong> partitions numbered 1 through 4 at a time.</p>
</li>
<li>
<p>In case additional partitions are required, one of the <strong>primary</strong> partitions must be deleted and replaced with an <strong>extended</strong> partition to be able to add logical partitions (up to 11) within that <strong>extended</strong> partition.</p>
</li>
<li>
<p>Numbering for logical partitions begins at 5.</p>
</li>
<li>
<p>supports a maximum of 14 usable partitions (3 primary and 11 logical) on a single disk.</p>
</li>
<li>
<p>Cannot address storage space beyond 2TB due to its 32-bit nature and its 512-byte disk sector size.</p>
</li>
<li>
<p>non-redundant; the record it contains is not replicated, resulting in an unbootable system in the event of corruption.</p>
</li>
<li>
<p>If your disk is smaller than 2TB and you don&rsquo;t intend to build more than 14 usable partitions, you can use MBR without issues.</p>
</li>
</ul>
<h3 id="guid-partition-table-gpt">GUID Partition Table (GPT)</h3>
<ul>
<li>ability to construct up to 128 partitions (no concept of extended or logical partitions)</li>
<li>utilize disks larger than 2TB</li>
<li>use 4KB sector size</li>
<li>store a copy of the partition information before the end of the disk for redundancy</li>
<li>allows a BIOS-based system to boot from a GPT disk using the bootloader program stored in a protective MBR at the first disk sector</li>
<li>UEFI firmware also supports the secure boot feature, which only allows signed binaries to boot</li>
</ul>
<h3 id="mbr-storage-management-with-parted">MBR Storage Management with parted</h3>
<p><strong>parted</strong> (partition editor)</p>
<ul>
<li>can be used to partition disks</li>
<li>run interactively or directly from the command prompt.</li>
<li>understands and supports both MBR and GPT schemes</li>
<li>can be used to create up to 128 partitions on a single GPT disk</li>
<li>viewing, labeling, adding, naming, and deleting partitions.</li>
</ul>
<p><strong>print</strong>                            <br>
Displays the partition table that includes disk geometry and partition number, start and end, size, type, file system type, and relevant flags.</p>
<p><strong>mklabel</strong>                          <br>
Applies a label to the disk. Common labels are gpt and msdos.</p>
<p><strong>mkpart</strong>                           <br>
Makes a new partition</p>
<p><strong>name</strong>                             <br>
Assigns a name to a partition</p>
<p><strong>rm</strong>                               <br>
Removes the specified partition</p>
<ul>
<li>use the <code>print</code> subcommand to ensure you created what you wanted.</li>
<li>/proc/partitions file is also updated to reflect the results of partition management operations.</li>
</ul>
<h3 id="lab-create-an-mbr-partition-server2">Lab: Create an MBR Partition (server2)</h3>
<ul>
<li>Assign partition type &ldquo;msdos&rdquo; to /dev/sdb for using it as an MBR disk</li>
<li>create and confirm a 100MB primary partition on the disk.</li>
</ul>
<p>1. Execute parted on /dev/sdb to view the current partition information:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb print</span>
</span></span><span style="display:flex;"><span>Error: /dev/sdb: unrecognised disk label
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>                                           
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: unknown
</span></span><span style="display:flex;"><span>Disk Flags: </span></span></code></pre></div>
<p>There is an error on line 1 of the output, indicating an unrecognized label.
disk must be labeled before it can be partitioned.</p>
<p>2. Assign disk label &ldquo;msdos&rdquo; to the disk with mklabel. This operation
is performed only once on a disk.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mklabel msdos</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start  End  Size  Type  File system  Flags</span></span></code></pre></div>
<p>To use the GPT partition table type, run &ldquo;sudo parted /dev/sdb mklabel gpt&rdquo; instead.</p>
<p>3. Create a 100MB primary partition starting at 1MB (beginning of the disk) using mkpart:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mkpart primary 1 101m</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<p>4. Verify the new partition with print:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End    Size    Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  101MB  99.6MB  primary</span></span></code></pre></div>
<p>Partition numbering begins at 1 by default.</p>
<p>5. Confirm the new partition with the <code>lsblk</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdb</span>
</span></span><span style="display:flex;"><span>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdb      8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€sdb1   8:17   <span style="color:#ff9f43">0</span>   95M  <span style="color:#ff9f43">0</span> part </span></span></code></pre></div>
<p>The device file for the first partition on the sdb disk is sdb1 as identified on the bottom line.
The partition size is 95MB.</p>
<p>Different tools will have variance in reporting partition sizes.  ignore minor differences.</p>
<p>6. Check the /proc/partitions file also:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /proc/partitions | grep sdb</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">16</span>     <span style="color:#ff9f43">256000</span> sdb
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">17</span>      <span style="color:#ff9f43">97280</span> sdb1</span></span></code></pre></div>
<h3 id="exercise-13-3-delete-an-mbr-partition-server2">Exercise 13-3: Delete an MBR Partition (server2)</h3>
<p>delete the sdb1 partition that was created in Exercise 13-2
confirm the deletion.</p>
<p>1. Execute parted on /dev/sdb with the rm subcommand to remove partition number 1:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb rm 1</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<p>2. Confirm the partition deletion with print:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start  End  Size  Type  File system  Flags</span></span></code></pre></div>
<p>3. Check the /proc/partitions file:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># cat /proc/partitions | grep sdb</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">16</span>     <span style="color:#ff9f43">256000</span> sdb</span></span></code></pre></div>
<p>can also run the <code>lsblk</code> command for further verification. T</p>
<p>EXAM TIP: Knowing either parted or gdisk for the exam is enough.</p>
<h3 id="gpt-storage-management-with-gdisk">GPT Storage Management with gdisk</h3>
<h3 id="gdisk-gpt-disk-command"><code>gdisk</code> (GPT disk) Command</h3>
<ul>
<li>
<p>partitions disks using the GPT format.</p>
</li>
<li>
<p>text-based, menu-driven program</p>
</li>
<li>
<p>show, add, verify, modify, and delete partitions</p>
</li>
<li>
<p>can create up to 128 partitions on a single disk on systems with UEFI firmware.</p>
</li>
<li>
<p>Main interface of <code>gdisk</code> can be invoked by specifying a disk device name such as /dev/sdc with the command.
Type help or ? (question mark) at the prompt to view available subcommands.</p>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo gdisk /dev/sdc</span>
</span></span><span style="display:flex;"><span>GPT fdisk <span style="color:#ff6ac1">(</span>gdisk<span style="color:#ff6ac1">)</span> version 1.0.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Partition table scan:
</span></span><span style="display:flex;"><span>  MBR: not present
</span></span><span style="display:flex;"><span>  BSD: not present
</span></span><span style="display:flex;"><span>  APM: not present
</span></span><span style="display:flex;"><span>  GPT: not present
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Creating new GPT entries in memory.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: ?
</span></span><span style="display:flex;"><span>b	back up GPT data to a file
</span></span><span style="display:flex;"><span>c	change a partition<span style="color:#5af78e">&#39;s name
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">d	delete a partition
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">i	show detailed information on a partition
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">l	list known partition types
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">n	add a new partition
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">o	create a new empty GUID partition table (GPT)
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">p	print the partition table
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">q	quit without saving changes
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">r	recovery and transformation options (experts only)
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">s	sort partitions
</span></span></span><span style="display:flex;"><span><span style="color:#5af78e">t	change a partition&#39;</span>s <span style="color:#ff5c57">type</span> code
</span></span><span style="display:flex;"><span>v	verify disk
</span></span><span style="display:flex;"><span>w	write table to disk and <span style="color:#ff5c57">exit</span>
</span></span><span style="display:flex;"><span>x	extra functionality <span style="color:#ff6ac1">(</span>experts only<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>?	print this menu
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: </span></span></code></pre></div>
<h3 id="exercise-13-4-create-a-gpt-partition-server2">Exercise 13-4: Create a GPT Partition (server2)</h3>
<ul>
<li>Assign partition type &ldquo;gpt&rdquo; to /dev/sdc for using it as a GPT disk.</li>
<li>create and confirm a 200MB partition on the disk.</li>
</ul>
<p>1. Execute gdisk on /dev/sdc to view the current partition information:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo gdisk /dev/sdc</span>
</span></span><span style="display:flex;"><span>GPT fdisk <span style="color:#ff6ac1">(</span>gdisk<span style="color:#ff6ac1">)</span> version 1.0.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Partition table scan:
</span></span><span style="display:flex;"><span>  MBR: not present
</span></span><span style="display:flex;"><span>  BSD: not present
</span></span><span style="display:flex;"><span>  APM: not present
</span></span><span style="display:flex;"><span>  GPT: not present
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Creating new GPT entries in memory.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>:</span></span></code></pre></div>
<p>The disk currently does not have any partition table on it.</p>
<p>2. Assign &ldquo;gpt&rdquo; as the partition table type to the disk using the o subcommand. Enter &ldquo;y&rdquo; for confirmation to proceed. This operation is
performed only once on a disk.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: o
</span></span><span style="display:flex;"><span>This option deletes all partitions and creates a new protective MBR.
</span></span><span style="display:flex;"><span>Proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y</span></span></code></pre></div>
<p>3. Run the p subcommand to view disk information and confirm the GUID
partition table creation:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: p
</span></span><span style="display:flex;"><span>Disk /dev/sdc: <span style="color:#ff9f43">512000</span> sectors, 250.0 MiB
</span></span><span style="display:flex;"><span>Model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512/512 bytes
</span></span><span style="display:flex;"><span>Disk identifier <span style="color:#ff6ac1">(</span>GUID<span style="color:#ff6ac1">)</span>: 9446222A-28AC-4F96-816F-518510F95019
</span></span><span style="display:flex;"><span>Partition table holds up to <span style="color:#ff9f43">128</span> entries
</span></span><span style="display:flex;"><span>Main partition table begins at sector <span style="color:#ff9f43">2</span> and ends at sector <span style="color:#ff9f43">33</span>
</span></span><span style="display:flex;"><span>First usable sector is 34, last usable sector is <span style="color:#ff9f43">511966</span>
</span></span><span style="display:flex;"><span>Partitions will be aligned on 2048-sector boundaries
</span></span><span style="display:flex;"><span>Total free space is <span style="color:#ff9f43">511933</span> sectors <span style="color:#ff6ac1">(</span>250.0 MiB<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>    End <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>  Size       Code  Name</span></span></code></pre></div>
<p>The output returns the assigned GUID and states that the partition table can hold up to 128 partition entries.</p>
<p>4. Create the first partition of size 200MB starting at the default sector with default type &ldquo;Linux filesystem&rdquo; using the n subcommand:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: n
</span></span><span style="display:flex;"><span>Partition number <span style="color:#ff6ac1">(</span>1-128, default 1<span style="color:#ff6ac1">)</span>: 
</span></span><span style="display:flex;"><span>First sector <span style="color:#ff6ac1">(</span>34-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 2048<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: 
</span></span><span style="display:flex;"><span>Last sector <span style="color:#ff6ac1">(</span>2048-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 511966<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: +200M
</span></span><span style="display:flex;"><span>Current <span style="color:#ff5c57">type</span> is <span style="color:#ff9f43">8300</span> <span style="color:#ff6ac1">(</span>Linux filesystem<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Hex code or GUID <span style="color:#ff6ac1">(</span>L to show codes, <span style="color:#ff5c57">Enter</span> <span style="color:#ff6ac1">=</span> 8300<span style="color:#ff6ac1">)</span>: 
</span></span><span style="display:flex;"><span>Changed <span style="color:#ff5c57">type</span> of partition to <span style="color:#5af78e">&#39;Linux filesystem&#39;</span></span></span></code></pre></div>
<p>5. Verify the new partition with p:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: p
</span></span><span style="display:flex;"><span>Disk /dev/sdc: <span style="color:#ff9f43">512000</span> sectors, 250.0 MiB
</span></span><span style="display:flex;"><span>Model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512/512 bytes
</span></span><span style="display:flex;"><span>Disk identifier <span style="color:#ff6ac1">(</span>GUID<span style="color:#ff6ac1">)</span>: 9446222A-28AC-4F96-816F-518510F95019
</span></span><span style="display:flex;"><span>Partition table holds up to <span style="color:#ff9f43">128</span> entries
</span></span><span style="display:flex;"><span>Main partition table begins at sector <span style="color:#ff9f43">2</span> and ends at sector <span style="color:#ff9f43">33</span>
</span></span><span style="display:flex;"><span>First usable sector is 34, last usable sector is <span style="color:#ff9f43">511966</span>
</span></span><span style="display:flex;"><span>Partitions will be aligned on 2048-sector boundaries
</span></span><span style="display:flex;"><span>Total free space is <span style="color:#ff9f43">102333</span> sectors <span style="color:#ff6ac1">(</span>50.0 MiB<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>    End <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>  Size       Code  Name
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">1</span>            <span style="color:#ff9f43">2048</span>          <span style="color:#ff9f43">411647</span>   200.0 MiB   <span style="color:#ff9f43">8300</span>  Linux filesystem</span></span></code></pre></div>
<p>6. Run w to write the partition information to the partition table and exit out of the interface. Enter &ldquo;y&rdquo; to confirm when prompted.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: w
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
</span></span><span style="display:flex;"><span>PARTITIONS!!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Do you want to proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y
</span></span><span style="display:flex;"><span>OK; writing new GUID partition table <span style="color:#ff6ac1">(</span>GPT<span style="color:#ff6ac1">)</span> to /dev/sdc.
</span></span><span style="display:flex;"><span>The operation has completed successfully.</span></span></code></pre></div>
<p>You may need to run the <code>partprobe</code> command after exiting the gdisk utility to inform the kernel of partition table changes.</p>
<p>7. Verify the new partition by issuing either of the following at the command prompt:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># grep sdc /proc/partitions</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">32</span>     <span style="color:#ff9f43">256000</span> sdc
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">33</span>     <span style="color:#ff9f43">204800</span> sdc1
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdc</span>
</span></span><span style="display:flex;"><span>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdc      8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€sdc1   8:33   <span style="color:#ff9f43">0</span>  200M  <span style="color:#ff9f43">0</span> part </span></span></code></pre></div>
<h3 id="exercise-13-5-delete-a-gpt-partitionserver2">Exercise 13-5: Delete a GPT Partition(server2)</h3>
<ul>
<li>Delete the sdc1 partition that was created in Exercise 13-4 and confirm the removal.</li>
</ul>
<p>1. Execute gdisk on /dev/sdc and run d1 at the utility&rsquo;s prompt to delete partition number 1:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># gdisk /dev/sdc</span>
</span></span><span style="display:flex;"><span>GPT fdisk <span style="color:#ff6ac1">(</span>gdisk<span style="color:#ff6ac1">)</span> version 1.0.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Partition table scan:
</span></span><span style="display:flex;"><span>  MBR: protective
</span></span><span style="display:flex;"><span>  BSD: not present
</span></span><span style="display:flex;"><span>  APM: not present
</span></span><span style="display:flex;"><span>  GPT: present
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Found valid GPT with protective MBR; using GPT.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: d1
</span></span><span style="display:flex;"><span>Using <span style="color:#ff9f43">1</span></span></span></code></pre></div>
<p>2. Confirm the partition deletion with p:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: p
</span></span><span style="display:flex;"><span>Disk /dev/sdc: <span style="color:#ff9f43">512000</span> sectors, 250.0 MiB
</span></span><span style="display:flex;"><span>Model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512/512 bytes
</span></span><span style="display:flex;"><span>Disk identifier <span style="color:#ff6ac1">(</span>GUID<span style="color:#ff6ac1">)</span>: 9446222A-28AC-4F96-816F-518510F95019
</span></span><span style="display:flex;"><span>Partition table holds up to <span style="color:#ff9f43">128</span> entries
</span></span><span style="display:flex;"><span>Main partition table begins at sector <span style="color:#ff9f43">2</span> and ends at sector <span style="color:#ff9f43">33</span>
</span></span><span style="display:flex;"><span>First usable sector is 34, last usable sector is <span style="color:#ff9f43">511966</span>
</span></span><span style="display:flex;"><span>Partitions will be aligned on 2048-sector boundaries
</span></span><span style="display:flex;"><span>Total free space is <span style="color:#ff9f43">511933</span> sectors <span style="color:#ff6ac1">(</span>250.0 MiB<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>    End <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>  Size       Code  Name</span></span></code></pre></div>
<p>3. Write the updated partition information to the disk with w and quit gdisk:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: w
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
</span></span><span style="display:flex;"><span>PARTITIONS!!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Do you want to proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y
</span></span><span style="display:flex;"><span>OK; writing new GUID partition table <span style="color:#ff6ac1">(</span>GPT<span style="color:#ff6ac1">)</span> to /dev/sdc.
</span></span><span style="display:flex;"><span>The operation has completed successfully.</span></span></code></pre></div>
<p>4. Verify the partition deletion by issuing either of the following at
the command prompt:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># grep sdc /proc/partitions</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">8</span>       <span style="color:#ff9f43">32</span>     <span style="color:#ff9f43">256000</span> sdc
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk /dev/sdc</span>
</span></span><span style="display:flex;"><span>NAME MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sdc    8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk </span></span></code></pre></div>
<h2 id="disk-partitions">Disk Partitions</h2>
<ul>
<li>Be careful when adding a new partition to elude data corruption with overlapping an extant partition or wasting storage by leaving unused space between adjacent partitions.</li>
<li>Disk allocated at the time of installation is recognized as sda (s for SATA, SAS, or SCSI device) disk a,  first partition identified as sda1 and the second partition as sda2.</li>
<li>Any subsequent disks added to the system will be known as sdb, sdc, sdd, and so on, and will use 1, 2, 3, etc. for partition numbering.</li>
</ul>
<p>Use <code>lsblk</code> to list disk and partition information.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server1 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk</span>
</span></span><span style="display:flex;"><span>NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda             8:0    <span style="color:#ff9f43">0</span>   10G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€sda1          8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part /boot
</span></span><span style="display:flex;"><span>â””â”€sda2          8:2    <span style="color:#ff9f43">0</span>    9G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€rhel-root 253:0    <span style="color:#ff9f43">0</span>    8G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  â””â”€rhel-swap 253:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sr0            11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom  /mnt</span></span></code></pre></div>
<p>sr0 represents the ISO image mounted as an optical medium:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server1 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo fdisk -l</span>
</span></span><span style="display:flex;"><span>Disk /dev/sda: <span style="color:#ff9f43">10</span> GiB, <span style="color:#ff9f43">10737418240</span> bytes, <span style="color:#ff9f43">20971520</span> sectors
</span></span><span style="display:flex;"><span>Disk model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Units: sectors of <span style="color:#ff9f43">1</span> * <span style="color:#ff5c57">512</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>I/O size <span style="color:#ff6ac1">(</span>minimum/optimal<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>Disklabel type: dos
</span></span><span style="display:flex;"><span>Disk identifier: 0xfc8b3804
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Device     Boot   Start      End  Sectors Size Id Type
</span></span><span style="display:flex;"><span>/dev/sda1  *       <span style="color:#ff9f43">2048</span>  <span style="color:#ff9f43">2099199</span>  <span style="color:#ff9f43">2097152</span>   1G <span style="color:#ff9f43">83</span> Linux
</span></span><span style="display:flex;"><span>/dev/sda2       <span style="color:#ff9f43">2099200</span> <span style="color:#ff9f43">20971519</span> <span style="color:#ff9f43">18872320</span>   9G 8e Linux LVM
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Disk /dev/mapper/rhel-root: <span style="color:#ff9f43">8</span> GiB, <span style="color:#ff9f43">8585740288</span> bytes, <span style="color:#ff9f43">16769024</span> sectors
</span></span><span style="display:flex;"><span>Units: sectors of <span style="color:#ff9f43">1</span> * <span style="color:#ff5c57">512</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>I/O size <span style="color:#ff6ac1">(</span>minimum/optimal<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Disk /dev/mapper/rhel-swap: <span style="color:#ff9f43">1</span> GiB, <span style="color:#ff9f43">1073741824</span> bytes, <span style="color:#ff9f43">2097152</span> sectors
</span></span><span style="display:flex;"><span>Units: sectors of <span style="color:#ff9f43">1</span> * <span style="color:#ff5c57">512</span> <span style="color:#ff6ac1">=</span> <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes
</span></span><span style="display:flex;"><span>I/O size <span style="color:#ff6ac1">(</span>minimum/optimal<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">512</span> bytes / <span style="color:#ff9f43">512</span> bytes</span></span></code></pre></div>
<p>identifiers 83 and 8e are hexadecimal values for the partition types</p>
<h3 id="storage-management-tools">Storage Management Tools</h3>
<p><code>parted</code>, <code>gdisk</code>, and <code>LVM</code>
Partitions created with a combination of most of these tools and toolsets can coexist on the same disk.</p>
<p><code>parted</code>
understands both MBR and GPT formats.</p>
<p><code>gdisk</code></p>
<ul>
<li>support the GPT format only</li>
<li>may be used as a replacement of parted.</li>
</ul>
<p><code>LVM</code></p>
<ul>
<li>feature-rich logical volume management solution that gives flexibility in storage management.</li>
</ul>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="remove-a-filesystem-from-a-partition">Remove a filesystem from a partition</h1>

<h2 id="remove-a-filesystem-from-a-partition">Remove a filesystem from a partition</h2>
<p>To delete a filesystem,Â partition, raid and disk labels from the disk. Use <code>wipefs -a /dev/sdb1</code> May also use <code>wipefs -a /dev/sdb?</code> to delete sub partitions? (I need to verify this)</p>
<p>Make sure the filesystem is unmounted first.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk</span>
</span></span><span style="display:flex;"><span>NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda                       8:0    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€sda1                    8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>â””â”€sda2                    8:2    <span style="color:#ff9f43">0</span>   19G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€rhel-root           253:0    <span style="color:#ff9f43">0</span>   17G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  â””â”€rhel-swap           253:1    <span style="color:#ff9f43">0</span>    2G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdb                       8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€sdb1                    8:17   <span style="color:#ff9f43">0</span>   95M  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>â”œâ”€sdb2                    8:18   <span style="color:#ff9f43">0</span>   95M  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>â””â”€sdb3                    8:19   <span style="color:#ff9f43">0</span>   38M  <span style="color:#ff9f43">0</span> part <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdc                       8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdd                       8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€sdd1                    8:49   <span style="color:#ff9f43">0</span>  163M  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€vgfs-ext4vol        253:2    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>  â””â”€vgfs-xfsvol         253:3    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>sde                       8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€vgfs-ext4vol          253:2    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>â”œâ”€vgfs-xfsvol           253:3    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>â””â”€vgfs-swapvol          253:7    <span style="color:#ff9f43">0</span>  144M  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdf                       8:80   <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€vgvdo1-vpool0_vdata   253:4    <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>  â””â”€vgvdo1-vpool0-vpool 253:5    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>    â””â”€vgvdo1-lvvdo      253:6    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>sr0                      11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom  </span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># wipefs -a /dev/sdb1</span>
</span></span><span style="display:flex;"><span>/dev/sdb1: <span style="color:#ff9f43">2</span> bytes were erased at offset 0x00000438 <span style="color:#ff6ac1">(</span>ext4<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">53</span> ef
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># wipefs -a /dev/sdb2</span>
</span></span><span style="display:flex;"><span>/dev/sdb2: <span style="color:#ff9f43">8</span> bytes were erased at offset 0x00000036 <span style="color:#ff6ac1">(</span>vfat<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">46</span> <span style="color:#ff9f43">41</span> <span style="color:#ff9f43">54</span> <span style="color:#ff9f43">31</span> <span style="color:#ff9f43">36</span> <span style="color:#ff9f43">20</span> <span style="color:#ff9f43">20</span> <span style="color:#ff9f43">20</span>
</span></span><span style="display:flex;"><span>/dev/sdb2: <span style="color:#ff9f43">1</span> byte was erased at offset 0x00000000 <span style="color:#ff6ac1">(</span>vfat<span style="color:#ff6ac1">)</span>: eb
</span></span><span style="display:flex;"><span>/dev/sdb2: <span style="color:#ff9f43">2</span> bytes were erased at offset 0x000001fe <span style="color:#ff6ac1">(</span>vfat<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">55</span> aa
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># wipefs -a /dev/sdb3</span>
</span></span><span style="display:flex;"><span>wipefs: error: /dev/sdb3: probing initialization failed: Device or resource busy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># wipefs -a /dev/sdb</span>
</span></span><span style="display:flex;"><span>wipefs: error: /dev/sdb: probing initialization failed: Device or resource busy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># swapoff /dev/sdb3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># wipefs -a /dev/sdb3</span>
</span></span><span style="display:flex;"><span>/dev/sdb3: <span style="color:#ff9f43">10</span> bytes were erased at offset 0x00000ff6 <span style="color:#ff6ac1">(</span>swap<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">53</span> <span style="color:#ff9f43">57</span> <span style="color:#ff9f43">41</span> <span style="color:#ff9f43">50</span> <span style="color:#ff9f43">53</span> <span style="color:#ff9f43">50</span> <span style="color:#ff9f43">41</span> <span style="color:#ff9f43">43</span> <span style="color:#ff9f43">45</span> <span style="color:#ff9f43">32</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># wipefs -a /dev/sdb</span>
</span></span><span style="display:flex;"><span>/dev/sdb: <span style="color:#ff9f43">2</span> bytes were erased at offset 0x000001fe <span style="color:#ff6ac1">(</span>dos<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">55</span> aa
</span></span><span style="display:flex;"><span>/dev/sdb: calling ioctl to re-read partition table: Success
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk</span>
</span></span><span style="display:flex;"><span>NAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda                       8:0    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€sda1                    8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>â””â”€sda2                    8:2    <span style="color:#ff9f43">0</span>   19G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€rhel-root           253:0    <span style="color:#ff9f43">0</span>   17G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  â””â”€rhel-swap           253:1    <span style="color:#ff9f43">0</span>    2G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdb                       8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdc                       8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdd                       8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€sdd1                    8:49   <span style="color:#ff9f43">0</span>  163M  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€vgfs-ext4vol        253:2    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>  â””â”€vgfs-xfsvol         253:3    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>sde                       8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€vgfs-ext4vol          253:2    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>â”œâ”€vgfs-xfsvol           253:3    <span style="color:#ff9f43">0</span>  128M  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>â””â”€vgfs-swapvol          253:7    <span style="color:#ff9f43">0</span>  144M  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdf                       8:80   <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€vgvdo1-vpool0_vdata   253:4    <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>  â””â”€vgvdo1-vpool0-vpool 253:5    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>    â””â”€vgvdo1-lvvdo      253:6    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> lvm  
</span></span><span style="display:flex;"><span>sr0                      11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom  </span></span></code></pre></div>
<p>I could not use this on a disk used in an LV. Remove the LVs: <code>lvremove lvvdo vgfs</code></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk</span>
</span></span><span style="display:flex;"><span>NAME           MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda              8:0    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€sda1           8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>â””â”€sda2           8:2    <span style="color:#ff9f43">0</span>   19G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€rhel-root  253:0    <span style="color:#ff9f43">0</span>   17G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  â””â”€rhel-swap  253:1    <span style="color:#ff9f43">0</span>    2G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdb              8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdc              8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdd              8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€sdd1           8:49   <span style="color:#ff9f43">0</span>  163M  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>sde              8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â””â”€vgfs-swapvol 253:7    <span style="color:#ff9f43">0</span>  144M  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdf              8:80   <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sr0             11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom  </span></span></code></pre></div>
<p>Need to remove swapvol from swap:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># swapoff /dev/mapper/vgfs-swapvol</span></span></span></code></pre></div>
<p>Remove the LV:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvremove /dev/mapper/vgfs-swapvol</span>
</span></span><span style="display:flex;"><span>Do you really want to remove active logical volume vgfs/swapvol? <span style="color:#ff6ac1">[</span>y/n<span style="color:#ff6ac1">]</span>: y
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;swapvol&#34;</span> successfully removed.</span></span></code></pre></div>
<p>Wipe sdd:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># wipefs -a /dev/sdd</span>
</span></span><span style="display:flex;"><span>/dev/sdd: <span style="color:#ff9f43">2</span> bytes were erased at offset 0x000001fe <span style="color:#ff6ac1">(</span>dos<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">55</span> aa
</span></span><span style="display:flex;"><span>/dev/sdd: calling ioctl to re-read partition table: Success
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 mapper<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk</span>
</span></span><span style="display:flex;"><span>NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda             8:0    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€sda1          8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>â””â”€sda2          8:2    <span style="color:#ff9f43">0</span>   19G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€rhel-root 253:0    <span style="color:#ff9f43">0</span>   17G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  â””â”€rhel-swap 253:1    <span style="color:#ff9f43">0</span>    2G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdb             8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdc             8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdd             8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sde             8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdf             8:80   <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sr0            11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom  </span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="thin-provisioning-and-lvm">Thin Provisioning and LVM</h1>

<h1 id="thin-provisioning">Thin Provisioning</h1>
<ul>
<li>Allows for an economical allocation and utilization of storage space by moving arbitrary data blocks to contiguous locations, which results in empty block elimination.</li>
<li>Can create a thin pool of storage space and assign volumes much larger storage space than the physical capacity of the pool.</li>
<li>Workloads begin consuming the actual allocated space for data writing.</li>
<li>When a preset custom threshold (80%, for instance) on the actual consumption of the physical storage in the pool is reached, expand the pool dynamically by adding more physical storage to it.</li>
<li>The volumes will automatically start exploiting the new space right away.</li>
<li>helps prevent spending more money upfront.</li>
</ul>
<h2 id="logical-volume-manager-lvm">Logical Volume Manager (LVM)</h2>
<ul>
<li>Used for managing block storage in Linux.</li>
<li>Provides an abstraction layer between the physical storage and the file system</li>
<li>Enables the file system to be resized, span across multiple disks, use arbitrary disk space, etc.</li>
<li>Accumulates spaces taken from partitions or entire disks (called Physical Volumes) to form a logical container (called Volume Group) which is then divided into logical partitions (called Logical Volumes).</li>
<li>online resizing of volume groups and logical volumes,</li>
<li>online data migration between logical volumes and between physical volumes</li>
<li>user-defined naming for volume groups and logical volumes</li>
<li>mirroring and striping across multiple disks</li>
<li>snapshotting of logical volumes.</li>
</ul>
<p><a href="#R-image-82c4aba29fadbd3aa05a6d2e63b26112" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/image-0A8W8M1U.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-82c4aba29fadbd3aa05a6d2e63b26112"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/image-0A8W8M1U.jpg"></a></p>
<ul>
<li>Made up of three key objects called physical volume, volume group, and logical volume.</li>
<li>These objects are further virtually broken down into Physical Extents (PEs) and Logical Extents (LEs).</li>
</ul>
<p><strong>Physical Volume(PV)</strong></p>
<ul>
<li>created when a block storage device such as a partition or an entire disk is initialized and brought under LVM control.</li>
<li>This process constructs LVM data structures on the device, including a label on the second sector and metadata shortly thereafter.</li>
<li>The label includes the UUID, size, and pointers to the locations of data and metadata areas.</li>
<li>Given the criticality of metadata, LVM stores a copy of it at the end of the physical volume as well.</li>
<li>The rest of the device space is available for use.</li>
</ul>
<p>You can use an LVM command called <code>pvs</code> (physical volume scan or summary) to scan and list available physical volumes on server2:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvs</span>
</span></span><span style="display:flex;"><span>  PV         VG   Fmt  Attr PSize   PFree
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel lvm2 a--  &lt;19.00g    <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<ul>
<li>(a for allocatable under Attr)</li>
</ul>
<p>Try running this command again with the -v flag to view more information
about the physical volume.</p>
<p><strong>Volume Group</strong></p>
<ul>
<li>Created when at least one physical volume is added to it.</li>
<li>The space from all physical volumes in a volume group is aggregated to form one large pool of storage, which is then used to build logical volumes.</li>
<li>Physical volumes added to a volume group may be of varying sizes.</li>
<li>LVM writes volume group metadata on each physical volume that is added to it.</li>
<li>The volume group metadata contains its name,date, and time of creation, how it was created, the extent size used, a list of physical and logical volumes, a mapping of physical and logical extents, etc.</li>
<li>Can have a custom name assigned to it at the time of its creation.</li>
<li>A copy of the volume group metadata is stored and maintained at two distinct locations on each physical volume within the volume group.</li>
</ul>
<p>Use <code>vgs</code> (volume group scan or summary) to scan and list available volume groups on server2:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs</span>
</span></span><span style="display:flex;"><span>  VG   <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree</span>
</span></span><span style="display:flex;"><span>  rhel   <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g    <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<ul>
<li>Status of the volume group under the Attr column (w for writeable, z for resizable, and n for normal),</li>
</ul>
<p>Try running this command again with the -v flag to view more information
about the volume group.</p>
<h3 id="physical-extent">Physical Extent</h3>
<ul>
<li>A physical volume is divided into several smaller logical pieces when it is added to a volume group.</li>
<li>These logical pieces are known as Physical Extents (PE).</li>
<li>An extent is the smallest allocatable unit of space in LVM.</li>
<li>At the time of volume group creation, you can either define the size of the PE or leave it to the default value of 4MB.</li>
<li>This implies that a 20GB physical volume would have approximately 5,000 PEs.</li>
<li>Any physical volumes added to this volume group thereafter will use the same PE size.</li>
</ul>
<p>Use <code>vgdisplay</code> (volume group display) on server2 and grep for &lsquo;PE Size&rsquo; to view the PE size used in the rhel volume group:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay rhel | grep &#39;PE Size&#39;</span>
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB</span></span></code></pre></div>
<h3 id="logical-volume">Logical Volume</h3>
<ul>
<li>A volume group consists of a pool of storage taken from one or more physical volumes.</li>
<li>This volume group space is used to create one or more Logical Volumes (LVs).</li>
<li>A logical volume can be created or weeded out online, expanded or shrunk online, and can use space taken from one or multiple physical volumes inside the volume group.</li>
</ul>
<p>The default naming convention used for logical volumes is lvol0, lvol1,
lvol2, and so on you may assign custom names to them.</p>
<p>Use <code>lvs</code> (logical volume scan or summary) to scan and list available logical volumes on server2:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs</span>
</span></span><span style="display:flex;"><span>  LV   VG   Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root rhel -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap rhel -wi-ao----   2.00g</span></span></code></pre></div>
<ul>
<li>Attr column (w for writeable, i for inherited allocation policy, a for active, and o for open) and their sizes.</li>
</ul>
<p>Try running this command again with the -v flag to view more information about the logical volumes.</p>
<h3 id="logical-extent">Logical Extent</h3>
<ul>
<li>A logical volume is made up of Logical Extents (LE).</li>
<li>Logical extents point to physical extents, and they may be random or contiguous.</li>
<li>The larger a logical volume is, the more logical extents it will have.</li>
<li>Logical extents are a set of physical extents allocated to a logical volume.</li>
<li>The LE size is always the same as the PE size in a volume group.</li>
<li>The default LE size is 4MB, which corresponds to the default PE size of 4MB.</li>
</ul>
<p>Use <code>lvdisplay</code> (logical volume display) on server2 to view information about the root logical volume in the rhel volume group.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server30 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvdisplay /dev/rhel/root</span>
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/rhel/root
</span></span><span style="display:flex;"><span>  LV Name                root
</span></span><span style="display:flex;"><span>  VG Name                rhel
</span></span><span style="display:flex;"><span>  LV UUID                DhHyeI-VgwM-w75t-vRcC-5irj-AuHC-neryQf
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> localhost.localdomain, 2024-07-08 17:32:18 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 1</span>
</span></span><span style="display:flex;"><span>  LV Size                &lt;17.00 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">4351</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:0</span></span></code></pre></div>
<ul>
<li>The output does not disclose the LE size;  however, you can convert the LV size in MBs (17,000) and then divide the result by the Current LE count (4,351) to get the LE size (which comes close to 4MB).</li>
</ul>
<h3 id="lvm-operations-and-commands">LVM Operations and Commands</h3>
<ul>
<li>Creating and removing a physical volume, volume group, and logical volume</li>
<li>Extending and reducing a volume group and logical volume</li>
<li>Renaming a volume group and logical volume</li>
<li>listing and displaying physical volume, volume group, and logical volume information.</li>
</ul>
<h3 id="create-and-remove-operations">Create and Remove Operations</h3>
<p><code>pvcreate</code>/<code>pvremove</code></p>
<ul>
<li>Initializes/uninitializes a disk or partition for LVM use</li>
</ul>
<p><code>vgcreate</code>/<code>vgremove</code></p>
<ul>
<li>Creates/removes a volume group</li>
</ul>
<p><code>lvcreate</code>/<code>lvremove</code></p>
<ul>
<li>Creates/removes a logical volume</li>
</ul>
<h3 id="extend-and-reduce-operations">Extend and Reduce Operations</h3>
<p><code>vgextend</code>/<code>vgreduce</code></p>
<ul>
<li>Adds/removes a physical volume to/from a volume group</li>
</ul>
<p><code>lvextend</code>/<code>lvreduce</code></p>
<ul>
<li>Extends/reduces the size of a logical volume</li>
</ul>
<p><code>lvresize</code></p>
<ul>
<li>Resizes a logical volume. With the <code>-r</code> option, this command calls the <code>fsadm</code> command to resize the underlying file system as well.</li>
</ul>
<h3 id="rename-operations">Rename Operations</h3>
<p><code>vgrename</code></p>
<ul>
<li>Rename a volume group</li>
</ul>
<p><code>lvrename</code></p>
<ul>
<li>Rename a logical volume</li>
</ul>
<h3 id="list-and-display-operations">List and Display Operations</h3>
<p><code>pvs</code>/<code>pvdisplay</code></p>
<ul>
<li>Lists/displays physical volume information</li>
</ul>
<p><code>vgs</code>/<code>vgdisplay</code> <code>lvs</code>/<code>lvdisplay</code></p>
<ul>
<li>
<p>Lists/displays volume group information Lists/displays logical volume information</p>
</li>
<li>
<p>All the tools accept the -v switch to support verbosity.</p>
</li>
</ul>
<h3 id="exercise-13-6-create-physical-volume-and-volume-group-server2">Exercise 13-6: Create Physical Volume and Volume Group (server2)</h3>
<ul>
<li>initialize one partition sdd1 (90MB) and one disk sde (250MB) for use in LVM.</li>
<li>create a volume group called vgbook and add both physical volumes to it use the PE size of 16MB</li>
<li>list and display the volume group and the physical volumes.</li>
</ul>
<p>1. Create a partition of size 90MB on sdd using the parted command and confirm. You need to label the disk first, as it is a new disk.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd mklabel msdos</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd mkpart primary 1 91m               </span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdd: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End     Size    Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  91.2MB  90.2MB  primary</span></span></code></pre></div>
<p>2. Initialize the sdd1 partition and the sde disk using the <code>pvcreate</code> command. Note that there is no need to apply a disk label on sde with parted as LVM does not require it.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdd1 /dev/sde -v</span>
</span></span><span style="display:flex;"><span>  Wiping signatures on new PV /dev/sdd1.
</span></span><span style="display:flex;"><span>  Wiping signatures on new PV /dev/sde.
</span></span><span style="display:flex;"><span>  Set up physical volume <span style="color:#ff6ac1">for</span> <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> with <span style="color:#ff9f43">176128</span> available sectors.
</span></span><span style="display:flex;"><span>  Zeroing start of device /dev/sdd1.
</span></span><span style="display:flex;"><span>  Writing physical volume data to disk <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span>.
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> successfully created.
</span></span><span style="display:flex;"><span>  Set up physical volume <span style="color:#ff6ac1">for</span> <span style="color:#5af78e">&#34;/dev/sde&#34;</span> with <span style="color:#ff9f43">512000</span> available sectors.
</span></span><span style="display:flex;"><span>  Zeroing start of device /dev/sde.
</span></span><span style="display:flex;"><span>  Writing physical volume data to disk <span style="color:#5af78e">&#34;/dev/sde&#34;</span>.
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sde&#34;</span> successfully created.</span></span></code></pre></div>
<p>3. Create vgbook volume group using the <code>vgcreate</code> command and add the two physical volumes to it. Use the -s option to specify the PE size in
MBs.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgcreate -vs 16 vgbook /dev/sdd1 /dev/sde</span>
</span></span><span style="display:flex;"><span>  Wiping signatures on new PV /dev/sdd1.
</span></span><span style="display:flex;"><span>  Wiping signatures on new PV /dev/sde.
</span></span><span style="display:flex;"><span>  Adding physical volume <span style="color:#5af78e">&#39;/dev/sdd1&#39;</span> to volume group <span style="color:#5af78e">&#39;vgbook&#39;</span>
</span></span><span style="display:flex;"><span>  Adding physical volume <span style="color:#5af78e">&#39;/dev/sde&#39;</span> to volume group <span style="color:#5af78e">&#39;vgbook&#39;</span>
</span></span><span style="display:flex;"><span>  Creating volume group backup <span style="color:#5af78e">&#34;/etc/lvm/backup/vgbook&#34;</span> <span style="color:#ff6ac1">(</span>seqno 1<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgbook&#34;</span> successfully created</span></span></code></pre></div>
<p>4. List the volume group information:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs vgbook</span>
</span></span><span style="display:flex;"><span>  VG     <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree  </span>
</span></span><span style="display:flex;"><span>  vgbook   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span>   <span style="color:#ff9f43">0</span> wz--n- 320.00m 320.00m</span></span></code></pre></div>
<p>5. Display detailed information about the volume group and the physical volumes it contains:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay -v vgbook</span>
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgbook
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  VG Size               320.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">20</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">20</span> / 320.00 MiB
</span></span><span style="display:flex;"><span>  VG UUID               zRu1d2-ZgDL-bnzV-I9U1-0IFo-uM4x-w4bX0Q
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Physical volumes ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdd1     
</span></span><span style="display:flex;"><span>  PV UUID               8x8IgZ-3z5T-ODA8-dofQ-xk5s-QN7I-KwpQ1e
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">5</span> / <span style="color:#ff9f43">5</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  PV Name               /dev/sde     
</span></span><span style="display:flex;"><span>  PV UUID               xJU0Hh-W5k9-FyKO-d6Ha-1ofW-ajvh-hJSo8R
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">15</span> / <span style="color:#ff9f43">15</span></span></span></code></pre></div>
<p>6. List the physical volume information:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvs</span>
</span></span><span style="display:flex;"><span>  PV         VG     Fmt  Attr PSize   PFree  
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel   lvm2 a--  &lt;19.00g      <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd1  vgbook lvm2 a--   80.00m  80.00m
</span></span><span style="display:flex;"><span>  /dev/sde   vgbook lvm2 a--  240.00m 240.00m</span></span></code></pre></div>
<p>7. Display detailed information about the physical volumes:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvdisplay /dev/sdd1</span>
</span></span><span style="display:flex;"><span>  --- Physical volume ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdd1
</span></span><span style="display:flex;"><span>  VG Name               vgbook
</span></span><span style="display:flex;"><span>  PV Size               86.00 MiB / not usable 6.00 MiB
</span></span><span style="display:flex;"><span>  Allocatable           yes 
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">5</span>
</span></span><span style="display:flex;"><span>  Free PE               <span style="color:#ff9f43">5</span>
</span></span><span style="display:flex;"><span>  Allocated PE          <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  PV UUID               8x8IgZ-3z5T-ODA8-dofQ-xk5s-QN7I-KwpQ1e</span></span></code></pre></div>
<ul>
<li>Once a partition or disk is initialized and added to a volume group, they are treated identically within the volume group. LVM does not prefer one over the other.</li>
</ul>
<h3 id="exercise-13-7-create-logical-volumesserver2">Exercise 13-7: Create Logical Volumes(server2)</h3>
<ul>
<li>Create two logical volumes, lvol0 and lvbook1, in the vgbook volume group.</li>
<li>Use 120MB for lvol0 and 192MB for lvbook1 from the available pool of space.</li>
<li>Display the details of the volume group and the logical volumes.</li>
</ul>
<p>1. Create a logical volume with the default name lvol0 using the <code>lvcreate</code> command. Use the -L option to specify the logical volume size, 120MB. You may use the -v, -vv, or -vvv option with the command for verbosity.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -vL 120 vgbook</span>
</span></span><span style="display:flex;"><span>  Rounding up size to full physical extent 128.00 MiB
</span></span><span style="display:flex;"><span>  Creating logical volume lvol0
</span></span><span style="display:flex;"><span>  Archiving volume group <span style="color:#5af78e">&#34;vgbook&#34;</span> metadata <span style="color:#ff6ac1">(</span>seqno 1<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Activating logical volume vgbook/lvol0.
</span></span><span style="display:flex;"><span>  activation/volume_list configuration setting not defined: Checking only host tags <span style="color:#ff6ac1">for</span> vgbook/lvol0.
</span></span><span style="display:flex;"><span>  Creating vgbook-lvol0
</span></span><span style="display:flex;"><span>  Loading table <span style="color:#ff6ac1">for</span> vgbook-lvol0 <span style="color:#ff6ac1">(</span>253:2<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Resuming vgbook-lvol0 <span style="color:#ff6ac1">(</span>253:2<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Wiping known signatures on logical volume vgbook/lvol0.
</span></span><span style="display:flex;"><span>  Initializing 4.00 KiB of logical volume vgbook/lvol0 with value 0.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvol0&#34;</span> created.
</span></span><span style="display:flex;"><span>  Creating volume group backup <span style="color:#5af78e">&#34;/etc/lvm/backup/vgbook&#34;</span> <span style="color:#ff6ac1">(</span>seqno 2<span style="color:#ff6ac1">)</span>.</span></span></code></pre></div>
<ul>
<li>
<p>Size for the logical volume may be specified in units such as MBs, GBs, TBs, or as a count of LEs</p>
</li>
<li>
<p>MB is the default if no unit is specified</p>
</li>
<li>
<p>The size of a logical volume is always in multiples of the PE size. For instance, logical volumes created in vgbook with the PE size set at 16MB can be 16MB, 32MB, 48MB, 64MB, and so on.</p>
</li>
</ul>
<p>2. Create lvbook1 of size 192MB (16x12) using the <code>lvcreate</code> command. Use the -l switch to specify the size in logical extents and -n for the custom name.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -l 12 -n lvbook1 vgbook</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvbook1&#34;</span> created.</span></span></code></pre></div>
<p>3. List the logical volume information:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs</span>
</span></span><span style="display:flex;"><span>  LV      VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel   -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel   -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvbook1 vgbook -wi-a----- 192.00m                                                    
</span></span><span style="display:flex;"><span>  lvol0   vgbook -wi-a----- 128.00m </span></span></code></pre></div>
<p>4. Display detailed information about the volume group including the logical volumes and the physical volumes:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay -v vgbook</span>
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgbook
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  VG Size               320.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">20</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">20</span> / 320.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               zRu1d2-ZgDL-bnzV-I9U1-0IFo-uM4x-w4bX0Q
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvol0
</span></span><span style="display:flex;"><span>  LV Name                lvol0
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                9M9ahf-1L3y-c0yk-3Z2O-UzjH-0Amt-QLi4p5
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:42:51 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  open                 <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  LV Size                128.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">8</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:2
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvbook1
</span></span><span style="display:flex;"><span>  LV Name                lvbook1
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                pgd8qR-YXXK-3Idv-qmpW-w8Az-WGLR-g2d8Yn
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:45:31 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                192.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">12</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:3
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Physical volumes ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdd1     
</span></span><span style="display:flex;"><span>  PV UUID               8x8IgZ-3z5T-ODA8-dofQ-xk5s-QN7I-KwpQ1e
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">5</span> / <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  PV Name               /dev/sde     
</span></span><span style="display:flex;"><span>  PV UUID               xJU0Hh-W5k9-FyKO-d6Ha-1ofW-ajvh-hJSo8R
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">15</span> / <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>Alternatively, you can run the following to view only the logical volume
details:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvdisplay /dev/vgbook/lvol0</span>
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvol0
</span></span><span style="display:flex;"><span>  LV Name                lvol0
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                9M9ahf-1L3y-c0yk-3Z2O-UzjH-0Amt-QLi4p5
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:42:51 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                128.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">8</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:2</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvdisplay /dev/vgbook/lvbook1</span>
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvbook1
</span></span><span style="display:flex;"><span>  LV Name                lvbook1
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                pgd8qR-YXXK-3Idv-qmpW-w8Az-WGLR-g2d8Yn
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:45:31 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                192.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">12</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:3</span></span></code></pre></div>
<h3 id="exercise-13-8-extend-a-volume-group-and-a-logical-volumeserver2">Exercise 13-8: Extend a Volume Group and a Logical Volume(server2)</h3>
<ul>
<li>Add another partition sdd2 of size 158MB to vgbook to increase the pool of allocatable space.</li>
<li>Initialize the new partition prior to adding it to the volume group.</li>
<li>Increase the size of lvbook1 to 336MB.</li>
<li>Display basic information for the physical volumes, volume group, and logical volume.</li>
</ul>
<p>1. Create a partition of size 158MB on sdd using the parted command. Display the new partition to confirm the partition number and size.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdd mkpart primary 91 250</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdd: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End     Size    Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  91.2MB  90.2MB  primary
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">2</span>      92.3MB  250MB   157MB   primary               lvm</span></span></code></pre></div>
<p>2. Initialize sdd2 using the pvcreate command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdd2</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdd2&#34;</span> successfully created.</span></span></code></pre></div>
<p>3. Extend vgbook by adding the new physical volume to it:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgextend vgbook /dev/sdd2</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgbook&#34;</span> successfully extended</span></span></code></pre></div>
<p>4. List the volume group:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs</span>
</span></span><span style="display:flex;"><span>  VG     <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree  </span>
</span></span><span style="display:flex;"><span>  rhel     <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g      <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vgbook   <span style="color:#ff9f43">3</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- 464.00m 144.00m</span></span></code></pre></div>
<p>5. Extend the size of lvbook1 to 340MB by adding 144MB using the <code>lvextend</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvextend -L +144 /dev/vgbook/lvbook1</span>
</span></span><span style="display:flex;"><span>  Size of logical volume vgbook/lvbook1 changed from 192.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">12</span> extents<span style="color:#ff6ac1">)</span> to 336.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">21</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vgbook/lvbook1 successfully resized.</span></span></code></pre></div>
<p>EXAM TIP: Make sure the expansion of a logical volume does not affect the file system and the data it contains.</p>
<p>6. Issue vgdisplay on vgbook with the -v switch for the updated
details:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay -v vgbook</span>
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgbook
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">5</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Size               464.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">29</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">29</span> / 464.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               zRu1d2-ZgDL-bnzV-I9U1-0IFo-uM4x-w4bX0Q
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvol0
</span></span><span style="display:flex;"><span>  LV Name                lvol0
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                9M9ahf-1L3y-c0yk-3Z2O-UzjH-0Amt-QLi4p5
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:42:51 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  open                 <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  LV Size                128.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">8</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:2
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgbook/lvbook1
</span></span><span style="display:flex;"><span>  LV Name                lvbook1
</span></span><span style="display:flex;"><span>  VG Name                vgbook
</span></span><span style="display:flex;"><span>  LV UUID                pgd8qR-YXXK-3Idv-qmpW-w8Az-WGLR-g2d8Yn
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-12 02:45:31 -0700
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                336.00 MiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">21</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:3
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Physical volumes ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdd1     
</span></span><span style="display:flex;"><span>  PV UUID               8x8IgZ-3z5T-ODA8-dofQ-xk5s-QN7I-KwpQ1e
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">5</span> / <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  PV Name               /dev/sde     
</span></span><span style="display:flex;"><span>  PV UUID               xJU0Hh-W5k9-FyKO-d6Ha-1ofW-ajvh-hJSo8R
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">15</span> / <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdd2     
</span></span><span style="display:flex;"><span>  PV UUID               1olOnk-o8FH-uJRD-2pJf-8GCy-3K0M-gcf3pF
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">9</span> / <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>7. View a summary of the physical volumes:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvs</span>
</span></span><span style="display:flex;"><span>  PV         VG     Fmt  Attr PSize   PFree
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel   lvm2 a--  &lt;19.00g    <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd1  vgbook lvm2 a--   80.00m    <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd2  vgbook lvm2 a--  144.00m    <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sde   vgbook lvm2 a--  240.00m    <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>8. View a summary of the logical volumes:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs</span>
</span></span><span style="display:flex;"><span>  LV      VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel   -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel   -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvbook1 vgbook -wi-a----- 336.00m                                                    
</span></span><span style="display:flex;"><span>  lvol0   vgbook -wi-a----- 128.00m </span></span></code></pre></div>
<h3 id="exercise-13-9-rename-reduce-extend-and-remove-logical-volumesserver2">Exercise 13-9: Rename, Reduce, Extend, and Remove Logical Volumes(server2)</h3>
<ul>
<li>Rename lvol0 to lvbook2.</li>
<li>Decrease the size of lvbook2 to 50MB using the <code>lvreduce</code> command</li>
<li>Add 32MB with the <code>lvresize command.</code></li>
<li>remove both logical volumes.</li>
<li>display the summary for the volume groups, logical volumes, and physical volumes.</li>
</ul>
<p>1. Rename lvol0 to lvbook2 using the <code>lvrename</code> command and confirm with
lvs:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvrename vgbook lvol0 lvbook2</span>
</span></span><span style="display:flex;"><span>  Renamed <span style="color:#5af78e">&#34;lvol0&#34;</span> to <span style="color:#5af78e">&#34;lvbook2&#34;</span> in volume group <span style="color:#5af78e">&#34;vgbook&#34;</span></span></span></code></pre></div>
<p>2. Reduce the size of lvbook2 to 50MB with the <code>lvreduce</code> command. Specify the absolute desired size for the logical volume. Answer &ldquo;Do you really want to reduce vgbook/lvbook2?&rdquo; in the affirmative.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvreduce -L 50 /dev/vgbook/lvbook2</span>
</span></span><span style="display:flex;"><span>  Rounding size to boundary between physical extents: 64.00 MiB.
</span></span><span style="display:flex;"><span>  No file system found on /dev/vgbook/lvbook2.
</span></span><span style="display:flex;"><span>  Size of logical volume vgbook/lvbook2 changed from 128.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">8</span> extents<span style="color:#ff6ac1">)</span> to 64.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vgbook/lvbook2 successfully resized.</span></span></code></pre></div>
<p>3. Add 32MB to lvbook2 with the lvresize command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvresize -L +32 /dev/vgbook/lvbook2</span>
</span></span><span style="display:flex;"><span>  Size of logical volume vgbook/lvbook2 changed from 64.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">4</span> extents<span style="color:#ff6ac1">)</span> to 96.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">6</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vgbook/lvbook2 successfully resized.</span></span></code></pre></div>
<p>4. Use the pvs, lvs, vgs, and vgdisplay commands to view the updated
allocation.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvs</span>
</span></span><span style="display:flex;"><span>  PV         VG     Fmt  Attr PSize   PFree 
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel   lvm2 a--  &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd1  vgbook lvm2 a--   80.00m     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd2  vgbook lvm2 a--  144.00m     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sde   vgbook lvm2 a--  240.00m 32.00m
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  LV      VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel   -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel   -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvbook1 vgbook -wi-a----- 336.00m                                                    
</span></span><span style="display:flex;"><span>  lvbook2 vgbook -wi-a-----  96.00m  
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgs</span>
</span></span><span style="display:flex;"><span>  VG     <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree </span>
</span></span><span style="display:flex;"><span>  rhel     <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vgbook   <span style="color:#ff9f43">3</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- 464.00m 32.00m
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgdisplay</span>
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgbook
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">8</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Size               464.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               16.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">29</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">27</span> / 432.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">2</span> / 32.00 MiB
</span></span><span style="display:flex;"><span>  VG UUID               zRu1d2-ZgDL-bnzV-I9U1-0IFo-uM4x-w4bX0Q
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               rhel
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">4863</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">4863</span> / &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               UiK3fy-FGOc-2fnP-C1Y6-JS0l-irEe-Sq3c4h</span></span></code></pre></div>
<p>5. Remove both lvbook1 and lvbook2 logical volumes using the <code>lvremove</code>
command. Use the <code>-f</code> option to suppress the &ldquo;Do you really want to remove
active logical volume&rdquo; message.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvremove /dev/vgbook/lvbook1 -f</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvbook1&#34;</span> successfully removed.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvremove /dev/vgbook/lvbook2 -f</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvbook2&#34;</span> successfully removed.</span></span></code></pre></div>
<ul>
<li>Removing an LV is destructive</li>
<li>Backup any data in the target LV before deleting it.</li>
<li>You will need to <code>unmount</code> the file system or disable swap in the logical volume.
<br>
6. Execute the <code>vgdisplay</code> command and grep for &ldquo;Cur LV&rdquo; to see the number of logical volumes currently available in vgbook. It should show 0, as you have removed both logical volumes.</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay vgbook | grep &#39;Cur LV&#39;</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<h3 id="exercise-13-10-reduce-and-remove-a-volume-groupserver2">Exercise 13-10: Reduce and Remove a Volume Group(server2)</h3>
<p>\</p>
<ul>
<li>Reduce vgbook by removing the sdd1 and sde physical volumes from it</li>
<li>Remove the volume group.</li>
<li>Confirm the deletion of the volume group and the logical volumes at the end.</li>
</ul>
<p>1. Remove sdd1 and sde physical volumes from vgbook by issuing the <code>vgreduce</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgreduce vgbook /dev/sdd1 /dev/sde</span>
</span></span><span style="display:flex;"><span>  Removed <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> from volume group <span style="color:#5af78e">&#34;vgbook&#34;</span>
</span></span><span style="display:flex;"><span>  Removed <span style="color:#5af78e">&#34;/dev/sde&#34;</span> from volume group <span style="color:#5af78e">&#34;vgbook&#34;</span></span></span></code></pre></div>
<p>2. Remove the volume group using the <code>vgremove</code> command. This will also remove the last physical volume, sdd2, from it.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgremove vgbook</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgbook&#34;</span> successfully removed</span></span></code></pre></div>
<ul>
<li>Use the <code>-f</code> option with the <code>vgremove</code> command to force the volume group removal even if it contains any number of logical and physical volumes in it.</li>
</ul>
<p>3. Execute the <code>vgs</code> and <code>lvs</code> commands for confirmation:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs</span>
</span></span><span style="display:flex;"><span>  VG   <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree</span>
</span></span><span style="display:flex;"><span>  rhel   <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g    <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs</span>
</span></span><span style="display:flex;"><span>  LV   VG   Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root rhel -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap rhel -wi-ao----   2.00g    </span></span></code></pre></div>
<h3 id="exercise-13-11-uninitialize-physical-volumes-server2">Exercise 13-11: Uninitialize Physical Volumes (Server2)\</h3>
<ul>
<li>Uninitialize all three physical volumes&mdash;sdd1, sdd2, and sde&mdash;by deleting the LVM structural information from them.</li>
<li>Use the <code>pvs</code> command for confirmation.</li>
<li>Remove the partitions from the sdd disk and</li>
<li>Verify that all disks used in Exercises 13-6 to 13-10 are now in their original raw state.</li>
</ul>
<p>1. Remove the LVM structures from sdd1, sdd2, and sde using the <code>pvremove</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvremove /dev/sdd1 /dev/sdd2 /dev/sde</span>
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> successfully wiped.
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sdd2&#34;</span> successfully wiped.
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sde&#34;</span> successfully wiped.</span></span></code></pre></div>
<p>2. Confirm the removal using the <code>pvs</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvs</span>
</span></span><span style="display:flex;"><span>  PV         VG   Fmt  Attr PSize   PFree
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel lvm2 a--  &lt;19.00g    <span style="color:#ff9f43">0</span> </span></span></code></pre></div>
<p>The partitions and the disk are now back to their raw state and can be repurposed.</p>
<p>3. Remove the partitions from sdd using the <code>parted</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd rm 1 ; sudo parted /dev/sdd rm 2</span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.  </span></span></code></pre></div>
<p>4. Verify that all disks used in previous exercises have returned to their original raw state using the lsblk command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk                                                   </span>
</span></span><span style="display:flex;"><span>NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda             8:0    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€sda1          8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part /boot
</span></span><span style="display:flex;"><span>â””â”€sda2          8:2    <span style="color:#ff9f43">0</span>   19G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€rhel-root 253:0    <span style="color:#ff9f43">0</span>   17G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  â””â”€rhel-swap 253:1    <span style="color:#ff9f43">0</span>    2G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdb             8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdc             8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdd             8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sde             8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdf             8:80   <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sr0            11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom  </span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="virtual-data-optimizer-vdo">Virtual Data Optimizer (VDO)</h1>

<ul>
<li>Used for storage optimization</li>
<li>Device driver layer that sits between the Linux kernel and the physical storage devices.</li>
<li>Conserve disk space, improve data throughput, and save on storage cost.</li>
<li>Employs <strong>thin provisioning</strong>, <strong>de-duplication</strong>, and <strong>compression</strong> technologies to help realize the goals.</li>
</ul>
<h3 id="how-vdo-conserves-storage">How VDO Conserves Storage</h3>
<p><strong>Stage 1</strong></p>
<ul>
<li>Makes use of thin provisioning to identify and eliminate empty (zero-byte) data blocks. (zero-block elimination)</li>
<li>Removes randomization of data blocks by moving in-use data blocks to contiguous locations on the storage device.</li>
</ul>
<p><a href="#R-image-4e48c0b74667d7106dbe2b428309a7ff" class="lightbox-link"><img class="lazy lightbox figure-image" loading="lazy" src="/images/image-XYSCLXMC.jpg" style="height: auto;width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4e48c0b74667d7106dbe2b428309a7ff"><img class="lazy lightbox lightbox-image" loading="lazy" src="/images/image-XYSCLXMC.jpg"></a></p>
<p><strong>Stage 2</strong></p>
<ul>
<li>If it detects that new data is an identical copy of some existing data, it makes an internal note of it but does not actually write the redundant data to the disk. (de-duplication)</li>
<li>Implemented with the inclusion of a kernel module called <strong>UDS</strong> (Universal De-duplication Service).</li>
</ul>
<p><strong>Stage 3</strong></p>
<ul>
<li>Calls upon another kernel module called <strong>kvdo</strong>, which compresses the residual data blocks and consolidates them on a lower number of blocks.</li>
<li>Results in a further drop in storage space utilization.</li>
<li>Runs in the background and processes inbound data through the three stages on VDO-enabled volumes.</li>
<li>Not a CPU or memory-intensive process</li>
</ul>
<h3 id="vdo-integration-with-lvm">VDO Integration with LVM</h3>
<ul>
<li>LVM utilities have been enhanced to include options to support VDO volumes.</li>
</ul>
<h3 id="vdo-components">VDO Components</h3>
<ul>
<li>Utilizes the concepts of pool and volume.
<strong>pool</strong></li>
<li>logical volume that is created inside an LVM volume group using a deduplicated storage space.
<strong>volume</strong></li>
<li>Just like a regular LVM logical volume, but it is provisioned in a pool.</li>
<li>Needs to be formatted with file system structures before it can be used.</li>
</ul>
<h3 id="vdo-and-kmod-kvdo-commands"><code>vdo</code> and <code>kmod-kvdo</code> Commands</h3>
<ul>
<li>Create, mount, and manage LVM VDO volumes</li>
<li>Installed on the system by default.</li>
</ul>
<p><code>vdo</code></p>
<ul>
<li>Installs the tools necessary to support the creation and management of VDO volumes</li>
</ul>
<p><code>kmod-kvdo</code></p>
<ul>
<li>Implements fine-grained storage virtualization, thin provisioning, and compression.
Not installed by default?</li>
</ul>
<h3 id="exercise-13-12-create-an-lvm-vdo-volume">Exercise 13-12: Create an LVM VDO Volume</h3>
<ul>
<li>Initialize the 5GB disk (sdf) for use in LVM VDO.</li>
<li>Create a volume group called vgvdo and add the physical volume to it.</li>
<li>List and display the volume group and the physical volume.</li>
<li>Create a VDO volume called lvvdo with a virtual size of 20GB.</li>
</ul>
<p>1. Initialize the sdf disk using the pvcreate command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdf</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdf&#34;</span> successfully created.</span></span></code></pre></div>
<p>2. Create vgvdo volume group using the vgcreate command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgcreate vgvdo /dev/sdf</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgvdo&#34;</span> successfully created</span></span></code></pre></div>
<p>3. Display basic information about the volume group:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay vgvdo</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgvdo
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">1279</span> / &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  VG UUID               tED1vC-Ylec-fpeR-KM8F-8FzP-eaQ4-AsFrgc</span></span></code></pre></div>
<p>4. Create a VDO volume called lvvdo using the <code>lvcreate</code> command. Use the -l option to specify the number of logical extents (1279) to be allocated and the -V option for the amount of virtual space.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo dnf install kmod-kvdo</span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate --type vdo -l 1279 -n lvvdo -V 20G vgvdo</span>
</span></span><span style="display:flex;"><span>    The VDO volume can address <span style="color:#ff9f43">2</span> GB in <span style="color:#ff9f43">1</span> data slab.
</span></span><span style="display:flex;"><span>    It can grow to address at most <span style="color:#ff9f43">16</span> TB of physical storage in <span style="color:#ff9f43">8192</span> slabs.
</span></span><span style="display:flex;"><span>    If a larger maximum size might be needed, use bigger slabs.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvvdo&#34;</span> created.</span></span></code></pre></div>
<p>5. Display detailed information about the volume group including the logical volume and the physical volume:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgdisplay -v vgvdo</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vgvdo
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">1279</span> / &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               tED1vC-Ylec-fpeR-KM8F-8FzP-eaQ4-AsFrgc
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgvdo/vpool0
</span></span><span style="display:flex;"><span>  LV Name                vpool0
</span></span><span style="display:flex;"><span>  VG Name                vgvdo
</span></span><span style="display:flex;"><span>  LV UUID                yGAsK2-MruI-QGy2-Q1IF-CDDC-XPNT-qkjJ9t
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-16 09:35:46 -0700
</span></span><span style="display:flex;"><span>  LV VDO Pool data       vpool0_vdata
</span></span><span style="display:flex;"><span>  LV VDO Pool usage      60.00%
</span></span><span style="display:flex;"><span>  LV VDO Pool saving     100.00%
</span></span><span style="display:flex;"><span>  LV VDO Operating mode  normal
</span></span><span style="display:flex;"><span>  LV VDO Index state     online
</span></span><span style="display:flex;"><span>  LV VDO Compression st  online
</span></span><span style="display:flex;"><span>  LV VDO Used size       &lt;3.00 GiB
</span></span><span style="display:flex;"><span>  LV Status              NOT available
</span></span><span style="display:flex;"><span>  LV Size                &lt;5.00 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">1279</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Logical volume ---
</span></span><span style="display:flex;"><span>  LV Path                /dev/vgvdo/lvvdo
</span></span><span style="display:flex;"><span>  LV Name                lvvdo
</span></span><span style="display:flex;"><span>  VG Name                vgvdo
</span></span><span style="display:flex;"><span>  LV UUID                nnGTW5-tVFa-T3Cy-9nHj-sozF-2KpP-rVfnSq
</span></span><span style="display:flex;"><span>  LV Write Access        read/write
</span></span><span style="display:flex;"><span>  LV Creation host, <span style="color:#ff5c57">time</span> server2, 2024-06-16 09:35:47 -0700
</span></span><span style="display:flex;"><span>  LV VDO Pool name       vpool0
</span></span><span style="display:flex;"><span>  LV Status              available
</span></span><span style="display:flex;"><span>  <span style="color:#78787e"># open                 0</span>
</span></span><span style="display:flex;"><span>  LV Size                20.00 GiB
</span></span><span style="display:flex;"><span>  Current LE             <span style="color:#ff9f43">5120</span>
</span></span><span style="display:flex;"><span>  Segments               <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Allocation             inherit
</span></span><span style="display:flex;"><span>  Read ahead sectors     auto
</span></span><span style="display:flex;"><span>  - currently <span style="color:#ff5c57">set</span> to     <span style="color:#ff9f43">8192</span>
</span></span><span style="display:flex;"><span>  Block device           253:4
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Physical volumes ---
</span></span><span style="display:flex;"><span>  PV Name               /dev/sdf     
</span></span><span style="display:flex;"><span>  PV UUID               0oAXHG-C4ub-Myou-5vZf-QxIX-KVT3-ipMZCp
</span></span><span style="display:flex;"><span>  PV Status             allocatable
</span></span><span style="display:flex;"><span>  Total PE / Free PE    <span style="color:#ff9f43">1279</span> / <span style="color:#ff9f43">0</span></span></span></code></pre></div>
<p>The output reflects the creation of two logical volumes: a pool called /dev/vgvdo/vpool0 and a volume called /dev/vgvdo/lvvdo.</p>
<h3 id="exercise-13-13-remove-a-volume-group-and-uninitialize-physical-volumeserver2">Exercise 13-13: Remove a Volume Group and Uninitialize Physical Volume(Server2)</h3>
<ul>
<li>remove the vgvdo volume group along with the VDO volumes</li>
<li>uninitialize the physical volume /dev/sdf.</li>
<li>confirm the deletion.</li>
</ul>
<p>1. Remove the volume group along with the VDO volumes using the vgremove command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgremove vgvdo -f</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvvdo&#34;</span> successfully removed.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgvdo&#34;</span> successfully removed</span></span></code></pre></div>
<p>Remember to proceed with caution whenever you perform erase operations.</p>
<p>2. Execute <code>sudo vgs</code> and <code>sudo lvs</code> commands for confirmation.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  VG   <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree</span>
</span></span><span style="display:flex;"><span>  rhel   <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g    <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  LV   VG   Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root rhel -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap rhel -wi-ao----   2.00g  </span></span></code></pre></div>
<p>3. Remove the LVM structures from sdf using the <code>pvremove</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvremove /dev/sdf</span>
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sdf&#34;</span> successfully wiped.</span></span></code></pre></div>
<p>4. Confirm the removal by running <code>sudo pvs</code>.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  PV         VG   Fmt  Attr PSize   PFree
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel lvm2 a--  &lt;19.00g    <span style="color:#ff9f43">0</span> </span></span></code></pre></div>
<p>The disk is now back to its raw state and can be repurposed.</p>
<p>5. Verify that the sdf disk used in the previous exercises has returned to its original raw state using the <code>lsblk</code> command:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk</span>
</span></span><span style="display:flex;"><span>NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda             8:0    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€sda1          8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part /boot
</span></span><span style="display:flex;"><span>â””â”€sda2          8:2    <span style="color:#ff9f43">0</span>   19G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€rhel-root 253:0    <span style="color:#ff9f43">0</span>   17G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  â””â”€rhel-swap 253:1    <span style="color:#ff9f43">0</span>    2G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdb             8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdc             8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdd             8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sde             8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdf             8:80   <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sr0            11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom </span></span></code></pre></div>
<p>This brings the exercise to an end.</p>
<h2 id="storage-dyi-labs">Storage DYI Labs</h2>
<h3 id="lab-13-1-create-and-remove-partitions-with-parted">Lab 13-1: Create and Remove Partitions with parted</h3>
<p>Create a 100MB primary partition on one of the available 250MB disks (lsblk) by invoking the parted utility directly at the command prompt. Apply label &ldquo;msdos&rdquo; if the disk is new.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mklabel msdos</span>
</span></span><span style="display:flex;"><span>Warning: The existing disk label on /dev/sdb will be destroyed and all data on this disk will be lost. Do you want to
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">continue</span>?
</span></span><span style="display:flex;"><span>Yes/No? yes                                                               
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb mkpart primary 1 101m             </span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<p>Create another 100MB partition by running parted interactively while ensuring that the second partition won&rsquo;t overlap the first.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdb</span>
</span></span><span style="display:flex;"><span>GNU Parted 3.5
</span></span><span style="display:flex;"><span>Using /dev/sdb
</span></span><span style="display:flex;"><span>Welcome to GNU Parted! Type <span style="color:#5af78e">&#39;help&#39;</span> to view a list of commands.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">(</span>parted<span style="color:#ff6ac1">)</span> mkpart primary <span style="color:#ff9f43">101</span> 201m                                         </span></span></code></pre></div>
<p>Verify the label and the partitions.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">(</span>parted<span style="color:#ff6ac1">)</span> print                                                            
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdb: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End    Size    Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  101MB  99.6MB  primary
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">2</span>      101MB   201MB  101MB   primary</span></span></code></pre></div>
<p>Remove both partitions at the command prompt.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdb rm 1 rm 2</span></span></span></code></pre></div>
<h3 id="lab-13-2-create-and-remove-partitions-with-gdisk">Lab 13-2: Create and Remove Partitions with gdisk</h3>
<p>Create two 80MB partitions on one of the 250MB disks (lsblk) using the gdisk utility. Make sure the partitions won&rsquo;t overlap.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: o
</span></span><span style="display:flex;"><span>This option deletes all partitions and creates a new protective MBR.
</span></span><span style="display:flex;"><span>Proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: p
</span></span><span style="display:flex;"><span>Disk /dev/sdb: <span style="color:#ff9f43">512000</span> sectors, 250.0 MiB
</span></span><span style="display:flex;"><span>Model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512/512 bytes
</span></span><span style="display:flex;"><span>Disk identifier <span style="color:#ff6ac1">(</span>GUID<span style="color:#ff6ac1">)</span>: 226F7476-7F8C-4445-9025-53B6737AD1E4
</span></span><span style="display:flex;"><span>Partition table holds up to <span style="color:#ff9f43">128</span> entries
</span></span><span style="display:flex;"><span>Main partition table begins at sector <span style="color:#ff9f43">2</span> and ends at sector <span style="color:#ff9f43">33</span>
</span></span><span style="display:flex;"><span>First usable sector is 34, last usable sector is <span style="color:#ff9f43">511966</span>
</span></span><span style="display:flex;"><span>Partitions will be aligned on 2048-sector boundaries
</span></span><span style="display:flex;"><span>Total free space is <span style="color:#ff9f43">511933</span> sectors <span style="color:#ff6ac1">(</span>250.0 MiB<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>    End <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>  Size       Code  Name
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: n
</span></span><span style="display:flex;"><span>Partition number <span style="color:#ff6ac1">(</span>1-128, default 1<span style="color:#ff6ac1">)</span>: 
</span></span><span style="display:flex;"><span>First sector <span style="color:#ff6ac1">(</span>34-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 2048<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: 
</span></span><span style="display:flex;"><span>Last sector <span style="color:#ff6ac1">(</span>2048-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 511966<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: +80M
</span></span><span style="display:flex;"><span>Current <span style="color:#ff5c57">type</span> is <span style="color:#ff9f43">8300</span> <span style="color:#ff6ac1">(</span>Linux filesystem<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Hex code or GUID <span style="color:#ff6ac1">(</span>L to show codes, <span style="color:#ff5c57">Enter</span> <span style="color:#ff6ac1">=</span> 8300<span style="color:#ff6ac1">)</span>: 
</span></span><span style="display:flex;"><span>Changed <span style="color:#ff5c57">type</span> of partition to <span style="color:#5af78e">&#39;Linux filesystem&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: n
</span></span><span style="display:flex;"><span>Partition number <span style="color:#ff6ac1">(</span>2-128, default 2<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>First sector <span style="color:#ff6ac1">(</span>34-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 165888<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: <span style="color:#ff9f43">165888</span>
</span></span><span style="display:flex;"><span>Last sector <span style="color:#ff6ac1">(</span>165888-511966, <span style="color:#ff5c57">default</span> <span style="color:#ff6ac1">=</span> 511966<span style="color:#ff6ac1">)</span> or <span style="color:#ff6ac1">{</span>+-<span style="color:#ff6ac1">}</span>size<span style="color:#ff6ac1">{</span>KMGTP<span style="color:#ff6ac1">}</span>: +80M
</span></span><span style="display:flex;"><span>Current <span style="color:#ff5c57">type</span> is <span style="color:#ff9f43">8300</span> <span style="color:#ff6ac1">(</span>Linux filesystem<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Hex code or GUID <span style="color:#ff6ac1">(</span>L to show codes, <span style="color:#ff5c57">Enter</span> <span style="color:#ff6ac1">=</span> 8300<span style="color:#ff6ac1">)</span>: 
</span></span><span style="display:flex;"><span>Changed <span style="color:#ff5c57">type</span> of partition to <span style="color:#5af78e">&#39;Linux filesystem&#39;</span></span></span></code></pre></div>
<p>Verify the partitions.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: p
</span></span><span style="display:flex;"><span>Disk /dev/sdb: <span style="color:#ff9f43">512000</span> sectors, 250.0 MiB
</span></span><span style="display:flex;"><span>Model: VBOX HARDDISK   
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512/512 bytes
</span></span><span style="display:flex;"><span>Disk identifier <span style="color:#ff6ac1">(</span>GUID<span style="color:#ff6ac1">)</span>: 226F7476-7F8C-4445-9025-53B6737AD1E4
</span></span><span style="display:flex;"><span>Partition table holds up to <span style="color:#ff9f43">128</span> entries
</span></span><span style="display:flex;"><span>Main partition table begins at sector <span style="color:#ff9f43">2</span> and ends at sector <span style="color:#ff9f43">33</span>
</span></span><span style="display:flex;"><span>First usable sector is 34, last usable sector is <span style="color:#ff9f43">511966</span>
</span></span><span style="display:flex;"><span>Partitions will be aligned on 2048-sector boundaries
</span></span><span style="display:flex;"><span>Total free space is <span style="color:#ff9f43">184253</span> sectors <span style="color:#ff6ac1">(</span>90.0 MiB<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>    End <span style="color:#ff6ac1">(</span>sector<span style="color:#ff6ac1">)</span>  Size       Code  Name
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">1</span>            <span style="color:#ff9f43">2048</span>          <span style="color:#ff9f43">165887</span>   80.0 MiB    <span style="color:#ff9f43">8300</span>  Linux filesystem
</span></span><span style="display:flex;"><span>   <span style="color:#ff9f43">2</span>          <span style="color:#ff9f43">165888</span>          <span style="color:#ff9f43">329727</span>   80.0 MiB    <span style="color:#ff9f43">8300</span>  Linux filesystem</span></span></code></pre></div>
<p>Save</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: w
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
</span></span><span style="display:flex;"><span>PARTITIONS!!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Do you want to proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y
</span></span><span style="display:flex;"><span>OK; writing new GUID partition table <span style="color:#ff6ac1">(</span>GPT<span style="color:#ff6ac1">)</span> to /dev/sdb.
</span></span><span style="display:flex;"><span>The operation has completed successfully.</span></span></code></pre></div>
<p>Delete the partitions</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: d  
</span></span><span style="display:flex;"><span>Partition number <span style="color:#ff6ac1">(</span>1-2<span style="color:#ff6ac1">)</span>: <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: d
</span></span><span style="display:flex;"><span>Using <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Command <span style="color:#ff6ac1">(</span>? <span style="color:#ff6ac1">for</span> <span style="color:#ff5c57">help</span><span style="color:#ff6ac1">)</span>: w
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
</span></span><span style="display:flex;"><span>PARTITIONS!!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Do you want to proceed? <span style="color:#ff6ac1">(</span>Y/N<span style="color:#ff6ac1">)</span>: y
</span></span><span style="display:flex;"><span>OK; writing new GUID partition table <span style="color:#ff6ac1">(</span>GPT<span style="color:#ff6ac1">)</span> to /dev/sdb.
</span></span><span style="display:flex;"><span>The operation has completed successfully.</span></span></code></pre></div>
<h3 id="lab-13-3-create-volume-group-and-logical-volumes">Lab 13-3: Create Volume Group and Logical Volumes</h3>
<p>initialize 1x250MB disk for use in LVM (use lsblk to identify available disks).</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd mklabel msdos</span>
</span></span><span style="display:flex;"><span>Warning: The existing disk label on /dev/sdd will be destroyed and all data
</span></span><span style="display:flex;"><span>on this disk will be lost. Do you want to <span style="color:#ff6ac1">continue</span>?
</span></span><span style="display:flex;"><span>Yes/No? yes                                                               
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd mkpart primary 1 250m              </span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo parted /dev/sdd print                              </span>
</span></span><span style="display:flex;"><span>Model: ATA VBOX HARDDISK <span style="color:#ff6ac1">(</span>scsi<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>Disk /dev/sdd: 262MB
</span></span><span style="display:flex;"><span>Sector size <span style="color:#ff6ac1">(</span>logical/physical<span style="color:#ff6ac1">)</span>: 512B/512B
</span></span><span style="display:flex;"><span>Partition Table: msdos
</span></span><span style="display:flex;"><span>Disk Flags: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Number  Start   End    Size   Type     File system  Flags
</span></span><span style="display:flex;"><span> <span style="color:#ff9f43">1</span>      1049kB  250MB  249MB  primary
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo pvcreate /dev/sdd1</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdd1&#34;</span> successfully created.</span></span></code></pre></div>
<p>(Can also just use the full disk without making it into a partition first.)</p>
<p>Create volume group vg100 with PE size 16MB and add the physical volume.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgcreate -vs 16 vg100 /dev/sdd1</span>
</span></span><span style="display:flex;"><span>  Wiping signatures on new PV /dev/sdd1.
</span></span><span style="display:flex;"><span>  Adding physical volume <span style="color:#5af78e">&#39;/dev/sdd1&#39;</span> to volume group <span style="color:#5af78e">&#39;vg100&#39;</span>
</span></span><span style="display:flex;"><span>  Creating volume group backup <span style="color:#5af78e">&#34;/etc/lvm/backup/vg100&#34;</span> <span style="color:#ff6ac1">(</span>seqno 1<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vg100&#34;</span> successfully created</span></span></code></pre></div>
<p>Create two logical volumes lvol0 and swapvol of sizes 90MB and 120MB.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -vL 90 vg100</span>
</span></span><span style="display:flex;"><span>  Creating logical volume lvol0
</span></span><span style="display:flex;"><span>  Archiving volume group <span style="color:#5af78e">&#34;vg100&#34;</span> metadata <span style="color:#ff6ac1">(</span>seqno 1<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Activating logical volume vg100/lvol0.
</span></span><span style="display:flex;"><span>  activation/volume_list configuration setting not defined: Checking only host tags <span style="color:#ff6ac1">for</span> vg100/lvol0.
</span></span><span style="display:flex;"><span>  Creating vg100-lvol0
</span></span><span style="display:flex;"><span>  Loading table <span style="color:#ff6ac1">for</span> vg100-lvol0 <span style="color:#ff6ac1">(</span>253:2<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Resuming vg100-lvol0 <span style="color:#ff6ac1">(</span>253:2<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Wiping known signatures on logical volume vg100/lvol0.
</span></span><span style="display:flex;"><span>  Initializing 4.00 KiB of logical volume vg100/lvol0 with value 0.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;lvol0&#34;</span> created.
</span></span><span style="display:flex;"><span>  Creating volume group backup <span style="color:#5af78e">&#34;/etc/lvm/backup/vg100&#34;</span> <span style="color:#ff6ac1">(</span>seqno 2<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo lvcreate -l 8 -n swapvol vg100</span>
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;swapvol&#34;</span> created.</span></span></code></pre></div>
<p>Use the vgs, pvs, lvs, and vgdisplay commands for verification.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  LV      VG    Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel  -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel  -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvol0   vg100 -wi-a-----  90.00m                                                    
</span></span><span style="display:flex;"><span>  swapvol vg100 -wi-a----- 120.00m                                                    
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  VG    <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree </span>
</span></span><span style="display:flex;"><span>  rhel    <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vg100   <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- 225.00m 15.00m
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  PV         VG    Fmt  Attr PSize   PFree 
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel  lvm2 a--  &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdd1  vg100 lvm2 a--  225.00m 15.00m
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgdisplay</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vg100
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">5</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               225.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               15.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">15</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">14</span> / 210.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">1</span> / 15.00 MiB
</span></span><span style="display:flex;"><span>  VG UUID               fEUf8R-nxKF-Uxud-7rmm-JvSQ-PsN1-Mrs3zc
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               rhel
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">4863</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">4863</span> / &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               UiK3fy-FGOc-2fnP-C1Y6-JS0l-irEe-Sq3c4h</span></span></code></pre></div>
<h3 id="lab-13-4-expand-volume-group-and-logical-volume">Lab 13-4: Expand Volume Group and Logical Volume</h3>
<p>Create a partition on an available 250MB disk and initialize it for use in LVM (use lsblk to identify available disks).</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdb mklabel msdos</span>
</span></span><span style="display:flex;"><span>Warning: The existing disk label on /dev/sdb will be destroyed and all data on this disk will be lost. Do you want to <span style="color:#ff6ac1">continue</span>?
</span></span><span style="display:flex;"><span>Yes/No? yes                                                               
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># parted /dev/sdb mkpart primary 1 250m                   </span>
</span></span><span style="display:flex;"><span>Information: You may need to update /etc/fstab.</span></span></code></pre></div>
<p>Add the new physical volume to vg100.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgextend vg100 /dev/sdb1</span>
</span></span><span style="display:flex;"><span>  Device /dev/sdb1 has updated name <span style="color:#ff6ac1">(</span>devices file /dev/sdd1<span style="color:#ff6ac1">)</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdb1&#34;</span> successfully created.
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vg100&#34;</span> successfully extended</span></span></code></pre></div>
<p>Expand the lvol0 logical volume to size 300MB.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvextend -L +210 /dev/vg100/lvol0</span>
</span></span><span style="display:flex;"><span>  Size of logical volume vg100/lvol0 changed from 90.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">6</span> extents<span style="color:#ff6ac1">)</span> to 300.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">20</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vg100/lvol0 successfully resized.</span></span></code></pre></div>
<p>Use the vgs, pvs, lvs, and vgdisplay commands for verification.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  LV      VG    Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel  -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel  -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvol0   vg100 -wi-a-----  90.00m                                                    
</span></span><span style="display:flex;"><span>  swapvol vg100 -wi-a----- 120.00m<span style="color:#ff6ac1">](</span>&lt;<span style="color:#ff6ac1">[</span>root@server20 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  LV      VG    Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel  -wi-ao---- %3C17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel  -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvol0   vg100 -wi-a----- 300.00m                                                    
</span></span><span style="display:flex;"><span>  swapvol vg100 -wi-a----- 120.00m&gt;<span style="color:#ff6ac1">)</span>                                                  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  VG    <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree </span>
</span></span><span style="display:flex;"><span>  rhel    <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vg100   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- 450.00m 30.00m
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  PV         VG    Fmt  Attr PSize   PFree 
</span></span><span style="display:flex;"><span>  /dev/sda2  rhel  lvm2 a--  &lt;19.00g     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  /dev/sdb1  vg100 lvm2 a--  225.00m 30.00m
</span></span><span style="display:flex;"><span>  /dev/sdd1  vg100 lvm2 a--  225.00m     <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  LV      VG    Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root    rhel  -wi-ao---- &lt;17.00g                                                    
</span></span><span style="display:flex;"><span>  swap    rhel  -wi-ao----   2.00g                                                    
</span></span><span style="display:flex;"><span>  lvol0   vg100 -wi-a----- 300.00m                                                    
</span></span><span style="display:flex;"><span>  swapvol vg100 -wi-a----- 120.00m                                                    
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgdisplay</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               vg100
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">7</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  VG Size               450.00 MiB
</span></span><span style="display:flex;"><span>  PE Size               15.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">30</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">28</span> / 420.00 MiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">2</span> / 30.00 MiB
</span></span><span style="display:flex;"><span>  VG UUID               fEUf8R-nxKF-Uxud-7rmm-JvSQ-PsN1-Mrs3zc
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  --- Volume group ---
</span></span><span style="display:flex;"><span>  VG Name               rhel
</span></span><span style="display:flex;"><span>  System ID             
</span></span><span style="display:flex;"><span>  Format                lvm2
</span></span><span style="display:flex;"><span>  Metadata Areas        <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Metadata Sequence No  <span style="color:#ff9f43">3</span>
</span></span><span style="display:flex;"><span>  VG Access             read/write
</span></span><span style="display:flex;"><span>  VG Status             resizable
</span></span><span style="display:flex;"><span>  MAX LV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur LV                <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Open LV               <span style="color:#ff9f43">2</span>
</span></span><span style="display:flex;"><span>  Max PV                <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>  Cur PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  Act PV                <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  VG Size               &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  PE Size               4.00 MiB
</span></span><span style="display:flex;"><span>  Total PE              <span style="color:#ff9f43">4863</span>
</span></span><span style="display:flex;"><span>  Alloc PE / Size       <span style="color:#ff9f43">4863</span> / &lt;19.00 GiB
</span></span><span style="display:flex;"><span>  Free  PE / Size       <span style="color:#ff9f43">0</span> / <span style="color:#ff9f43">0</span>   
</span></span><span style="display:flex;"><span>  VG UUID               UiK3fy-FGOc-2fnP-C1Y6-JS0l-irEe-Sq3c4h
</span></span><span style="display:flex;"><span>   </span></span></code></pre></div>
<h3 id="lab-13-5-add-a-vdo-logical-volume">Lab 13-5: Add a VDO Logical Volume</h3>
<p>initialize the sdf disk for use in LVM and add it to vgvdo1.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvcreate /dev/sdc</span>
</span></span><span style="display:flex;"><span>  Physical volume <span style="color:#5af78e">&#34;/dev/sdc&#34;</span> successfully created.
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># sudo vgextend vgvdo1 /dev/sdc</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgvdo1&#34;</span> successfully extended</span></span></code></pre></div>
<p>Create a VDO logical volume named vdovol using the entire disk capacity.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvcreate --type vdo -n vdovol -l 100%FREE vgvdo1</span>
</span></span><span style="display:flex;"><span>WARNING: LVM2_member signature detected on /dev/vgvdo1/vpool0 at offset 536. Wipe it? <span style="color:#ff6ac1">[</span>y/n<span style="color:#ff6ac1">]</span>: y
</span></span><span style="display:flex;"><span>  Wiping LVM2_member signature on /dev/vgvdo1/vpool0.
</span></span><span style="display:flex;"><span>    Logical blocks defaulted to <span style="color:#ff9f43">523108</span> blocks.
</span></span><span style="display:flex;"><span>    The VDO volume can address <span style="color:#ff9f43">2</span> GB in <span style="color:#ff9f43">1</span> data slab.
</span></span><span style="display:flex;"><span>    It can grow to address at most <span style="color:#ff9f43">16</span> TB of physical storage in <span style="color:#ff9f43">8192</span> slabs.
</span></span><span style="display:flex;"><span>    If a larger maximum size might be needed, use bigger slabs.
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;vdovol&#34;</span> created.</span></span></code></pre></div>
<p>Use the vgs, pvs, lvs, and vgdisplay commands for verification.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB123ecea1-63467dee PVID RjcGRyHDIWY0OqAgfIHC93WT03Na1WoO last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID brKVLFEG3AoBzhWoso0Sa1gLYHgNZ4vL last seen on /dev/sdb1 not found.
</span></span><span style="display:flex;"><span>  VG     <span style="color:#78787e">#PV #LV #SN Attr   VSize   VFree  </span>
</span></span><span style="display:flex;"><span>  rhel     <span style="color:#ff9f43">1</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n- &lt;19.00g      <span style="color:#ff9f43">0</span> 
</span></span><span style="display:flex;"><span>  vgvdo1   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">2</span>   <span style="color:#ff9f43">0</span> wz--n-  &lt;5.24g 248.00m</span></span></code></pre></div>
<h3 id="lab-13-6-reduce-and-remove-logical-volumes">Lab 13-6: Reduce and Remove Logical Volumes</h3>
<p>reduce the size of vdovol logical volume to 80MB.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvreduce -L 80 /dev/vgvdo1/vdovol</span>
</span></span><span style="display:flex;"><span>  No file system found on /dev/vgvdo1/vdovol.
</span></span><span style="display:flex;"><span>  WARNING: /dev/vgvdo1/vdovol: Discarding 1.91 GiB at offset 83886080, please wait...
</span></span><span style="display:flex;"><span>  Size of logical volume vgvdo1/vdovol changed from 1.99 GiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">510</span> extents<span style="color:#ff6ac1">)</span> to 80.00 MiB <span style="color:#ff6ac1">(</span><span style="color:#ff9f43">20</span> extents<span style="color:#ff6ac1">)</span>.
</span></span><span style="display:flex;"><span>  Logical volume vgvdo1/vdovol successfully resized.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvs</span>
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID none last seen on /dev/sdd2 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB123ecea1-63467dee PVID RjcGRyHDIWY0OqAgfIHC93WT03Na1WoO last seen on /dev/sdd1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VBa5e3cbf7-10921e08 PVID qeP9dCevNnTy422I8p18NxDKQ2WyDodU last seen on /dev/sdf1 not found.
</span></span><span style="display:flex;"><span>  Devices file sys_wwid t10.ATA_VBOX_HARDDISK_VB428913dd-446a194f PVID brKVLFEG3AoBzhWoso0Sa1gLYHgNZ4vL last seen on /dev/sdb1 not found.
</span></span><span style="display:flex;"><span>  LV     VG     Attr       LSize   Pool   Origin Data%  Meta%  Move Log Cpy%Sync Convert
</span></span><span style="display:flex;"><span>  root   rhel   -wi-ao---- &lt;17.00g                                                      
</span></span><span style="display:flex;"><span>  swap   rhel   -wi-ao----   2.00g                                                      
</span></span><span style="display:flex;"><span>  vdovol vgvdo1 vwi-a-v---  80.00m vpool0        0.00                                   
</span></span><span style="display:flex;"><span>  vpool0 vgvdo1 dwi-------  &lt;5.00g               60.00                                  
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># </span></span></span></code></pre></div>
<p>erase logical volume vdovol.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lvremove /dev/vgvdo1/vdovol</span>
</span></span><span style="display:flex;"><span>Do you really want to remove active logical volume vgvdo1/vdovol? <span style="color:#ff6ac1">[</span>y/n<span style="color:#ff6ac1">]</span>: y
</span></span><span style="display:flex;"><span>  Logical volume <span style="color:#5af78e">&#34;vdovol&#34;</span> successfully removed.</span></span></code></pre></div>
<p>Confirm the deletion with vgs, pvs, lvs, and vgdisplay commands.</p>
<h3 id="lab-13-7-remove-volume-group-and-physical-volumes">Lab 13-7: Remove Volume Group and Physical Volumes</h3>
<p>\remove the volume group and uninitialized the physical volumes.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># vgremove vgvdo1</span>
</span></span><span style="display:flex;"><span>  Volume group <span style="color:#5af78e">&#34;vgvdo1&#34;</span> successfully removed</span></span></code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvremove /dev/sdc</span>
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sdc&#34;</span> successfully wiped.
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># pvremove /dev/sdf</span>
</span></span><span style="display:flex;"><span>  Labels on physical volume <span style="color:#5af78e">&#34;/dev/sdf&#34;</span> successfully wiped.</span></span></code></pre></div>
<p>Confirm the deletion with vgs, pvs, lvs, and vgdisplay commands.</p>
<p>Use the lsblk command and verify that the disks used for the LVM labs no longer show LVM information.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff6ac1">[</span>root@server2 ~<span style="color:#ff6ac1">]</span><span style="color:#78787e"># lsblk</span>
</span></span><span style="display:flex;"><span>NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span></span><span style="display:flex;"><span>sda             8:0    <span style="color:#ff9f43">0</span>   20G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>â”œâ”€sda1          8:1    <span style="color:#ff9f43">0</span>    1G  <span style="color:#ff9f43">0</span> part /boot
</span></span><span style="display:flex;"><span>â””â”€sda2          8:2    <span style="color:#ff9f43">0</span>   19G  <span style="color:#ff9f43">0</span> part 
</span></span><span style="display:flex;"><span>  â”œâ”€rhel-root 253:0    <span style="color:#ff9f43">0</span>   17G  <span style="color:#ff9f43">0</span> lvm  /
</span></span><span style="display:flex;"><span>  â””â”€rhel-swap 253:1    <span style="color:#ff9f43">0</span>    2G  <span style="color:#ff9f43">0</span> lvm  <span style="color:#ff6ac1">[</span>SWAP<span style="color:#ff6ac1">]</span>
</span></span><span style="display:flex;"><span>sdb             8:16   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdc             8:32   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdd             8:48   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sde             8:64   <span style="color:#ff9f43">0</span>  250M  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sdf             8:80   <span style="color:#ff9f43">0</span>    5G  <span style="color:#ff9f43">0</span> disk 
</span></span><span style="display:flex;"><span>sr0            11:0    <span style="color:#ff9f43">1</span>  9.8G  <span style="color:#ff9f43">0</span> rom  </span></span></code></pre></div>

  <footer class="footline">
  </footer>
</article>
          </section>
        </div>
      </main>
    </div>
    <script>
      window.MathJax = Object.assign( window.MathJax || {}, {
        tex: {
          inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
          displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        },
        options: {
          enableMenu: false 
        }
      }, JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/js/js-yaml/js-yaml.min.js?1764156123" defer></script>
    <script src="/js/d3/d3-color.min.js?1764156123" defer></script>
    <script src="/js/d3/d3-dispatch.min.js?1764156123" defer></script>
    <script src="/js/d3/d3-drag.min.js?1764156123" defer></script>
    <script src="/js/d3/d3-ease.min.js?1764156123" defer></script>
    <script src="/js/d3/d3-interpolate.min.js?1764156123" defer></script>
    <script src="/js/d3/d3-selection.min.js?1764156123" defer></script>
    <script src="/js/d3/d3-timer.min.js?1764156123" defer></script>
    <script src="/js/d3/d3-transition.min.js?1764156123" defer></script>
    <script src="/js/d3/d3-zoom.min.js?1764156123" defer></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js" defer></script>
    <script>
      window.relearn.themeUseMermaid = JSON.parse("{ \"theme\": \"default\" }");
    </script>
    <script src="/js/clipboard/clipboard.min.js?1764156123" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1764156123" defer></script>
    <script src="/js/theme.min.js?1764156123" defer></script>
  </body>
</html>
